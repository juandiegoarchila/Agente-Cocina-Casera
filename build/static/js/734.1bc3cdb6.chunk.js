"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[734],{5353:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var r=a(5043),n=a(1958),l=a(5472),i=a(9223),o=a.n(i);const s=async(e,t,a,r,n)=>{try{var l,i,s,d;const c=new(o().Workbook),m=c.addWorksheet("Gesti\xf3n de Pedidos"),u=e=>null==e||void 0===e?"":"string"===typeof e?e.replace(" NUEVO","").trim():"boolean"===typeof e?e.toString():"object"===typeof e&&null!==e&&"name"in e&&"string"===typeof e.name?e.name.replace(" NUEVO","").trim():String(e).replace(" NUEVO","").trim(),p=e=>{e.border={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}};m.addRow(["","PROTE\xcdNAS DEL D\xcdA"]);const g=m.lastRow.number;m.mergeCells(g,2,g,3);const x=m.getCell(`B${g}`);x.font={bold:!0,color:{argb:"FFFFFFFF"}},x.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},x.alignment={horizontal:"center"},m.getRow(g+1).values=["","Prote\xedna","Unidades","",""];m.getRow(g+1).eachCell((e,t)=>{2!==t&&3!==t||(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF28A745"}},e.font={color:{argb:"FFFFFFFF"},bold:!0},e.alignment={horizontal:"center"},p(e)),4!==t&&5!==t||(e.value="")});const h=0===n.length?[{name:"-",quantity:"-",extra:"",extraValue:""}]:[...n.slice(0,-2),{name:(null===(l=n[n.length-2])||void 0===l?void 0:l.name)||"-",quantity:(null===(i=n[n.length-2])||void 0===i?void 0:i.quantity)||"-",extra:"TOTAL PROTE\xcdNAS:",extraValue:r.toLocaleString("es-CO")},{name:(null===(s=n[n.length-1])||void 0===s?void 0:s.name)||"-",quantity:(null===(d=n[n.length-1])||void 0===d?void 0:d.quantity)||"-",extra:"Fecha actual:",extraValue:`${String((new Date).getDate()).padStart(2,"0")}/${String((new Date).getMonth()+1).padStart(2,"0")}/${(new Date).getFullYear()}`}];h.forEach((e,t)=>{m.addRow(["",u(e.name),e.quantity,e.extra,e.extraValue]).eachCell((e,a)=>{a>=2&&((t>=h.length-2||2===a||3===a)&&p(e),3===a&&(e.numFmt="#,##0",e.alignment={horizontal:"right"}),4===a&&(e.alignment={horizontal:"left"}),5===a&&(e.alignment={horizontal:"right"}))})}),m.addRow({}),m.addRow({});let y=0;const b=e.map((e,t)=>{var a,r,n,l;y+=1;const i=(null===(a=e.meals)||void 0===a?void 0:a[0])||{},o=e.payment||"object"===typeof i.payment&&(null===(r=i.payment)||void 0===r?void 0:r.name)||i.payment||"Efectivo";return o&&("object"!==typeof o||"name"in o)||console.warn(`Invalid payment data in order ${e.id||t}:`,{order:e,paymentValue:o}),{N:y,"Direcci\xf3n":u(null===(n=i.address)||void 0===n?void 0:n.address),"Tel\xe9fono":u(null===(l=i.address)||void 0===l?void 0:l.phoneNumber),Total:e.total||0,"M\xe9todoDePago":u(o),Domiciliario:u(e.deliveryPerson||"Sin asignar")}});0===b.length&&b.push({N:"-","Direcci\xf3n":"-","Tel\xe9fono":"-",Total:"-","M\xe9todoDePago":"-",Domiciliario:"-"}),m.columns=[{key:"N",width:10},{key:"Direcci\xf3n",width:30},{key:"Tel\xe9fono",width:15},{key:"Total",width:15},{key:"M\xe9todoDePago",width:15},{key:"Domiciliario",width:25}];const v=h.length+4,f=m.getRow(v);f.values=["N","Direcci\xf3n","Tel\xe9fono","Total","M\xe9todo de Pago","Domiciliario"],f.eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},e.font={color:{argb:"FFFFFFFF"},bold:!0},e.alignment={horizontal:"center"},p(e)}),b.forEach(e=>{m.addRow(e).eachCell(e=>p(e))}),m.addRow({}),m.addRow({}),m.addRow([]);const w=m.lastRow.number;m.getCell(`C${w}`).value="Resumen de Totales",m.mergeCells(`C${w}:D${w}`);const j=m.getCell(`C${w}`);j.font={bold:!0,color:{argb:"FFFFFFFF"}},j.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},j.alignment={horizontal:"center"},p(j),p(m.getCell(`D${w}`));[["Total Efectivo",t.cash||0],["Total Daviplata",t.daviplata||0],["Total Nequi",t.nequi||0],["Total General",(t.cash||0)+(t.daviplata||0)+(t.nequi||0)]].forEach(e=>{let[t,a]=e;const r=m.addRow(["","",t,a]);r.getCell(3).alignment={horizontal:"left"},r.getCell(4).alignment={horizontal:"right"},r.getCell(4).numFmt="$#,##0",r.getCell(4).font={bold:!0},p(r.getCell(3)),p(r.getCell(4))}),m.addRow({}),m.addRow({}),m.addRow(["","Resumen por Domiciliarios"]);const N=m.lastRow.number;m.mergeCells(N,2,N,6);const k=m.getCell(`B${N}`);k.font={bold:!0,color:{argb:"FFFFFFFF"}},k.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},k.alignment={horizontal:"center"};for(let e=2;e<=6;e++)p(m.getCell(N,e));m.addRow(["","Domiciliario","Efectivo","Daviplata","Nequi","Total"]);m.lastRow.eachCell((e,t)=>{t>=2&&(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF28A745"}},e.font={color:{argb:"FFFFFFFF"},bold:!0},e.alignment={horizontal:"center"},p(e))}),Object.entries(a).forEach(e=>{let[t,a]=e;m.addRow(["",u(t),a.cash||0,a.daviplata||0,a.nequi||0,a.total||0]).eachCell((e,t)=>{t>=2&&(t>=3&&(e.numFmt="$#,##0",e.alignment={horizontal:"right"}),p(e))})});const C=await c.xlsx.writeBuffer(),$=new Blob([C],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),S=document.createElement("a");S.href=window.URL.createObjectURL($),S.download=`pedidos_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(S),S.click(),document.body.removeChild(S)}catch(c){console.error("Error al exportar Excel:",c),alert("Error al generar el archivo Excel: "+c.message)}};var d=a(7762),c=a(557),m=a.n(c);const u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r,n,l;const o=new d.default,s="/logo.png";try{o.addImage(s,"PNG",160,10,30,20)}catch(i){console.warn("No se pudo cargar el logo para el PDF:",i)}o.setFontSize(16),o.text("Gesti\xf3n de Pedidos",14,20),o.setFontSize(12);const c=new Date,u=c.toLocaleDateString("es-CO"),p=c.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",hour12:!0});o.text(`Fecha: ${u} ${p}`,14,30);let g=0;const x=e.map(e=>{var t,a,r,n,l,i;g+=1;const o=(null===(t=e.meals)||void 0===t?void 0:t[0])||{},s=(null===(a=e.payment)||void 0===a?void 0:a.name)||e.payment||(null===(r=o.payment)||void 0===r?void 0:r.name)||o.payment||"Efectivo";return[g,(null===(n=o.address)||void 0===n?void 0:n.address)||"",(null===(l=o.address)||void 0===l?void 0:l.phoneNumber)||"",`$${(null===(i=e.total)||void 0===i?void 0:i.toLocaleString("es-CO"))||"0"}`,s,(null===e||void 0===e?void 0:e.deliveryPerson)||""]});0===x.length&&x.push(Array(6).fill("-")),0===x.length&&x.push(Array(5).fill("-")),m()(o,{startY:40,head:[["N","Direcci\xf3n","Tel\xe9fono","Total","Domiciliario"]],body:x,styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[0,102,204],textColor:255,fontStyle:"bold",lineWidth:.2,lineColor:[0,0,0]},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{1:{cellWidth:"wrap"},3:{halign:"right"}},tableLineColor:[0,0,0],tableLineWidth:.2,didDrawPage:e=>{o.setFontSize(10),o.text(`P\xe1gina ${e.pageNumber}`,180,287)}});const h=o.lastAutoTable.finalY+10;o.setFontSize(14),o.text("Resumen de Totales",14,h),m()(o,{startY:h+5,head:[["Concepto","Monto"]],body:[["Total Efectivo",`$${(null===(r=t.cash)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`],["Total Daviplata",`$${(null===(n=t.daviplata)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`],["Total Nequi",`$${(null===(l=t.nequi)||void 0===l?void 0:l.toLocaleString("es-CO"))||"0"}`],["Total General",`$${(t.cash+t.daviplata+t.nequi||0).toLocaleString("es-CO")}`]],styles:{fontSize:10,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[0,102,204],textColor:255,fontStyle:"bold",lineWidth:.2,lineColor:[0,0,0]},columnStyles:{1:{halign:"right"}},tableLineColor:[0,0,0],tableLineWidth:.2});const y=o.lastAutoTable.finalY+10;o.setFontSize(14),o.text("Resumen por Domiciliarios",14,y);const b=Object.entries(a).map(e=>{var t,a,r,n;let[l,i]=e;return[l||"",`$${(null===(t=i.cash)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"}`,`$${(null===(a=i.daviplata)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"}`,`$${(null===(r=i.nequi)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`,`$${(null===(n=i.total)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`]});m()(o,{startY:y+5,head:[["Domiciliario","Efectivo","Daviplata","Nequi","Total"]],body:b.length>0?b:[["-","-","-","-","-"]],styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[0,102,204],textColor:255,fontStyle:"bold",lineWidth:.2,lineColor:[0,0,0]},columnStyles:{1:{halign:"right"},2:{halign:"right"},3:{halign:"right"},4:{halign:"right"}},tableLineColor:[0,0,0],tableLineWidth:.2}),o.save(`pedidos_${(new Date).toISOString().split("T")[0]}.pdf`)}catch(o){console.error("Error al generar el PDF:",o),alert("Error al generar el PDF: "+o.message)}},p=(e,t,a,r)=>{const n=e.flatMap(e=>e.meals.map((t,a)=>{var r,n,l,i,o,s,d,c,m,u,p,g,x,h,y,b;return[e.id,a+1,(null===(r=t.soup)||void 0===r?void 0:r.name)||t.soup||"Sin sopa",Array.isArray(t.principle)?t.principle.map(e=>e.name||e).join(", "):(null===(n=t.principle)||void 0===n?void 0:n.name)||t.principle||"Sin principio",(null===(l=t.protein)||void 0===l?void 0:l.name)||t.protein||"Sin prote\xedna",(null===(i=t.drink)||void 0===i?void 0:i.name)||t.drink||"Sin bebida",(null===(o=t.cutlery)||void 0===o?void 0:o.name)||t.cutlery||"No",(null===(s=t.sides)||void 0===s?void 0:s.map(e=>e.name||e).join(", "))||"Ninguno",(null===(d=t.additions)||void 0===d?void 0:d.map(e=>`${e.name||""}${e.protein||e.replacement?` (${e.protein||e.replacement})`:""} (${e.quantity||1})`).join(", "))||"Ninguna",t.notes||"Ninguna",(null===(c=t.time)||void 0===c?void 0:c.name)||t.time||"No especificada",(null===(m=t.address)||void 0===m?void 0:m.address)||"Sin direcci\xf3n",(null===(u=t.address)||void 0===u?void 0:u.addressType)||"No especificado",(null===(p=t.address)||void 0===p?void 0:p.localName)||"",(null===(g=t.address)||void 0===g?void 0:g.recipientName)||"",(null===(x=t.address)||void 0===x?void 0:x.unitDetails)||"",(null===(h=t.address)||void 0===h?void 0:h.phoneNumber)||"No especificado",(null===(y=t.payment)||void 0===y?void 0:y.name)||t.payment||"Efectivo",`$${(null===(b=e.total)||void 0===b?void 0:b.toLocaleString("es-CO"))||"0"}`,e.payment||"Efectivo",e.deliveryPerson||"Sin asignar",e.status||"Pendiente",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleString("es-CO"):"N/A",e.updatedAt?new Date(1e3*e.updatedAt.seconds).toLocaleString("es-CO"):"N/A"].map(e=>`"${String(e||"").replace(/"/g,'""')}"`)})),l=[["Total Efectivo",`$${t.cash.toLocaleString("es-CO")}`],["Total Daviplata",`$${t.daviplata.toLocaleString("es-CO")}`],["Total Nequi",`$${t.nequi.toLocaleString("es-CO")}`],["Total General",`$${(t.cash+t.daviplata+t.nequi).toLocaleString("es-CO")}`]].map(e=>e.map(e=>`"${String(e||"").replace(/"/g,'""')}"`)),i=Object.entries(a).map(e=>{let[t,a]=e;return[t,`$${a.cash.toLocaleString("es-CO")}`,`$${a.daviplata.toLocaleString("es-CO")}`,`$${a.nequi.toLocaleString("es-CO")}`,`$${a.total.toLocaleString("es-CO")}`].map(e=>`"${String(e||"").replace(/"/g,'""')}"`)}),o=[["ID Pedido","N\xba Bandeja","Sopa","Principio","Prote\xedna","Bebida","Cubiertos","Acompa\xf1amientos","Adiciones","Notas","Hora de Entrega","Direcci\xf3n","Tipo de Lugar","Nombre del Local","Nombre del Destinatario","Detalles de Unidad","Tel\xe9fono","Pago (Bandeja)","Total (COP)","Pago (General)","Domiciliario","Estado","Fecha de Creaci\xf3n","\xdaltima Actualizaci\xf3n"].join(","),...n,"",'"Resumen de Totales"','"Concepto","Monto (COP)"',...l,'"Resumen por Domiciliarios"','"Domiciliario","Efectivo (COP)","Daviplata (COP)","Nequi (COP)","Total (COP)"',...i].join("\n"),s=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=window.URL.createObjectURL(s),c=document.createElement("a");c.href=d,c.download=`pedidos_${(new Date).toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(d),r("Pedidos exportados a CSV.")},g=e=>null==e?"":"string"===typeof e?e.replace(" NUEVO","").trim():"boolean"===typeof e?e.toString():"object"===typeof e&&null!==e&&void 0!==e&&e.name?e.name.replace(" NUEVO","").trim():String(e).replace(" NUEVO","").trim(),x=e=>{if(null===e||void 0===e||!e.address)return"Sin direcci\xf3n";let t=e.address;switch(e.addressType){case"school":e.recipientName&&(t+=` (Recibe: ${g(e.recipientName)})`);break;case"complex":e.unitDetails&&(t+=` (${g(e.unitDetails)})`);break;case"shop":e.localName&&(t+=` (${g(e.localName)})`)}return t},h=e=>{var t,a,r,n,l,i,o,s,d,c,m,u,p,h,y,b,v,f,w,j,N,k,C,$;const S=[],P=null!==(t=e.soupReplacement)&&void 0!==t&&t.name||e.soupReplacement?`${g((null===(a=e.soupReplacement)||void 0===a?void 0:a.name)||e.soupReplacement)} (por sopa)`:null!==(r=e.soup)&&void 0!==r&&r.name||e.soup?g((null===(n=e.soup)||void 0===n?void 0:n.name)||e.soup):"Sin sopa";let E;var F;if(S.push(`Sopa: ${P}`),null!==(l=e.principleReplacement)&&void 0!==l&&l.name||e.principleReplacement)E=`${g((null===(F=e.principleReplacement)||void 0===F?void 0:F.name)||e.principleReplacement)} (por principio)`;else if(Array.isArray(e.principle)&&e.principle.length>0){const t=e.principle.map(e=>g(e.name||e)).filter(Boolean);E=t.length>0?t.join(", "):"Sin principio"}else if(null!==(i=e.principle)&&void 0!==i&&i.name||e.principle){var D;E=g((null===(D=e.principle)||void 0===D?void 0:D.name)||e.principle)}else E="Sin principio";S.push(`Principio: ${E}`),S.push(`Prote\xedna: ${null!==(o=e.protein)&&void 0!==o&&o.name||e.protein?g((null===(s=e.protein)||void 0===s?void 0:s.name)||e.protein):"Sin prote\xedna"}`);const T=(null===(d=e.drink)||void 0===d?void 0:d.name)||e.drink||"";S.push(`Bebida: ${"Juego de mango"===T?"Jugo de mango":g(T)||"Sin bebida"}`),S.push("Cubiertos: "+("S\xed"===(null===(c=e.cutlery)||void 0===c?void 0:c.name)||!0===e.cutlery||"true"===e.cutlery?"S\xed":"No"));const O=(null===(m=e.sides)||void 0===m?void 0:m.length)>0?e.sides.map(e=>g(e.name||e)).filter(Boolean).join(", "):"Ninguno";S.push(`Acompa\xf1amientos: ${O}`);const A=(null===(u=e.additions)||void 0===u?void 0:u.length)>0?e.additions.map(e=>`${g(e.name||e)}${e.protein||e.replacement?` (${g(e.protein||e.replacement)})`:""} (${e.quantity||1})`).join(", "):"Ninguna";S.push(`Adiciones: ${A}`),S.push(`Notas: ${e.notes?g(e.notes):"Ninguna"}`),S.push(`Hora de Entrega: ${null!==(p=e.time)&&void 0!==p&&p.name||e.time?g((null===(h=e.time)||void 0===h?void 0:h.name)||e.time):"No especificada"}`),S.push(`Direcci\xf3n: ${x(e.address)}`);let L="";switch(null===(y=e.address)||void 0===y?void 0:y.addressType){case"house":L="Casa/Apto";break;case"school":L="Colegio/Oficina";break;case"complex":L="Conjunto";break;case"shop":L="Tienda/Local";break;default:L="No especificado"}return S.push(`Tipo de Lugar: ${L}`),S.push(`Tel\xe9fono: ${null!==(b=e.address)&&void 0!==b&&b.phoneNumber?g(e.address.phoneNumber):"No especificado"}`),"shop"===(null===(v=e.address)||void 0===v?void 0:v.addressType)&&null!==(f=e.address)&&void 0!==f&&f.localName&&S.push(`Nombre del Local: ${g(e.address.localName)}`),"school"===(null===(w=e.address)||void 0===w?void 0:w.addressType)&&null!==(j=e.address)&&void 0!==j&&j.recipientName&&S.push(`Recibe: ${g(e.address.recipientName)}`),"complex"===(null===(N=e.address)||void 0===N?void 0:N.addressType)&&null!==(k=e.address)&&void 0!==k&&k.unitDetails&&S.push(`Unidad: ${g(e.address.unitDetails)}`),S.push(`Pago: ${null!==(C=e.payment)&&void 0!==C&&C.name||e.payment?g((null===($=e.payment)||void 0===$?void 0:$.name)||e.payment):"Efectivo"}`),S.join("\n")},y=e=>{if(!e||e.length<=1)return{areIdentical:!1,count:1};const t=["soup","soupReplacement","principle","principleReplacement","protein","drink","cutlery","notes","time","payment","address.address","address.addressType","address.phoneNumber","address.localName","address.recipientName","address.unitDetails","sides","additions"],a=e=>t.map(t=>{const a=(n=t,(r=e)&&n?n.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:"",r):"");var r,n;return"sides"===t&&Array.isArray(a)?a.map(e=>g(e.name||e)).sort().join(","):"additions"===t&&Array.isArray(a)?a.map(e=>`${g(e.name||e)}${e.protein||e.replacement?`:${g(e.protein||e.replacement)}`:""}:${e.quantity||1}`).sort().join(";"):"principle"===t&&Array.isArray(a)?a.map(e=>g(e.name||e)).sort().join(","):g(a)}).join("|"),r=a(e[0]);return{areIdentical:e.every(e=>a(e)===r),count:e.length}};var b=a(6568),v=a(8662),f=a(2315),w=a(4791),j=a(1252),N=a(2811),k=a(9248),C=a(8224),$=a(6365),S=a(579);const P=e=>{let{theme:t,orders:a,searchTerm:n,setSearchTerm:l,totals:i,isLoading:o,paginatedOrders:s,currentPage:d,totalPages:c,setCurrentPage:m,itemsPerPage:u,setItemsPerPage:p,deliveryPersons:h,handleEditOrder:y,handleDeleteOrder:P,handleStatusChange:E,handleSort:F,getSortIcon:D,setShowMealDetails:T,editingDeliveryId:O,setEditingDeliveryId:A,editForm:L,setEditForm:q,handleDeliveryChange:R,sortOrder:M,showProteinModal:z,setShowProteinModal:G,isMenuOpen:I,setIsMenuOpen:B,handleOpenPreview:V,handleOpenExcelPreview:U,handleExport:H,handleDeleteAllOrders:W,setShowConfirmDeleteAll:J,exportToExcel:Y,exportToPDF:_,exportToCSV:Z,setShowAddOrderModal:Q,orderTypeFilter:K,setOrderTypeFilter:X,uniqueDeliveryPersons:ee}=e;const te=(new Date).toLocaleDateString("es-CO",{weekday:"long",month:"long",day:"numeric"}),ae=(0,r.useRef)(null);return(0,r.useEffect)(()=>{function e(e){ae.current&&!ae.current.contains(e.target)&&B(!1)}return I&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[I,B]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,S.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Gesti\xf3n de Pedidos"}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 text-sm text-gray-700 dark:text-gray-300",children:[(0,S.jsxs)("div",{className:(0,b.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total Efectivo"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",i.cash.toLocaleString("es-CO")]})]}),(0,S.jsxs)("div",{className:(0,b.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total Daviplata"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",i.daviplata.toLocaleString("es-CO")]})]}),(0,S.jsxs)("div",{className:(0,b.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total Nequi"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",i.nequi.toLocaleString("es-CO")]})]}),(0,S.jsxs)("div",{className:(0,b.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total General"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",(i.cash+i.daviplata+i.nequi).toLocaleString("es-CO")]})]})]}),(0,S.jsxs)("div",{className:"flex flex-wrap justify-center sm:justify-between items-center mb-6 gap-3 sm:gap-4",children:[(0,S.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"Buscar pedidos...",className:(0,b.x)("p-2 sm:p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:max-w-xs shadow-sm text-sm sm:text-base transition-all duration-200","dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900")}),(0,S.jsxs)("div",{className:"flex flex-wrap items-center justify-center sm:justify-end gap-2",children:[(0,S.jsxs)("button",{onClick:()=>G(!0),className:(0,b.x)("flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0","dark"===t?"bg-gray-600 hover:bg-gray-500 text-white border border-gray-500":"bg-gray-200 hover:bg-gray-300 text-gray-900 border border-gray-400"),children:[(0,S.jsx)(v.A,{className:"w-4 h-4"}),(0,S.jsx)("span",{className:"hidden md:inline",children:"Prote\xednas del D\xeda"})]}),(0,S.jsx)("div",{className:(0,b.x)("flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold shadow-sm border transition-colors duration-200 flex-shrink-0","dark"===t?"bg-gray-700 text-white border-gray-500":"bg-gray-200 text-gray-900 border-gray-400"),children:te}),(0,S.jsxs)("div",{className:"relative flex-shrink-0",ref:ae,children:[(0,S.jsx)("button",{onClick:()=>B(!I),className:(0,b.x)("flex items-center justify-center p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Opciones de men\xfa",children:(0,S.jsx)(f.A,{className:(0,b.x)("w-6 h-6","dark"===t?"text-gray-200 hover:text-white":"text-gray-700 hover:text-gray-900")})}),I&&(0,S.jsx)("div",{className:(0,b.x)("absolute right-0 mt-2 w-48 rounded-lg shadow-xl z-50","dark"===t?"bg-gray-700 text-gray-200":"bg-white text-gray-900"),children:(0,S.jsxs)("div",{className:"py-1",children:[(0,S.jsx)("button",{onClick:()=>{X("breakfast"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Ver Desayunos"}),(0,S.jsx)("button",{onClick:()=>{X("lunch"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Ver Almuerzos"}),(0,S.jsx)("button",{onClick:()=>{X("all"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Ver Todos"}),(0,S.jsx)("button",{onClick:()=>{Q(!0),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Generar Orden"}),(0,S.jsx)("button",{onClick:()=>{V(),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Vista Previa PDF"}),(0,S.jsx)("button",{onClick:()=>{U(),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Vista Previa Excel"}),(0,S.jsxs)("button",{onClick:()=>{H(Y,"Excel"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center",children:[(0,S.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Exportar Excel"]}),(0,S.jsxs)("button",{onClick:()=>{H(_,"PDF"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center",children:[(0,S.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]}),(0,S.jsxs)("button",{onClick:()=>{H(Z,"CSV"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center",children:[(0,S.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]}),(0,S.jsx)("button",{onClick:()=>{J(!0),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 text-red-500",children:"Eliminar Todos"})]})})]})]})]}),(0,S.jsx)("div",{className:(0,b.x)("p-3 sm:p-4 rounded-2xl shadow-xl max-h-[70vh] overflow-y-auto custom-scrollbar transition-all duration-300","dark"===t?"bg-gray-800":"bg-white"),children:o?(0,S.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,S.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"overflow-x-auto",children:(0,S.jsxs)("table",{className:"min-w-full text-left border-collapse text-sm",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:(0,b.x)("font-semibold sticky top-0 z-10 shadow-sm","dark"===t?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:[(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("orderNumber"),children:["N\xba ",D("orderNumber")]}),(0,S.jsx)("th",{className:"p-2 sm:p-3 border-b whitespace-nowrap",children:"Detalles"}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("meals.0.address.address"),children:["Direcci\xf3n ",D("meals.0.address.address")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("meals.0.address.phoneNumber"),children:["Tel\xe9fono ",D("meals.0.address.phoneNumber")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("meals.0.time.name"),children:["Hora ",D("meals.0.time.name")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("payment"),children:["Pago ",D("payment")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("total"),children:["Total ",D("total")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("deliveryPerson"),children:["Domiciliario ",D("deliveryPerson")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("status"),children:["Estado ",D("status")]}),(0,S.jsx)("th",{className:"p-2 sm:p-3 border-b whitespace-nowrap",children:"Acciones"})]})}),(0,S.jsx)("tbody",{children:0===s.length?(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:"10",className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron pedidos. Intenta ajustar tu b\xfasqueda o filtros."})}):s.map((e,a)=>{var r,n,l,i,o,c,m,p,h,v,f,w,C,$,F,D,L,q,z,G,I;const B="asc"===M?(d-1)*u+a+1:s.length-((d-1)*u+a),V=x((null===(r=e.meals)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.address)||(null===(l=e.breakfasts)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.address)),U=g(e.payment||(null===(o=e.meals)||void 0===o||null===(c=o[0])||void 0===c||null===(m=c.payment)||void 0===m?void 0:m.name)||(null===(p=e.breakfasts)||void 0===p||null===(h=p[0])||void 0===h||null===(v=h.payment)||void 0===v?void 0:v.name)||"Sin pago"),H="Pendiente"===e.status?"bg-yellow-500 text-black":"Entregado"===e.status?"bg-green-500 text-white":"Cancelado"===e.status?"bg-red-500 text-white":"",W=(null===(f=e.meals)||void 0===f||null===(w=f[0])||void 0===w?void 0:w.time)||(null===(C=e.breakfasts)||void 0===C||null===($=C[0])||void 0===$?void 0:$.time);let J="N/A";return"string"===typeof W?J=W:"object"===typeof W&&null!==W&&(J=W.name||"N/A"),(0,S.jsxs)("tr",{className:(0,b.x)("border-b transition-colors duration-150","dark"===t?"border-gray-700 hover:bg-gray-700":"border-gray-200 hover:bg-gray-50",a%2===0?"dark"===t?"bg-gray-750":"bg-gray-50":""),children:[(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300",children:B}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300",children:(0,S.jsxs)("button",{onClick:()=>T(e),className:"text-blue-400 hover:text-blue-300 text-xs sm:text-sm flex items-center",title:"Ver detalles de la bandeja",children:[(0,S.jsx)(j.A,{className:"w-4 h-4 mr-1"}),"Ver"]})}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300 max-w-[150px] sm:max-w-xs overflow-hidden text-ellipsis whitespace-nowrap",children:V}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300 whitespace-nowrap",children:(null===(F=e.meals)||void 0===F||null===(D=F[0])||void 0===D||null===(L=D.address)||void 0===L?void 0:L.phoneNumber)||(null===(q=e.breakfasts)||void 0===q||null===(z=q[0])||void 0===z||null===(G=z.address)||void 0===G?void 0:G.phoneNumber)||"N/A"}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300 whitespace-nowrap",children:J}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300 whitespace-nowrap",children:U}),(0,S.jsxs)("td",{className:"p-2 sm:p-3 text-gray-300 whitespace-nowrap",children:["$",(null===(I=e.total)||void 0===I?void 0:I.toLocaleString("es-CO"))||"0"]}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-300 whitespace-nowrap",children:O===e.id?(0,S.jsxs)("select",{value:e.deliveryPerson||"Sin asignar",onChange:t=>{const a=t.target.value;R(e.id,a)},onBlur:()=>A(null),className:(0,b.x)("w-24 p-1 rounded-md border text-sm","dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),autoFocus:!0,children:[(0,S.jsx)("option",{value:"Sin asignar",children:"Sin asignar"}),ee.map(e=>(0,S.jsx)("option",{value:e,children:e},e))]}):(0,S.jsx)("span",{onClick:()=>A(e.id),className:"cursor-pointer hover:text-blue-400",children:e.deliveryPerson||"Sin asignar"})}),(0,S.jsx)("td",{className:"p-2 sm:p-3 whitespace-nowrap",children:(0,S.jsxs)("select",{value:e.status||"Pendiente",onChange:t=>E(e.id,t.target.value),className:(0,b.x)("px-2 py-1 rounded-full text-xs font-semibold appearance-none cursor-pointer",H,"dark"===t?"bg-opacity-70":"bg-opacity-90","focus:outline-none focus:ring-2 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,S.jsx)("option",{value:"En Preparaci\xf3n",children:"En Preparaci\xf3n"}),(0,S.jsx)("option",{value:"En Camino",children:"En Camino"}),(0,S.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,S.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})}),(0,S.jsx)("td",{className:"p-2 sm:p-3 whitespace-nowrap",children:(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)("button",{onClick:()=>y(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Editar pedido","aria-label":`Editar pedido ${B}`,children:(0,S.jsx)(N.A,{className:"w-5 h-5"})}),(0,S.jsx)("button",{onClick:()=>P(e.id),className:"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md",title:"Eliminar pedido","aria-label":`Eliminar pedido ${B}`,children:(0,S.jsx)(k.A,{className:"w-5 h-5"})})]})})]},e.id)})})]})}),(0,S.jsxs)("div",{className:"flex flex-wrap justify-between items-center mt-6 gap-3",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,S.jsx)("span",{children:"Pedidos por p\xe1gina:"}),(0,S.jsxs)("select",{value:u,onChange:e=>{p(Number(e.target.value)),m(1)},className:(0,b.x)("p-2 rounded-md border text-sm","dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"),children:[(0,S.jsx)("option",{value:"10",children:"10"}),(0,S.jsx)("option",{value:"20",children:"20"}),(0,S.jsx)("option",{value:"30",children:"30"}),(0,S.jsx)("option",{value:"50",children:"50"})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,S.jsx)("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:1===d,className:(0,b.x)("p-2 rounded-md transition-colors duration-200",1===d?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"dark"===t?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-100 text-gray-700"),children:(0,S.jsx)(C.A,{className:"w-5 h-5"})}),(0,S.jsxs)("span",{children:["P\xe1gina ",d," de ",c]}),(0,S.jsx)("button",{onClick:()=>m(e=>Math.min(e+1,c)),disabled:d===c,className:(0,b.x)("p-2 rounded-md transition-colors duration-200",d===c?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"dark"===t?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-100 text-gray-700"),children:(0,S.jsx)($.A,{className:"w-5 h-5"})})]})]})]})})]})})};var E=a(7015),F=a(9795),D=a(7591);const T=e=>{var t;let{theme:a,showProteinModal:i,setShowProteinModal:o,newProtein:s,setNewProtein:d,handleAddProtein:c,proteins:m,totalProteinUnits:u,isLoading:p,showMealDetails:g,setShowMealDetails:x,editingOrder:v,setEditingOrder:f,editForm:w,handleMealFormFieldChange:j,handleEditFormFieldChange:C,handleSaveEdit:$,showConfirmDeleteAll:P,setShowConfirmDeleteAll:T,confirmText:O,setConfirmText:A,handleDeleteAllOrders:L,setError:q,setSuccess:R,showAddOrderModal:M,setShowAddOrderModal:z,newOrderForm:G,handleNewOrderMealFormFieldChange:I,handleNewOrderFieldChange:B,handleAddOrderSubmit:V,uniqueDeliveryPersons:U}=e;const[H,W]=(0,r.useState)(null);return(0,S.jsxs)("div",{children:[(0,S.jsx)(E.e,{show:i,as:r.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>{o(!1),W(null)},children:[(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,b.x)("w-full max-w-md p-6 rounded-lg shadow-md","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,S.jsx)(F.lG.Title,{className:"text-lg font-medium",children:H?"Editar Prote\xedna":"Gestionar Prote\xednas"}),(0,S.jsx)("button",{onClick:()=>{o(!1),W(null)},className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar modal",children:(0,S.jsx)(D.A,{className:"w-5 h-5"})})]}),(0,S.jsx)("div",{className:"space-y-4",children:H?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,S.jsx)("input",{type:"text",value:H.name,onChange:e=>W({...H,name:e.target.value}),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: Pollo"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cantidad"}),(0,S.jsx)("input",{type:"number",value:H.quantity,onChange:e=>W({...H,quantity:e.target.value}),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: 50",min:"0"})]}),(0,S.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>{W(null)},className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:async()=>{if(!H.name||!H.quantity||isNaN(H.quantity)||Number(H.quantity)<=0)q("Por favor, ingrese un nombre de prote\xedna v\xe1lido y una cantidad mayor a 0.");else try{await(0,l.mZ)((0,l.H9)(n.db,"dailyProteins",H.id),{name:H.name.trim(),quantity:Number(H.quantity)}),R("Prote\xedna actualizada correctamente."),W(null)}catch(e){q(`Error al actualizar prote\xedna: ${e.message}`)}},disabled:p,className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium",p?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:p?"Guardando...":"Actualizar"})]})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,S.jsx)("input",{type:"text",value:s.name,onChange:e=>d({...s,name:e.target.value}),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: Pollo"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cantidad"}),(0,S.jsx)("input",{type:"number",value:s.quantity,onChange:e=>d({...s,quantity:e.target.value}),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: 50",min:"0"})]}),(0,S.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>o(!1),className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:c,disabled:p,className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium",p?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:p?"Guardando...":"Agregar"})]})]})}),(0,S.jsxs)("div",{className:"mt-6",children:[(0,S.jsxs)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Prote\xednas Registradas (Total: ",u," unidades)"]}),0===m.length?(0,S.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No hay prote\xednas registradas."}):(0,S.jsx)("ul",{className:"space-y-2",children:m.map(e=>(0,S.jsxs)("li",{className:(0,b.x)("flex justify-between items-center p-2 rounded-md","dark"===a?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsxs)("span",{className:"text-sm",children:[e.name,": ",e.quantity," unidades"]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)("button",{onClick:()=>(e=>{W(e)})(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Editar prote\xedna","aria-label":`Editar ${e.name}`,children:(0,S.jsx)(N.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{onClick:()=>(async e=>{try{await(0,l.kd)((0,l.H9)(n.db,"dailyProteins",e)),R("Prote\xedna eliminada correctamente.")}catch(t){q(`Error al eliminar prote\xedna: ${t.message}`)}})(e.id),className:"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md",title:"Eliminar prote\xedna","aria-label":`Eliminar ${e.name}`,children:(0,S.jsx)(k.A,{className:"w-4 h-4"})})]})]},e.id))})]})]})})})]})}),(0,S.jsx)(E.e,{show:null!==g,as:r.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>x(null),children:[(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,b.x)("w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)(F.lG.Title,{className:"text-lg font-medium mb-4 flex justify-between items-center",children:["Detalles del Pedido",(0,S.jsx)("button",{onClick:()=>x(null),className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar detalles",children:(0,S.jsx)(D.A,{className:"w-5 h-5"})})]}),g&&(0,S.jsxs)("div",{className:"space-y-4 text-sm",children:[y(g.meals).areIdentical?(0,S.jsxs)("div",{children:[(0,S.jsxs)("h3",{className:"font-medium",children:["Bandeja (x",y(g.meals).count,")"]}),(0,S.jsx)("pre",{className:"whitespace-pre-wrap",children:h(g.meals[0])})]}):g.meals.map((e,t)=>(0,S.jsxs)("div",{children:[(0,S.jsxs)("h3",{className:"font-medium",children:["Bandeja ",t+1]}),(0,S.jsx)("pre",{className:"whitespace-pre-wrap",children:h(e)})]},t)),(0,S.jsxs)("p",{className:"font-medium",children:["Total: $",(null===(t=g.total)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"]}),(0,S.jsxs)("p",{className:"font-medium",children:["Estado: $",g.status||"Pendiente"]}),(0,S.jsxs)("p",{className:"font-medium",children:["Domiciliario: $",g.deliveryPerson||"Sin asignar"]})]})]})})})]})}),(0,S.jsx)(E.e,{show:null!==v,as:r.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>f(null),children:[(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,b.x)("w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)(F.lG.Title,{className:"text-lg font-medium mb-4 flex justify-between items-center",children:["Editar Pedido",(0,S.jsx)("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar edici\xf3n",children:(0,S.jsx)(D.A,{className:"w-5 h-5"})})]}),w.meals.map((e,t)=>{var r,n,l,i,o,s,d,c,m,u,p,g,x,h,y,v,f;return(0,S.jsxs)("div",{className:"mb-6 p-4 border rounded-md border-gray-200 dark:border-gray-600",children:[(0,S.jsxs)("h3",{className:"font-medium mb-2",children:["Bandeja ",t+1]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sopa"}),(0,S.jsx)("input",{type:"text",value:(null===(r=e.soup)||void 0===r?void 0:r.name)||e.soup||"",onChange:e=>j(t,"soup",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reemplazo de Sopa"}),(0,S.jsx)("input",{type:"text",value:(null===(n=e.soupReplacement)||void 0===n?void 0:n.name)||e.soupReplacement||"",onChange:e=>j(t,"soupReplacement",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Principio"}),(0,S.jsx)("input",{type:"text",value:Array.isArray(e.principle)?e.principle.map(e=>e.name||e).join(", "):(null===(l=e.principle)||void 0===l?void 0:l.name)||e.principle||"",onChange:e=>j(t,"principle",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reemplazo de Principio"}),(0,S.jsx)("input",{type:"text",value:(null===(i=e.principleReplacement)||void 0===i?void 0:i.name)||e.principleReplacement||"",onChange:e=>j(t,"principleReplacement",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prote\xedna"}),(0,S.jsx)("input",{type:"text",value:(null===(o=e.protein)||void 0===o?void 0:o.name)||e.protein||"",onChange:e=>j(t,"protein",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bebida"}),(0,S.jsx)("input",{type:"text",value:(null===(s=e.drink)||void 0===s?void 0:s.name)||e.drink||"",onChange:e=>j(t,"drink",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cubiertos"}),(0,S.jsx)("input",{type:"text",value:(null===(d=e.cutlery)||void 0===d?void 0:d.name)||e.cutlery||"",onChange:e=>j(t,"cutlery",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Acompa\xf1amientos"}),(0,S.jsx)("input",{type:"text",value:(null===(c=e.sides)||void 0===c?void 0:c.map(e=>e.name||e).join(", "))||"",onChange:e=>j(t,"sides",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Adiciones"}),(0,S.jsx)("input",{type:"text",value:(null===(m=e.additions)||void 0===m?void 0:m.map(e=>`${e.name}${e.protein||e.replacement?`,${e.protein||e.replacement}`:""}${e.quantity?`,${e.quantity}`:""}`).join("; "))||"",onChange:e=>j(t,"additions",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas"}),(0,S.jsx)("input",{type:"text",value:e.notes||"",onChange:e=>j(t,"notes",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hora de Entrega"}),(0,S.jsx)("input",{type:"text",value:(null===(u=e.time)||void 0===u?void 0:u.name)||e.time||"",onChange:e=>j(t,"time",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direcci\xf3n"}),(0,S.jsx)("input",{type:"text",value:(null===(p=e.address)||void 0===p?void 0:p.address)||"",onChange:e=>j(t,"address.address",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tel\xe9fono"}),(0,S.jsx)("input",{type:"text",value:(null===(g=e.address)||void 0===g?void 0:g.phoneNumber)||"",onChange:e=>j(t,"address.phoneNumber",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de Direcci\xf3n"}),(0,S.jsxs)("select",{value:(null===(x=e.address)||void 0===x?void 0:x.addressType)||"",onChange:e=>j(t,"address.addressType",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"",children:"Seleccione"}),(0,S.jsx)("option",{value:"house",children:"Casa/Apto"}),(0,S.jsx)("option",{value:"school",children:"Colegio/Oficina"}),(0,S.jsx)("option",{value:"complex",children:"Conjunto"}),(0,S.jsx)("option",{value:"shop",children:"Tienda/Local"})]})]}),"shop"===(null===(h=e.address)||void 0===h?void 0:h.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Local"}),(0,S.jsx)("input",{type:"text",value:(null===(y=e.address)||void 0===y?void 0:y.localName)||"",onChange:e=>j(t,"address.localName",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),"school"===(null===(v=e.address)||void 0===v?void 0:v.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Recipiente"}),(0,S.jsx)("input",{type:"text",value:(null===(f=e.address)||void 0===f?void 0:f.recipientName)||"",onChange:e=>j(t,"address.recipientName",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]})]})]},t)}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total"}),(0,S.jsx)("input",{type:"number",value:w.total||0,onChange:e=>C("total",Number(e.target.value)),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,S.jsxs)("select",{value:w.status||"Pendiente",onChange:e=>C("status",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,S.jsx)("option",{value:"En Preparaci\xf3n",children:"En Preparaci\xf3n"}),(0,S.jsx)("option",{value:"En Camino",children:"En Camino"}),(0,S.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,S.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"M\xe9todo de Pago"}),(0,S.jsxs)("select",{value:w.payment||"Efectivo",onChange:e=>C("payment",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Efectivo",children:"Efectivo"}),(0,S.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,S.jsx)("option",{value:"Nequi",children:"Nequi"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Domiciliario"}),(0,S.jsx)("input",{type:"text",value:w.deliveryPerson||"Sin asignar",onChange:e=>C("deliveryPerson",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]})]}),(0,S.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>f(null),className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:$,disabled:p,className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium",p?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:p?"Guardando...":"Guardar Cambios"})]})]})})})]})}),(0,S.jsx)(E.e,{show:P,as:r.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>T(!1),children:[(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,b.x)("w-full max-w-sm p-6 rounded-lg shadow-md text-center","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsx)(F.lG.Title,{className:"text-lg font-medium mb-4",children:"Confirmar Eliminaci\xf3n Masiva"}),(0,S.jsxs)("p",{className:"mb-4",children:["Est\xe1s a punto de eliminar ",(0,S.jsx)("span",{className:"font-bold text-red-500",children:"TODOS"}),' los pedidos. Esta acci\xf3n es irreversible. Para confirmar, escribe "confirmar" a continuaci\xf3n:']}),(0,S.jsx)("input",{type:"text",value:O,onChange:e=>A(e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-center text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-red-500"),placeholder:"escribe 'confirmar'"}),(0,S.jsxs)("div",{className:"mt-6 flex justify-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{T(!1),A("")},className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:L,disabled:p||"confirmar"!==O.toLowerCase(),className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium",p||"confirmar"!==O.toLowerCase()?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:p?"Eliminando...":"Eliminar Todos"})]})]})})})]})}),(0,S.jsx)(E.e,{show:M,as:r.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>z(!1),children:[(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,b.x)("w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)(F.lG.Title,{className:"text-lg font-medium mb-4 flex justify-between items-center",children:["Generar Nueva Orden",(0,S.jsx)("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar formulario de nueva orden",children:(0,S.jsx)(D.A,{className:"w-5 h-5"})})]}),G.meals.map((e,t)=>{var r,n,l,i,o,s,d,c,m;return(0,S.jsxs)("div",{className:"mb-6 p-4 border rounded-md border-gray-200 dark:border-gray-600",children:[(0,S.jsxs)("h3",{className:"font-medium mb-2",children:["Bandeja ",t+1]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sopa"}),(0,S.jsx)("input",{type:"text",value:e.soup||"",onChange:e=>I(t,"soup",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reemplazo de Sopa"}),(0,S.jsx)("input",{type:"text",value:e.soupReplacement||"",onChange:e=>I(t,"soupReplacement",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Principio"}),(0,S.jsx)("input",{type:"text",value:Array.isArray(e.principle)?e.principle.map(e=>e.name||e).join(", "):e.principle||"",onChange:e=>I(t,"principle",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reemplazo de Principio"}),(0,S.jsx)("input",{type:"text",value:e.principleReplacement||"",onChange:e=>I(t,"principleReplacement",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prote\xedna"}),(0,S.jsx)("input",{type:"text",value:e.protein||"",onChange:e=>I(t,"protein",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bebida"}),(0,S.jsx)("input",{type:"text",value:e.drink||"",onChange:e=>I(t,"drink",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cubiertos"}),(0,S.jsx)("input",{type:"text",value:e.cutlery||"",onChange:e=>I(t,"cutlery",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Acompa\xf1amientos"}),(0,S.jsx)("input",{type:"text",value:(null===(r=e.sides)||void 0===r?void 0:r.map(e=>e.name||e).join(", "))||"",onChange:e=>I(t,"sides",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Adiciones"}),(0,S.jsx)("input",{type:"text",value:(null===(n=e.additions)||void 0===n?void 0:n.map(e=>`${e.name}${e.protein||e.replacement?`,${e.protein||e.replacement}`:""}${e.quantity?`,${e.quantity}`:""}`).join("; "))||"",onChange:e=>I(t,"additions",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas"}),(0,S.jsx)("input",{type:"text",value:e.notes||"",onChange:e=>I(t,"notes",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hora de Entrega"}),(0,S.jsx)("input",{type:"text",value:e.time||"",onChange:e=>I(t,"time",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direcci\xf3n"}),(0,S.jsx)("input",{type:"text",value:(null===(l=e.address)||void 0===l?void 0:l.address)||"",onChange:e=>I(t,"address.address",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tel\xe9fono"}),(0,S.jsx)("input",{type:"text",value:(null===(i=e.address)||void 0===i?void 0:i.phoneNumber)||"",onChange:e=>I(t,"address.phoneNumber",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de Direcci\xf3n"}),(0,S.jsxs)("select",{value:(null===(o=e.address)||void 0===o?void 0:o.addressType)||"",onChange:e=>I(t,"address.addressType",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"",children:"Seleccione"}),(0,S.jsx)("option",{value:"house",children:"Casa/Apto"}),(0,S.jsx)("option",{value:"school",children:"Colegio/Oficina"}),(0,S.jsx)("option",{value:"complex",children:"Conjunto"}),(0,S.jsx)("option",{value:"shop",children:"Tienda/Local"})]})]}),"shop"===(null===(s=e.address)||void 0===s?void 0:s.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Local"}),(0,S.jsx)("input",{type:"text",value:(null===(d=e.address)||void 0===d?void 0:d.localName)||"",onChange:e=>I(t,"address.localName",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),"school"===(null===(c=e.address)||void 0===c?void 0:c.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Recipiente"}),(0,S.jsx)("input",{type:"text",value:(null===(m=e.address)||void 0===m?void 0:m.recipientName)||"",onChange:e=>I(t,"address.recipientName",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]})]})]},t)}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total"}),(0,S.jsx)("input",{type:"number",value:G.total||0,onChange:e=>B("total",Number(e.target.value)),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,S.jsxs)("select",{value:G.status||"Pendiente",onChange:e=>B("status",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,S.jsx)("option",{value:"En Preparaci\xf3n",children:"En Preparaci\xf3n"}),(0,S.jsx)("option",{value:"En Camino",children:"En Camino"}),(0,S.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,S.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"M\xe9todo de Pago"}),(0,S.jsxs)("select",{value:G.payment||"Efectivo",onChange:e=>B("payment",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Efectivo",children:"Efectivo"}),(0,S.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,S.jsx)("option",{value:"Nequi",children:"Nequi"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Domiciliario"}),(0,S.jsx)("input",{type:"text",value:G.deliveryPerson||"Sin asignar",onChange:e=>B("deliveryPerson",e.target.value),className:(0,b.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]})]}),(0,S.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>z(!1),className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:V,disabled:p,className:(0,b.x)("px-4 py-2 rounded-md text-sm font-medium",p?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:p?"Guardando...":"Crear Orden"})]})]})})})]})})]})},O=e=>{let{setError:t,setSuccess:a,theme:i}=e;const[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(""),[y,b]=(0,r.useState)({cash:0,daviplata:0,nequi:0}),[v,f]=(0,r.useState)({meals:[],total:0,status:"",payment:"",deliveryPerson:""}),[w,j]=(0,r.useState)(1),[N,k]=(0,r.useState)(10),[C,$]=(0,r.useState)(!0),[E,F]=(0,r.useState)(!1),[D,O]=(0,r.useState)(""),[A,L]=(0,r.useState)(null),[q,R]=(0,r.useState)(null),[M,z]=(0,r.useState)({}),[G,I]=(0,r.useState)("createdAt.seconds"),[B,V]=(0,r.useState)("desc"),[U,H]=(0,r.useState)([]),[W,J]=(0,r.useState)({name:"",quantity:""}),[Y,_]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(!1),[K,X]=(0,r.useState)(!1),[ee,te]=(0,r.useState)("all"),[ae,re]=(0,r.useState)({meals:[{soup:"",soupReplacement:"",principle:[{name:""}],principleReplacement:"",protein:"",drink:"",cutlery:"",sides:[],additions:[],notes:"",address:{address:"",phoneNumber:"",addressType:"",localName:"",recipientName:""},time:"",payment:"Efectivo"}],total:0,status:"Pendiente",payment:"Efectivo",deliveryPerson:"Sin asignar",type:"lunch"}),ne=(0,r.useMemo)(()=>U.reduce((e,t)=>e+Number(t.quantity||0),0),[U]),le=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{await(0,l.gS)((0,l.rJ)(n.db,"userActivity"),{action:e,timestamp:(0,l.O5)(),details:t})}catch(a){console.error("Error al registrar actividad:",a)}},[]),ie=(0,r.useCallback)(()=>{$(!0);const e=(0,l.rJ)(n.db,"orders"),a=(0,l.aQ)(e,e=>{const t=e.docs.map(e=>{var t,a;const r=e.data(),n=Array.isArray(r.meals)&&r.meals.length>0?r.meals:[{address:{},payment:{name:"Efectivo"},time:{}}];return{id:e.id,...r,meals:n.map(e=>({...e,address:e.address||{},payment:e.payment&&"object"===typeof e.payment&&e.payment.name?e.payment:{name:e.payment||"Efectivo"},time:e.time||{}})),payment:r.payment||(null===(t=n[0])||void 0===t||null===(a=t.payment)||void 0===a?void 0:a.name)||"Efectivo",paymentSummary:r.paymentSummary||{Efectivo:0,Daviplata:0,Nequi:0},total:r.total||0,deliveryPerson:r.deliveryPerson||"Sin asignar",status:r.status||"Pendiente"}});d(t);const a={cash:0,daviplata:0,nequi:0,general:0},r={};t.forEach(e=>{if("Cancelado"!==e.status){const t=e.paymentSummary||{Efectivo:0,Daviplata:0,Nequi:0};a.cash+=t.Efectivo||0,a.daviplata+=t.Daviplata||0,a.nequi+=t.Nequi||0,a.general+=e.total||0;const n=e.deliveryPerson||"Sin asignar";if("Sin asignar"!==n){r[n]||(r[n]={cash:0,daviplata:0,nequi:0,total:0});const t=g(e.payment||"Efectivo"),a=e.total||0;"efectivo"===t.toLowerCase()?r[n].cash+=a:"daviplata"===t.toLowerCase()?r[n].daviplata+=a:"nequi"===t.toLowerCase()&&(r[n].nequi+=a),r[n].total+=a}}}),b(a),z(r),$(!1)},e=>{t(`Error al cargar pedidos: ${e.message}`),$(!1)});return()=>a()},[t]),oe=(0,r.useCallback)(()=>{const e=(new Date).toISOString().split("T")[0],a=(0,l.P)((0,l.rJ)(n.db,"dailyProteins"),(0,l._M)("date","==",e)),r=(0,l.aQ)(a,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));H(t)},e=>{t(`Error al cargar prote\xednas: ${e.message}`)});return()=>r()},[t]);(0,r.useEffect)(()=>{const e=ie(),t=oe();return()=>{e(),t()}},[ie,oe]);const se=(0,r.useMemo)(()=>o.filter(e=>{var t,a,r,n,l,i,o,s,d,c,m,u,p,h,y,b,v,f,w,j,N,k;const C=x.toLowerCase(),$=(null===(t=e.meals)||void 0===t||null===(a=t[0])||void 0===a||null===(r=a.address)||void 0===r||null===(n=r.address)||void 0===n?void 0:n.toLowerCase())||"",S=(null===(l=e.meals)||void 0===l||null===(i=l[0])||void 0===i||null===(o=i.address)||void 0===o||null===(s=o.phoneNumber)||void 0===s?void 0:s.toLowerCase())||"",P=(null===(d=e.meals)||void 0===d||null===(c=d[0])||void 0===c||null===(m=c.time)||void 0===m||null===(u=m.name)||void 0===u?void 0:u.toLowerCase())||(null===(p=e.meals)||void 0===p||null===(h=p[0])||void 0===h||null===(y=h.time)||void 0===y?void 0:y.toLowerCase())||"",E=g(e.payment||(null===(b=e.meals)||void 0===b||null===(v=b[0])||void 0===v||null===(f=v.payment)||void 0===f?void 0:f.name)||(null===(w=e.meals)||void 0===w||null===(j=w[0])||void 0===j?void 0:j.payment)||"").toLowerCase(),F=(null===(N=e.deliveryPerson)||void 0===N?void 0:N.toLowerCase())||"",D=(null===(k=e.status)||void 0===k?void 0:k.toLowerCase())||"";return("all"===ee||e.type===ee)&&($.includes(C)||S.includes(C)||P.includes(C)||E.includes(C)||F.includes(C)||D.includes(C))}),[o,x,ee]),de=(0,r.useMemo)(()=>[...se].sort((e,t)=>{const a=(e,t,a)=>{if("orderNumber"===t)return e?a.indexOf(e):-1;const r=t.split(".").reduce((e,t)=>e&&e[t],e);return g(r)||""},r=a(e,G,se),n=a(t,G,se);return"string"===typeof r&&"string"===typeof n?"asc"===B?r.localeCompare(n):n.localeCompare(r):"asc"===B?r-n:n-r}),[se,G,B]),ce=Math.ceil(de.length/N),me=(0,r.useMemo)(()=>{const e=(w-1)*N,t=e+N;return de.slice(e,t)},[de,w,N]),ue=(0,r.useCallback)(e=>{m(e),f({id:e.id,meals:Array.isArray(e.meals)&&e.meals.length>0?e.meals.map(e=>{var t;return{...e,address:e.address||{},payment:e.payment?g((null===(t=e.payment)||void 0===t?void 0:t.name)||e.payment):"Efectivo",additions:Array.isArray(e.additions)?e.additions:[],principle:Array.isArray(e.principle)?e.principle:e.principle?[{name:e.principle.name||e.principle}]:[],cutlery:e.cutlery||"",sides:Array.isArray(e.sides)?e.sides:[],soup:e.soup||"",soupReplacement:e.soupReplacement||"",protein:e.protein||"",drink:e.drink||"",time:e.time||"",notes:e.notes||""}}):[{soup:"",soupReplacement:"",principle:[{name:""}],principleReplacement:"",protein:"",drink:"",cutlery:"",sides:[],additions:[],notes:"",address:{address:"",phoneNumber:"",addressType:"",localName:"",recipientName:""},time:"",payment:"Efectivo"}],total:e.total||0,status:e.status||"Pendiente",payment:e.payment?g(e.payment):"Efectivo",deliveryPerson:e.deliveryPerson||"Sin asignar",type:e.type||"lunch"})},[]),pe=async()=>{if("confirmar"===D.toLowerCase()){$(!0);try{const e=(0,l.wP)(n.db),t=await(0,l.GG)((0,l.rJ)(n.db,"orders")),r=await(0,l.GG)((0,l.rJ)(n.db,"deliveryBreakfastOrders"));t.forEach(t=>e.delete(t.ref)),r.forEach(t=>e.delete(t.ref)),await e.commit(),F(!1),O(""),a("Todos los pedidos han sido eliminados."),le("Elimin\xf3 todos los pedidos",{count:t.size+r.size})}catch(e){t(`Error al eliminar todos los pedidos: ${e.message}`)}finally{$(!1)}}else t('Por favor, escribe "confirmar" para proceder.')},ge=(0,r.useMemo)(()=>Object.keys(M),[M]);return(0,S.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,S.jsx)(T,{theme:i,showProteinModal:Y,setShowProteinModal:_,newProtein:W,setNewProtein:J,handleAddProtein:async()=>{if(!W.name||!W.quantity||isNaN(W.quantity)||Number(W.quantity)<=0)t("Por favor, ingrese un nombre de prote\xedna v\xe1lido y una cantidad mayor a 0.");else{$(!0);try{await(0,l.gS)((0,l.rJ)(n.db,"dailyProteins"),{name:W.name.trim(),quantity:Number(W.quantity),date:(new Date).toISOString().split("T")[0],createdAt:new Date}),J({name:"",quantity:""}),_(!1),a("Prote\xedna agregada correctamente."),le(`Agreg\xf3 prote\xedna: ${W.name} (${W.quantity} unidades)`,{proteinName:W.name,quantity:Number(W.quantity)})}catch(e){t(`Error al agregar prote\xedna: ${e.message}`)}finally{$(!1)}}},proteins:U,totalProteinUnits:ne,isLoading:C,showMealDetails:A,setShowMealDetails:L,editingOrder:c,setEditingOrder:m,editForm:v,handleMealFormFieldChange:(e,t,a)=>{f(r=>{const n=[...r.meals];if(n[e]||(n[e]={address:{},payment:{},time:{}}),t.includes(".")){const[r,l]=t.split(".");n[e]={...n[e],[r]:{...n[e][r],[l]:a}}}else n[e]="sides"===t?{...n[e],sides:a.split(",").map(e=>({name:e.trim()})).filter(e=>e.name)}:"additions"===t?{...n[e],additions:a.split(";").map(e=>{const[t,a="",r="1"]=e.split(",");return{name:t.trim(),[a.includes("por")?"replacement":"protein"]:a.trim(),quantity:Number(r)||1}}).filter(e=>e.name)}:"principle"===t?{...n[e],principle:a.split(",").map(e=>({name:e.trim()})).filter(e=>e.name)}:{...n[e],[t]:a};return{...r,meals:n}})},handleEditFormFieldChange:(e,t)=>{f(a=>({...a,[e]:t}))},handleSaveEdit:async()=>{if(c){$(!0);try{const e=o.find(e=>e.id===c.id),t=e?{meals:e.meals,total:e.total,status:e.status,payment:e.payment,deliveryPerson:e.deliveryPerson,type:e.type}:{},r={Efectivo:"Efectivo"===v.payment&&Number(v.total)||0,Daviplata:"Daviplata"===v.payment&&Number(v.total)||0,Nequi:"Nequi"===v.payment&&Number(v.total)||0},i=v.meals.map(e=>{var t,a,r,n,l;const i={soup:e.soup?{name:("string"===typeof e.soup?e.soup:e.soup.name)||""}:null,soupReplacement:e.soupReplacement?{name:("string"===typeof e.soupReplacement?e.soupReplacement:e.soupReplacement.name)||""}:null,principle:Array.isArray(e.principle)?e.principle.map(e=>({name:("string"===typeof e?e:e.name)||""})).filter(e=>e.name):e.principle&&"string"===typeof e.principle?[{name:e.principle}]:[],principleReplacement:e.principleReplacement?{name:("string"===typeof e.principleReplacement?e.principleReplacement:e.principleReplacement.name)||""}:null,protein:e.protein?{name:("string"===typeof e.protein?e.protein:e.protein.name)||""}:null,drink:e.drink?{name:("string"===typeof e.drink?e.drink:e.drink.name)||""}:null,cutlery:e.cutlery?{name:("string"===typeof e.cutlery?e.cutlery:e.cutlery.name)||""}:null,time:e.time?{name:("string"===typeof e.time?e.time:e.time.name)||""}:null,payment:e.payment?{name:("string"===typeof e.payment?e.payment:e.payment.name)||"Efectivo"}:{name:"Efectivo"},sides:Array.isArray(e.sides)?e.sides.map(e=>({name:("string"===typeof e?e:e.name)||""})).filter(e=>e.name):[],additions:Array.isArray(e.additions)?e.additions.map(e=>({name:e.name||"",protein:e.protein||"",replacement:e.replacement||"",quantity:Number(e.quantity)||1})).filter(e=>e.name):[],notes:e.notes||"",address:{address:(null===(t=e.address)||void 0===t?void 0:t.address)||"",phoneNumber:(null===(a=e.address)||void 0===a?void 0:a.phoneNumber)||"",addressType:(null===(r=e.address)||void 0===r?void 0:r.addressType)||"",localName:(null===(n=e.address)||void 0===n?void 0:n.localName)||"",recipientName:(null===(l=e.address)||void 0===l?void 0:l.recipientName)||""}};return Object.fromEntries(Object.entries(i).filter(e=>{let[t,a]=e;return void 0!==a}))}),s={meals:i,total:Number(v.total)||0,status:v.status||"Pendiente",payment:v.payment||"Efectivo",deliveryPerson:v.deliveryPerson||"Sin asignar",paymentSummary:r,updatedAt:new Date,type:v.type||"lunch"},d=Object.fromEntries(Object.entries(s).filter(e=>{let[t,a]=e;return void 0!==a}));await(0,l.mZ)((0,l.H9)(n.db,"breakfast"===c.type?"deliveryBreakfastOrders":"orders",c.id),d),m(null),a("Pedido actualizado correctamente."),le(`Edit\xf3 el pedido con ID: ${c.id}`,{orderId:c.id,previousState:t,newState:{...v,meals:i}})}catch(e){t(`Error al guardar: ${e.message}`)}finally{$(!1)}}},showConfirmDeleteAll:E,setShowConfirmDeleteAll:F,confirmText:D,setConfirmText:O,handleDeleteAllOrders:pe,setError:t,setSuccess:a,showAddOrderModal:K,setShowAddOrderModal:X,newOrderForm:ae,handleNewOrderMealFormFieldChange:(e,t,a)=>{re(r=>{const n=[...r.meals];if(n[e]||(n[e]={address:{},payment:{},time:{}}),t.includes(".")){const[r,l]=t.split(".");n[e]={...n[e],[r]:{...n[e][r],[l]:a}}}else n[e]="sides"===t?{...n[e],sides:a.split(",").map(e=>({name:e.trim()})).filter(e=>e.name)}:"additions"===t?{...n[e],additions:a.split(";").map(e=>{const[t,a="",r="1"]=e.split(",");return{name:t.trim(),[a.includes("por")?"replacement":"protein"]:a.trim(),quantity:Number(r)||1}}).filter(e=>e.name)}:"principle"===t?{...n[e],principle:a.split(",").map(e=>({name:e.trim()})).filter(e=>e.name)}:{...n[e],[t]:a};return{...r,meals:n}})},handleNewOrderFieldChange:(e,t)=>{re(a=>({...a,[e]:t}))},handleAddOrderSubmit:async()=>{$(!0);try{const e=ae.meals.map(e=>({...e,soup:e.soup?{name:e.soup}:null,soupReplacement:e.soupReplacement?{name:e.soupReplacement}:null,principle:Array.isArray(e.principle)?e.principle.map(e=>({name:e.name||e})):e.principle?[{name:e.principle}]:[],principleReplacement:e.principleReplacement?{name:e.principleReplacement}:null,protein:e.protein?{name:e.protein}:null,drink:e.drink?{name:e.drink}:null,cutlery:e.cutlery?{name:e.cutlery}:null,time:e.time?{name:e.time}:null,payment:ae.payment?{name:ae.payment}:{name:"Efectivo"},sides:Array.isArray(e.sides)?e.sides.map(e=>({name:e.name||e})):[],additions:Array.isArray(e.additions)?e.additions.map(e=>({name:e.name||"",protein:e.protein||"",replacement:e.replacement||"",quantity:e.quantity||1})):[]})),t={Efectivo:"Efectivo"===ae.payment&&Number(ae.total)||0,Daviplata:"Daviplata"===ae.payment&&Number(ae.total)||0,Nequi:"Nequi"===ae.payment&&Number(ae.total)||0},r={...ae,meals:e,total:Number(ae.total)||0,status:ae.status||"Pendiente",payment:ae.payment||"Efectivo",deliveryPerson:ae.deliveryPerson||"Sin asignar",paymentSummary:t,createdAt:(0,l.O5)(),type:ae.type||"lunch"},i="breakfast"===ae.type?"deliveryBreakfastOrders":"orders",o=await(0,l.gS)((0,l.rJ)(n.db,i),r);a("Orden agregada correctamente."),le(`Agreg\xf3 una nueva orden (Total: $${ae.total.toLocaleString()})`,{orderId:o.id,newOrderDetails:{...ae,meals:e}}),X(!1),re({meals:[{soup:"",soupReplacement:"",principle:[{name:""}],principleReplacement:"",protein:"",drink:"",cutlery:"",sides:[],additions:[],notes:"",address:{address:"",phoneNumber:"",addressType:"",localName:"",recipientName:""},time:"",payment:"Efectivo"}],total:0,status:"Pendiente",payment:"Efectivo",deliveryPerson:"Sin asignar",type:"lunch"})}catch(e){t(`Error al agregar orden: ${e.message}`)}finally{$(!1)}},uniqueDeliveryPersons:ge}),(0,S.jsx)(P,{theme:i,orders:o,searchTerm:x,setSearchTerm:h,totals:y,isLoading:C,paginatedOrders:me,currentPage:w,totalPages:ce,setCurrentPage:j,itemsPerPage:N,setItemsPerPage:k,deliveryPersons:M,handleEditOrder:ue,handleDeleteOrder:async e=>{$(!0);try{const t=o.find(t=>t.id===e);await(0,l.kd)((0,l.H9)(n.db,"breakfast"===t.type?"deliveryBreakfastOrders":"orders",e)),a("Pedido eliminado correctamente."),t?le(`Elimin\xf3 el pedido con ID: ${e}`,{orderId:e,deletedOrderDetails:{meals:t.meals,total:t.total,status:t.status,payment:t.payment,deliveryPerson:t.deliveryPerson,type:t.type}}):le(`Elimin\xf3 el pedido con ID: ${e} (detalles no disponibles)`)}catch(r){t(`Error al eliminar: ${r.message}`)}finally{$(!1)}},handleStatusChange:async(e,r)=>{try{const t=o.find(t=>t.id===e),i=t?t.status:"Desconocido",s="breakfast"===t.type?"deliveryBreakfastOrders":"orders";if(await(0,l.mZ)((0,l.H9)(n.db,s,e),{status:r,updatedAt:new Date}),"Cancelado"===r&&t&&"Cancelado"!==i){const e=g(t.payment||"Efectivo"),a=t.total||0,r=g(t.deliveryPerson||"");b(t=>{const r={...t};return"efectivo"===e.toLowerCase()?r.cash=Math.max(0,r.cash-a):"daviplata"===e.toLowerCase()?r.daviplata=Math.max(0,r.daviplata-a):"nequi"===e.toLowerCase()&&(r.nequi=Math.max(0,r.nequi-a)),r}),r&&"Sin asignar"!==r&&z(t=>{const n={...t};if(n[r]){const t=n[r];"efectivo"===e.toLowerCase()?t.cash=Math.max(0,t.cash-a):"daviplata"===e.toLowerCase()?t.daviplata=Math.max(0,t.daviplata-a):"nequi"===e.toLowerCase()&&(t.nequi=Math.max(0,t.nequi-a)),t.total=Math.max(0,t.total-a),0===t.total&&delete n[r]}return n})}a("Estado actualizado correctamente."),le(`Actualiz\xf3 el estado del pedido ${e} a: ${r}`,{orderId:e,previousStatus:i,newStatus:r})}catch(i){t(`Error al actualizar estado: ${i.message}`)}},handleSort:e=>{G===e?V("asc"===B?"desc":"asc"):(I(e),V("asc")),j(1)},getSortIcon:e=>G!==e?null:"asc"===B?(0,S.jsx)("svg",{className:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}):(0,S.jsx)("svg",{className:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),setShowMealDetails:L,editingDeliveryId:q,setEditingDeliveryId:R,editForm:v,setEditForm:f,handleDeliveryChange:async(e,r)=>{try{const t=o.find(t=>t.id===e),i="breakfast"===t.type?"deliveryBreakfastOrders":"orders",s=t?t.deliveryPerson:"Desconocido";await(0,l.mZ)((0,l.H9)(n.db,i,e),{deliveryPerson:r||null,updatedAt:new Date}),R(null),a("Domiciliario actualizado correctamente."),le(`Asign\xf3/Actualiz\xf3 domiciliario para el pedido ${e} a: ${r||"Sin asignar"}`,{orderId:e,previousDeliveryPerson:s,newDeliveryPerson:r||"Sin asignar"})}catch(i){t(`Error al actualizar domiciliario: ${i.message}`)}},sortOrder:B,showProteinModal:Y,setShowProteinModal:_,isMenuOpen:Z,setIsMenuOpen:Q,handleOpenPreview:()=>{const e=window.open("","_blank");e.document.write(((e,t,a)=>{var r,n,l;let i=0;const o=e.flatMap(e=>e&&Array.isArray(e.meals)&&0!==e.meals.length?e.meals.filter(e=>e).map(t=>{var a,r,n;return i+=1,[i,(null===t||void 0===t||null===(a=t.address)||void 0===a?void 0:a.address)||"",(null===t||void 0===t||null===(r=t.address)||void 0===r?void 0:r.phoneNumber)||"",`$${(null===(n=e.total)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`,(null===e||void 0===e?void 0:e.deliveryPerson)||""]}):[]);0===o.length&&o.push(Array(5).fill("-"));const s=Object.entries(a).map(e=>{var t,a,r,n;let[l,i]=e;return[l||"",`$${(null===(t=i.cash)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"}`,`$${(null===(a=i.daviplata)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"}`,`$${(null===(r=i.nequi)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`,`$${(null===(n=i.total)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`]}),d=new Date;return`\n    <html>\n      <head>\n        <title>Previsualizaci\xf3n de Pedidos</title>\n        <style>\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\n          h1 { text-align: center; font-size: 24px; }\n          p.date { text-align: center; font-size: 12px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n          th, td { padding: 8px; border: 1px solid black; }\n          th { background-color: #0066cc; color: white; font-weight: bold; }\n          td { text-align: left; }\n          td:nth-child(4) { text-align: right; }\n          tr:nth-child(even) { background-color: #f5f5f5; }\n          .totals-table { width: 50%; }\n          .delivery-table th:nth-child(n+2), .delivery-table td:nth-child(n+2) { text-align: right; }\n          .button-container { margin-top: 20px; text-align: center; }\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\n          .button.print { background-color: #28a745; }\n          @media print {\n              .button-container { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <h1>Gesti\xf3n de Pedidos</h1>\n        <p class="date">Fecha: ${d.toLocaleDateString("es-CO")} ${d.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",hour12:!0})}</p>\n        <table>\n          <thead>\n            <tr>\n              <th>N</th>\n              <th>Direcci\xf3n</th>\n              <th>Tel\xe9fono</th>\n              <th>Total</th>\n              <th>Domiciliario</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${o.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n        <h2 style="margin-top: 20px; font-size: 18px;">Resumen de Totales</h2>\n        <table class="totals-table">\n          <tbody>\n            <tr><td style="padding: 8px;">Total Efectivo</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(null===(r=t.cash)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`:"$0"}</td></tr>\n            <tr><td style="padding: 8px;">Total Daviplata</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(null===(n=t.daviplata)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`:"$0"}</td></tr>\n            <tr><td style="padding: 8px;">Total Nequi</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(null===(l=t.nequi)||void 0===l?void 0:l.toLocaleString("es-CO"))||"0"}`:"$0"}</td></tr>\n            <tr><td style="padding: 8px;">Total General</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(t.cash+t.daviplata+t.nequi||0).toLocaleString("es-CO")}`:"$0"}</td></tr>\n          </tbody>\n        </table>\n        <h2 style="margin-top: 20px; font-size: 18px;">Resumen por Domiciliarios</h2>\n        <table class="delivery-table">\n          <thead>\n            <tr>\n              <th>Domiciliario</th>\n              <th>Efectivo</th>\n              <th>Daviplata</th>\n              <th>Nequi</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${s.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n        <div class="button-container">\n          <button class="button print" onclick="window.print()">Imprimir</button>\n          <button class="button" onclick="window.close()">Cerrar Previsualizaci\xf3n</button>\n        </div>\n      </body>\n    </html>\n  `})(se,y,M)),e.document.close(),le("Abri\xf3 la vista previa de pedidos (PDF)",{type:"PDF Preview"})},handleOpenExcelPreview:()=>{const e=window.open("","_blank");e.document.write(function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=0;const i=e.map(e=>{var t,a,r,n,i,o;l+=1;const s=(null===(t=e.meals)||void 0===t?void 0:t[0])||{},d=(null===(a=e.payment)||void 0===a?void 0:a.name)||e.payment||(null===s||void 0===s||null===(r=s.payment)||void 0===r?void 0:r.name)||(null===s||void 0===s?void 0:s.payment)||"Efectivo";return[l,(null===s||void 0===s||null===(n=s.address)||void 0===n?void 0:n.address)||"",(null===s||void 0===s||null===(i=s.address)||void 0===i?void 0:i.phoneNumber)||"",`$${(null===(o=e.total)||void 0===o?void 0:o.toLocaleString("es-CO"))||"0"}`,d,(null===e||void 0===e?void 0:e.deliveryPerson)||""]});0===i.length&&i.push(Array(6).fill("-"));const o=Object.entries(a).map(e=>{var t,a,r,n;let[l,i]=e;return[l||"",`$${(null===(t=i.cash)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"}`,`$${(null===(a=i.daviplata)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"}`,`$${(null===(r=i.nequi)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`,`$${(null===(n=i.total)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`]}),s=0===n.length?[["-","-"]]:n.map((e,t)=>{var a;const l=t===n.length-2,i=t===n.length-1;return[e.name||"Sin nombre",(null===(a=e.quantity)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0",l?"TOTAL PROTE\xcdNAS:":i?"Fecha actual:":"",l?r.toLocaleString("es-CO"):i?(new Date).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}):""]}),d={cash:t.cash||0,daviplata:t.daviplata||0,nequi:t.nequi||0},c=d.cash+d.daviplata+d.nequi;return`\n    <html>\n      <head>\n        <title>Previsualizaci\xf3n de Excel</title>\n        <style>\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\n          h1 { text-align: center; font-size: 24px; }\n          table { width: 100%; border-collapse: collapse; }\n          th, td { padding: 8px; border: 1px solid black; }\n          th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\n          td { text-align: left; vertical-align: middle; }\n          td:nth-child(4), td:nth-child(6) { text-align: right; }\n          tr:nth-child(even) { background-color: #f5f5f5; }\n          .totals-table { width: 50%; margin-left: auto; margin-right: auto; }\n\n          .proteins-container { width: auto; margin: 0 auto; max-width: 700px; }\n          .proteins-table {\n            border-collapse: collapse;\n            font-size: 14px;\n            width: 100%;\n            max-width: 700px;\n          }\n          .proteins-table th, .proteins-table td {\n            padding: 6px 12px;\n            border: 1px solid black;\n            white-space: nowrap;\n          }\n          .proteins-table th:nth-child(1), .proteins-table td:nth-child(1) { width: 160px; text-align: left; }\n          .proteins-table th:nth-child(2), .proteins-table td:nth-child(2) { width: 80px; text-align: right; }\n          .proteins-table th:nth-child(3), .proteins-table td:nth-child(3) { width: 220px; text-align: left; }\n\n          .delivery-table th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\n          .delivery-table .green-header th { background-color: #28a745; }\n          .delivery-table td:nth-child(n+2) { text-align: right; }\n\n          .spacer { height: 16px; }\n          .button-container { margin-top: 20px; text-align: center; }\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\n          .button.print { background-color: #28a745; }\n          @media print { .button-container { display: none; } }\n        </style>\n      </head>\n      <body>\n        <h1>Gesti\xf3n de Pedidos</h1>\n        <div class="spacer"></div>\n\n        <div class="proteins-container">\n          <table class="proteins-table" aria-label="Resumen de prote\xednas">\n            <thead>\n              <tr>\n                <th style="background-color: #0066cc; color: white; border: 1px solid black;">Prote\xedna</th>\n                <th style="background-color: #0066cc; color: white; border: 1px solid black;">Unidades</th>\n                <th style="background-color: #0066cc; color: white; border: 1px solid black;"></th>\n              </tr>\n            </thead>\n            <tbody>\n              ${s.map((e,t)=>{const a=e[2]?`\n                  <td style="padding: 0;">\n                    <div style="display: flex; width: 100%; height: 100%;">\n                      <div style="flex: 1; padding: 6px 12px; font-weight: bold; display: flex; align-items: center;">${e[2]}</div>\n                      <div style="width: 1px; background-color: black;"></div>\n                      <div style="flex: 1; padding: 6px 12px; display: flex; justify-content: flex-end; align-items: center; font-weight: ${"TOTAL PROTE\xcdNAS:"===e[2]?"bold":"normal"};">${e[3]}</div>\n                    </div>\n                  </td>\n                `:'<td style="border: none; background-color: white;"></td>';return`\n                  <tr>\n                    <td title="${e[0]}">${e[0]}</td>\n                    <td style="text-align: right;">${e[1]}</td>\n                    ${a}\n                  </tr>\n                `}).join("")}\n            </tbody>\n          </table>\n        </div>\n\n        <div class="spacer"></div><div class="spacer"></div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>N</th>\n              <th>Direcci\xf3n</th>\n              <th>Tel\xe9fono</th>\n              <th>Total</th>\n              <th>M\xe9todo de Pago</th>\n              <th>Domiciliario</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${i.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n                <td>${e[5]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n\n        <div class="spacer"></div><div class="spacer"></div>\n\n        <table class="totals-table">\n          <thead>\n            <tr><th colspan="2">Resumen de Totales</th></tr>\n          </thead>\n          <tbody>\n            <tr><td>Total Efectivo</td><td style="text-align: right;">$${d.cash.toLocaleString("es-CO")}</td></tr>\n            <tr><td>Total Daviplata</td><td style="text-align: right;">$${d.daviplata.toLocaleString("es-CO")}</td></tr>\n            <tr><td>Total Nequi</td><td style="text-align: right;">$${d.nequi.toLocaleString("es-CO")}</td></tr>\n            <tr><td>Total General</td><td style="text-align: right;">$${c.toLocaleString("es-CO")}</td></tr>\n          </tbody>\n        </table>\n\n        <div class="spacer"></div><div class="spacer"></div>\n\n        <table class="delivery-table">\n          <thead>\n            <tr><th colspan="5">Resumen por Domiciliarios</th></tr>\n            <tr class="green-header">\n              <th>Domiciliario</th>\n              <th>Efectivo</th>\n              <th>Daviplata</th>\n              <th>Nequi</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${o.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n\n        <div class="button-container">\n          <button class="button print" onclick="window.print()">Imprimir</button>\n          <button class="button" onclick="window.close()">Cerrar Previsualizaci\xf3n</button>\n          <button class="button" onclick="window.opener.postMessage('downloadExcel', '*')">Descargar Excel</button>\n        </div>\n      </body>\n    </html>\n  `}(se,y,M,ne,U)),e.document.close(),le("Abri\xf3 la vista previa de pedidos (Excel)",{type:"Excel Preview"})},handleExport:(e,r)=>{try{e(o,y,M,ne,U),a(`Exportado correctamente como ${r}.`),le(`Export\xf3 pedidos como ${r}`,{format:r})}catch(n){console.error(`Error al exportar ${r}:`,n),t(`Error al exportar ${r}: ${n.message}`)}},handleDeleteAllOrders:pe,setShowConfirmDeleteAll:F,exportToExcel:s,exportToPDF:u,exportToCSV:p,setShowAddOrderModal:X,orderTypeFilter:ee,setOrderTypeFilter:te,uniqueDeliveryPersons:ge}),(0,S.jsxs)("div",{className:"mt-8 p-6 rounded-2xl shadow-xl border "+("dark"===i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,S.jsx)("h3",{className:"text-xl font-semibold mb-4 "+("dark"===i?"text-gray-100":"text-gray-900"),children:"Resumen por Domiciliarios"}),(0,S.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===Object.entries(M).length?(0,S.jsx)("p",{className:""+("dark"===i?"text-gray-400":"text-gray-600"),children:"No hay domiciliarios asignados a\xfan."}):Object.entries(M).map(e=>{let[t,a]=e;return(0,S.jsxs)("div",{className:"p-4 rounded-lg shadow-md "+("dark"===i?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"),children:[(0,S.jsx)("h4",{className:"font-semibold text-lg mb-2",children:t}),(0,S.jsxs)("p",{children:["Efectivo: ",(0,S.jsxs)("span",{className:"font-bold",children:["$",a.cash.toLocaleString()]})]}),(0,S.jsxs)("p",{children:["Daviplata: ",(0,S.jsxs)("span",{className:"font-bold",children:["$",a.daviplata.toLocaleString()]})]}),(0,S.jsxs)("p",{children:["Nequi: ",(0,S.jsxs)("span",{className:"font-bold",children:["$",a.nequi.toLocaleString()]})]}),(0,S.jsxs)("p",{className:"font-bold mt-2",children:["Total: ",(0,S.jsxs)("span",{className:"text-green-400",children:["$",a.total.toLocaleString()]})]})]},t)})})]})]})}},6568:(e,t,a)=>{function r(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{x:()=>r})}}]);
//# sourceMappingURL=734.1bc3cdb6.chunk.js.map