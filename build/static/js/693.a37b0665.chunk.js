"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[693],{2693:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ae});var r=a(5043),s=a(1958),l=a(458),i=a(5472),o=a(1283),n=a(6568),d=a(7015),c=a(9795),x=a(1419),m=a(3062),u=a(7118),g=a(4537),h=a(7856),y=a(9855),p=a(614);const b="pendiente",f="entregado",v="cancelado",j={[b]:"Pendientes",[f]:"Entregados",[v]:"Cancelados"},w="#22c55e",N="#ef4444",D="#3b82f6",k=["#fbbf24","#4ade80","#ef4444","#60a5fa","#a78bfa"],S="Ingresos",C="PedidosDiariosGuardados",E=(e,t,a)=>{const r=new Date;r.setHours(0,0,0,0);let s=new Date(r),l=new Date(r);switch(l.setHours(23,59,59,999),e){case"7_days":default:s.setDate(r.getDate()-6);break;case"30_days":s=new Date(r.getFullYear(),r.getMonth(),1),l=new Date(r.getFullYear(),r.getMonth()+1,0),l.setHours(23,59,59,999);break;case"year":s=new Date(r.getFullYear(),0,1),l=new Date(r.getFullYear(),11,31),l.setHours(23,59,59,999);break;case"custom":s=t?new Date(t):null,s&&s.setHours(0,0,0,0),l=a?new Date(a):null,l&&l.setHours(23,59,59,999)}return{startDate:s,endDate:l}};var A=a(5323),T=a(108),F=a(1474),O=a(7734),$=a(2185),M=a(760),I=a(379),G=a(95),P=a(7136),z=a(6992),q=a(6102),_=a(7869),J=a(2647),L=a(5686),K=a(8693),Y=a(5469),V=a(1990),R=a(4919),H=a(4645),B=a(2319),Q=a(579);const W=e=>{let{type:t,theme:a,isMobile:r}=e;if("bar"===t){const e=r?5:7;return(0,Q.jsx)("div",{className:"flex h-full items-end justify-around p-4 animate-pulse",children:Array.from({length:e}).map((t,r)=>(0,Q.jsx)("div",{className:(0,n.x)("rounded-t-md","dark"===a?"bg-gray-700":"bg-gray-200","mx-1"),style:{width:100/e-5+"%",height:70*Math.random()+30+"%"}},r))})}return"pie"===t?(0,Q.jsx)("div",{className:"flex justify-center items-center h-full animate-pulse",children:(0,Q.jsx)("div",{className:(0,n.x)(r?"w-32 h-32":"w-40 h-40","rounded-full","dark"===a?"bg-gray-700":"bg-gray-200")})}):null},Z=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),U=e=>{let{active:t,payload:a,label:r,theme:s,chartTextColor:l,copFormatter:i,isOrderChart:o=!1}=e;if(t&&a&&a.length){const e=a.reduce((e,t)=>e+t.value,0),t=o?e=>e.toLocaleString():e=>"function"===typeof i?i(e):i.format(e);return(0,Q.jsxs)(A.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"custom-tooltip p-3 rounded-xl shadow-lg border",style:{backgroundColor:"dark"===s?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:"dark"===s?"rgba(75, 85, 99, 0.7)":"rgba(229, 231, 235, 0.7)",backdropFilter:"blur(8px)",color:l,fontSize:"14px"},children:[(0,Q.jsx)("p",{className:"font-bold mb-1",children:r}),a.map((e,a)=>(0,Q.jsxs)("p",{style:{color:e.color||l},children:[e.name,": ",(0,Q.jsx)("span",{className:"font-semibold",children:t(e.value)})]},`item-${a}`)),(0,Q.jsxs)("p",{className:"font-bold mt-2 border-t pt-2",style:{borderColor:"dark"===s?"#4b5563":"#e5e7eb"},children:["Total: ",t(e)]})]})}return null},X=e=>{let{active:t,payload:a,theme:r,chartTextColor:s}=e;if(t&&a&&a.length){const e=a[0].payload;return(0,Q.jsxs)(A.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"custom-tooltip p-3 rounded-xl shadow-lg border",style:{backgroundColor:"dark"===r?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:"dark"===r?"rgba(75, 85, 99, 0.7)":"rgba(229, 231, 235, 0.7)",backdropFilter:"blur(8px)",color:s,fontSize:"14px"},children:[(0,Q.jsx)("p",{className:"font-bold mb-1",style:{color:e.color||s},children:e.name}),(0,Q.jsxs)("p",{children:["Valor: ",(0,Q.jsx)("span",{className:"font-semibold",children:e.value})]}),(0,Q.jsxs)("p",{children:["Porcentaje: ",(0,Q.jsx)("span",{className:"font-semibold",children:`${(100*e.percent).toFixed(1)}%`})]})]})}return null},ee=r.memo(e=>{let{dailySalesChartData:t,dailyOrdersChartData:a,statusPieChartData:l,theme:o="dark",chartTextColor:c="#ffffff",salesFilterRange:x,setSalesFilterRange:u=()=>{},salesCustomStartDate:g,setSalesCustomStartDate:h=()=>{},salesCustomEndDate:p,setSalesCustomEndDate:b=()=>{},ordersFilterRange:f,setOrdersFilterRange:v=()=>{},ordersCustomStartDate:j,setOrdersCustomStartDate:S=()=>{},ordersCustomEndDate:C,setOrdersCustomEndDate:E=()=>{},handleSaveDailyIngresos:ee=()=>{},handleDeleteDailyIngresos:te=()=>{},handleSaveDailyOrders:ae=()=>{},handleDeleteDailyOrders:re=()=>{},handleSaveDailyExpenses:se=()=>{},handleDeleteDailyExpenses:le=()=>{},loading:ie,selectedMonth:oe,setSelectedMonth:ne=()=>{}}=e;const[de,ce]=(0,r.useState)(!1),[xe,me]=(0,r.useState)([]),[ue,ge]=(0,r.useState)("30_days"),[he,ye]=(0,r.useState)(null),[pe,be]=(0,r.useState)(null),[fe,ve]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=(0,i.P)((0,i.rJ)(s.db,"payments"),(0,i.My)("timestamp","desc")),t=(0,i.aQ)(e,e=>{me(e.docs.map(e=>({id:e.id,...e.data()})))},e=>console.error(`Error al cargar pagos: ${e.message}`));return()=>t()},[]),(0,r.useEffect)(()=>{const e=()=>{ce((0,B.Fr)())};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const je=(0,r.useMemo)(()=>{const e=xe.reduce((e,t)=>{if(!t.timestamp)return e;const a=new Date(t.timestamp.toDate()),r=new Date;let s;if(s="7_days"===ue?new Date(r.setDate(r.getDate()-7)):"30_days"===ue?new Date(r.setDate(r.getDate()-30)):"year"===ue?new Date(r.getFullYear(),0,1):"custom"===ue&&he&&pe?new Date(he):new Date(0),"custom"===ue&&pe){const t=new Date(pe);if(a<s||a>t)return e}else if(a<s)return e;const l=a.toISOString().split("T")[0];return e[l]||(e[l]={name:l,Total:0}),e[l].Total+=t.amount,e},{});return Object.values(e).sort((e,t)=>new Date(e.name)-new Date(t.name))},[xe,ue,he,pe]),we=(0,r.useMemo)(()=>xe.reduce((e,t)=>e+t.amount,0),[xe]),Ne=(0,r.useMemo)(()=>l.reduce((e,t)=>e+t.value,0),[l]),De=(0,r.useMemo)(()=>{const e=xe.reduce((e,t)=>{const a=t.store||"Desconocido";return e[a]||(e[a]={totalAmount:0,payments:[]}),e[a].totalAmount+=t.amount,e[a].payments.push(t),e},{});return Object.entries(e).map(e=>{let[t,a]=e;return{store:t,...a}}).sort((e,t)=>t.totalAmount-e.totalAmount)},[xe]),ke=(0,r.useMemo)(()=>fe?xe.filter(e=>e.store===fe).sort((e,t)=>t.timestamp.toDate()-e.timestamp.toDate()):[],[xe,fe]),Se={hidden:{opacity:0,scale:.98,y:10},visible:{opacity:1,scale:1,y:0,transition:{duration:.6,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:10,transition:{duration:.4,ease:"easeIn"}}},Ce=de?"min-w-[700px]":"min-w-0",Ee=de?"h-[250px]":"h-[300px]";return(0,Q.jsxs)("div",{className:"flex flex-col gap-12 mb-8 px-4 sm:px-6 lg:px-8 pb-12",children:[(0,Q.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background: var(--scrollbar-track-color, #2d3748);\n    border-radius: 10px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background: var(--scrollbar-thumb-color, #4a5568);\n    border-radius: 10px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: var(--scrollbar-thumb-hover-color, #64748b);\n  }\n  .custom-scrollbar {\n    scrollbar-width: thin;\n    scrollbar-color: var(--scrollbar-thumb-color, #4a5568) var(--scrollbar-track-color, #2d3748);\n  }\n"}}),(0,Q.jsxs)("div",{className:(0,n.x)("dark"===o?"bg-gray-800":"bg-white",de?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===o?"border-gray-700":"border-gray-200","relative min-h-[450px] flex flex-col"),children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Q.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center",children:[(0,Q.jsx)(m.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-green-400")}),"Ingresos Diarios"]}),(0,Q.jsxs)(H.AM,{className:"relative",children:[(0,Q.jsx)(H.ut,{className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:(0,Q.jsx)(L.A,{className:(0,n.x)(de?"w-4 h-4":"w-5 h-5","text-gray-400")})}),(0,Q.jsx)(d.e,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,Q.jsx)(H.QT,{className:(0,n.x)("absolute z-50 mt-2","right-0 left-auto",de?"w-[150px] text-sm":"w-56","rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","dark"===o?"bg-gray-700":"bg-white","origin-top-right","max-h-[80vh] overflow-y-auto custom-scrollbar"),children:(0,Q.jsxs)("div",{className:"py-1",children:[(0,Q.jsxs)("button",{onClick:ee,disabled:ie,className:(0,n.x)("block w-full text-left px-4 py-2 flex items-center transition-colors",de?"text-xs":"text-sm",ie?"text-gray-400 cursor-not-allowed":"dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,Q.jsx)(K.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-blue-400")}),ie?"Guardando...":"Guardar Ventas del D\xeda"]}),(0,Q.jsxs)("button",{onClick:()=>te(),disabled:ie,className:(0,n.x)("block w-full text-left px-4 py-2 flex items-center mt-1 transition-colors",de?"text-xs":"text-sm",ie?"text-gray-400 cursor-not-allowed":"dark"===o?"text-red-300 hover:bg-gray-600":"text-red-600 hover:bg-gray-100"),children:[(0,Q.jsx)(y.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-red-400")}),"Eliminar Ventas del D\xeda"]}),(0,Q.jsx)("div",{className:(0,n.x)("my-1","dark"===o?"border-t border-gray-600":"border-t border-gray-200")}),(0,Q.jsx)("button",{onClick:()=>{u("7_days"),h(null),b(null),ne(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver \xfaltimos 7 d\xedas"}),(0,Q.jsx)("button",{onClick:()=>{u("30_days"),h(null),b(null),ne(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el mes"}),(0,Q.jsx)("button",{onClick:()=>{u("year"),h(null),b(null),ne(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el a\xf1o"}),(0,Q.jsx)("div",{className:(0,n.x)("my-1","dark"===o?"border-t border-gray-600":"border-t border-gray-200")}),(0,Q.jsx)("div",{className:(0,n.x)("px-4 py-2 font-medium text-gray-400",de?"text-xs":"text-sm"),children:"Filtros personalizados"}),(0,Q.jsxs)("div",{className:"px-4 py-2",children:[(0,Q.jsx)("label",{className:(0,n.x)("block font-medium text-gray-400 mb-1",de?"text-xs":"text-sm"),children:"Desde:"}),(0,Q.jsx)("input",{type:"date",value:g?g.toISOString().split("T")[0]:"",onChange:e=>{h(new Date(e.target.value)),u("custom"),ne(null)},className:(0,n.x)("block w-full rounded-md shadow-sm p-2",de?"text-xs sm:text-sm":"text-sm","dark"===o?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]}),(0,Q.jsxs)("div",{className:"px-4 py-2",children:[(0,Q.jsx)("label",{className:(0,n.x)("block font-medium text-gray-400 mb-1",de?"text-xs":"text-sm"),children:"Hasta:"}),(0,Q.jsx)("input",{type:"date",value:p?p.toISOString().split("T")[0]:"",onChange:e=>{b(new Date(e.target.value)),u("custom")},className:(0,n.x)("block w-full rounded-md shadow-sm p-2",de?"text-xs sm:text-sm":"text-sm","dark"===o?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]})]})})})]})]}),(0,Q.jsxs)(A.P.div,{className:(0,n.x)(de?"overflow-x-auto overflow-y-hidden custom-scrollbar":"overflow-x-hidden overflow-y-hidden","relative flex flex-col flex-grow"),variants:Se,initial:"hidden",animate:"visible",exit:"exit",children:["year"===x&&oe&&(0,Q.jsxs)(A.P.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>ne(null),className:"mb-4 text-blue-500 hover:underline text-sm self-start transition-all duration-200",children:[(0,Q.jsx)(Y.A,{className:"w-4 h-4 inline-block mr-2"}),"Volver al resumen anual"]}),ie?(0,Q.jsx)(W,{type:"bar",theme:o,isMobile:de}):(0,Q.jsx)("div",{className:(0,n.x)("w-full",Ee,Ce),children:(0,Q.jsx)(T.u,{width:"100%",height:"100%",children:(0,Q.jsxs)(F.E,{data:t,margin:{top:20,right:30,left:20,bottom:20},barCategoryGap:de?"0%":"40%",barGap:1,children:[(0,Q.jsx)(O.d,{strokeDasharray:de?"2 2":"3 3",stroke:"dark"===o?"#4b5563":"#e5e7eb",vertical:!1}),(0,Q.jsx)($.W,{dataKey:"name",stroke:c,tick:{fill:c,fontSize:de?9:11},angle:-45,textAnchor:"end",interval:0,height:60}),(0,Q.jsx)(M.h,{stroke:c,tick:{fill:c,fontSize:de?9:11},tickFormatter:e=>Z.format(e),width:de?50:80}),(0,Q.jsx)(I.m,{cursor:{fill:"dark"===o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",rx:4},content:(0,Q.jsx)(U,{theme:o,chartTextColor:c,copFormatter:Z})}),(0,Q.jsx)(G.s,{wrapperStyle:{color:c,fontSize:de?10:13,paddingTop:"15px",paddingBottom:"20px"},align:"center",verticalAlign:"top",iconType:"circle"}),(0,Q.jsx)(P.y,{dataKey:"Efectivo",fill:w,stroke:w,radius:[8,8,0,0],maxBarSize:de?12:25,animationDuration:800,onClick:e=>{"year"===x&&e.monthKey&&ne(e.monthKey)}}),(0,Q.jsx)(P.y,{dataKey:"Daviplata",fill:N,stroke:N,radius:[8,8,0,0],maxBarSize:de?12:25,animationDuration:800,onClick:e=>{"year"===x&&e.monthKey&&ne(e.monthKey)}}),(0,Q.jsx)(P.y,{dataKey:"Nequi",fill:D,stroke:D,radius:[8,8,0,0],maxBarSize:de?12:25,animationDuration:800,onClick:e=>{"year"===x&&e.monthKey&&ne(e.monthKey)}})]})})})]})]}),(0,Q.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,Q.jsxs)("div",{className:(0,n.x)("dark"===o?"bg-gray-800":"bg-white",de?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===o?"border-gray-700":"border-gray-200","relative min-h-[350px] flex flex-col"),children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Q.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center",children:[(0,Q.jsx)(m.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-red-400")}),"Gastos Diarios"]}),(0,Q.jsxs)(H.AM,{className:"relative",children:[(0,Q.jsx)(H.ut,{className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:(0,Q.jsx)(L.A,{className:(0,n.x)(de?"w-4 h-4":"w-5 h-5","text-gray-400")})}),(0,Q.jsx)(d.e,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,Q.jsx)(H.QT,{className:(0,n.x)("absolute z-50 mt-2","right-0 left-auto",de?"w-[150px] text-sm":"w-56","rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","dark"===o?"bg-gray-700":"bg-white","origin-top-right","max-h-[80vh] overflow-y-auto custom-scrollbar"),children:(0,Q.jsxs)("div",{className:"py-1",children:[(0,Q.jsxs)("button",{onClick:se,disabled:ie,className:(0,n.x)("block w-full text-left px-4 py-2 flex items-center transition-colors",de?"text-xs":"text-sm",ie?"text-gray-400 cursor-not-allowed":"dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,Q.jsx)(K.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-blue-400")}),ie?"Guardando...":"Guardar Gastos del D\xeda"]}),(0,Q.jsxs)("button",{onClick:()=>le(),disabled:ie,className:(0,n.x)("block w-full text-left px-4 py-2 flex items-center mt-1 transition-colors",de?"text-xs":"text-sm",ie?"text-gray-400 cursor-not-allowed":"dark"===o?"text-red-300 hover:bg-gray-600":"text-red-600 hover:bg-gray-100"),children:[(0,Q.jsx)(y.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-red-400")}),"Eliminar Gastos del D\xeda"]}),(0,Q.jsx)("div",{className:(0,n.x)("my-1","dark"===o?"border-t border-gray-600":"border-t border-gray-200")}),(0,Q.jsx)("button",{onClick:()=>{ge("7_days"),ye(null),be(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver \xfaltimos 7 d\xedas"}),(0,Q.jsx)("button",{onClick:()=>{ge("30_days"),ye(null),be(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el mes"}),(0,Q.jsx)("button",{onClick:()=>{ge("year"),ye(null),be(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el a\xf1o"}),(0,Q.jsx)("div",{className:(0,n.x)("my-1","dark"===o?"border-t border-gray-600":"border-t border-gray-200")}),(0,Q.jsx)("div",{className:(0,n.x)("px-4 py-2 font-medium text-gray-400",de?"text-xs":"text-sm"),children:"Filtros personalizados"}),(0,Q.jsxs)("div",{className:"px-4 py-2",children:[(0,Q.jsx)("label",{className:(0,n.x)("block font-medium text-gray-400 mb-1",de?"text-xs":"text-sm"),children:"Desde:"}),(0,Q.jsx)("input",{type:"date",value:he?he.toISOString().split("T")[0]:"",onChange:e=>{ye(new Date(e.target.value)),ge("custom")},className:(0,n.x)("block w-full rounded-md shadow-sm p-2",de?"text-xs sm:text-sm":"text-sm","dark"===o?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]}),(0,Q.jsxs)("div",{className:"px-4 py-2",children:[(0,Q.jsx)("label",{className:(0,n.x)("block font-medium text-gray-400 mb-1",de?"text-xs":"text-sm"),children:"Hasta:"}),(0,Q.jsx)("input",{type:"date",value:pe?pe.toISOString().split("T")[0]:"",onChange:e=>{be(new Date(e.target.value)),ge("custom")},className:(0,n.x)("block w-full rounded-md shadow-sm p-2",de?"text-xs sm:text-sm":"text-sm","dark"===o?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]})]})})})]})]}),(0,Q.jsx)(A.P.div,{className:(0,n.x)(de?"overflow-x-auto overflow-y-hidden custom-scrollbar":"overflow-x-hidden overflow-y-hidden","relative flex flex-col flex-grow"),variants:Se,initial:"hidden",animate:"visible",exit:"exit",children:ie?(0,Q.jsx)(W,{type:"bar",theme:o,isMobile:de}):(0,Q.jsx)("div",{className:(0,n.x)("w-full",Ee,Ce),children:(0,Q.jsx)(T.u,{width:"100%",height:"100%",children:(0,Q.jsxs)(F.E,{data:je,margin:{top:20,right:30,left:20,bottom:20},barCategoryGap:de?"0%":"40%",barGap:1,children:[(0,Q.jsx)(O.d,{strokeDasharray:de?"2 2":"3 3",stroke:"dark"===o?"#4b5563":"#e5e7eb",vertical:!1}),(0,Q.jsx)($.W,{dataKey:"name",stroke:c,tick:{fill:c,fontSize:de?9:11},angle:-45,textAnchor:"end",interval:0,height:60}),(0,Q.jsx)(M.h,{stroke:c,tick:{fill:c,fontSize:de?9:11},tickFormatter:e=>Z.format(e),width:de?50:80}),(0,Q.jsx)(I.m,{cursor:{fill:"dark"===o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",rx:4},content:(0,Q.jsx)(U,{theme:o,chartTextColor:c,copFormatter:Z})}),(0,Q.jsx)(G.s,{wrapperStyle:{color:c,paddingTop:"15px",fontSize:de?10:13},align:"center",verticalAlign:"top",iconType:"circle"}),(0,Q.jsx)(P.y,{dataKey:"Total",fill:"#EF4444",stroke:"#EF4444",radius:[8,8,0,0],maxBarSize:de?12:25,animationDuration:800})]})})})})]}),(0,Q.jsxs)(A.P.div,{className:(0,n.x)(`bg-${"dark"===o?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl border border-${"dark"===o?"gray-700":"gray-200"}`),variants:Se,initial:"hidden",animate:"visible",exit:"exit",children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,Q.jsx)("h3",{className:"text-2xl font-bold text-gray-100",children:"Gastos"}),(0,Q.jsx)(m.A,{className:"text-red-400 w-10 h-10 animate-pulse"})]}),(0,Q.jsxs)("div",{className:"space-y-4 text-base text-gray-300",children:[(0,Q.jsxs)("div",{className:"flex justify-between items-center text-xl font-semibold",children:[(0,Q.jsx)("span",{className:"text-gray-200",children:"Total de Gastos:"}),(0,Q.jsx)("span",{className:"font-extrabold text-red-400",children:Z.format(we)})]}),(0,Q.jsx)("div",{className:"border-t border-dashed my-4",style:{borderColor:"dark"===o?"#4b5563":"#d1d5db"}}),fe?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("button",{onClick:()=>ve(null),className:"flex items-center text-blue-400 hover:underline text-sm mb-4 transition-colors",children:[(0,Q.jsx)(Y.A,{className:"w-4 h-4 mr-2"})," Volver a Gastos por Remitente"]}),(0,Q.jsx)("h4",{className:"text-lg font-semibold text-gray-200 mb-3",children:fe}),(0,Q.jsx)("div",{className:(0,n.x)("text-sm max-h-52 overflow-y-auto custom-scrollbar pr-2",de?"overflow-x-auto":"overflow-x-hidden"),children:(0,Q.jsx)("div",{className:"min-w-full inline-block align-middle",children:0===ke.length?(0,Q.jsx)("p",{className:"text-gray-500 text-center py-6",children:"No hay movimientos para este remitente en el rango de fechas seleccionado."}):ke.map((e,t)=>{var a;return(0,Q.jsxs)("div",{className:"flex items-center py-3 border-b last:border-b-0 transition-colors duration-200 hover:bg-gray-700 dark:hover:bg-gray-800 rounded-md px-2 -mx-2",style:{borderColor:"dark"===o?"#374151":"#e5e7eb"},children:[(0,Q.jsx)("span",{className:"text-gray-400 font-normal mr-3 min-w-[80px]",children:e.name||"N/A"}),(0,Q.jsx)("span",{className:"text-gray-300 font-light text-nowrap mr-3 min-w-[150px]",children:new Date(null===(a=e.timestamp)||void 0===a?void 0:a.toDate()).toLocaleString("es-CO",{dateStyle:"short",timeStyle:"short"})}),(0,Q.jsx)("span",{className:"text-red-300 font-semibold text-right flex-grow",children:Z.format(e.amount)})]},t)})})})]}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Gastos por Remitente:"}),(0,Q.jsx)("div",{className:"text-sm max-h-52 overflow-y-auto custom-scrollbar pr-2",children:0===De.length?(0,Q.jsx)("p",{className:"text-gray-500 text-center py-6",children:"A\xfan no hay gastos registrados. \xa1Empieza a a\xf1adir algunos! \ud83d\udcdd"}):De.map((e,t)=>(0,Q.jsxs)("button",{onClick:()=>ve(e.store),className:"flex justify-between items-center w-full py-3 border-b last:border-b-0 transition-colors duration-200 hover:bg-gray-700 dark:hover:bg-gray-800 rounded-md px-2 -mx-2 cursor-pointer",style:{borderColor:"dark"===o?"#374151":"#e5e7eb"},children:[(0,Q.jsx)("span",{className:"text-gray-300 flex-1 pr-3 truncate text-left font-medium",children:e.store}),(0,Q.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Q.jsx)("span",{className:"text-red-300 font-semibold",children:Z.format(e.totalAmount)}),(0,Q.jsxs)("span",{className:"text-gray-500 text-xs mt-1",children:["(",e.payments.length," movimientos)"]})]})]},t))})]})]})]})]}),(0,Q.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,Q.jsxs)("div",{className:(0,n.x)("dark"===o?"bg-gray-800":"bg-white",de?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===o?"border-gray-700":"border-gray-200","relative min-h-[350px] flex flex-col"),children:[(0,Q.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center justify-between",children:[(0,Q.jsxs)("span",{className:"flex items-center",children:[(0,Q.jsx)(V.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-purple-400")}),"Pedidos Diarios"]}),(0,Q.jsxs)(H.AM,{className:"relative",children:[(0,Q.jsx)(H.ut,{className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:(0,Q.jsx)(L.A,{className:(0,n.x)(de?"w-4 h-4":"w-5 h-5","text-gray-400")})}),(0,Q.jsx)(d.e,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,Q.jsx)(H.QT,{className:(0,n.x)("absolute z-50 mt-2","right-0 left-auto",de?"w-[150px] text-sm":"w-56","rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","dark"===o?"bg-gray-700":"bg-white","origin-top-right","max-h-[80vh] overflow-y-auto custom-scrollbar"),children:(0,Q.jsxs)("div",{className:"py-1",children:[(0,Q.jsxs)("button",{onClick:ae,disabled:ie,className:(0,n.x)("block w-full text-left px-4 py-2 flex items-center transition-colors",de?"text-xs":"text-sm",ie?"text-gray-400 cursor-not-allowed":"dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,Q.jsx)(K.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-blue-400")}),ie?"Guardando...":"Guardar Pedidos del D\xeda"]}),(0,Q.jsxs)("button",{onClick:()=>re(),disabled:ie,className:(0,n.x)("block w-full text-left px-4 py-2 flex items-center mt-1 transition-colors",de?"text-xs":"text-sm",ie?"text-gray-400 cursor-not-allowed":"dark"===o?"text-red-300 hover:bg-gray-600":"text-red-600 hover:bg-gray-100"),children:[(0,Q.jsx)(y.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-red-400")}),"Eliminar Pedidos del D\xeda"]}),(0,Q.jsx)("div",{className:(0,n.x)("my-1","dark"===o?"border-t border-gray-600":"border-t border-gray-200")}),(0,Q.jsx)("button",{onClick:()=>{v("7_days"),S(null),E(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver \xfaltimos 7 d\xedas"}),(0,Q.jsx)("button",{onClick:()=>{v("30_days"),S(null),E(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el mes"}),(0,Q.jsx)("button",{onClick:()=>{v("year"),S(null),E(null)},className:(0,n.x)("block w-full text-left px-4 py-2 transition-colors",de?"text-xs":"text-sm","dark"===o?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el a\xf1o"}),(0,Q.jsx)("div",{className:(0,n.x)("my-1","dark"===o?"border-t border-gray-600":"border-t border-gray-200")}),(0,Q.jsx)("div",{className:(0,n.x)("px-4 py-2 font-medium text-gray-400",de?"text-xs":"text-sm"),children:"Filtros personalizados"}),(0,Q.jsxs)("div",{className:"px-4 py-2",children:[(0,Q.jsx)("label",{className:(0,n.x)("block font-medium text-gray-400 mb-1",de?"text-xs":"text-sm"),children:"Desde:"}),(0,Q.jsx)("input",{type:"date",value:j?j.toISOString().split("T")[0]:"",onChange:e=>{S(new Date(e.target.value)),v("custom")},className:(0,n.x)("block w-full rounded-md shadow-sm p-2",de?"text-xs sm:text-sm":"text-sm","dark"===o?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]}),(0,Q.jsxs)("div",{className:"px-4 py-2",children:[(0,Q.jsx)("label",{className:(0,n.x)("block font-medium text-gray-400 mb-1",de?"text-xs":"text-sm"),children:"Hasta:"}),(0,Q.jsx)("input",{type:"date",value:C?C.toISOString().split("T")[0]:"",onChange:e=>{E(new Date(e.target.value)),v("custom")},className:(0,n.x)("block w-full rounded-md shadow-sm p-2",de?"text-xs sm:text-sm":"text-sm","dark"===o?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]})]})})})]})]}),(0,Q.jsxs)(A.P.div,{className:(0,n.x)(de?"overflow-x-auto overflow-y-hidden custom-scrollbar":"overflow-x-hidden overflow-y-hidden","relative flex flex-col flex-grow"),variants:Se,initial:"hidden",animate:"visible",exit:"exit",children:["year"===f&&oe&&(0,Q.jsxs)(A.P.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>ne(null),className:"mb-4 text-blue-500 hover:underline text-sm self-start transition-all duration-200",children:[(0,Q.jsx)(Y.A,{className:"w-4 h-4 inline-block mr-2"}),"Volver al resumen anual"]}),ie?(0,Q.jsx)(W,{type:"bar",theme:o,isMobile:de}):(0,Q.jsx)("div",{className:(0,n.x)("w-full",Ee,Ce),children:(0,Q.jsx)(T.u,{width:"100%",height:"100%",children:(0,Q.jsxs)(F.E,{data:a,margin:{top:20,right:30,left:20,bottom:20},barCategoryGap:de?"0%":"40%",barGap:1,children:[(0,Q.jsx)(O.d,{strokeDasharray:de?"2 2":"3 3",stroke:"dark"===o?"#4b5563":"#e5e7eb",vertical:!1}),(0,Q.jsx)($.W,{dataKey:"name",stroke:c,tick:{fill:c,fontSize:de?9:11},angle:-45,textAnchor:"end",interval:0,height:60}),(0,Q.jsx)(M.h,{stroke:c,tick:{fill:c,fontSize:de?9:11},width:de?30:50}),(0,Q.jsx)(I.m,{cursor:{fill:"dark"===o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",rx:4},content:(0,Q.jsx)(U,{theme:o,chartTextColor:c,copFormatter:e=>e.toLocaleString()})}),(0,Q.jsx)(G.s,{wrapperStyle:{color:c,paddingTop:"10px",fontSize:de?8:12},align:"center",verticalAlign:"top",iconType:"circle"}),(0,Q.jsx)(P.y,{dataKey:"Domicilios",fill:"#8B5CF6",stroke:"#8B5CF6",radius:[10,10,0,0],opacity:1,isAnimationActive:!1,maxBarSize:de?12:25}),(0,Q.jsx)(P.y,{dataKey:"Mesas",fill:"#10B981",stroke:"#10B981",radius:[10,10,0,0],opacity:1,isAnimationActive:!1,maxBarSize:de?12:25})]})})})]})]}),(0,Q.jsxs)(A.P.div,{className:(0,n.x)("dark"===o?"bg-gray-800":"bg-white",de?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===o?"border-gray-700":"border-gray-200","relative min-h-[350px] flex flex-col justify-center items-center"),variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{duration:.7,ease:"easeOut"}},exit:{opacity:0,scale:.9,transition:{duration:.5,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",children:[(0,Q.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center",children:[(0,Q.jsx)(R.A,{className:(0,n.x)(de?"w-4 h-4 mr-2":"w-5 h-5 mr-2","text-blue-400")}),"Estado de Pedidos"]}),ie?(0,Q.jsx)(W,{type:"pie",theme:o,isMobile:de}):(0,Q.jsx)(T.u,{width:"100%",height:"100%",children:(0,Q.jsxs)(z.r,{children:[(0,Q.jsxs)(q.F,{data:l,cx:"50%",cy:"50%",outerRadius:de?80:120,fill:"#8884d8",dataKey:"value",animationDuration:800,innerRadius:de?40:60,children:[l.map((e,t)=>(0,Q.jsx)(_.f,{fill:k[t%k.length],stroke:"dark"===o?"#1f2937":"#ffffff",strokeWidth:2},`cell-${t}`)),(0,Q.jsx)(J.J,{value:`${Ne} Pedidos`,position:"center",fill:c,fontSize:de?14:18,fontWeight:"bold",dy:de?0:-10}),(0,Q.jsx)(J.J,{value:"Total",position:"center",fill:c,fontSize:de?10:12,dy:15})]}),(0,Q.jsx)(I.m,{content:(0,Q.jsx)(X,{theme:o,chartTextColor:c})}),(0,Q.jsx)(G.s,{wrapperStyle:{color:c,fontSize:de?10:13,paddingTop:"15px"},align:"center",verticalAlign:"bottom",iconType:"circle",layout:"horizontal"})]})})]})]})]})}),te=("undefined"!==typeof __app_id&&__app_id,"undefined"!==typeof __initial_auth_token?__initial_auth_token:null),ae=e=>{let{setError:t,setSuccess:a,theme:w}=e;const[N,D]=(0,r.useState)(null),[A,T]=(0,r.useState)(!1),[F,O]=(0,r.useState)(!0),[$,M]=(0,r.useState)(!1),[I,G]=(0,r.useState)(""),[P,z]=(0,r.useState)(!1),[q,_]=(0,r.useState)(""),[J,L]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(null),[V,R]=(0,r.useState)(null),[H,B]=(0,r.useState)("30_days"),[W,Z]=(0,r.useState)(null),[U,X]=(0,r.useState)(null),[ae,re]=(0,r.useState)("30_days"),[se,le]=(0,r.useState)(null),[ie,oe]=(0,r.useState)(null),{loadingData:ne,orders:de,users:ce,totals:xe,statusCounts:me,userActivity:ue,dailySalesChartData:ge,dailyOrdersChartData:he,statusPieChartData:ye,handleSaveDailyIngresos:pe,handleDeleteDailyIngresos:be,handleSaveDailyOrders:fe,handleDeleteDailyOrders:ve}=((0,o.Zp)(),((e,t,a,s,l,o,n,d,c,x,m,u)=>{const[g,h]=(0,r.useState)(!0),[y,p]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[D,A]=(0,r.useState)([]),[T,F]=(0,r.useState)({cash:0,daviplata:0,nequi:0}),[O,$]=(0,r.useState)({Pending:0,Delivered:0,Cancelled:0}),[M,I]=(0,r.useState)([]),[G,P]=(0,r.useState)([]),[z,q]=(0,r.useState)([]),[_,J]=(0,r.useState)([]),[L,K]=(0,r.useState)([]),[Y,V]=(0,r.useState)([]),R=(0,r.useRef)({orders:!1,tableOrders:!1,users:!1,activity:!1,ingresos:!1,pedidosDiariosGuardados:!1}),H=()=>{R.current.orders&&R.current.tableOrders&&R.current.users&&R.current.activity&&R.current.ingresos&&R.current.pedidosDiariosGuardados&&h(!1)};(0,r.useEffect)(()=>{if(!e||!t||!a)return;h(!0);const r=[],l=(0,i.rJ)(e,"orders"),o=(0,i.aQ)(l,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));p(t);const a={cash:0,daviplata:0,nequi:0},r={Pending:0,Delivered:0,Cancelled:0};t.forEach(e=>{var t;const s=e.paymentSummary||{};a.cash+=s.Efectivo||0,a.daviplata+=s.Daviplata||0,a.nequi+=s.Nequi||0;const l=(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())||"";l===b?r.Pending+=1:l===f?r.Delivered+=1:l===v&&(r.Cancelled+=1)}),F(a),$(r);const s=[{name:j[b],value:r.Pending,color:k[0]},{name:j[f],value:r.Delivered,color:k[1]},{name:j[v],value:r.Cancelled,color:k[2]}];V(s),R.current.orders||(R.current.orders=!0,H())},e=>{s(`Error al cargar pedidos: ${e.message}`),R.current.orders||(R.current.orders=!0,H())});r.push(o);const n=(0,i.rJ)(e,"tableOrders"),d=(0,i.aQ)(n,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));N(t),R.current.tableOrders||(R.current.tableOrders=!0,H())},e=>{s(`Error al cargar pedidos de mesa: ${e.message}`),R.current.tableOrders||(R.current.tableOrders=!0,H())});r.push(d);const c=(0,i.rJ)(e,"users"),x=(0,i.aQ)(c,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));A(t),R.current.users||(R.current.users=!0,H())},e=>{s(`Error al cargar usuarios: ${e.message}`),R.current.users||(R.current.users=!0,H())});r.push(x);const m=(0,i.rJ)(e,"userActivity"),u=(0,i.aQ)(m,e=>{const t=e.docs.map(e=>{const t=e.data(),a=t.timestamp instanceof i.Dc?t.timestamp.toDate():null;return{id:e.id,...t,timestamp:a}}).sort((e,t)=>(t.timestamp?t.timestamp.getTime():0)-(e.timestamp?e.timestamp.getTime():0));I(t),R.current.activity||(R.current.activity=!0,H())},e=>{s(`Error al cargar actividad: ${e.message}`),R.current.activity||(R.current.activity=!0,H())});r.push(u);const g=(0,i.rJ)(e,S),y=(0,i.aQ)(g,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));P(t),R.current.ingresos||(R.current.ingresos=!0,H())},e=>{s(`Error al cargar ingresos: ${e.message}`),R.current.ingresos||(R.current.ingresos=!0,H())});r.push(y);const w=(0,i.rJ)(e,C),D=(0,i.aQ)(w,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));q(t),R.current.pedidosDiariosGuardados||(R.current.pedidosDiariosGuardados=!0,H())},e=>{s(`Error al cargar pedidos diarios guardados: ${e.message}`),R.current.pedidosDiariosGuardados||(R.current.pedidosDiariosGuardados=!0,H())});return r.push(D),()=>{r.forEach(e=>e())}},[e,t,a,s]),(0,r.useEffect)(()=>{if(!a)return;const e=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],{startDate:t,endDate:r}=E(o,n,d),s=new Date;s.setHours(0,0,0,0);const l=s.toISOString().split("T")[0];let i;if("year"!==o||u){const e={};if(G.forEach(a=>{const s=new Date(a.date).toISOString().split("T")[0];if(s>=t.toISOString().split("T")[0]&&s<=r.toISOString().split("T")[0])if("year"===o&&u){var l,i,n;`${new Date(a.date).getFullYear()}-${String(new Date(a.date).getMonth()+1).padStart(2,"0")}`===u&&(e[s]={Efectivo:((null===(l=e[s])||void 0===l?void 0:l.Efectivo)||0)+(a.cash||0),Daviplata:((null===(i=e[s])||void 0===i?void 0:i.Daviplata)||0)+(a.daviplata||0),Nequi:((null===(n=e[s])||void 0===n?void 0:n.Nequi)||0)+(a.nequi||0)})}else{var d,c,x;e[s]={Efectivo:((null===(d=e[s])||void 0===d?void 0:d.Efectivo)||0)+(a.cash||0),Daviplata:((null===(c=e[s])||void 0===c?void 0:c.Daviplata)||0)+(a.daviplata||0),Nequi:((null===(x=e[s])||void 0===x?void 0:x.Nequi)||0)+(a.nequi||0)}}}),s>=t&&s<=r){let a=0,i=0,n=0;var c,x,m,g,h,p;if(y.forEach(e=>{var s;const l=null!==(s=e.createdAt)&&void 0!==s&&s.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null;if(l&&l>=t.toISOString().split("T")[0]&&l<=r.toISOString().split("T")[0]){const t=e.paymentSummary||{};a+=t.Efectivo||0,i+=t.Daviplata||0,n+=t.Nequi||0}}),"year"===o&&u)`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`===u&&(e[l]={Efectivo:((null===(c=e[l])||void 0===c?void 0:c.Efectivo)||0)+a,Daviplata:((null===(x=e[l])||void 0===x?void 0:x.Daviplata)||0)+i,Nequi:((null===(m=e[l])||void 0===m?void 0:m.Nequi)||0)+n});else e[l]={Efectivo:((null===(g=e[l])||void 0===g?void 0:g.Efectivo)||0)+a,Daviplata:((null===(h=e[l])||void 0===h?void 0:h.Daviplata)||0)+i,Nequi:((null===(p=e[l])||void 0===p?void 0:p.Nequi)||0)+n}}i=Object.keys(e).sort((e,t)=>new Date(e)-new Date(t)).map(t=>({name:t,Efectivo:e[t].Efectivo,Daviplata:e[t].Daviplata,Nequi:e[t].Nequi}))}else{const a={},l=s.getFullYear();for(let e=0;e<12;e++){const t=`${l}-${String(e+1).padStart(2,"0")}`;a[t]={Efectivo:0,Daviplata:0,Nequi:0}}G.forEach(e=>{const t=new Date(e.date);if(t.getFullYear()===l){const r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;a[r].Efectivo+=e.cash||0,a[r].Daviplata+=e.daviplata||0,a[r].Nequi+=e.nequi||0}});const o=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;let n=0,d=0,c=0;y.forEach(e=>{var a;const s=null!==(a=e.createdAt)&&void 0!==a&&a.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null;if(s&&s>=t.toISOString().split("T")[0]&&s<=r.toISOString().split("T")[0]){const t=e.paymentSummary||{};n+=t.Efectivo||0,d+=t.Daviplata||0,c+=t.Nequi||0}}),a[o]={Efectivo:a[o].Efectivo+n,Daviplata:a[o].Daviplata+d,Nequi:a[o].Nequi+c},i=Object.keys(a).map(t=>({name:e[parseInt(t.split("-")[1])-1],monthKey:t,Efectivo:a[t].Efectivo,Daviplata:a[t].Daviplata,Nequi:a[t].Nequi}))}J(i)},[y,G,o,n,d,a,u]),(0,r.useEffect)(()=>{if(!a)return;const e=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],{startDate:t,endDate:r}=E(c,x,m),s=new Date;s.setHours(0,0,0,0);const l=s.toISOString().split("T")[0];let i;if("year"!==c||u){const e={};if(z.forEach(a=>{const s=new Date(a.date).toISOString().split("T")[0];s>=t.toISOString().split("T")[0]&&s<=r.toISOString().split("T")[0]&&("year"===c&&u?`${new Date(a.date).getFullYear()}-${String(new Date(a.date).getMonth()+1).padStart(2,"0")}`===u&&(e[s]={Domicilios:a.domicilios||0,Mesas:a.mesas||0}):e[s]={Domicilios:a.domicilios||0,Mesas:a.mesas||0})}),s>=t&&s<=r){let t=0,a=0;var o,n,d,g;if(y.forEach(e=>{var a;(null!==(a=e.createdAt)&&void 0!==a&&a.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===l&&t++}),w.forEach(e=>{var t;(null!==(t=e.createdAt)&&void 0!==t&&t.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===l&&a++}),"year"===c&&u)`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`===u&&(e[l]={Domicilios:((null===(o=e[l])||void 0===o?void 0:o.Domicilios)||0)+t,Mesas:((null===(n=e[l])||void 0===n?void 0:n.Mesas)||0)+a});else e[l]={Domicilios:((null===(d=e[l])||void 0===d?void 0:d.Domicilios)||0)+t,Mesas:((null===(g=e[l])||void 0===g?void 0:g.Mesas)||0)+a}}i=Object.keys(e).sort((e,t)=>new Date(e)-new Date(t)).map(t=>({name:t,Domicilios:e[t].Domicilios,Mesas:e[t].Mesas}))}else{const t={},a=s.getFullYear();for(let e=0;e<12;e++){const r=`${a}-${String(e+1).padStart(2,"0")}`;t[r]={domicilios:0,mesas:0}}z.forEach(e=>{const r=new Date(e.date);if(r.getFullYear()===a){const a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;t[a].domicilios+=e.domicilios||0,t[a].mesas+=e.mesas||0}});const r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;let l=0,o=0;y.forEach(e=>{var t;const r=null!==(t=e.createdAt)&&void 0!==t&&t.toDate?new Date(e.createdAt.toDate()):null;r&&r.getFullYear()===a&&r.getMonth()===s.getMonth()&&l++}),w.forEach(e=>{var t;const r=null!==(t=e.createdAt)&&void 0!==t&&t.toDate?new Date(e.createdAt.toDate()):null;r&&r.getFullYear()===a&&r.getMonth()===s.getMonth()&&o++}),t[r].domicilios+=l,t[r].mesas+=o,i=Object.keys(t).map(a=>({name:e[parseInt(a.split("-")[1])-1],monthKey:a,Domicilios:t[a].domicilios,Mesas:t[a].mesas}))}K(i)},[y,w,z,c,x,m,a,u]);const B=(0,r.useCallback)(async()=>{h(!0);try{const t=(new Date).toISOString().split("T")[0];let a=0,r=0,s=0;y.forEach(e=>{var l;if((null!==(l=e.createdAt)&&void 0!==l&&l.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===t){const t=e.paymentSummary;if(t)a+=t.Efectivo||0,r+=t.Daviplata||0,s+=t.Nequi||0;else{var i,o,n,d,c;const t=(null===(i=e.payment)||void 0===i?void 0:i.toLowerCase())||(null===(o=e.meals)||void 0===o||null===(n=o[0])||void 0===n||null===(d=n.payment)||void 0===d||null===(c=d.name)||void 0===c?void 0:c.toLowerCase()),l=e.total||0;"efectivo"===t?a+=l:"daviplata"===t?r+=l:"nequi"===t&&(s+=l)}}});const o=a+r+s,n=(0,i.P)((0,i.rJ)(e,S),(0,i._M)("date","==",t)),d=await(0,i.GG)(n);if(d.empty)await(0,i.gS)((0,i.rJ)(e,S),{date:t,cash:a,daviplata:r,nequi:s,totalSales:o,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}),l(`Resumen de ingresos para ${t} guardado correctamente.`);else{const n=d.docs[0];await(0,i.mZ)((0,i.H9)(e,S,n.id),{cash:a,daviplata:r,nequi:s,totalSales:o,updatedAt:(0,i.O5)()}),l(`Resumen de ingresos para ${t} actualizado correctamente.`)}}catch(t){s(`Error al guardar/actualizar resumen de ingresos: ${t.message}`),console.error("Error al guardar ingresos diarios:",t)}finally{h(!1)}},[e,y,l,s]),Q=(0,r.useCallback)(async()=>{h(!0);try{const t=(new Date).toISOString().split("T")[0],a=(0,i.P)((0,i.rJ)(e,S),(0,i._M)("date","==",t)),r=await(0,i.GG)(a);if(r.empty)l(`No se encontr\xf3 un resumen de ingresos para ${t} para eliminar.`);else{const a=r.docs[0];await(0,i.kd)((0,i.H9)(e,S,a.id)),l(`Resumen de ingresos para ${t} eliminado correctamente.`)}}catch(t){s(`Error al eliminar resumen de ingresos: ${t.message}`),console.error("Error al eliminar ingresos diarios:",t)}finally{h(!1)}},[e,l,s]),W=(0,r.useCallback)(async()=>{h(!0);try{const t=(new Date).toISOString().split("T")[0];let a=0,r=0;y.forEach(e=>{var r;(null!==(r=e.createdAt)&&void 0!==r&&r.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===t&&a++}),w.forEach(e=>{var a;(null!==(a=e.createdAt)&&void 0!==a&&a.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===t&&r++});const s=(0,i.P)((0,i.rJ)(e,C),(0,i._M)("date","==",t)),o=await(0,i.GG)(s);if(o.empty)await(0,i.gS)((0,i.rJ)(e,C),{date:t,domicilios:a,mesas:r,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}),l(`Conteo de pedidos diarios para ${t} guardado correctamente.`);else{const s=o.docs[0];await(0,i.mZ)((0,i.H9)(e,C,s.id),{domicilios:a,mesas:r,updatedAt:(0,i.O5)()}),l(`Conteo de pedidos diarios para ${t} actualizado correctamente.`)}}catch(t){s(`Error al guardar/actualizar conteo de pedidos diarios: ${t.message}`),console.error("Error al guardar conteo de pedidos diarios:",t)}finally{h(!1)}},[e,y,w,l,s]),Z=(0,r.useCallback)(async()=>{h(!0);try{const t=(new Date).toISOString().split("T")[0],a=(0,i.P)((0,i.rJ)(e,C),(0,i._M)("date","==",t)),r=await(0,i.GG)(a);if(r.empty)l(`No se encontr\xf3 un conteo de pedidos diarios para ${t} para eliminar.`);else{const a=r.docs[0];await(0,i.kd)((0,i.H9)(e,C,a.id)),l(`Conteo de pedidos diarios para ${t} eliminado correctamente.`)}}catch(t){s(`Error al eliminar conteo de pedidos diarios: ${t.message}`),console.error("Error al eliminar conteo de pedidos diarios:",t)}finally{h(!1)}},[e,l,s]);return{loadingData:g,orders:y,tableOrders:w,users:D,totals:T,statusCounts:O,userActivity:M,dailySalesChartData:_,dailyOrdersChartData:L,statusPieChartData:Y,handleSaveDailyIngresos:B,handleDeleteDailyIngresos:Q,handleSaveDailyOrders:W,handleDeleteDailyOrders:Z}})(s.db,N,A,t,a,H,W,U,ae,se,ie,V));(0,r.useEffect)(()=>{O(!A)},[A]),(0,r.useEffect)(()=>{if(!s.j)return void console.warn("Firebase Auth no est\xe1 disponible. Aseg\xfarate de que Firebase est\xe9 inicializado correctamente.");const e=(0,l.hg)(s.j,async e=>{if(e)D(e.uid),T(!0);else try{te?await(0,l.p)(s.j,te):await(0,l.zK)(s.j)}catch(a){console.error("Error al iniciar sesi\xf3n:",a),t(`Error de autenticaci\xf3n: ${a.message}`)}finally{T(!0)}});return()=>e()},[s.j,te,t]);const je="dark"===w?"#cbd5e1":"#475569";return(0,Q.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 font-inter",children:[(0,Q.jsx)("h2",{className:"text-3xl font-extrabold mb-8 text-gray-100 dark:text-white",children:"Dashboard"}),(0,Q.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Q.jsxs)("div",{className:(0,n.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Q.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Pedidos"}),(0,Q.jsx)(x.A,{className:"text-blue-400 w-8 h-8"})]}),(0,Q.jsxs)("div",{className:"space-y-3 text-base text-gray-300 dark:text-gray-400",children:[(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Total:"}),(0,Q.jsx)("span",{className:"font-bold text-gray-100",children:de.length})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Pendientes:"}),(0,Q.jsx)("span",{className:"text-yellow-400 font-bold",children:me.Pending})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Entregados:"}),(0,Q.jsx)("span",{className:"text-green-400 font-bold",children:me.Delivered})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Cancelados:"}),(0,Q.jsx)("span",{className:"text-red-400 font-bold",children:me.Cancelled})]})]})]}),(0,Q.jsxs)("div",{className:(0,n.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Q.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Totales Generales"}),(0,Q.jsx)(m.A,{className:"text-green-400 w-8 h-8"})]}),(0,Q.jsxs)("div",{className:"space-y-3 text-base text-gray-300 dark:text-gray-400",children:[(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Efectivo:"}),(0,Q.jsxs)("span",{className:"font-bold text-gray-100",children:["$",xe.cash.toLocaleString()]})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"DaviPlata:"}),(0,Q.jsxs)("span",{className:"font-bold text-gray-100",children:["$",xe.daviplata.toLocaleString()]})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Nequi:"}),(0,Q.jsxs)("span",{className:"font-bold text-gray-100",children:["$",xe.nequi.toLocaleString()]})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{className:"font-bold text-gray-100",children:"Total:"}),(0,Q.jsxs)("span",{className:"font-bold text-green-400",children:["$",(xe.cash+xe.daviplata+xe.nequi).toLocaleString()]})]})]})]}),(0,Q.jsxs)("div",{className:(0,n.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Q.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Usuarios"}),(0,Q.jsx)(u.A,{className:"text-purple-400 w-8 h-8"})]}),(0,Q.jsxs)("div",{className:"space-y-3 text-base text-gray-300 dark:text-gray-400",children:[(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Total:"}),(0,Q.jsx)("span",{className:"font-bold text-gray-100",children:ce.length})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Administradores:"}),(0,Q.jsx)("span",{className:"font-bold text-gray-100",children:ce.filter(e=>2===e.role).length})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"Clientes:"}),(0,Q.jsx)("span",{className:"font-bold text-gray-100",children:ce.filter(e=>1===e.role).length})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsx)("span",{children:"ID de Usuario:"}),(0,Q.jsx)("span",{className:"font-mono text-xs text-gray-500 break-all",children:N})]})]})]}),(0,Q.jsxs)("div",{className:(0,n.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,Q.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Q.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Actividad Reciente"}),(0,Q.jsx)(g.A,{className:"text-orange-400 w-8 h-8"})]}),(0,Q.jsx)("div",{className:"space-y-3 text-sm max-h-40 overflow-y-auto custom-scrollbar",children:0===ue.length?(0,Q.jsx)("p",{className:"text-gray-400 text-center",children:"No hay actividad reciente."}):ue.map((e,t)=>(0,Q.jsxs)("div",{className:"flex justify-between items-start pb-2 border-b border-gray-700 last:border-b-0",children:[(0,Q.jsx)("span",{className:"text-gray-400 flex-1 pr-2",children:e.action}),(0,Q.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Q.jsx)("span",{className:"text-gray-500 text-xs text-right",children:e.timestamp?new Date(e.timestamp).toLocaleString():"N/A"}),e.details&&(0,Q.jsx)("button",{onClick:()=>(e=>{Y(e),L(!0)})(e),className:"text-blue-400 hover:text-blue-300 p-1 rounded-full",title:"Ver detalles de la actividad",children:(0,Q.jsx)(h.A,{className:"w-4 h-4"})})]})]},t))}),(0,Q.jsx)("div",{className:"mt-4 text-center",children:(0,Q.jsxs)("button",{onClick:()=>M(!0),className:(0,n.x)("px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center mx-auto","dark"===w?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:[(0,Q.jsx)(y.A,{className:"w-4 h-4 mr-2"})," Limpiar TODAS las Actividades"]})})]})]}),(0,Q.jsx)(ee,{dailySalesChartData:ge,dailyOrdersChartData:he,statusPieChartData:ye,theme:w,chartTextColor:je,salesFilterRange:H,setSalesFilterRange:B,salesCustomStartDate:W,setSalesCustomStartDate:Z,salesCustomEndDate:U,setSalesCustomEndDate:X,ordersFilterRange:ae,setOrdersFilterRange:re,ordersCustomStartDate:se,setOrdersCustomStartDate:le,ordersCustomEndDate:ie,setOrdersCustomEndDate:oe,handleSaveDailyIngresos:pe,handleDeleteDailyIngresos:()=>z(!0),handleSaveDailyOrders:fe,handleDeleteDailyOrders:ve,loading:ne,selectedMonth:V,setSelectedMonth:R}),(0,Q.jsx)(d.e,{show:$,as:r.Fragment,children:(0,Q.jsxs)(c.lG,{as:"div",className:"relative z-50",onClose:()=>M(!1),children:[(0,Q.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Q.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,Q.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,Q.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Q.jsxs)(c.lG.Panel,{className:(0,n.x)("w-full max-w-sm p-6 rounded-lg shadow-md text-center","dark"===w?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,Q.jsx)(c.lG.Title,{className:"text-lg font-medium mb-4",children:"Confirmar Limpieza de Actividad"}),(0,Q.jsxs)("p",{className:"mb-4",children:["Est\xe1s a punto de eliminar ",(0,Q.jsx)("span",{className:"font-bold text-red-500",children:"TODAS"}),' las actividades registradas. Esta acci\xf3n es irreversible. Para confirmar, escribe "confirmar" a continuaci\xf3n:']}),(0,Q.jsx)("input",{type:"text",value:I,onChange:e=>G(e.target.value),className:(0,n.x)("w-full p-2 rounded-md border text-center text-sm","dark"===w?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-red-500"),placeholder:"escribe 'confirmar'"}),(0,Q.jsxs)("div",{className:"mt-6 flex justify-center gap-2",children:[(0,Q.jsx)("button",{onClick:()=>{M(!1),G("")},className:(0,n.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===w?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,Q.jsx)("button",{onClick:async()=>{if("confirmar"===I.toLowerCase()){O(!0);try{const e=(0,i.wP)(s.db),t=await(0,i.GG)((0,i.rJ)(s.db,"userActivity"));let r=0;t.forEach(t=>{e.delete(t.ref),r++}),0===r?a("No hab\xeda actividades para eliminar."):(await e.commit(),a(`Todas las actividades han sido eliminadas correctamente. Total: ${r}.`)),M(!1),G("")}catch(e){t(`Error al eliminar actividades: ${e.message}. Por favor, verifica las reglas de seguridad de Firebase.`),console.error("Error en batch commit:",e)}finally{O(!1)}}else t('Por favor, escribe "confirmar" para proceder.')},disabled:F,className:(0,n.x)("px-4 py-2 rounded-md text-sm font-medium",F?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:F?"Eliminando...":"Limpiar Actividad"})]})]})})})]})}),(0,Q.jsx)(d.e,{show:P,as:r.Fragment,children:(0,Q.jsxs)(c.lG,{as:"div",className:"relative z-50",onClose:()=>z(!1),children:[(0,Q.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Q.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,Q.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,Q.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Q.jsxs)(c.lG.Panel,{className:(0,n.x)("w-full max-w-sm p-6 rounded-lg shadow-md text-center","dark"===w?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,Q.jsx)(c.lG.Title,{className:"text-lg font-medium mb-4",children:"Confirmar Eliminaci\xf3n de Ventas del D\xeda"}),(0,Q.jsxs)("p",{className:"mb-4",children:["Est\xe1s a punto de eliminar las ventas registradas para ",(0,Q.jsx)("span",{className:"font-bold text-red-500",children:"el d\xeda de hoy"}),'. Esta acci\xf3n es irreversible. Para confirmar, escribe "eliminar" a continuaci\xf3n:']}),(0,Q.jsx)("input",{type:"text",value:q,onChange:e=>_(e.target.value),className:(0,n.x)("w-full p-2 rounded-md border text-center text-sm","dark"===w?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-red-500"),placeholder:"escribe 'eliminar'"}),(0,Q.jsxs)("div",{className:"mt-6 flex justify-center gap-2",children:[(0,Q.jsx)("button",{onClick:()=>{z(!1),_("")},className:(0,n.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===w?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,Q.jsx)("button",{onClick:async()=>{if("eliminar"===q.toLowerCase()){O(!0);try{await be(),z(!1),_("")}catch(e){t(`Error al eliminar ventas del d\xeda: ${e.message}`),console.error("Error al eliminar ventas diarias:",e)}finally{O(!1)}}else t('Por favor, escribe "eliminar" para proceder.')},disabled:F,className:(0,n.x)("px-4 py-2 rounded-md text-sm font-medium",F?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:F?"Eliminando...":"Eliminar Ventas"})]})]})})})]})}),(0,Q.jsx)(d.e,{show:J,as:r.Fragment,children:(0,Q.jsxs)(c.lG,{as:"div",className:"relative z-50",onClose:()=>L(!1),children:[(0,Q.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Q.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,Q.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,Q.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Q.jsxs)(c.lG.Panel,{className:(0,n.x)("w-full max-w-md p-6 rounded-lg shadow-md","dark"===w?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,Q.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Q.jsx)(c.lG.Title,{className:"text-lg font-medium",children:"Detalles de la Actividad"}),(0,Q.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-500",children:(0,Q.jsx)(p.A,{className:"w-5 h-5"})})]}),K&&(0,Q.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{className:"font-medium",children:"Acci\xf3n:"})," ",K.action]}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{className:"font-medium",children:"Fecha:"})," ",K.timestamp?new Date(K.timestamp).toLocaleString():"N/A"]}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{className:"font-medium",children:"Detalles:"})," ","object"===typeof K.details?JSON.stringify(K.details,null,2):K.details||"Sin detalles"]})]}),(0,Q.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Q.jsx)("button",{onClick:()=>L(!1),className:(0,n.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===w?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cerrar"})})]})})})]})})]})}},6568:(e,t,a)=>{function r(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{x:()=>r})}}]);
//# sourceMappingURL=693.a37b0665.chunk.js.map