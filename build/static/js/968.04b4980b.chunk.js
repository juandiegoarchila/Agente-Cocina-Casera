"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[968],{1968:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var r=t(5043),l=t(1958),s=t(5472);function n(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const i=r.forwardRef(n);function o(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const d=r.forwardRef(o);function c(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const m=r.forwardRef(c);function u(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const p=r.forwardRef(u);function g(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const x=r.forwardRef(g);function b(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const h=r.forwardRef(b);function y(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const v=r.forwardRef(y);function f(e,a){let{title:t,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},s),t?r.createElement("title",{id:l},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const j=r.forwardRef(f);var N=t(7591);function k(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")}var w=t(579);const C=e=>null==e?"":"string"===typeof e?e.replace(" NUEVO","").trim():"boolean"===typeof e?e.toString():"object"===typeof e&&null!==e&&void 0!==e&&e.name?e.name.replace(" NUEVO","").trim():String(e).replace(" NUEVO","").trim(),E=(e,a)=>e&&a?a.split(".").reduce(((e,a)=>e&&void 0!==e[a]?e[a]:""),e):"",P=e=>{if(null===e||void 0===e||!e.address)return"Sin direcci\xf3n";let a=e.address;switch(e.addressType){case"school":e.recipientName&&(a+=` (Recibe: ${C(e.recipientName)})`);break;case"complex":e.unitDetails&&(a+=` (${C(e.unitDetails)})`);break;case"shop":e.localName&&(a+=` (${C(e.localName)})`)}return a},$=e=>{var a,t,r,l,s,n,i,o,d,c,m,u,p,g,x,b,h,y,v,f,j,N,k,w,E;const $=[],S=null!==(a=e.soupReplacement)&&void 0!==a&&a.name||e.soupReplacement?`${C((null===(t=e.soupReplacement)||void 0===t?void 0:t.name)||e.soupReplacement)} (por sopa)`:null!==(r=e.soup)&&void 0!==r&&r.name||e.soup?C((null===(l=e.soup)||void 0===l?void 0:l.name)||e.soup):"Sin sopa";let A;var L;if($.push(`Sopa: ${S}`),null!==(s=e.principleReplacement)&&void 0!==s&&s.name||e.principleReplacement)A=`${C((null===(L=e.principleReplacement)||void 0===L?void 0:L.name)||e.principleReplacement)} (por principio)`;else if(Array.isArray(e.principle)&&e.principle.length>0){const a=e.principle.map((e=>C(e.name||e))).filter(Boolean);A=a.length>0?a.join(", "):"Sin principio"}else if(null!==(n=e.principle)&&void 0!==n&&n.name||e.principle){var R;A=C((null===(R=e.principle)||void 0===R?void 0:R.name)||e.principle)}else A="Sin principio";$.push(`Principio: ${A}`),$.push(`Prote\xedna: ${null!==(i=e.protein)&&void 0!==i&&i.name||e.protein?C((null===(o=e.protein)||void 0===o?void 0:o.name)||e.protein):"Sin prote\xedna"}`);const D="Juego de mango"===((null===(d=e.drink)||void 0===d?void 0:d.name)||e.drink)?"Jugo de mango":(null===(c=e.drink)||void 0===c?void 0:c.name)||e.drink;$.push(`Bebida: ${D?C(D):"Sin bebida"}`),$.push("Cubiertos: "+("S\xed"===(null===(m=e.cutlery)||void 0===m?void 0:m.name)||!0===e.cutlery||"true"===e.cutlery?"S\xed":"No"));const T=(null===(u=e.sides)||void 0===u?void 0:u.length)>0?e.sides.map((e=>C(e.name||e))).filter(Boolean).join(", "):"Ninguno";$.push(`Acompa\xf1amientos: ${T}`);const O=(null===(p=e.additions)||void 0===p?void 0:p.length)>0?e.additions.map((e=>`${C(e.name||e)}${e.protein||e.replacement?` (${C(e.protein||e.replacement)})`:""} (${e.quantity||1})`)).join(", "):"Ninguna";$.push(`Adiciones: ${O}`),$.push(`Notas: ${e.notes?C(e.notes):"Ninguna"}`),$.push(`Hora de Entrega: ${null!==(g=e.time)&&void 0!==g&&g.name||e.time?C((null===(x=e.time)||void 0===x?void 0:x.name)||e.time):"No especificada"}`),$.push(`Direcci\xf3n: ${P(e.address)}`);let q="";switch(null===(b=e.address)||void 0===b?void 0:b.addressType){case"house":q="Casa/Apto";break;case"school":q="Colegio/Oficina";break;case"complex":q="Conjunto";break;case"shop":q="Tienda/Local";break;default:q="No especificado"}return $.push(`Tipo de Lugar: ${q}`),$.push(`Tel\xe9fono: ${null!==(h=e.address)&&void 0!==h&&h.phoneNumber?C(e.address.phoneNumber):"No especificado"}`),"shop"===(null===(y=e.address)||void 0===y?void 0:y.addressType)&&null!==(v=e.address)&&void 0!==v&&v.localName&&$.push(`Nombre del Local: ${C(e.address.localName)}`),"school"===(null===(f=e.address)||void 0===f?void 0:f.addressType)&&null!==(j=e.address)&&void 0!==j&&j.recipientName&&$.push(`Recibe: ${C(e.address.recipientName)}`),"complex"===(null===(N=e.address)||void 0===N?void 0:N.addressType)&&null!==(k=e.address)&&void 0!==k&&k.unitDetails&&$.push(`Unidad: ${C(e.address.unitDetails)}`),$.push(`Pago: ${null!==(w=e.payment)&&void 0!==w&&w.name||e.payment?C((null===(E=e.payment)||void 0===E?void 0:E.name)||e.payment):"Efectivo"}`),$.join("\n")},S=e=>{var a;let{setError:t,setSuccess:n,theme:o}=e;const[c,u]=(0,r.useState)([]),[g,b]=(0,r.useState)(null),[y,f]=(0,r.useState)(""),[S,A]=(0,r.useState)({cash:0,daviplata:0,nequi:0}),[L,R]=(0,r.useState)({meals:[],total:0,status:"",payment:"",deliveryPerson:""}),[D,T]=(0,r.useState)(1),[O,q]=(0,r.useState)(10),[B,I]=(0,r.useState)(!0),[z,M]=(0,r.useState)(!1),[F,V]=(0,r.useState)(""),[H,G]=(0,r.useState)(null),[U,W]=(0,r.useState)(null),[Z,J]=(0,r.useState)({}),[_,K]=(0,r.useState)("createdAt.seconds"),[Q,X]=(0,r.useState)("desc"),Y=(0,r.useCallback)((()=>{I(!0);const e=(0,s.rJ)(l.db,"orders"),a=(0,s.aQ)(e,(e=>{const a=e.docs.map((e=>({id:e.id,...e.data()})));u(a);const t={cash:0,daviplata:0,nequi:0},r={};a.forEach((e=>{const a=e.paymentSummary||{};if(t.cash+=a.Efectivo||0,t.daviplata+=a.Daviplata||0,t.nequi+=a.Nequi||0,e.deliveryPerson){var l,s,n,i,o;const a=C(e.deliveryPerson);r[a]||(r[a]={cash:0,daviplata:0,nequi:0,total:0});const t=C(e.payment||(null===(l=e.meals)||void 0===l||null===(s=l[0])||void 0===s||null===(n=s.payment)||void 0===n?void 0:n.name)||(null===(i=e.meals)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.payment)||"Efectivo"),d=e.total||0;"Efectivo"===t?r[a].cash+=d:"Daviplata"===t?r[a].daviplata+=d:"Nequi"===t&&(r[a].nequi+=d),r[a].total+=d}})),A(t),J(r),I(!1)}),(e=>{t(`Error al cargar pedidos: ${e.message}`),I(!1)}));return()=>a()}),[t]);(0,r.useEffect)((()=>{Y()}),[Y]);const ee=(0,r.useCallback)((e=>{var a;b(e),R({meals:(null===(a=e.meals)||void 0===a?void 0:a.map((e=>{var a;return{...e,address:e.address||{},payment:e.payment?C((null===(a=e.payment)||void 0===a?void 0:a.name)||e.payment):"Efectivo",additions:e.additions||[],principle:Array.isArray(e.principle)?e.principle:e.principle?[{name:e.principle.name||e.principle}]:[],cutlery:e.cutlery||null,sides:e.sides||[]}})))||[],total:e.total||0,status:e.status||"Pendiente",payment:e.payment?C(e.payment):"Efectivo",deliveryPerson:e.deliveryPerson||""})}),[]),ae=async(e,a)=>{I(!0);try{await(0,s.mZ)((0,s.H9)(l.db,"orders",e),{deliveryPerson:C(a)||null,updatedAt:new Date}),n("Domiciliario asignado correctamente.")}catch(r){t(`Error al asignar domiciliario: ${r.message}`)}finally{W(null),I(!1)}},te=(e,a,t)=>{R((r=>{const l=[...r.meals];let s={...l[e]};if(a.startsWith("address.")){const e=a.split(".")[1];s.address={...s.address,[e]:t}}else"additions"===a?s.additions=t.split(";").map((e=>{const[a,t="",r="",l="1"]=e.split(",").map((e=>e.trim()));return{name:a,protein:t,replacement:r,quantity:parseInt(l)||1}})).filter((e=>e.name)):"principle"===a?s.principle=t?t.split(",").map((e=>({name:e.trim()}))).filter((e=>e.name)):[]:"sides"===a?s.sides=t.split(",").map((e=>({name:e.trim()}))).filter((e=>e.name)):"cutlery"===a?s.cutlery={name:t}:s[a]=["soup","soupReplacement","protein","drink","time","payment","principleReplacement"].includes(a)?{name:t}:t;return l[e]=s,{...r,meals:l}}))},re=(0,r.useCallback)((()=>{const e=c.flatMap((e=>{var a;return(null===(a=e.meals)||void 0===a?void 0:a.map(((a,t)=>{var r,l,s,n,i,o,d,c,m;const u=a.address||{},p=P(u),g=a.payment?C((null===(r=a.payment)||void 0===r?void 0:r.name)||a.payment):"";return[e.id,t+1,C((null===(l=a.soup)||void 0===l?void 0:l.name)||a.soup),Array.isArray(a.principle)?a.principle.map((e=>C(e.name||e))).join(", "):C((null===(s=a.principle)||void 0===s?void 0:s.name)||a.principle),C((null===(n=a.protein)||void 0===n?void 0:n.name)||a.protein),C((null===(i=a.drink)||void 0===i?void 0:i.name)||a.drink),C((null===(o=a.cutlery)||void 0===o?void 0:o.name)||a.cutlery),null===(d=a.sides)||void 0===d?void 0:d.map((e=>C(e.name||e))).join(", "),null===(c=a.additions)||void 0===c?void 0:c.map((e=>`${C(e.name||e)}${e.protein||e.replacement?` (${C(e.protein||e.replacement)})`:""} (${e.quantity||1})`)).join("; "),C(a.notes),C((null===(m=a.time)||void 0===m?void 0:m.name)||a.time),p,C(u.addressType),C(u.localName),C(u.recipientName),C(u.unitDetails),C(u.phoneNumber),g,e.total||0,C(e.payment),C(e.deliveryPerson),C(e.status),e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleString():"",e.updatedAt?new Date(1e3*e.updatedAt.seconds).toLocaleString():""].map((e=>`"${String(e||"").replace(/"/g,'""')}"`)).join(",")})))||[]})),a=[["ID","N\xfamero de Bandeja","Sopa","Principio","Prote\xedna","Bebida","Cubiertos","Acompa\xf1amientos","Adiciones","Notas","Hora de Entrega","Direcci\xf3n Completa","Tipo de Lugar","Nombre del Local","Nombre del Destinatario","Detalles de Unidad","Tel\xe9fono","M\xe9todo de Pago (Bandeja)","Total del Pedido","M\xe9todo de Pago (Pedido General)","Domiciliario","Estado","Fecha de Creaci\xf3n","\xdaltima Actualizaci\xf3n"].join(","),...e].join("\n"),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=`pedidos_${(new Date).toISOString().split("T")[0]}.csv`,l.click(),window.URL.revokeObjectURL(r),n("Pedidos exportados a CSV.")}),[c,n]),le=(0,r.useMemo)((()=>{let e=c.map(((e,a)=>({...e,originalIndex:a}))).filter((e=>{var a,t,r,l,s;const n=y.toLowerCase(),i=(null===(a=e.id)||void 0===a?void 0:a.toLowerCase().includes(n))||!1,o=(null===(t=e.meals)||void 0===t?void 0:t.some((e=>{var a,t,r,l,s,i,o,d,c,m,u,p,g,x;return[(null===(a=e.soup)||void 0===a?void 0:a.name)||e.soup,(null===(t=e.soupReplacement)||void 0===t?void 0:t.name)||e.soupReplacement,...Array.isArray(e.principle)?e.principle.map((e=>e.name||e)):[(null===(r=e.principle)||void 0===r?void 0:r.name)||e.principle],(null===(l=e.principleReplacement)||void 0===l?void 0:l.name)||e.principleReplacement,(null===(s=e.protein)||void 0===s?void 0:s.name)||e.protein,(null===(i=e.drink)||void 0===i?void 0:i.name)||e.drink,null===(o=e.address)||void 0===o?void 0:o.address,null===(d=e.address)||void 0===d?void 0:d.localName,null===(c=e.address)||void 0===c?void 0:c.recipientName,null===(m=e.address)||void 0===m?void 0:m.unitDetails,null===(u=e.address)||void 0===u?void 0:u.phoneNumber,(null===(p=e.payment)||void 0===p?void 0:p.name)||e.payment,e.notes,...(null===(g=e.sides)||void 0===g?void 0:g.map((e=>e.name||e)))||[],...(null===(x=e.additions)||void 0===x?void 0:x.map((e=>`${e.name||e}${e.protein||e.replacement||""}`)))||[]].some((e=>{var a;return null===(a=C(e))||void 0===a?void 0:a.toLowerCase().includes(n)}))})))||!1,d=(null===(r=C(e.status))||void 0===r?void 0:r.toLowerCase().includes(n))||!1,c=(null===(l=C(e.payment))||void 0===l?void 0:l.toLowerCase().includes(n))||!1,m=(null===(s=C(e.deliveryPerson))||void 0===s?void 0:s.toLowerCase().includes(n))||!1;return i||o||d||c||m}));return e.sort(((e,a)=>{if("orderNumber"===_){const t=e.originalIndex,r=a.originalIndex;return"asc"===Q?t-r:r-t}let t=E(e,_),r=E(a,_);if("meals.0.time.name"===_){t=C(t)||"No especificada",r=C(r)||"No especificada";try{const e=new Date(`1970-01-01 ${t}`),a=new Date(`1970-01-01 ${r}`);if(!isNaN(e)&&!isNaN(a))return"asc"===Q?e-a:a-e}catch{}}return t=C(t)||"",r=C(r)||"","string"===typeof t&&"string"===typeof r?"asc"===Q?t.localeCompare(r):r.localeCompare(t):"asc"===Q?(t||0)-(r||0):(r||0)-(t||0)})),e}),[c,y,_,Q]),se=Math.ceil(le.length/O),ne=le.slice((D-1)*O,D*O),ie=e=>{_===e?X("asc"===Q?"desc":"asc"):(K(e),X("asc"))},oe=e=>_===e?"asc"===Q?(0,w.jsx)(i,{className:"w-4 h-4 ml-1 inline"}):(0,w.jsx)(d,{className:"w-4 h-4 ml-1 inline"}):null;return(0,w.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,w.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Gesti\xf3n de Pedidos"}),(0,w.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 text-sm text-gray-700 dark:text-gray-300",children:[(0,w.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm",children:[(0,w.jsx)("p",{className:"font-semibold",children:"Total Efectivo"}),(0,w.jsxs)("p",{className:"text-lg font-bold",children:["$",S.cash.toLocaleString("es-CO")]})]}),(0,w.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm",children:[(0,w.jsx)("p",{className:"font-semibold",children:"Total Daviplata"}),(0,w.jsxs)("p",{className:"text-lg font-bold",children:["$",S.daviplata.toLocaleString("es-CO")]})]}),(0,w.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm",children:[(0,w.jsx)("p",{className:"font-semibold",children:"Total Nequi"}),(0,w.jsxs)("p",{className:"text-lg font-bold",children:["$",S.nequi.toLocaleString("es-CO")]})]}),(0,w.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm",children:[(0,w.jsx)("p",{className:"font-semibold",children:"Total General"}),(0,w.jsxs)("p",{className:"text-lg font-bold",children:["$",(S.cash+S.daviplata+S.nequi).toLocaleString("es-CO")]})]})]}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[(0,w.jsx)("input",{type:"text",value:y,onChange:e=>f(e.target.value),placeholder:"Buscar pedidos...",className:k("p-3 rounded-lg border","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-96 shadow-sm text-base transition-all duration-200")}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,w.jsxs)("button",{onClick:re,className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-md transition-all duration-200 text-sm font-medium","aria-label":"Exportar pedidos a CSV",children:[(0,w.jsx)(m,{className:"w-5 h-5 mr-2"})," Exportar CSV"]}),(0,w.jsxs)("button",{onClick:()=>M(!0),className:"flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow-md transition-all duration-200 text-sm font-medium","aria-label":"Borrar todos los pedidos",children:[(0,w.jsx)(p,{className:"w-5 h-5 mr-2"})," Borrar Todos"]})]})]}),(0,w.jsx)("div",{className:k("p-4 rounded-2xl shadow-xl max-h-[70vh] overflow-y-auto custom-scrollbar transition-all duration-300","dark"===o?"bg-gray-800":"bg-white"),children:B?(0,w.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,w.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"overflow-x-auto",children:(0,w.jsxs)("table",{className:"min-w-full text-left border-collapse text-sm",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:k("font-semibold sticky top-0 z-10 shadow-sm","dark"===o?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:[(0,w.jsxs)("th",{className:"p-3 border-b cursor-pointer",onClick:()=>ie("orderNumber"),children:["N\xba ",oe("orderNumber")]}),(0,w.jsx)("th",{className:"p-3 border-b",children:"Detalles"}),(0,w.jsxs)("th",{className:"p-3 border-b cursor-pointer",onClick:()=>ie("meals.0.address.address"),children:["Direcci\xf3n ",oe("meals.0.address.address")]}),(0,w.jsxs)("th",{className:"p-3 border-b hidden lg:table-cell cursor-pointer",onClick:()=>ie("meals.0.address.phoneNumber"),children:["Tel\xe9fono ",oe("meals.0.address.phoneNumber")]}),(0,w.jsxs)("th",{className:"p-3 border-b hidden md:table-cell cursor-pointer",onClick:()=>ie("meals.0.time.name"),children:["Hora ",oe("meals.0.time.name")]}),(0,w.jsxs)("th",{className:"p-3 border-b hidden sm:table-cell cursor-pointer",onClick:()=>ie("payment"),children:["Pago ",oe("payment")]}),(0,w.jsxs)("th",{className:"p-3 border-b hidden sm:table-cell cursor-pointer",onClick:()=>ie("total"),children:["Total ",oe("total")]}),(0,w.jsxs)("th",{className:"p-3 border-b hidden sm:table-cell cursor-pointer",onClick:()=>ie("deliveryPerson"),children:["Domiciliario ",oe("deliveryPerson")]}),(0,w.jsxs)("th",{className:"p-3 border-b hidden sm:table-cell cursor-pointer",onClick:()=>ie("status"),children:["Estado ",oe("status")]}),(0,w.jsx)("th",{className:"p-3 border-b",children:"Acciones"})]})}),(0,w.jsx)("tbody",{children:0===ne.length?(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"10",className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron pedidos. Intenta ajustar tu b\xfasqueda o filtros."})}):ne.map(((e,a)=>{var r,i,d,c,m,u,g,b,y,v,f,j,N,E,$,S;const A="asc"===Q?(D-1)*O+a+1:le.length-((D-1)*O+a),T=P(null===(r=e.meals)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.address),q=C(e.payment||(null===(d=e.meals)||void 0===d||null===(c=d[0])||void 0===c||null===(m=c.payment)||void 0===m?void 0:m.name)||(null===(u=e.meals)||void 0===u||null===(g=u[0])||void 0===g?void 0:g.payment)||"Sin pago"),B="Pendiente"===e.status?"bg-yellow-500 text-black":"Entregado"===e.status?"bg-green-500 text-white":"Cancelado"===e.status?"bg-red-500 text-white":"";return(0,w.jsxs)("tr",{className:k("border-b transition-colors duration-150","dark"===o?"border-gray-700 hover:bg-gray-700":"border-gray-200 hover:bg-gray-50",a%2===0?"dark"===o?"bg-gray-750":"bg-gray-50":""),children:[(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300 font-semibold",children:A}),(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300",children:(0,w.jsx)("div",{className:"flex items-center h-full",children:(0,w.jsx)("button",{onClick:()=>G(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Ver detalles de la bandeja","aria-label":`Ver detalles del pedido ${e.id}`,children:(0,w.jsx)(x,{className:"w-5 h-5"})})})}),(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300 max-w-[200px] truncate",title:T,children:T}),(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300 hidden lg:table-cell",children:C(null===(b=e.meals)||void 0===b||null===(y=b[0])||void 0===y||null===(v=y.address)||void 0===v?void 0:v.phoneNumber)}),(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300 hidden md:table-cell",children:C((null===(f=e.meals)||void 0===f||null===(j=f[0])||void 0===j||null===(N=j.time)||void 0===N?void 0:N.name)||(null===(E=e.meals)||void 0===E||null===($=E[0])||void 0===$?void 0:$.time))}),(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300 hidden sm:table-cell",children:q}),(0,w.jsxs)("td",{className:"p-3 text-gray-900 dark:text-gray-300 hidden sm:table-cell font-medium",children:["$",(null===(S=e.total)||void 0===S?void 0:S.toLocaleString("es-CO"))||"0"]}),(0,w.jsx)("td",{className:"p-3 text-gray-900 dark:text-gray-300 hidden sm:table-cell",children:U===e.id?(0,w.jsx)("input",{type:"text",value:L.deliveryPerson||"",onChange:e=>R({...L,deliveryPerson:e.target.value}),onBlur:a=>ae(e.id,a.target.value),onKeyPress:a=>"Enter"===a.key&&ae(e.id,a.target.value),className:k("w-full p-2 rounded-lg border text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-200 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),autoFocus:!0,"aria-label":`Editar domiciliario para pedido ${e.id}`}):(0,w.jsx)("span",{onClick:()=>{W(e.id),R((a=>({...a,deliveryPerson:e.deliveryPerson||""})))},className:"cursor-pointer hover:underline",title:"Click para editar",children:e.deliveryPerson||"Sin asignar"})}),(0,w.jsxs)("td",{className:"p-3 text-gray-900 dark:text-gray-300 hidden sm:table-cell",children:[(0,w.jsxs)("select",{value:e.status||"Pendiente",onChange:a=>(async(e,a)=>{I(!0);try{await(0,s.mZ)((0,s.H9)(l.db,"orders",e),{status:a,updatedAt:new Date}),n("Estado actualizado correctamente.")}catch(r){t(`Error al actualizar estado: ${r.message}`)}finally{I(!1)}})(e.id,a.target.value),className:k("p-2 rounded-lg text-xs font-medium border focus:outline-none focus:ring-2 focus:ring-blue-500",B,"dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"),style:{appearance:"menulist-button"},"aria-label":`Cambiar estado del pedido ${e.id}`,children:[(0,w.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,w.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,w.jsx)("option",{value:"Cancelado",children:"Cancelado"})]}),(0,w.jsx)("style",{children:`\n                                select option {\n                                  background-color: ${"dark"===o?"#4B5563":"#FFFFFF"} !important;\n                                  color: ${"dark"===o?"#F9FAFB":"#1F2937"} !important;\n                                }\n                              `})]}),(0,w.jsxs)("td",{className:"p-3 flex space-x-2 items-center",children:[(0,w.jsx)("button",{onClick:()=>ee(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Editar pedido","aria-label":`Editar pedido ${e.id}`,children:(0,w.jsx)(h,{className:"w-5 h-5"})}),(0,w.jsx)("button",{onClick:()=>(async e=>{I(!0);try{await(0,s.kd)((0,s.H9)(l.db,"orders",e)),n("Pedido eliminado correctamente.")}catch(a){t(`Error al eliminar: ${a.message}`)}finally{I(!1)}})(e.id),className:"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md",title:"Eliminar pedido","aria-label":`Eliminar pedido ${e.id}`,children:(0,w.jsx)(p,{className:"w-5 h-5"})})]})]},e.id)}))})]})}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pedidos por p\xe1gina:"}),(0,w.jsxs)("select",{value:O,onChange:e=>{q(Number(e.target.value)),T(1)},className:k("p-2 rounded-lg border text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"),"aria-label":"Seleccionar n\xfamero de pedidos por p\xe1gina",children:[(0,w.jsx)("option",{value:10,children:"10"}),(0,w.jsx)("option",{value:20,children:"20"}),(0,w.jsx)("option",{value:30,children:"30"}),(0,w.jsx)("option",{value:50,children:"50"})]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("button",{onClick:()=>T((e=>Math.max(e-1,1))),disabled:1===D,className:k("p-2 rounded-lg transition-all duration-200",1===D?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),"aria-label":"P\xe1gina anterior",children:(0,w.jsx)(v,{className:"w-5 h-5"})}),(0,w.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["P\xe1gina ",D," de ",se]}),(0,w.jsx)("button",{onClick:()=>T((e=>Math.min(e+1,se))),disabled:D===se,className:k("p-2 rounded-lg transition-all duration-200",D===se?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),"aria-label":"P\xe1gina siguiente",children:(0,w.jsx)(j,{className:"w-5 h-5"})})]})]})]})}),(0,w.jsxs)("div",{className:"mt-8",children:[(0,w.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Resumen por Domiciliarios"}),(0,w.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:0===Object.keys(Z).length?(0,w.jsx)("p",{className:"col-span-full text-center text-gray-500 dark:text-gray-400 p-4",children:"No hay datos de domiciliarios disponibles."}):Object.entries(Z).map((e=>{let[a,t]=e;return(0,w.jsxs)("div",{className:k("p-5 rounded-lg shadow-md","dark"===o?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:[(0,w.jsx)("p",{className:"font-semibold text-lg mb-2",children:a}),(0,w.jsxs)("p",{className:"text-base",children:["Efectivo: ",(0,w.jsxs)("span",{className:"font-medium",children:["$",t.cash.toLocaleString("es-CO")]})]}),(0,w.jsxs)("p",{className:"text-base",children:["Daviplata: ",(0,w.jsxs)("span",{className:"font-medium",children:["$",t.daviplata.toLocaleString("es-CO")]})]}),(0,w.jsxs)("p",{className:"text-base",children:["Nequi: ",(0,w.jsxs)("span",{className:"font-medium",children:["$",t.nequi.toLocaleString("es-CO")]})]}),(0,w.jsxs)("p",{className:"text-base font-bold mt-2",children:["Total: ",(0,w.jsxs)("span",{className:"text-blue-500",children:["$",t.total.toLocaleString("es-CO")]})]})]},a)}))})]}),H&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fadeIn",role:"dialog","aria-modal":"true","aria-labelledby":"meal-details-title",children:(0,w.jsxs)("div",{className:k("p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-md max-h-[85vh] overflow-y-auto transition-all duration-300 transform scale-95 animate-scaleIn","dark"===o?"bg-gray-800":"bg-white"),children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,w.jsxs)("h2",{id:"meal-details-title",className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:["Detalles del Pedido #",H.id]}),(0,w.jsx)("button",{onClick:()=>G(null),className:"text-gray-400 hover:text-gray-200 transition-colors duration-150 p-1 rounded-full","aria-label":"Cerrar detalles del pedido",children:(0,w.jsx)(N.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Estado:"}),(0,w.jsx)("span",{className:k("px-3 py-1 rounded-full text-sm font-medium","Pendiente"===H.status?"bg-yellow-500 text-black":"Entregado"===H.status?"bg-green-500 text-white":"bg-red-500 text-white"),children:H.status||"Pendiente"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Creaci\xf3n:"}),(0,w.jsx)("p",{className:"text-gray-900 dark:text-gray-100",children:H.createdAt?new Date(1e3*H.createdAt.seconds).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Total del Pedido:"}),(0,w.jsxs)("p",{className:"text-gray-900 dark:text-gray-100 font-bold text-lg",children:["$",(null===(a=H.total)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Domiciliario Asignado:"}),(0,w.jsx)("p",{className:"text-gray-900 dark:text-gray-100",children:H.deliveryPerson||"Sin asignar"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Resumen de Almuerzos:"}),(e=>{const{areIdentical:a,count:t}=(e=>{if(!e||e.length<=1)return{areIdentical:!1,count:1};const a=["soup","soupReplacement","principle","principleReplacement","protein","drink","cutlery","notes","time","payment","address.address","address.addressType","address.phoneNumber","address.localName","address.recipientName","address.unitDetails","sides","additions"],t=e=>a.map((a=>{const t=E(e,a);return"sides"===a&&Array.isArray(t)?t.map((e=>C(e.name||e))).sort().join(","):"additions"===a&&Array.isArray(t)?t.map((e=>`${C(e.name||e)}${e.protein||e.replacement?`:${C(e.protein||e.replacement)}`:""}:${e.quantity||1}`)).sort().join(";"):"principle"===a&&Array.isArray(t)?t.map((e=>C(e.name||e))).sort().join(","):C(t)})).join("|"),r=t(e[0]);return{areIdentical:e.every((e=>t(e)===r)),count:e.length}})(H.meals);return a&&t>1?(0,w.jsxs)("div",{className:k("p-4 rounded-lg mb-4","dark"===o?"bg-gray-700":"bg-gray-50"),children:[(0,w.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-2",children:[t," almuerzos id\xe9nticos"]}),(0,w.jsx)("pre",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-sans break-words",children:$(H.meals[0])})]}):null===(e=H.meals)||void 0===e?void 0:e.map(((e,a)=>(0,w.jsxs)("div",{className:k("p-4 rounded-lg mb-4","dark"===o?"bg-gray-700":"bg-gray-50"),children:[(0,w.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["Almuerzo #",a+1]}),(0,w.jsx)("pre",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-sans break-words",children:$(e)})]},a)))})()]})]}),(0,w.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,w.jsx)("button",{onClick:()=>{ee(H),G(null)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg shadow-md transition-all duration-200 text-sm font-medium","aria-label":`Editar pedido ${H.id}`,children:"Editar Pedido"}),(0,w.jsx)("button",{onClick:()=>G(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-lg shadow-md transition-all duration-200 text-sm font-medium",children:"Cerrar"})]})]})}),g&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fadeIn",role:"dialog","aria-modal":"true","aria-labelledby":"edit-order-title",children:(0,w.jsxs)("div",{className:k("p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] overflow-y-auto transition-all duration-300 transform scale-95 animate-scaleIn","dark"===o?"bg-gray-800":"bg-white"),children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,w.jsxs)("h2",{id:"edit-order-title",className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:["Editar Pedido #",g.id]}),(0,w.jsx)("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-200 transition-colors duration-150 p-1 rounded-full","aria-label":"Cerrar edici\xf3n de pedido",children:(0,w.jsx)(N.A,{className:"h-6 w-6"})})]}),L.meals.map(((e,a)=>{var t,r,l,s,n,i,d,c,m,u,p,g,x,b,h,y,v,f,j,N;return(0,w.jsxs)("div",{className:k("mb-6 pb-4",a<L.meals.length-1?"dark"===o?"border-b border-gray-700":"border-b border-gray-200":""),children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:["Almuerzo #",a+1]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Sopa:"}),(0,w.jsx)("input",{type:"text",value:C((null===(t=e.soup)||void 0===t?void 0:t.name)||e.soup),onChange:e=>te(a,"soup",e.target.value),placeholder:"Sopa",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Reemplazo Sopa:"}),(0,w.jsx)("input",{type:"text",value:C((null===(r=e.soupReplacement)||void 0===r?void 0:r.name)||e.soupReplacement),onChange:e=>te(a,"soupReplacement",e.target.value),placeholder:"Reemplazo Sopa",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Principio:"}),(0,w.jsx)("input",{type:"text",value:Array.isArray(e.principle)?e.principle.map((e=>C(e.name||e))).join(", "):C((null===(l=e.principle)||void 0===l?void 0:l.name)||e.principle),onChange:e=>te(a,"principle",e.target.value),placeholder:"Principio (ej: Arroz, Pasta)",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Reemplazo Principio:"}),(0,w.jsx)("input",{type:"text",value:C((null===(s=e.principleReplacement)||void 0===s?void 0:s.name)||e.principleReplacement),onChange:e=>te(a,"principleReplacement",e.target.value),placeholder:"Reemplazo Principio",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Prote\xedna:"}),(0,w.jsx)("input",{type:"text",value:C((null===(n=e.protein)||void 0===n?void 0:n.name)||e.protein),onChange:e=>te(a,"protein",e.target.value),placeholder:"Prote\xedna",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Bebida:"}),(0,w.jsx)("input",{type:"text",value:C((null===(i=e.drink)||void 0===i?void 0:i.name)||e.drink),onChange:e=>te(a,"drink",e.target.value),placeholder:"Bebida",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Cubiertos:"}),(0,w.jsxs)("select",{value:C((null===(d=e.cutlery)||void 0===d?void 0:d.name)||e.cutlery),onChange:e=>te(a,"cutlery",e.target.value),className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),children:[(0,w.jsx)("option",{value:"S\xed",children:"S\xed"}),(0,w.jsx)("option",{value:"No",children:"No"})]})]}),(0,w.jsxs)("label",{className:"block md:col-span-2",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Acompa\xf1amientos (separados por coma):"}),(0,w.jsx)("input",{type:"text",value:(null===(c=e.sides)||void 0===c?void 0:c.map((e=>C(e.name||e))).join(", "))||"",onChange:e=>te(a,"sides",e.target.value),placeholder:"Ej: Papa, Ensalada",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block md:col-span-2",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Adiciones (ej: nombre,prot_reemplazo,cant;):"}),(0,w.jsx)("input",{type:"text",value:(null===(m=e.additions)||void 0===m?void 0:m.map((e=>`${C(e.name||e)}${e.protein||e.replacement?`,${C(e.protein||e.replacement)}`:""},${e.quantity||1}`)).join(";"))||"",onChange:e=>te(a,"additions",e.target.value),placeholder:"Ej: Aguacate,,1;Pollo desmechado,Res,1",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block md:col-span-2",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Notas:"}),(0,w.jsx)("textarea",{value:e.notes||"",onChange:e=>te(a,"notes",e.target.value),placeholder:"Notas adicionales del pedido...",rows:"2",className:k("mt-1 w-full p-2 border rounded-lg text-sm resize-y","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block md:col-span-2",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Direcci\xf3n:"}),(0,w.jsx)("input",{type:"text",value:(null===(u=e.address)||void 0===u?void 0:u.address)||"",onChange:e=>te(a,"address.address",e.target.value),placeholder:"CL 123 #125-67",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Tipo de Lugar:"}),(0,w.jsxs)("select",{value:(null===(p=e.address)||void 0===p?void 0:p.addressType)||"house",onChange:e=>te(a,"address.addressType",e.target.value),className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),children:[(0,w.jsx)("option",{value:"house",children:"Casa/Apartamento"}),(0,w.jsx)("option",{value:"school",children:"Colegio/Oficina"}),(0,w.jsx)("option",{value:"complex",children:"Conjunto Residencial"}),(0,w.jsx)("option",{value:"shop",children:"Tienda/Local"})]})]}),"school"===(null===(g=e.address)||void 0===g?void 0:g.addressType)&&(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Nombre del destinatario:"}),(0,w.jsx)("input",{type:"text",value:(null===(x=e.address)||void 0===x?void 0:x.recipientName)||"",onChange:e=>te(a,"address.recipientName",e.target.value),placeholder:"Nombre",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),"complex"===(null===(b=e.address)||void 0===b?void 0:b.addressType)&&(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Detalles de unidad:"}),(0,w.jsx)("input",{type:"text",value:(null===(h=e.address)||void 0===h?void 0:h.unitDetails)||"",onChange:e=>te(a,"address.unitDetails",e.target.value),placeholder:"Torre, Apto, Bloque",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),"shop"===(null===(y=e.address)||void 0===y?void 0:y.addressType)&&(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Nombre del local:"}),(0,w.jsx)("input",{type:"text",value:(null===(v=e.address)||void 0===v?void 0:v.localName)||"",onChange:e=>te(a,"address.localName",e.target.value),placeholder:"Nombre del local",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Tel\xe9fono:"}),(0,w.jsx)("input",{type:"text",value:(null===(f=e.address)||void 0===f?void 0:f.phoneNumber)||"",onChange:e=>te(a,"address.phoneNumber",e.target.value),placeholder:"Tel\xe9fono",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Hora de Entrega:"}),(0,w.jsx)("input",{type:"text",value:C((null===(j=e.time)||void 0===j?void 0:j.name)||e.time),onChange:e=>te(a,"time",e.target.value),placeholder:"Ej: 1:00 PM",className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500")})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Pago de este Almuerzo:"}),(0,w.jsxs)("select",{value:C((null===(N=e.payment)||void 0===N?void 0:N.name)||e.payment),onChange:e=>te(a,"payment",e.target.value),className:k("mt-1 w-full p-2 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),children:[(0,w.jsx)("option",{value:"Efectivo",children:"Efectivo"}),(0,w.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,w.jsx)("option",{value:"Nequi",children:"Nequi"})]})]})]})]},a)})),(0,w.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm",children:"Total General del Pedido"}),(0,w.jsx)("input",{type:"number",value:L.total,onChange:e=>R({...L,total:Number(e.target.value)}),className:k("mt-1 w-full p-3 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Total general del pedido"})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm",children:"M\xe9todo de Pago General"}),(0,w.jsxs)("select",{value:L.payment,onChange:e=>R({...L,payment:e.target.value}),className:k("mt-1 w-full p-3 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"M\xe9todo de pago general",children:[(0,w.jsx)("option",{value:"Efectivo",children:"Efectivo"}),(0,w.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,w.jsx)("option",{value:"Nequi",children:"Nequi"})]})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm",children:"Domiciliario"}),(0,w.jsx)("input",{type:"text",value:L.deliveryPerson,onChange:e=>R({...L,deliveryPerson:e.target.value}),className:k("mt-1 w-full p-3 border rounded-lg text-sm","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Nombre del domiciliario"})]}),(0,w.jsxs)("label",{className:"block",children:[(0,w.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm",children:"Estado"}),(0,w.jsxs)("select",{value:L.status,onChange:e=>R({...L,status:e.target.value}),className:k("mt-1 w-full p-3 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","Pendiente"===L.status?"bg-yellow-500 text-black":"Entregado"===L.status?"bg-green-500 text-white":"bg-red-500 text-white"),"aria-label":"Estado del pedido",children:[(0,w.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,w.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,w.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})]})]}),(0,w.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,w.jsx)("button",{onClick:async()=>{if(g){I(!0);try{const e=L.meals.map((e=>({...e,soup:e.soup&&"string"===typeof e.soup?{name:e.soup}:e.soup,soupReplacement:e.soupReplacement&&"string"===typeof e.soupReplacement?{name:e.soupReplacement}:e.soupReplacement,principle:Array.isArray(e.principle)?e.principle.map((e=>"string"===typeof e?{name:e}:e)):e.principle&&"string"===typeof e.principle?[{name:e.principle}]:e.principle,principleReplacement:e.principleReplacement&&"string"===typeof e.principleReplacement?{name:e.principleReplacement}:e.principleReplacement,protein:e.protein&&"string"===typeof e.protein?{name:e.protein}:e.protein,drink:e.drink&&"string"===typeof e.drink?{name:e.drink}:e.drink,cutlery:e.cutlery&&"string"===typeof e.cutlery?{name:e.cutlery}:e.cutlery,time:e.time&&"string"===typeof e.time?{name:e.time}:e.time,payment:e.payment&&"string"===typeof e.payment?{name:e.payment}:e.payment,sides:Array.isArray(e.sides)?e.sides.map((e=>"string"===typeof e?{name:e}:e)):[],additions:Array.isArray(e.additions)?e.additions.map((e=>({name:e.name||"",protein:e.protein||"",replacement:e.replacement||"",quantity:e.quantity||1}))):[]})));await(0,s.mZ)((0,s.H9)(l.db,"orders",g.id),{...L,meals:e,updatedAt:new Date}),b(null),n("Pedido actualizado correctamente.")}catch(e){t(`Error al guardar: ${e.message}`)}finally{I(!1)}}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg shadow-md transition-all duration-200 text-sm font-medium",disabled:B,children:B?"Guardando...":"Guardar Cambios"}),(0,w.jsx)("button",{onClick:()=>b(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-lg shadow-md transition-all duration-200 text-sm font-medium",disabled:B,children:"Cancelar"})]})]})}),z&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fadeIn",role:"dialog","aria-modal":"true","aria-labelledby":"confirm-delete-title",children:(0,w.jsxs)("div",{className:k("p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-md max-h-[85vh] overflow-y-auto transition-all duration-300 transform scale-95 animate-scaleIn","dark"===o?"bg-gray-800":"bg-white"),children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,w.jsx)("h2",{id:"confirm-delete-title",className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Confirmar Eliminaci\xf3n Masiva"}),(0,w.jsx)("button",{onClick:()=>{M(!1),V("")},className:"text-gray-400 hover:text-gray-200 transition-colors duration-150 p-1 rounded-full","aria-label":"Cerrar confirmaci\xf3n de eliminaci\xf3n",children:(0,w.jsx)(N.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-base",children:["Est\xe1s a punto de eliminar ",(0,w.jsx)("strong",{className:"text-red-500",children:"TODOS"}),' los pedidos. Esta acci\xf3n es irreversible. Para confirmar, por favor escribe "',(0,w.jsx)("span",{className:"font-bold text-red-500",children:"confirmar"}),'" en el campo de abajo.']}),(0,w.jsx)("input",{type:"text",value:F,onChange:e=>V(e.target.value),placeholder:"Escribe 'confirmar' aqu\xed",className:k("w-full p-3 border rounded-lg text-sm mb-4","dark"===o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-50 text-gray-900","focus:outline-none focus:ring-2 focus:ring-red-500"),"aria-label":"Campo de confirmaci\xf3n para eliminar todos los pedidos"}),(0,w.jsxs)("div",{className:"flex gap-3",children:[(0,w.jsx)("button",{onClick:async()=>{if("confirmar"===F.toLowerCase()){I(!0);try{const e=(0,s.rJ)(l.db,"orders"),a=(0,s.P)(e),t=await(0,s.GG)(a),r=(0,s.wP)(l.db);t.docs.forEach((e=>{r.delete(e.ref)})),await r.commit(),n("Todos los pedidos han sido eliminados."),M(!1),V("")}catch(e){t(`Error al eliminar todos los pedidos: ${e.message}`)}finally{I(!1)}}else t('Por favor, escribe "confirmar" para proceder.')},className:"flex-1 bg-red-600 hover:bg-red-700 text-white p-3 rounded-lg shadow-md transition-all duration-200 text-sm font-medium transform hover:scale-105",disabled:B||"confirmar"!==F.toLowerCase(),children:B?"Eliminando...":"Eliminar Todos"}),(0,w.jsx)("button",{onClick:()=>{M(!1),V("")},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-lg shadow-md transition-all duration-200 text-sm font-medium transform hover:scale-105",disabled:B,children:"Cancelar"})]})]})})]})}}}]);
//# sourceMappingURL=968.04b4980b.chunk.js.map