{"version":3,"file":"static/js/313.dd105f79.chunk.js","mappings":"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","sources":["components/Admin/Dashboard.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { db } from '../../config/firebase';\r\nimport { collection, onSnapshot } from 'firebase/firestore';\r\nimport Chart from 'chart.js/auto';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Dashboard = ({ setError, setSuccess, theme }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [totals, setTotals] = useState({ cash: 0, daviplata: 0, nequi: 0 });\r\n  const [statusCounts, setStatusCounts] = useState({ Pending: 0, Delivered: 0, Cancelled: 0 });\r\n  const [userActivity, setUserActivity] = useState([]);\r\n  const [chartData, setChartData] = useState({ labels: [], datasets: [] });\r\n  const chartRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const unsubscribeOrders = onSnapshot(collection(db, 'orders'), (snapshot) => {\r\n      const ordersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setOrders(ordersData);\r\n\r\n      const newTotals = { cash: 0, daviplata: 0, nequi: 0 };\r\n      const newStatusCounts = { Pending: 0, Delivered: 0, Cancelled: 0 };\r\n      const dailyOrders = {};\r\n\r\n      ordersData.forEach(order => {\r\n        const date = new Date(order.createdAt?.toDate()).toLocaleDateString();\r\n        dailyOrders[date] = (dailyOrders[date] || 0) + 1;\r\n\r\n        if (order.payment === 'Efectivo') newTotals.cash += order.total || 0;\r\n        else if (order.payment === 'DaviPlata') newTotals.daviplata += order.total || 0;\r\n        else if (order.payment === 'Nequi') newTotals.nequi += order.total || 0;\r\n\r\n        if (order.status === 'Pending') newStatusCounts.Pending += 1;\r\n        else if (order.status === 'Delivered') newStatusCounts.Delivered += 1;\r\n        else if (order.status === 'Cancelled') newStatusCounts.Cancelled += 1;\r\n      });\r\n\r\n      setTotals(newTotals);\r\n      setStatusCounts(newStatusCounts);\r\n      setChartData({\r\n        labels: Object.keys(dailyOrders),\r\n        datasets: [{\r\n          label: 'Pedidos Diarios',\r\n          data: Object.values(dailyOrders),\r\n          backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n          borderColor: 'rgba(75, 192, 192, 1)',\r\n          borderWidth: 1,\r\n        }],\r\n      });\r\n    }, (error) => setError(`Error al cargar pedidos: ${error.message}`));\r\n\r\n    const unsubscribeUsers = onSnapshot(collection(db, 'users'), (snapshot) => {\r\n      const usersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setUsers(usersData);\r\n    }, (error) => setError(`Error al cargar usuarios: ${error.message}`));\r\n\r\n    const unsubscribeActivity = onSnapshot(collection(db, 'userActivity'), (snapshot) => {\r\n      const activity = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })).sort((a, b) => b.timestamp - a.timestamp).slice(0, 5);\r\n      setUserActivity(activity);\r\n    }, (error) => setError(`Error al cargar actividad: ${error.message}`));\r\n\r\n    return () => { unsubscribeOrders(); unsubscribeUsers(); unsubscribeActivity(); };\r\n  }, [setError]);\r\n\r\n  const recentOrders = orders.slice(0, 5);\r\n\r\n  useEffect(() => {\r\n    const ctx = document.getElementById('ordersChart')?.getContext('2d');\r\n    if (ctx) {\r\n      if (chartRef.current) {\r\n        chartRef.current.destroy();\r\n      }\r\n\r\n      chartRef.current = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: chartData,\r\n        options: {\r\n          scales: { y: { beginAtZero: true } },\r\n          plugins: { legend: { labels: { color: theme === 'dark' ? '#fff' : '#000' } } },\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n        },\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (chartRef.current) {\r\n        chartRef.current.destroy();\r\n        chartRef.current = null;\r\n      }\r\n    };\r\n  }, [chartData, theme]);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-2 sm:px-4\">\r\n      <h2 className=\"text-xl sm:text-2xl font-bold mb-6 text-gray-100\">Dashboard</h2>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\r\n        <div className={`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-4 sm:p-6 rounded-xl shadow-lg`}>\r\n          <h3 className=\"text-base sm:text-lg font-semibold mb-4\">Resumen de Pedidos</h3>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Total:</span><span>{orders.length}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Pendientes:</span><span className=\"text-yellow-400\">{statusCounts.Pending}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Entregados:</span><span className=\"text-green-400\">{statusCounts.Delivered}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Cancelados:</span><span className=\"text-red-400\">{statusCounts.Cancelled}</span></div>\r\n          </div>\r\n        </div>\r\n        <div className={`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-4 sm:p-6 rounded-xl shadow-lg`}>\r\n          <h3 className=\"text-base sm:text-lg font-semibold mb-4\">Ingresos</h3>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Efectivo:</span><span>${totals.cash.toLocaleString()}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">DaviPlata:</span><span>${totals.daviplata.toLocaleString()}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Nequi:</span><span>${totals.nequi.toLocaleString()}</span></div>\r\n          </div>\r\n        </div>\r\n        <div className={`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-4 sm:p-6 rounded-xl shadow-lg`}>\r\n          <h3 className=\"text-base sm:text-lg font-semibold mb-4\">Usuarios</h3>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Total:</span><span>{users.length}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Administradores:</span><span>{users.filter(u => u.role === 2).length}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"text-gray-400\">Clientes:</span><span>{users.filter(u => u.role === 1).length}</span></div>\r\n          </div>\r\n        </div>\r\n        <div className={`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-4 sm:p-6 rounded-xl shadow-lg`}>\r\n          <h3 className=\"text-base sm:text-lg font-semibold mb-4\">Actividad Reciente</h3>\r\n          <div className=\"space-y-2 text-sm max-h-32 overflow-y-auto\">\r\n            {userActivity.map((act, idx) => (\r\n              <div key={idx} className=\"flex justify-between\"><span className=\"text-gray-400\">{act.action}</span><span>{new Date(act.timestamp?.toDate()).toLocaleString()}</span></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`mt-6 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'} p-4 sm:p-6 rounded-xl shadow-lg`}>\r\n        <h3 className=\"text-base sm:text-lg font-semibold mb-4\">Pedidos Recientes</h3>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-left border-collapse text-xs sm:text-sm\">\r\n            <thead><tr className={`bg-${theme === 'dark' ? 'gray-700' : 'gray-300'} text-${theme === 'dark' ? 'gray-300' : 'gray-700'} font-semibold`}><th className=\"p-2 border-b\">Nº</th><th className=\"p-2 border-b\">Bandeja</th><th className=\"p-2 border-b hidden sm:table-cell\">Total</th><th className=\"p-2 border-b hidden sm:table-cell\">Estado</th><th className=\"p-2 border-b\">Acciones</th></tr></thead>\r\n            <tbody>\r\n              {recentOrders.length === 0 ? (\r\n                <tr><td colSpan=\"5\" className=\"p-4 text-gray-400 text-center\">No hay pedidos recientes.</td></tr>\r\n              ) : (\r\n                recentOrders.map((order, index) => {\r\n                  const bandeja = order.meals?.map(meal => `${meal?.soup || ''} ${meal?.principle || ''} ${meal?.protein || ''}`).join(' | ') || '';\r\n                  return (\r\n                    <tr key={order.id} className={`border-b ${index % 2 === 0 ? 'bg-gray-750' : ''}`}>\r\n                      <td className=\"p-2 text-gray-300\">{recentOrders.length - index}</td>\r\n                      <td className=\"p-2 text-gray-300 max-w-[120px] sm:max-w-xs overflow-hidden text-ellipsis whitespace-nowrap\">{bandeja}</td>\r\n                      <td className=\"p-2 text-gray-300 hidden sm:table-cell\">${order.total?.toLocaleString() || '0'}</td>\r\n                      <td className=\"p-2 hidden sm:table-cell\"><span className={`px-2 py-1 rounded-full text-xs ${order.status === 'Pending' ? 'bg-yellow-600 text-yellow-100' : order.status === 'Delivered' ? 'bg-green-600 text-green-100' : 'bg-gray-600 text-gray-100'}`}>{order.status || 'Pending'}</span></td>\r\n                      <td className=\"p-2\"><button onClick={() => navigate('/admin/orders')} className=\"text-blue-400 hover:text-blue-300 text-xs sm:text-sm\" title=\"Ver más\">Ver más</button></td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`mt-6 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'} p-4 sm:p-6 rounded-xl shadow-lg`}>\r\n        <h3 className=\"text-base sm:text-lg font-semibold mb-4\">Gráfica de Pedidos</h3>\r\n        <div className=\"w-full h-64\">\r\n          <canvas id=\"ordersChart\" className=\"w-full h-full\"></canvas>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"names":["_ref","setError","setSuccess","theme","orders","setOrders","useState","users","setUsers","totals","setTotals","cash","daviplata","nequi","statusCounts","setStatusCounts","Pending","Delivered","Cancelled","userActivity","setUserActivity","chartData","setChartData","labels","datasets","chartRef","useRef","navigate","useNavigate","useEffect","unsubscribeOrders","onSnapshot","collection","db","snapshot","ordersData","docs","map","doc","id","data","newTotals","newStatusCounts","dailyOrders","forEach","order","_order$createdAt","date","Date","createdAt","toDate","toLocaleDateString","payment","total","status","Object","keys","label","values","backgroundColor","borderColor","borderWidth","error","message","unsubscribeUsers","usersData","unsubscribeActivity","activity","sort","a","b","timestamp","slice","recentOrders","_document$getElementB","ctx","document","getElementById","getContext","current","destroy","Chart","type","options","scales","y","beginAtZero","plugins","legend","color","responsive","maintainAspectRatio","_jsxs","className","children","_jsx","length","toLocaleString","filter","u","role","act","idx","_act$timestamp","action","colSpan","index","_order$meals","_order$total","bandeja","meals","meal","soup","principle","protein","join","onClick","title"],"sourceRoot":""}