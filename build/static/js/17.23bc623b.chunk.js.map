{"version":3,"file":"static/js/17.23bc623b.chunk.js","mappings":"+KAOA,MAoJA,EApJcA,KACZ,MAAOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC5BK,EAAcC,IAAmBN,EAAAA,EAAAA,WAAS,IAC1CO,EAAYC,IAAiBR,EAAAA,EAAAA,WAAS,IACtCS,EAAWC,IAAgBV,EAAAA,EAAAA,WAAS,IACrC,MAAEW,EAAK,KAAEC,EAAI,QAAEC,IAAYC,EAAAA,EAAAA,KAC3BC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,WAAU,KACR,MAAMC,EAAkBC,aAAaC,QAAQ,mBACzCF,IACFnB,EAASmB,GACTV,GAAc,KAEf,KAEHS,EAAAA,EAAAA,WAAU,KACR,IAAKJ,GAAWD,EAAM,CAEDS,WACjB,IACE,MAAMC,GAAIC,EAAAA,EAAAA,IACRC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,UACfC,EAAAA,EAAAA,IAAM,QAAS,KAAMd,EAAKd,QAC1B4B,EAAAA,EAAAA,IAAM,OAAQ,KAAM,WAECC,EAAAA,EAAAA,IAAQL,IACjBM,MAGZxB,EAAS,uCAFTW,EAAS,SAIb,CAAE,MAAOc,GACPzB,EAAS,6BACX,GAEF0B,EACF,GACC,CAAClB,EAAMC,EAASE,IAoBnB,OAAIF,GACKkB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,6BAA4BC,SAAC,iBAInDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2EAA0EC,UACvFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,0BACnD9B,IAAS4B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yCAAwCC,SAAE9B,KACnE+B,EAAAA,EAAAA,MAAA,QAAMC,SA3BSd,UACnBe,EAAEC,iBACF3B,GAAa,GACbN,EAAS,IACT,UACQO,EAAMb,EAAOG,GACfM,EACFY,aAAamB,QAAQ,kBAAmBxC,GAExCqB,aAAaoB,WAAW,kBAG5B,CAAE,MAAOV,GACPzB,EAASyB,EAAIW,SACb9B,GAAa,EACf,GAYkCsB,UAAU,YAAWC,SAAA,EACjDC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOU,QAAQ,QAAQT,UAAU,aAAYC,SAAC,4BAC9CF,EAAAA,EAAAA,KAAA,SACEW,GAAG,QACHC,KAAK,QACLC,MAAO9C,EACP+C,SAAWT,GAAMrC,EAASqC,EAAEU,OAAOF,OACnCG,UAAQ,EACRf,UAAU,8EAGdE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SAAOU,QAAQ,WAAWT,UAAU,aAAYC,SAAC,oBACjDF,EAAAA,EAAAA,KAAA,SACEW,GAAG,WACHC,KAAMtC,EAAe,OAAS,WAC9BuC,MAAO3C,EACP4C,SAAWT,GAAMlC,EAAYkC,EAAEU,OAAOF,OACtCG,UAAQ,EACRf,UAAU,2EAEZD,EAAAA,EAAAA,KAAA,UACEY,KAAK,SACLK,QAASA,IAAM1C,GAAiBD,GAChC2B,UAAU,wCACV,aAAY3B,EAAe,wBAAuB,wBAAqB4B,SAEtE5B,GACC0B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,UAAUiB,KAAK,OAAOC,OAAO,eAAeC,QAAQ,YAAWlB,UAC5EF,EAAAA,EAAAA,KAAA,QAAMqB,cAAc,QAAQC,eAAe,QAAQC,YAAY,IAAIC,EAAE,gTAGvErB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,UAAUiB,KAAK,OAAOC,OAAO,eAAeC,QAAQ,YAAWlB,SAAA,EAC5EF,EAAAA,EAAAA,KAAA,QAAMqB,cAAc,QAAQC,eAAe,QAAQC,YAAY,IAAIC,EAAE,sCACrExB,EAAAA,EAAAA,KAAA,QAAMqB,cAAc,QAAQC,eAAe,QAAQC,YAAY,IAAIC,EAAE,qIAK7ErB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,oBAAmBC,SAAA,EAClCF,EAAAA,EAAAA,KAAA,SACEY,KAAK,WACLa,QAASjD,EACTsC,SAAWT,GAAM5B,EAAc4B,EAAEU,OAAOU,SACxCxB,UAAU,SACV,iBAGJD,EAAAA,EAAAA,KAAC0B,EAAAA,GAAI,CAACC,GAAG,mBAAmB1B,UAAU,gCAA+BC,SAAC,wCAIxEF,EAAAA,EAAAA,KAAA,UACEY,KAAK,SACLgB,SAAUlD,EACVuB,UAAW,wGACTvB,EAAY,gCAAkC,IAC7CwB,SAEFxB,GACCyB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mCAAkCC,SAAA,EAC/CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4BAA4BmB,QAAQ,YAAWlB,SAAA,EAC5DF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,aAAa4B,GAAG,KAAKC,GAAG,KAAKC,EAAE,KAAKZ,OAAO,eAAeI,YAAY,OACxFvB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,aAAaiB,KAAK,eAAeM,EAAE,uHAC/C,mBAIR,qB","sources":["components/Auth/Login.js"],"sourcesContent":["// src/components/Auth/Login.js\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthProvider';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { query, collection, where, getDocs } from 'firebase/firestore';\r\nimport { db } from '../../config/firebase';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { login, user, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const rememberedEmail = localStorage.getItem('rememberedEmail');\r\n    if (rememberedEmail) {\r\n      setEmail(rememberedEmail);\r\n      setRememberMe(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading && user) {\r\n      // Check if user is admin\r\n      const checkAdmin = async () => {\r\n        try {\r\n          const q = query(\r\n            collection(db, 'users'),\r\n            where('email', '==', user.email),\r\n            where('role', '==', 2)\r\n          );\r\n          const snapshot = await getDocs(q);\r\n          if (!snapshot.empty) {\r\n            navigate('/admin');\r\n          } else {\r\n            setError('No tienes permisos de administrador');\r\n          }\r\n        } catch (err) {\r\n          setError('Error verificando permisos');\r\n        }\r\n      };\r\n      checkAdmin();\r\n    }\r\n  }, [user, loading, navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    setError('');\r\n    try {\r\n      await login(email, password);\r\n      if (rememberMe) {\r\n        localStorage.setItem('rememberedEmail', email);\r\n      } else {\r\n        localStorage.removeItem('rememberedEmail');\r\n      }\r\n      // Admin check handled in useEffect\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"p-4 text-white bg-gray-900\">Cargando...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 bg-gray-900 text-white min-h-screen flex items-center justify-center\">\r\n      <div className=\"w-full max-w-md\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center\">Acceso Administrativo</h1>\r\n        {error && <div className=\"mb-4 p-2 bg-red-700 text-white rounded\">{error}</div>}\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block mb-2\">Correo Electrónico:</label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              className=\"w-full p-2 mb-4 bg-gray-800 border border-gray-700 rounded text-white\"\r\n            />\r\n          </div>\r\n          <div className=\"relative\">\r\n            <label htmlFor=\"password\" className=\"block mb-2\">Contraseña:</label>\r\n            <input\r\n              id=\"password\"\r\n              type={showPassword ? 'text' : 'password'}\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              className=\"w-full p-2 mb-4 bg-gray-800 border border-gray-700 rounded text-white\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowPassword(!showPassword)}\r\n              className=\"absolute right-2 top-10 text-gray-400\"\r\n              aria-label={showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'}\r\n            >\r\n              {showPassword ? (\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\r\n                </svg>\r\n              ) : (\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <label className=\"flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={rememberMe}\r\n                onChange={(e) => setRememberMe(e.target.checked)}\r\n                className=\"mr-2\"\r\n              />\r\n              Recordarme\r\n            </label>\r\n            <Link to=\"/forgot-password\" className=\"text-blue-400 hover:underline\">\r\n              ¿Olvidaste tu contraseña?\r\n            </Link>\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className={`w-full bg-green-600 hover:bg-green-700 p-2 rounded text-white font-semibold transition duration-200 ${\r\n              isLoading ? 'opacity-50 cursor-not-allowed' : ''\r\n            }`}\r\n          >\r\n            {isLoading ? (\r\n              <div className=\"flex items-center justify-center\">\r\n                <svg className=\"animate-spin h-5 w-5 mr-2\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n                </svg>\r\n                Ingresando...\r\n              </div>\r\n            ) : (\r\n              'Ingresar'\r\n            )}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"names":["Login","email","setEmail","useState","password","setPassword","error","setError","showPassword","setShowPassword","rememberMe","setRememberMe","isLoading","setIsLoading","login","user","loading","useAuth","navigate","useNavigate","useEffect","rememberedEmail","localStorage","getItem","async","q","query","collection","db","where","getDocs","empty","err","checkAdmin","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","setItem","removeItem","message","htmlFor","id","type","value","onChange","target","required","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","checked","Link","to","disabled","cx","cy","r"],"sourceRoot":""}