{"version":3,"file":"static/js/445.47c20a99.chunk.js","mappings":"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","sources":["components/Admin/UserManagement.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { db } from '../../config/firebase';\r\nimport { collection, onSnapshot, updateDoc, doc, deleteDoc } from 'firebase/firestore';\r\nimport { XMarkIcon } from '@heroicons/react/24/outline';\r\n\r\nconst UserManagement = ({ setError, setSuccess, theme }) => {\r\n  const [users, setUsers] = useState([]);\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [editUserForm, setEditUserForm] = useState({ email: '', role: 1, totalOrders: 0 });\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onSnapshot(collection(db, 'users'), (snapshot) => {\r\n      setUsers(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n    }, (error) => setError(`Error al cargar usuarios: ${error.message}`));\r\n    return () => unsubscribe();\r\n  }, [setError]);\r\n\r\n  const handleEditUser = (user) => { setEditingUser(user); setEditUserForm(user); };\r\n  const handleSaveEdit = async () => { \r\n    try { \r\n      await updateDoc(doc(db, 'users', editingUser.id), editUserForm); \r\n      setEditingUser(null); \r\n      setSuccess('Usuario actualizado'); \r\n    } catch (error) { \r\n      setError(`Error: ${error.message}`); \r\n    } \r\n  };\r\n  const handleDeleteUser = async (userId) => { \r\n    try { \r\n      await deleteDoc(doc(db, 'users', userId)); \r\n      setSuccess('Usuario eliminado'); \r\n    } catch (error) { \r\n      setError(`Error: ${error.message}`); \r\n    } \r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-2 sm:px-4\">\r\n      <h2 className=\"text-xl sm:text-2xl font-bold mb-6 text-gray-100\">Gesti√≥n de Usuarios</h2>\r\n      <div className={`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-4 sm:p-6 rounded-xl shadow-lg max-h-[70vh] overflow-y-auto custom-scrollbar`}>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-left border-collapse text-xs sm:text-sm\">\r\n            <thead>\r\n              <tr className={`bg-${theme === 'dark' ? 'gray-700' : 'gray-300'} text-${theme === 'dark' ? 'gray-300' : 'gray-700'} font-semibold`}>\r\n                <th className=\"p-2 border-b\">ID</th>\r\n                <th className=\"p-2 border-b\">Email</th>\r\n                <th className=\"p-2 border-b hidden sm:table-cell\">Rol</th>\r\n                <th className=\"p-2 border-b hidden sm:table-cell\">Pedidos</th>\r\n                <th className=\"p-2 border-b\">Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {users.length === 0 ? (\r\n                <tr><td colSpan=\"5\" className=\"p-4 text-gray-400 text-center\">No hay usuarios.</td></tr>\r\n              ) : (\r\n                users.map((user, index) => (\r\n                  <tr key={user.id} className={`border-b ${index % 2 === 0 ? 'bg-gray-750' : ''}`}>\r\n                    <td className=\"p-2 text-gray-300 max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap\">{user.id}</td>\r\n                    <td className=\"p-2 text-gray-300 max-w-[150px] sm:max-w-none overflow-hidden text-ellipsis whitespace-nowrap\">{user.email || 'N/A'}</td>\r\n                    <td className=\"p-2 text-gray-300 hidden sm:table-cell\">{user.role === 2 ? 'Administrador' : 'Cliente'}</td>\r\n                    <td className=\"p-2 text-gray-300 hidden sm:table-cell\">{user.totalOrders || 0}</td>\r\n                    <td className=\"p-2\">\r\n                      <button onClick={() => handleEditUser(user)} className=\"text-blue-400 hover:text-blue-300 mr-2\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" /></svg>\r\n                      </button>\r\n                      <button onClick={() => handleDeleteUser(user.id)} className=\"text-red-400 hover:text-red-300\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M7 7h10\" /></svg>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      {editingUser && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className={`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-4 sm:p-6 rounded-xl shadow-lg w-11/12 max-w-md overflow-y-auto max-h-[80vh]`}>\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-lg font-bold text-gray-100\">Editar Usuario</h2>\r\n              <button onClick={() => setEditingUser(null)} className=\"text-gray-400 hover:text-gray-200\">\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n            <label className=\"block mb-4\">\r\n              <span className=\"text-gray-300 font-medium text-sm\">Email:</span>\r\n              <input \r\n                value={editUserForm.email} \r\n                onChange={e => setEditUserForm({ ...editUserForm, email: e.target.value })} \r\n                className={`mt-1 w-full p-2 border rounded text-${theme === 'dark' ? 'white' : 'gray-900'} bg-${theme === 'dark' ? 'gray-700' : 'gray-200'} text-sm`} \r\n              />\r\n            </label>\r\n            <label className=\"block mb-4\">\r\n              <span className=\"text-gray-300 font-medium text-sm\">Rol:</span>\r\n              <select \r\n                value={editUserForm.role} \r\n                onChange={e => setEditUserForm({ ...editUserForm, role: Number(e.target.value) })} \r\n                className={`mt-1 w-full p-2 border rounded text-${theme === 'dark' ? 'white' : 'gray-900'} bg-${theme === 'dark' ? 'gray-700' : 'gray-200'} text-sm`}\r\n              >\r\n                <option value={1}>Cliente</option>\r\n                <option value={2}>Administrador</option>\r\n              </select>\r\n            </label>\r\n            <label className=\"block mb-4\">\r\n              <span className=\"text-gray-300 font-medium text-sm\">Pedidos:</span>\r\n              <input \r\n                type=\"number\" \r\n                value={editUserForm.totalOrders} \r\n                onChange={e => setEditUserForm({ ...editUserForm, totalOrders: Number(e.target.value) })} \r\n                className={`mt-1 w-full p-2 border rounded text-${theme === 'dark' ? 'white' : 'gray-900'} bg-${theme === 'dark' ? 'gray-700' : 'gray-200'} text-sm`} \r\n              />\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              <button \r\n                onClick={handleSaveEdit} \r\n                className=\"flex-1 bg-green-600 hover:bg-green-700 text-white p-2 rounded-lg transition-all transform hover:scale-105 text-sm\"\r\n              >\r\n                Guardar\r\n              </button>\r\n              <button \r\n                onClick={() => setEditingUser(null)} \r\n                className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-all transform hover:scale-105 text-sm\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;"],"names":["_ref","setError","setSuccess","theme","users","setUsers","useState","editingUser","setEditingUser","editUserForm","setEditUserForm","email","role","totalOrders","useEffect","unsubscribe","onSnapshot","collection","db","snapshot","docs","map","doc","id","data","error","message","_jsxs","className","children","_jsx","length","colSpan","user","index","onClick","handleEditUser","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","async","deleteDoc","userId","handleDeleteUser","XMarkIcon","value","onChange","e","target","Number","type","updateDoc"],"sourceRoot":""}