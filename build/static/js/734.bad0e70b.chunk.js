"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[734],{6568:(e,t,a)=>{function n(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{x:()=>n})},7734:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var n=a(5043),r=a(1958),l=a(5472),i=a(9223),o=a.n(i);const s=async(e,t,a,n,r)=>{try{var l,i,s,d;const c=new(o().Workbook),m=c.addWorksheet("Gesti\xf3n de Pedidos"),u=e=>null==e||void 0===e?"":"string"===typeof e?e.replace(" NUEVO","").trim():"boolean"===typeof e?e.toString():"object"===typeof e&&null!==e&&"name"in e&&"string"===typeof e.name?e.name.replace(" NUEVO","").trim():String(e).replace(" NUEVO","").trim(),g=e=>{e.border={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}};m.addRow(["","PROTE\xcdNAS DEL D\xcdA"]);const p=m.lastRow.number;m.mergeCells(p,2,p,3);const x=m.getCell(`B${p}`);x.font={bold:!0,color:{argb:"FFFFFFFF"}},x.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},x.alignment={horizontal:"center"},m.getRow(p+1).values=["","Prote\xedna","Unidades","",""];m.getRow(p+1).eachCell((e,t)=>{2!==t&&3!==t||(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF28A745"}},e.font={color:{argb:"FFFFFFFF"},bold:!0},e.alignment={horizontal:"center"},g(e)),4!==t&&5!==t||(e.value="")});const h=0===r.length?[{name:"-",quantity:"-",extra:"",extraValue:""}]:[...r.slice(0,-2),{name:(null===(l=r[r.length-2])||void 0===l?void 0:l.name)||"-",quantity:(null===(i=r[r.length-2])||void 0===i?void 0:i.quantity)||"-",extra:"TOTAL PROTE\xcdNAS:",extraValue:n.toLocaleString("es-CO")},{name:(null===(s=r[r.length-1])||void 0===s?void 0:s.name)||"-",quantity:(null===(d=r[r.length-1])||void 0===d?void 0:d.quantity)||"-",extra:"Fecha actual:",extraValue:`${String((new Date).getDate()).padStart(2,"0")}/${String((new Date).getMonth()+1).padStart(2,"0")}/${(new Date).getFullYear()}`}];h.forEach((e,t)=>{m.addRow(["",u(e.name),e.quantity,e.extra,e.extraValue]).eachCell((e,a)=>{a>=2&&((t>=h.length-2||2===a||3===a)&&g(e),3===a&&(e.numFmt="#,##0",e.alignment={horizontal:"right"}),4===a&&(e.alignment={horizontal:"left"}),5===a&&(e.alignment={horizontal:"right"}))})}),m.addRow({}),m.addRow({});let b=0;const y=e.map((e,t)=>{var a,n,r,l;b+=1;const i=(null===(a=e.meals)||void 0===a?void 0:a[0])||{},o=e.payment||"object"===typeof i.payment&&(null===(n=i.payment)||void 0===n?void 0:n.name)||i.payment||"Efectivo";return o&&("object"!==typeof o||"name"in o)||console.warn(`Invalid payment data in order ${e.id||t}:`,{order:e,paymentValue:o}),{N:b,"Direcci\xf3n":u(null===(r=i.address)||void 0===r?void 0:r.address),"Tel\xe9fono":u(null===(l=i.address)||void 0===l?void 0:l.phoneNumber),Total:e.total||0,"M\xe9todoDePago":u(o),Domiciliario:u(e.deliveryPerson||"Sin asignar")}});0===y.length&&y.push({N:"-","Direcci\xf3n":"-","Tel\xe9fono":"-",Total:"-","M\xe9todoDePago":"-",Domiciliario:"-"}),m.columns=[{key:"N",width:10},{key:"Direcci\xf3n",width:30},{key:"Tel\xe9fono",width:15},{key:"Total",width:15},{key:"M\xe9todoDePago",width:15},{key:"Domiciliario",width:25}];const v=h.length+4,f=m.getRow(v);f.values=["N","Direcci\xf3n","Tel\xe9fono","Total","M\xe9todo de Pago","Domiciliario"],f.eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},e.font={color:{argb:"FFFFFFFF"},bold:!0},e.alignment={horizontal:"center"},g(e)}),y.forEach(e=>{m.addRow(e).eachCell(e=>g(e))}),m.addRow({}),m.addRow({}),m.addRow([]);const w=m.lastRow.number;m.getCell(`C${w}`).value="Resumen de Totales",m.mergeCells(`C${w}:D${w}`);const j=m.getCell(`C${w}`);j.font={bold:!0,color:{argb:"FFFFFFFF"}},j.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},j.alignment={horizontal:"center"},g(j),g(m.getCell(`D${w}`));[["Total Efectivo",t.cash||0],["Total Daviplata",t.daviplata||0],["Total Nequi",t.nequi||0],["Total General",(t.cash||0)+(t.daviplata||0)+(t.nequi||0)]].forEach(e=>{let[t,a]=e;const n=m.addRow(["","",t,a]);n.getCell(3).alignment={horizontal:"left"},n.getCell(4).alignment={horizontal:"right"},n.getCell(4).numFmt="$#,##0",n.getCell(4).font={bold:!0},g(n.getCell(3)),g(n.getCell(4))}),m.addRow({}),m.addRow({}),m.addRow(["","Resumen por Domiciliarios"]);const N=m.lastRow.number;m.mergeCells(N,2,N,6);const C=m.getCell(`B${N}`);C.font={bold:!0,color:{argb:"FFFFFFFF"}},C.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0066CC"}},C.alignment={horizontal:"center"};for(let e=2;e<=6;e++)g(m.getCell(N,e));m.addRow(["","Domiciliario","Efectivo","Daviplata","Nequi","Total"]);m.lastRow.eachCell((e,t)=>{t>=2&&(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF28A745"}},e.font={color:{argb:"FFFFFFFF"},bold:!0},e.alignment={horizontal:"center"},g(e))}),Object.entries(a).forEach(e=>{let[t,a]=e;m.addRow(["",u(t),a.cash||0,a.daviplata||0,a.nequi||0,a.total||0]).eachCell((e,t)=>{t>=2&&(t>=3&&(e.numFmt="$#,##0",e.alignment={horizontal:"right"}),g(e))})});const k=await c.xlsx.writeBuffer(),$=new Blob([k],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),S=document.createElement("a");S.href=window.URL.createObjectURL($),S.download=`pedidos_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(S),S.click(),document.body.removeChild(S)}catch(c){console.error("Error al exportar Excel:",c),alert("Error al generar el archivo Excel: "+c.message)}};var d=a(7762),c=a(557),m=a.n(c);const u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var n,r,l;const o=new d.default,s="/logo.png";try{o.addImage(s,"PNG",160,10,30,20)}catch(i){console.warn("No se pudo cargar el logo para el PDF:",i)}o.setFontSize(16),o.text("Gesti\xf3n de Pedidos",14,20),o.setFontSize(12);const c=new Date,u=c.toLocaleDateString("es-CO"),g=c.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",hour12:!0});o.text(`Fecha: ${u} ${g}`,14,30);let p=0;const x=e.map(e=>{var t,a,n,r,l,i;p+=1;const o=(null===(t=e.meals)||void 0===t?void 0:t[0])||{},s=(null===(a=e.payment)||void 0===a?void 0:a.name)||e.payment||(null===(n=o.payment)||void 0===n?void 0:n.name)||o.payment||"Efectivo";return[p,(null===(r=o.address)||void 0===r?void 0:r.address)||"",(null===(l=o.address)||void 0===l?void 0:l.phoneNumber)||"",`$${(null===(i=e.total)||void 0===i?void 0:i.toLocaleString("es-CO"))||"0"}`,s,(null===e||void 0===e?void 0:e.deliveryPerson)||""]});0===x.length&&x.push(Array(6).fill("-")),0===x.length&&x.push(Array(5).fill("-")),m()(o,{startY:40,head:[["N","Direcci\xf3n","Tel\xe9fono","Total","Domiciliario"]],body:x,styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[0,102,204],textColor:255,fontStyle:"bold",lineWidth:.2,lineColor:[0,0,0]},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{1:{cellWidth:"wrap"},3:{halign:"right"}},tableLineColor:[0,0,0],tableLineWidth:.2,didDrawPage:e=>{o.setFontSize(10),o.text(`P\xe1gina ${e.pageNumber}`,180,287)}});const h=o.lastAutoTable.finalY+10;o.setFontSize(14),o.text("Resumen de Totales",14,h),m()(o,{startY:h+5,head:[["Concepto","Monto"]],body:[["Total Efectivo",`$${(null===(n=t.cash)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`],["Total Daviplata",`$${(null===(r=t.daviplata)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`],["Total Nequi",`$${(null===(l=t.nequi)||void 0===l?void 0:l.toLocaleString("es-CO"))||"0"}`],["Total General",`$${(t.cash+t.daviplata+t.nequi||0).toLocaleString("es-CO")}`]],styles:{fontSize:10,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[0,102,204],textColor:255,fontStyle:"bold",lineWidth:.2,lineColor:[0,0,0]},columnStyles:{1:{halign:"right"}},tableLineColor:[0,0,0],tableLineWidth:.2});const b=o.lastAutoTable.finalY+10;o.setFontSize(14),o.text("Resumen por Domiciliarios",14,b);const y=Object.entries(a).map(e=>{var t,a,n,r;let[l,i]=e;return[l||"",`$${(null===(t=i.cash)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"}`,`$${(null===(a=i.daviplata)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"}`,`$${(null===(n=i.nequi)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`,`$${(null===(r=i.total)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`]});m()(o,{startY:b+5,head:[["Domiciliario","Efectivo","Daviplata","Nequi","Total"]],body:y.length>0?y:[["-","-","-","-","-"]],styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[0,102,204],textColor:255,fontStyle:"bold",lineWidth:.2,lineColor:[0,0,0]},columnStyles:{1:{halign:"right"},2:{halign:"right"},3:{halign:"right"},4:{halign:"right"}},tableLineColor:[0,0,0],tableLineWidth:.2}),o.save(`pedidos_${(new Date).toISOString().split("T")[0]}.pdf`)}catch(o){console.error("Error al generar el PDF:",o),alert("Error al generar el PDF: "+o.message)}},g=(e,t,a,n)=>{const r=e.flatMap(e=>e.meals.map((t,a)=>{var n,r,l,i,o,s,d,c,m,u,g,p,x,h,b,y;return[e.id,a+1,(null===(n=t.soup)||void 0===n?void 0:n.name)||t.soup||"Sin sopa",Array.isArray(t.principle)?t.principle.map(e=>e.name||e).join(", "):(null===(r=t.principle)||void 0===r?void 0:r.name)||t.principle||"Sin principio",(null===(l=t.protein)||void 0===l?void 0:l.name)||t.protein||"Sin prote\xedna",(null===(i=t.drink)||void 0===i?void 0:i.name)||t.drink||"Sin bebida",(null===(o=t.cutlery)||void 0===o?void 0:o.name)||t.cutlery||"No",(null===(s=t.sides)||void 0===s?void 0:s.map(e=>e.name||e).join(", "))||"Ninguno",(null===(d=t.additions)||void 0===d?void 0:d.map(e=>`${e.name||""}${e.protein||e.replacement?` (${e.protein||e.replacement})`:""} (${e.quantity||1})`).join(", "))||"Ninguna",t.notes||"Ninguna",(null===(c=t.time)||void 0===c?void 0:c.name)||t.time||"No especificada",(null===(m=t.address)||void 0===m?void 0:m.address)||"Sin direcci\xf3n",(null===(u=t.address)||void 0===u?void 0:u.addressType)||"No especificado",(null===(g=t.address)||void 0===g?void 0:g.localName)||"",(null===(p=t.address)||void 0===p?void 0:p.recipientName)||"",(null===(x=t.address)||void 0===x?void 0:x.unitDetails)||"",(null===(h=t.address)||void 0===h?void 0:h.phoneNumber)||"No especificado",(null===(b=t.payment)||void 0===b?void 0:b.name)||t.payment||"Efectivo",`$${(null===(y=e.total)||void 0===y?void 0:y.toLocaleString("es-CO"))||"0"}`,e.payment||"Efectivo",e.deliveryPerson||"Sin asignar",e.status||"Pendiente",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleString("es-CO"):"N/A",e.updatedAt?new Date(1e3*e.updatedAt.seconds).toLocaleString("es-CO"):"N/A"].map(e=>`"${String(e||"").replace(/"/g,'""')}"`)})),l=[["Total Efectivo",`$${t.cash.toLocaleString("es-CO")}`],["Total Daviplata",`$${t.daviplata.toLocaleString("es-CO")}`],["Total Nequi",`$${t.nequi.toLocaleString("es-CO")}`],["Total General",`$${(t.cash+t.daviplata+t.nequi).toLocaleString("es-CO")}`]].map(e=>e.map(e=>`"${String(e||"").replace(/"/g,'""')}"`)),i=Object.entries(a).map(e=>{let[t,a]=e;return[t,`$${a.cash.toLocaleString("es-CO")}`,`$${a.daviplata.toLocaleString("es-CO")}`,`$${a.nequi.toLocaleString("es-CO")}`,`$${a.total.toLocaleString("es-CO")}`].map(e=>`"${String(e||"").replace(/"/g,'""')}"`)}),o=[["ID Pedido","N\xba Bandeja","Sopa","Principio","Prote\xedna","Bebida","Cubiertos","Acompa\xf1amientos","Adiciones","Notas","Hora de Entrega","Direcci\xf3n","Tipo de Lugar","Nombre del Local","Nombre del Destinatario","Detalles de Unidad","Tel\xe9fono","Pago (Bandeja)","Total (COP)","Pago (General)","Domiciliario","Estado","Fecha de Creaci\xf3n","\xdaltima Actualizaci\xf3n"].join(","),...r,"",'"Resumen de Totales"','"Concepto","Monto (COP)"',...l,'"Resumen por Domiciliarios"','"Domiciliario","Efectivo (COP)","Daviplata (COP)","Nequi (COP)","Total (COP)"',...i].join("\n"),s=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=window.URL.createObjectURL(s),c=document.createElement("a");c.href=d,c.download=`pedidos_${(new Date).toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(d),n("Pedidos exportados a CSV.")},p=e=>null==e?"":"string"===typeof e?e.replace(" NUEVO","").trim():"boolean"===typeof e?e.toString():"object"===typeof e&&null!==e&&void 0!==e&&e.name?e.name.replace(" NUEVO","").trim():String(e).replace(" NUEVO","").trim(),x=e=>{if(null===e||void 0===e||!e.address)return"Sin direcci\xf3n";let t=e.address;switch(e.addressType){case"school":e.recipientName&&(t+=` (Recibe: ${p(e.recipientName)})`);break;case"complex":e.unitDetails&&(t+=` (${p(e.unitDetails)})`);break;case"shop":e.localName&&(t+=` (${p(e.localName)})`)}return t},h=e=>{var t,a,n,r,l,i,o,s,d,c,m,u,g,h,b,y,v,f,w,j,N,C,k,$;const S=[],P=null!==(t=e.soupReplacement)&&void 0!==t&&t.name||e.soupReplacement?`${p((null===(a=e.soupReplacement)||void 0===a?void 0:a.name)||e.soupReplacement)} (por sopa)`:null!==(n=e.soup)&&void 0!==n&&n.name||e.soup?p((null===(r=e.soup)||void 0===r?void 0:r.name)||e.soup):"Sin sopa";let E;var F;if(S.push(`Sopa: ${P}`),null!==(l=e.principleReplacement)&&void 0!==l&&l.name||e.principleReplacement)E=`${p((null===(F=e.principleReplacement)||void 0===F?void 0:F.name)||e.principleReplacement)} (por principio)`;else if(Array.isArray(e.principle)&&e.principle.length>0){const t=e.principle.map(e=>p(e.name||e)).filter(Boolean);E=t.length>0?t.join(", "):"Sin principio"}else if(null!==(i=e.principle)&&void 0!==i&&i.name||e.principle){var T;E=p((null===(T=e.principle)||void 0===T?void 0:T.name)||e.principle)}else E="Sin principio";S.push(`Principio: ${E}`),S.push(`Prote\xedna: ${null!==(o=e.protein)&&void 0!==o&&o.name||e.protein?p((null===(s=e.protein)||void 0===s?void 0:s.name)||e.protein):"Sin prote\xedna"}`);const D=(null===(d=e.drink)||void 0===d?void 0:d.name)||e.drink||"";S.push(`Bebida: ${"Juego de mango"===D?"Jugo de mango":p(D)||"Sin bebida"}`),S.push("Cubiertos: "+("S\xed"===(null===(c=e.cutlery)||void 0===c?void 0:c.name)||!0===e.cutlery||"true"===e.cutlery?"S\xed":"No"));const O=(null===(m=e.sides)||void 0===m?void 0:m.length)>0?e.sides.map(e=>p(e.name||e)).filter(Boolean).join(", "):"Ninguno";S.push(`Acompa\xf1amientos: ${O}`);const L=(null===(u=e.additions)||void 0===u?void 0:u.length)>0?e.additions.map(e=>`${p(e.name||e)}${e.protein||e.replacement?` (${p(e.protein||e.replacement)})`:""} (${e.quantity||1})`).join(", "):"Ninguna";S.push(`Adiciones: ${L}`),S.push(`Notas: ${e.notes?p(e.notes):"Ninguna"}`),S.push(`Hora de Entrega: ${null!==(g=e.time)&&void 0!==g&&g.name||e.time?p((null===(h=e.time)||void 0===h?void 0:h.name)||e.time):"No especificada"}`),S.push(`Direcci\xf3n: ${x(e.address)}`);let A="";switch(null===(b=e.address)||void 0===b?void 0:b.addressType){case"house":A="Casa/Apto";break;case"school":A="Colegio/Oficina";break;case"complex":A="Conjunto";break;case"shop":A="Tienda/Local";break;default:A="No especificado"}return S.push(`Tipo de Lugar: ${A}`),S.push(`Tel\xe9fono: ${null!==(y=e.address)&&void 0!==y&&y.phoneNumber?p(e.address.phoneNumber):"No especificado"}`),"shop"===(null===(v=e.address)||void 0===v?void 0:v.addressType)&&null!==(f=e.address)&&void 0!==f&&f.localName&&S.push(`Nombre del Local: ${p(e.address.localName)}`),"school"===(null===(w=e.address)||void 0===w?void 0:w.addressType)&&null!==(j=e.address)&&void 0!==j&&j.recipientName&&S.push(`Recibe: ${p(e.address.recipientName)}`),"complex"===(null===(N=e.address)||void 0===N?void 0:N.addressType)&&null!==(C=e.address)&&void 0!==C&&C.unitDetails&&S.push(`Unidad: ${p(e.address.unitDetails)}`),S.push(`Pago: ${null!==(k=e.payment)&&void 0!==k&&k.name||e.payment?p((null===($=e.payment)||void 0===$?void 0:$.name)||e.payment):"Efectivo"}`),S.join("\n")},b=e=>{if(!e||e.length<=1)return{areIdentical:!1,count:1};const t=["soup","soupReplacement","principle","principleReplacement","protein","drink","cutlery","notes","time","payment","address.address","address.addressType","address.phoneNumber","address.localName","address.recipientName","address.unitDetails","sides","additions"],a=e=>t.map(t=>{const a=(r=t,(n=e)&&r?r.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:"",n):"");var n,r;return"sides"===t&&Array.isArray(a)?a.map(e=>p(e.name||e)).sort().join(","):"additions"===t&&Array.isArray(a)?a.map(e=>`${p(e.name||e)}${e.protein||e.replacement?`:${p(e.protein||e.replacement)}`:""}:${e.quantity||1}`).sort().join(";"):"principle"===t&&Array.isArray(a)?a.map(e=>p(e.name||e)).sort().join(","):p(a)}).join("|"),n=a(e[0]);return{areIdentical:e.every(e=>a(e)===n),count:e.length}};var y=a(6568),v=a(8662),f=a(2315),w=a(4791),j=a(1252),N=a(2811),C=a(9248),k=a(8224),$=a(6365),S=a(579);const P=e=>{let{theme:t,orders:a,searchTerm:r,setSearchTerm:l,totals:i,isLoading:o,paginatedOrders:s,currentPage:d,totalPages:c,setCurrentPage:m,itemsPerPage:u,setItemsPerPage:g,deliveryPersons:h,handleEditOrder:b,handleDeleteOrder:P,handleStatusChange:E,handleSort:F,getSortIcon:T,setShowMealDetails:D,editingDeliveryId:O,setEditingDeliveryId:L,editForm:A,setEditForm:R,handleDeliveryChange:q,sortOrder:z,showProteinModal:M,setShowProteinModal:G,isMenuOpen:I,setIsMenuOpen:B,handleOpenPreview:V,handleOpenExcelPreview:U,handleExport:W,handleDeleteAllOrders:H,setShowConfirmDeleteAll:J,exportToExcel:Y,exportToPDF:_,exportToCSV:Z}=e;const Q=(new Date).toLocaleDateString("es-CO",{weekday:"long",month:"long",day:"numeric"}),K=(0,n.useRef)(null);return(0,n.useEffect)(()=>{function e(e){K.current&&!K.current.contains(e.target)&&B(!1)}return I&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[I,B]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,S.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Gesti\xf3n de Pedidos"}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 text-sm text-gray-700 dark:text-gray-300",children:[(0,S.jsxs)("div",{className:(0,y.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total Efectivo"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",i.cash.toLocaleString("es-CO")]})]}),(0,S.jsxs)("div",{className:(0,y.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total Daviplata"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",i.daviplata.toLocaleString("es-CO")]})]}),(0,S.jsxs)("div",{className:(0,y.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total Nequi"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",i.nequi.toLocaleString("es-CO")]})]}),(0,S.jsxs)("div",{className:(0,y.x)("p-3 sm:p-4 rounded-lg shadow-sm","dark"===t?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Total General"}),(0,S.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",(i.cash+i.daviplata+i.nequi).toLocaleString("es-CO")]})]})]}),(0,S.jsxs)("div",{className:"flex flex-wrap justify-center sm:justify-between items-center mb-6 gap-3 sm:gap-4",children:[(0,S.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Buscar pedidos...",className:(0,y.x)("p-2 sm:p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:max-w-xs shadow-sm text-sm sm:text-base transition-all duration-200","dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900")}),(0,S.jsxs)("div",{className:"flex flex-wrap items-center justify-center sm:justify-end gap-2",children:[(0,S.jsxs)("button",{onClick:()=>G(!0),className:(0,y.x)("flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0","dark"===t?"bg-gray-600 hover:bg-gray-500 text-white border border-gray-500":"bg-gray-200 hover:bg-gray-300 text-gray-900 border border-gray-400"),children:[(0,S.jsx)(v.A,{className:"w-4 h-4"}),(0,S.jsx)("span",{className:"hidden md:inline",children:"Prote\xednas del D\xeda"})]}),(0,S.jsx)("div",{className:(0,y.x)("flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold shadow-sm border transition-colors duration-200 flex-shrink-0","dark"===t?"bg-gray-700 text-white border-gray-500":"bg-gray-200 text-gray-900 border-gray-400"),children:Q}),(0,S.jsxs)("div",{className:"relative z-50 flex-shrink-0",ref:K,children:[(0,S.jsx)("button",{onClick:()=>B(!I),className:(0,y.x)("flex items-center justify-center p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Opciones de men\xfa",children:(0,S.jsx)(f.A,{className:(0,y.x)("w-6 h-6","dark"===t?"text-gray-200 hover:text-white":"text-gray-700 hover:text-gray-900")})}),I&&(0,S.jsx)("div",{className:(0,y.x)("absolute right-0 mt-2 w-48 rounded-lg shadow-xl z-50","dark"===t?"bg-gray-700 text-gray-200":"bg-white text-gray-900"),children:(0,S.jsxs)("div",{className:"py-1",children:[(0,S.jsx)("button",{onClick:()=>{V(),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Vista Previa PDF"}),(0,S.jsx)("button",{onClick:()=>{U(),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200",children:"Vista Previa Excel"}),(0,S.jsxs)("button",{onClick:()=>{W(Y,"Excel"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center",children:[(0,S.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Exportar Excel"]}),(0,S.jsxs)("button",{onClick:()=>{W(_,"PDF"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center",children:[(0,S.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]}),(0,S.jsxs)("button",{onClick:()=>{W(Z,"CSV"),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center",children:[(0,S.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]}),(0,S.jsx)("button",{onClick:()=>{J(!0),B(!1)},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 text-red-500",children:"Eliminar Todos"})]})})]})]})]}),(0,S.jsx)("div",{className:(0,y.x)("p-3 sm:p-4 rounded-2xl shadow-xl max-h-[70vh] overflow-y-auto custom-scrollbar transition-all duration-300","dark"===t?"bg-gray-800":"bg-white"),children:o?(0,S.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,S.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"overflow-x-auto",children:(0,S.jsxs)("table",{className:"min-w-full text-left border-collapse text-sm",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:(0,y.x)("font-semibold sticky top-0 z-10 shadow-sm","dark"===t?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:[(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("orderNumber"),children:["N\xba ",T("orderNumber")]}),(0,S.jsx)("th",{className:"p-2 sm:p-3 border-b whitespace-nowrap",children:"Detalles"}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("meals.0.address.address"),children:["Direcci\xf3n ",T("meals.0.address.address")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("meals.0.address.phoneNumber"),children:["Tel\xe9fono ",T("meals.0.address.phoneNumber")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("meals.0.time.name"),children:["Hora ",T("meals.0.time.name")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("payment"),children:["Pago ",T("payment")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("total"),children:["Total ",T("total")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("deliveryPerson"),children:["Domiciliario ",T("deliveryPerson")]}),(0,S.jsxs)("th",{className:"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap",onClick:()=>F("status"),children:["Estado ",T("status")]}),(0,S.jsx)("th",{className:"p-2 sm:p-3 border-b whitespace-nowrap",children:"Acciones"})]})}),(0,S.jsx)("tbody",{children:0===s.length?(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:"10",className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron pedidos. Intenta ajustar tu b\xfasqueda o filtros."})}):s.map((e,a)=>{var n,r,l,i,o,c,m,g,h,v,f,w,k,$,F,T;const M="asc"===z?(d-1)*u+a+1:s.length-((d-1)*u+a),G=x(null===(n=e.meals)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.address),I=p(e.payment||(null===(l=e.meals)||void 0===l||null===(i=l[0])||void 0===i||null===(o=i.payment)||void 0===o?void 0:o.name)||(null===(c=e.meals)||void 0===c||null===(m=c[0])||void 0===m?void 0:m.payment)||"Sin pago"),B="Pendiente"===e.status?"bg-yellow-500 text-black":"Entregado"===e.status?"bg-green-500 text-white":"Cancelado"===e.status?"bg-red-500 text-white":"";return(0,S.jsxs)("tr",{className:(0,y.x)("border-b transition-colors duration-150","dark"===t?"border-gray-700 hover:bg-gray-700":"border-gray-200 hover:bg-gray-50",a%2===0?"dark"===t?"bg-gray-750":"bg-gray-50":""),children:[(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 font-semibold whitespace-nowrap",children:M}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300",children:(0,S.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,S.jsx)("button",{onClick:()=>D(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Ver detalles de la bandeja","aria-label":`Ver detalles del pedido ${e.id}`,children:(0,S.jsx)(j.A,{className:"w-5 h-5"})})})}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 max-w-[150px] sm:max-w-[200px] truncate",title:G,children:G}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap",children:p(null===(g=e.meals)||void 0===g||null===(h=g[0])||void 0===h||null===(v=h.address)||void 0===v?void 0:v.phoneNumber)}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap",children:p((null===(f=e.meals)||void 0===f||null===(w=f[0])||void 0===w||null===(k=w.time)||void 0===k?void 0:k.name)||(null===($=e.meals)||void 0===$||null===(F=$[0])||void 0===F?void 0:F.time))}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap",children:I}),(0,S.jsxs)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 font-medium whitespace-nowrap",children:["$",(null===(T=e.total)||void 0===T?void 0:T.toLocaleString("es-CO"))||"0"]}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap",children:O===e.id?(0,S.jsx)("input",{type:"text",value:A.deliveryPerson||"",onChange:e=>R({...A,deliveryPerson:e.target.value}),onBlur:t=>q(e.id,t.target.value),onKeyPress:t=>"Enter"===t.key&&q(e.id,t.target.value),className:(0,y.x)("w-full p-1 sm:p-2 rounded-lg border text-xs sm:text-sm","dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-gray-200 text-gray-900","focus:outline-none focus:ring-2 focus:ring-blue-500"),autoFocus:!0,"aria-label":`Editar domiciliario para pedido ${e.id}`}):(0,S.jsx)("span",{onClick:()=>{L(e.id),R(t=>({...t,deliveryPerson:e.deliveryPerson||""}))},className:"cursor-pointer hover:underline",title:"Click para editar",children:e.deliveryPerson||"Sin asignar"})}),(0,S.jsx)("td",{className:"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap",children:(0,S.jsxs)("select",{value:e.status||"Pendiente",onChange:t=>E(e.id,t.target.value),className:(0,y.x)("p-1 sm:p-2 rounded-lg text-xs font-medium border focus:outline-none focus:ring-2 focus:ring-blue-500",B,"dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"),"aria-label":`Cambiar estado del pedido ${e.id}`,children:[(0,S.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,S.jsx)("option",{value:"En Preparaci\xf3n",children:"En Preparaci\xf3n"}),(0,S.jsx)("option",{value:"En Camino",children:"En Camino"}),(0,S.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,S.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})}),(0,S.jsxs)("td",{className:"p-2 sm:p-3 flex space-x-1 sm:space-x-2 items-center",children:[(0,S.jsx)("button",{onClick:()=>b(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Editar pedido","aria-label":`Editar pedido ${e.id}`,children:(0,S.jsx)(N.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,S.jsx)("button",{onClick:()=>P(e.id),className:"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md",title:"Eliminar pedido","aria-label":`Eliminar pedido ${e.id}`,children:(0,S.jsx)(C.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]},e.id)})})]})}),(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pedidos por p\xe1gina:"}),(0,S.jsxs)("select",{value:u,onChange:e=>{g(Number(e.target.value)),m(1)},className:(0,y.x)("p-1 sm:p-2 rounded-lg border text-sm","dark"===t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"),"aria-label":"Seleccionar n\xfamero de pedidos por p\xe1gina",children:[(0,S.jsx)("option",{value:10,children:"10"}),(0,S.jsx)("option",{value:20,children:"20"}),(0,S.jsx)("option",{value:30,children:"30"}),(0,S.jsx)("option",{value:50,children:"50"})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:1===d,className:(0,y.x)("p-2 rounded-lg transition-all duration-200",1===d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),"aria-label":"P\xe1gina anterior",children:(0,S.jsx)(k.A,{className:"w-5 h-5"})}),(0,S.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["P\xe1gina ",d," de ",c]}),(0,S.jsx)("button",{onClick:()=>m(e=>Math.min(e+1,c)),disabled:d===c,className:(0,y.x)("p-2 rounded-lg transition-all duration-200",d===c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),"aria-label":"P\xe1gina siguiente",children:(0,S.jsx)($.A,{className:"w-5 h-5"})})]})]})]})}),(0,S.jsxs)("div",{className:"mt-8",children:[(0,S.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Resumen por Domiciliarios"}),(0,S.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:0===Object.keys(h).length?(0,S.jsx)("p",{className:"col-span-full text-center text-gray-500 dark:text-gray-400 p-4",children:"No hay datos de domiciliarios disponibles."}):Object.entries(h).map(e=>{let[a,n]=e;return(0,S.jsxs)("div",{className:(0,y.x)("p-4 sm:p-5 rounded-lg shadow-md","dark"===t?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:[(0,S.jsx)("p",{className:"font-semibold text-lg mb-2",children:a}),(0,S.jsxs)("p",{className:"text-sm sm:text-base",children:["Efectivo: ",(0,S.jsxs)("span",{className:"font-medium",children:["$",n.cash.toLocaleString("es-CO")]})]}),(0,S.jsxs)("p",{className:"text-sm sm:text-base",children:["Daviplata: ",(0,S.jsxs)("span",{className:"font-medium",children:["$",n.daviplata.toLocaleString("es-CO")]})]}),(0,S.jsxs)("p",{className:"text-sm sm:text-base",children:["Nequi: ",(0,S.jsxs)("span",{className:"font-medium",children:["$",n.nequi.toLocaleString("es-CO")]})]}),(0,S.jsxs)("p",{className:"text-base font-bold mt-2",children:["Total: ",(0,S.jsxs)("span",{className:"text-blue-500",children:["$",n.total.toLocaleString("es-CO")]})]})]},a)})})]})]})})};var E=a(7015),F=a(6298),T=a(7591);const D=e=>{var t;let{theme:a,showProteinModal:i,setShowProteinModal:o,newProtein:s,setNewProtein:d,handleAddProtein:c,proteins:m,totalProteinUnits:u,isLoading:g,showMealDetails:p,setShowMealDetails:x,editingOrder:v,setEditingOrder:f,editForm:w,handleMealFormFieldChange:j,handleSaveEdit:k,showConfirmDeleteAll:$,setShowConfirmDeleteAll:P,confirmText:D,setConfirmText:O,handleDeleteAllOrders:L,setError:A,setSuccess:R}=e;const[q,z]=(0,n.useState)(null);return(0,S.jsxs)("div",{children:[(0,S.jsx)(E.e,{show:i,as:n.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>{o(!1),z(null)},children:[(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,y.x)("w-full max-w-md p-6 rounded-lg shadow-md","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,S.jsx)(F.lG.Title,{className:"text-lg font-medium",children:q?"Editar Prote\xedna":"Gestionar Prote\xednas"}),(0,S.jsx)("button",{onClick:()=>{o(!1),z(null)},className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar modal",children:(0,S.jsx)(T.A,{classbeca:"w-5 h-5"})})]}),(0,S.jsx)("div",{className:"space-y-4",children:q?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,S.jsx)("input",{type:"text",value:q.name,onChange:e=>z({...q,name:e.target.value}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: Pollo"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cantidad"}),(0,S.jsx)("input",{type:"number",value:q.quantity,onChange:e=>z({...q,quantity:e.target.value}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: 50",min:"0"})]}),(0,S.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>{z(null)},className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:async()=>{if(q.name&&q.quantity)try{await(0,l.mZ)((0,l.H9)(r.db,"dailyProteins",q.id),{name:q.name,quantity:Number(q.quantity)}),R("Prote\xedna actualizada correctamente."),z(null)}catch(e){A(`Error al actualizar prote\xedna: ${e.message}`)}else A("El nombre y la cantidad son obligatorios.")},disabled:g,className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium",g?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:g?"Guardando...":"Actualizar"})]})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,S.jsx)("input",{type:"text",value:s.name,onChange:e=>d({...s,name:e.target.value}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: Pollo"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cantidad"}),(0,S.jsx)("input",{type:"number",value:s.quantity,onChange:e=>d({...s,quantity:e.target.value}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Ej: 50",min:"0"})]}),(0,S.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>o(!1),className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:c,disabled:g,className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium",g?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:g?"Guardando...":"Agregar"})]})]})}),(0,S.jsxs)("div",{className:"mt-6",children:[(0,S.jsxs)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Prote\xednas Registradas (Total: ",u," unidades)"]}),0===m.length?(0,S.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No hay prote\xednas registradas."}):(0,S.jsx)("ul",{className:"space-y-2",children:m.map(e=>(0,S.jsxs)("li",{className:(0,y.x)("flex justify-between items-center p-2 rounded-md","dark"===a?"bg-gray-700":"bg-gray-100"),children:[(0,S.jsxs)("span",{className:"text-sm",children:[e.name,": ",e.quantity," unidades"]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)("button",{onClick:()=>(e=>{z(e)})(e),className:"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md",title:"Editar prote\xedna","aria-label":`Editar ${e.name}`,children:(0,S.jsx)(N.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{onClick:()=>(async e=>{try{await(0,l.kd)((0,l.H9)(r.db,"dailyProteins",e)),R("Prote\xedna eliminada correctamente.")}catch(t){A(`Error al eliminar prote\xedna: ${t.message}`)}})(e.id),className:"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md",title:"Eliminar prote\xedna","aria-label":`Eliminar ${e.name}`,children:(0,S.jsx)(C.A,{className:"w-4 h-4"})})]})]},e.id))})]})]})})})]})}),(0,S.jsx)(E.e,{show:null!==p,as:n.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>x(null),children:[(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,y.x)("w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)(F.lG.Title,{className:"text-lg font-medium mb-4 flex justify-between items-center",children:["Detalles del Pedido",(0,S.jsx)("button",{onClick:()=>x(null),className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar detalles",children:(0,S.jsx)(T.A,{className:"w-5 h-5"})})]}),p&&(0,S.jsxs)("div",{className:"space-y-4 text-sm",children:[b(p.meals).areIdentical?(0,S.jsxs)("div",{children:[(0,S.jsxs)("h3",{className:"font-medium",children:["Bandeja (x",b(p.meals).count,")"]}),(0,S.jsx)("pre",{className:"whitespace-pre-wrap",children:h(p.meals[0])})]}):p.meals.map((e,t)=>(0,S.jsxs)("div",{children:[(0,S.jsxs)("h3",{className:"font-medium",children:["Bandeja ",t+1]}),(0,S.jsx)("pre",{className:"whitespace-pre-wrap",children:h(e)})]},t)),(0,S.jsxs)("p",{className:"font-medium",children:["Total: $",(null===(t=p.total)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"]}),(0,S.jsxs)("p",{className:"font-medium",children:["Estado: ",p.status||"Pendiente"]}),(0,S.jsxs)("p",{className:"font-medium",children:["Domiciliario: ",p.deliveryPerson||"Sin asignar"]})]})]})})})]})}),(0,S.jsx)(E.e,{show:null!==v,as:n.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>f(null),children:[(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,y.x)("w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsxs)(F.lG.Title,{className:"text-lg font-medium mb-4 flex justify-between items-center",children:["Editar Pedido",(0,S.jsx)("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-400","aria-label":"Cerrar edici\xf3n",children:(0,S.jsx)(T.A,{className:"w-5 h-5"})})]}),w.meals.map((e,t)=>{var n,r,l,i,o,s,d,c,m,u,g,p,x,h,b,v,f,w,N,C;return(0,S.jsxs)("div",{className:"mb-6 p-4 border rounded-md border-gray-200 dark:border-gray-600",children:[(0,S.jsxs)("h3",{className:"font-medium mb-2",children:["Bandeja ",t+1]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sopa"}),(0,S.jsx)("input",{type:"text",value:(null===(n=e.soup)||void 0===n?void 0:n.name)||e.soup||"",onChange:e=>j(t,"soup",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reemplazo de Sopa"}),(0,S.jsx)("input",{type:"text",value:(null===(r=e.soupReplacement)||void 0===r?void 0:r.name)||e.soupReplacement||"",onChange:e=>j(t,"soupReplacement",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Principio"}),(0,S.jsx)("input",{type:"text",value:Array.isArray(e.principle)?e.principle.map(e=>e.name||e).join(", "):(null===(l=e.principle)||void 0===l?void 0:l.name)||e.principle||"",onChange:e=>j(t,"principle",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reemplazo de Principio"}),(0,S.jsx)("input",{type:"text",value:(null===(i=e.principleReplacement)||void 0===i?void 0:i.name)||e.principleReplacement||"",onChange:e=>j(t,"principleReplacement",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prote\xedna"}),(0,S.jsx)("input",{type:"text",value:(null===(o=e.protein)||void 0===o?void 0:o.name)||e.protein||"",onChange:e=>j(t,"protein",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bebida"}),(0,S.jsx)("input",{type:"text",value:(null===(s=e.drink)||void 0===s?void 0:s.name)||e.drink||"",onChange:e=>j(t,"drink",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cubiertos"}),(0,S.jsx)("input",{type:"text",value:(null===(d=e.cutlery)||void 0===d?void 0:d.name)||e.cutlery||"",onChange:e=>j(t,"cutlery",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Acompa\xf1amientos"}),(0,S.jsx)("input",{type:"text",value:(null===(c=e.sides)||void 0===c?void 0:c.map(e=>e.name||e).join(", "))||"",onChange:e=>j(t,"sides",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Adiciones"}),(0,S.jsx)("input",{type:"text",value:(null===(m=e.additions)||void 0===m?void 0:m.map(e=>`${e.name}${e.protein||e.replacement?`,${e.protein||e.replacement}`:""}${e.quantity?`,${e.quantity}`:""}`).join("; "))||"",onChange:e=>j(t,"additions",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas"}),(0,S.jsx)("input",{type:"text",value:e.notes||"",onChange:e=>j(t,"notes",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hora de Entrega"}),(0,S.jsx)("input",{type:"text",value:(null===(u=e.time)||void 0===u?void 0:u.name)||e.time||"",onChange:e=>j(t,"time",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direcci\xf3n"}),(0,S.jsx)("input",{type:"text",value:(null===(g=e.address)||void 0===g?void 0:g.address)||"",onChange:e=>j(t,"address.address",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tel\xe9fono"}),(0,S.jsx)("input",{type:"text",value:(null===(p=e.address)||void 0===p?void 0:p.phoneNumber)||"",onChange:e=>j(t,"address.phoneNumber",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de Direcci\xf3n"}),(0,S.jsxs)("select",{value:(null===(x=e.address)||void 0===x?void 0:x.addressType)||"",onChange:e=>j(t,"address.addressType",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"",children:"Seleccione"}),(0,S.jsx)("option",{value:"house",children:"Casa/Apto"}),(0,S.jsx)("option",{value:"school",children:"Colegio/Oficina"}),(0,S.jsx)("option",{value:"complex",children:"Conjunto"}),(0,S.jsx)("option",{value:"shop",children:"Tienda/Local"})]})]}),"shop"===(null===(h=e.address)||void 0===h?void 0:h.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Local"}),(0,S.jsx)("input",{type:"text",value:(null===(b=e.address)||void 0===b?void 0:b.localName)||"",onChange:e=>j(t,"address.localName",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),"school"===(null===(v=e.address)||void 0===v?void 0:v.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Recipiente"}),(0,S.jsx)("input",{type:"text",value:(null===(f=e.address)||void 0===f?void 0:f.recipientName)||"",onChange:e=>j(t,"address.recipientName",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),"complex"===(null===(w=e.address)||void 0===w?void 0:w.addressType)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Detalles de la Unidad"}),(0,S.jsx)("input",{type:"text",value:(null===(N=e.address)||void 0===N?void 0:N.unitDetails)||"",onChange:e=>j(t,"address.unitDetails",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"M\xe9todo de Pago"}),(0,S.jsxs)("select",{value:(null===(C=e.payment)||void 0===C?void 0:C.name)||e.payment||"Efectivo",onChange:e=>j(t,"payment",e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Efectivo",children:"Efectivo"}),(0,S.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,S.jsx)("option",{value:"Nequi",children:"Nequi"})]})]})]})]},t)}),(0,S.jsxs)("div",{className:"mt-4",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total"}),(0,S.jsx)("input",{type:"number",value:w.total||"",onChange:e=>setEditForm({...w,total:Number(e.target.value)}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{className:"mt-4",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,S.jsxs)("select",{value:w.status||"Pendiente",onChange:e=>setEditForm({...w,status:e.target.value}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),children:[(0,S.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,S.jsx)("option",{value:"En Preparaci\xf3n",children:"En Preparaci\xf3n"}),(0,S.jsx)("option",{value:"En Camino",children:"En Camino"}),(0,S.jsx)("option",{value:"Entregado",children:"Entregado"}),(0,S.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})]}),(0,S.jsxs)("div",{className:"mt-4",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Domiciliario"}),(0,S.jsx)("input",{type:"text",value:w.deliveryPerson||"",onChange:e=>setEditForm({...w,deliveryPerson:e.target.value}),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500")})]}),(0,S.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,S.jsx)("button",{onClick:()=>f(null),className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:k,disabled:g,className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium",g?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:g?"Guardando...":"Guardar"})]})]})})})]})}),(0,S.jsx)(E.e,{show:$,as:n.Fragment,children:(0,S.jsxs)(F.lG,{as:"div",className:"relative z-50",onClose:()=>P(!1),children:[(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,S.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(E.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,S.jsxs)(F.lG.Panel,{className:(0,y.x)("w-full max-w-md p-6 rounded-lg shadow-md","dark"===a?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,S.jsx)(F.lG.Title,{className:"text-lg font-medium mb-4",children:"Confirmar Eliminaci\xf3n de Todos los Pedidos"}),(0,S.jsx)("p",{className:"text-sm mb-4",children:'Esta acci\xf3n no se puede deshacer. Escribe "confirmar" para proceder.'}),(0,S.jsx)("input",{type:"text",value:D,onChange:e=>O(e.target.value),className:(0,y.x)("w-full p-2 rounded-md border text-sm","dark"===a?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-blue-500"),placeholder:"Escribe 'confirmar'"}),(0,S.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,S.jsx)("button",{onClick:()=>P(!1),className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===a?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,S.jsx)("button",{onClick:L,disabled:g||"confirmar"!==D.toLowerCase(),className:(0,y.x)("px-4 py-2 rounded-md text-sm font-medium",g||"confirmar"!==D.toLowerCase()?"bg-gray-400 cursor-not-allowed":"dark"===a?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:g?"Eliminando...":"Eliminar Todos"})]})]})})})]})})]})},O=e=>{let{setError:t,setSuccess:a,theme:i}=e;const[o,d]=(0,n.useState)([]),[c,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(""),[b,y]=(0,n.useState)({cash:0,daviplata:0,nequi:0}),[v,f]=(0,n.useState)({meals:[],total:0,status:"",payment:"",deliveryPerson:""}),[w,j]=(0,n.useState)(1),[N,C]=(0,n.useState)(10),[k,$]=(0,n.useState)(!0),[E,F]=(0,n.useState)(!1),[T,O]=(0,n.useState)(""),[L,A]=(0,n.useState)(null),[R,q]=(0,n.useState)(null),[z,M]=(0,n.useState)({}),[G,I]=(0,n.useState)("createdAt.seconds"),[B,V]=(0,n.useState)("desc"),[U,W]=(0,n.useState)([]),[H,J]=(0,n.useState)({name:"",quantity:""}),[Y,_]=(0,n.useState)(!1),[Z,Q]=(0,n.useState)(!1),K=(0,n.useMemo)(()=>U.reduce((e,t)=>e+Number(t.quantity||0),0),[U]),X=(0,n.useMemo)(()=>{if(!x)return o;const e=x.toLowerCase();return o.filter(t=>{var a,n,r,l,i,o,s,d,c,m,u,g,x,h,b,y,v,f,w,j,N,C;const k=(null===(a=t.meals)||void 0===a||null===(n=a[0])||void 0===n||null===(r=n.address)||void 0===r||null===(l=r.address)||void 0===l?void 0:l.toLowerCase())||"",$=(null===(i=t.meals)||void 0===i||null===(o=i[0])||void 0===o||null===(s=o.address)||void 0===s||null===(d=s.phoneNumber)||void 0===d?void 0:d.toLowerCase())||"",S=(null===(c=t.meals)||void 0===c||null===(m=c[0])||void 0===m||null===(u=m.time)||void 0===u||null===(g=u.name)||void 0===g?void 0:g.toLowerCase())||(null===(x=t.meals)||void 0===x||null===(h=x[0])||void 0===h||null===(b=h.time)||void 0===b?void 0:b.toLowerCase())||"",P=p(t.payment||(null===(y=t.meals)||void 0===y||null===(v=y[0])||void 0===v||null===(f=v.payment)||void 0===f?void 0:f.name)||(null===(w=t.meals)||void 0===w||null===(j=w[0])||void 0===j?void 0:j.payment)||"").toLowerCase(),E=(null===(N=t.deliveryPerson)||void 0===N?void 0:N.toLowerCase())||"",F=(null===(C=t.status)||void 0===C?void 0:C.toLowerCase())||"";return k.includes(e)||$.includes(e)||S.includes(e)||P.includes(e)||E.includes(e)||F.includes(e)})},[o,x]),ee=(0,n.useMemo)(()=>[...X].sort((e,t)=>{const a=(e,t)=>{if("orderNumber"===t)return X.indexOf(e);const a=t.split(".").reduce((e,t)=>e&&e[t],e);return p(a)||""},n=a(e,G),r=a(t,G);return"string"===typeof n&&"string"===typeof r?"asc"===B?n.localeCompare(r):r.localeCompare(n):"asc"===B?n-r:r-n}),[X,G,B]),te=Math.ceil(ee.length/N),ae=(0,n.useMemo)(()=>{const e=(w-1)*N,t=e+N;return ee.slice(e,t)},[ee,w,N]),ne=(0,n.useCallback)(()=>{$(!0);const e=(0,l.rJ)(r.db,"orders"),a=(0,l.aQ)(e,e=>{const t=e.docs.map(e=>{var t,a;const n=e.data(),r=Array.isArray(n.meals)&&n.meals.length>0?n.meals:[{address:{},payment:{},time:{}}];return{id:e.id,...n,meals:r.map(e=>({...e,address:e.address||{},payment:e.payment||{name:"Efectivo"},time:e.time||{}})),payment:n.payment||(null===(t=r[0])||void 0===t||null===(a=t.payment)||void 0===a?void 0:a.name)||"Efectivo",total:n.total||0,deliveryPerson:n.deliveryPerson||"Sin asignar",status:n.status||"Pendiente"}});d(t);const a={cash:0,daviplata:0,nequi:0},n={};t.forEach(e=>{const t=e.paymentSummary||{};if(a.cash+=t.Efectivo||0,a.daviplata+=t.Daviplata||0,a.nequi+=t.Nequi||0,e.deliveryPerson){var r,l,i,o,s;const t=p(e.deliveryPerson);n[t]||(n[t]={cash:0,daviplata:0,nequi:0,total:0});const a=p(e.payment||(null===(r=e.meals)||void 0===r||null===(l=r[0])||void 0===l||null===(i=l.payment)||void 0===i?void 0:i.name)||(null===(o=e.meals)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.payment)||"Efectivo"),d=e.total||0;"Efectivo"===a?n[t].cash+=d:"Daviplata"===a?n[t].daviplata+=d:"Nequi"===a&&(n[t].nequi+=d),n[t].total+=d}}),y(a),M(n),$(!1)},e=>{t(`Error al cargar pedidos: ${e.message}`),$(!1)});return()=>a()},[t]),re=(0,n.useCallback)(()=>{const e=(new Date).toISOString().split("T")[0],a=(0,l.P)((0,l.rJ)(r.db,"dailyProteins"),(0,l._M)("date","==",e)),n=(0,l.aQ)(a,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));W(t)},e=>{t(`Error al cargar prote\xednas: ${e.message}`)});return()=>n()},[t]);(0,n.useEffect)(()=>{const e=ne(),t=re();return()=>{e(),t()}},[ne,re]);const le=(0,n.useCallback)(e=>{var t;m(e),f({meals:(null===(t=e.meals)||void 0===t?void 0:t.map(e=>{var t;return{...e,address:e.address||{},payment:e.payment?p((null===(t=e.payment)||void 0===t?void 0:t.name)||e.payment):"Efectivo",additions:e.additions||[],principle:Array.isArray(e.principle)?e.principle:e.principle?[{name:e.principle.name||e.principle}]:[],cutlery:e.cutlery||null,sides:e.sides||[]}}))||[],total:e.total||0,status:e.status||"Pendiente",payment:e.payment?p(e.payment):"Efectivo",deliveryPerson:e.deliveryPerson||""})},[]),ie=async()=>{if("confirmar"===T.toLowerCase()){$(!0);try{const e=(0,l.wP)(r.db);(await(0,l.GG)((0,l.rJ)(r.db,"orders"))).forEach(t=>e.delete(t.ref)),await e.commit(),F(!1),O(""),a("Todos los pedidos han sido eliminados.")}catch(e){t(`Error al eliminar todos los pedidos: ${e.message}`)}finally{$(!1)}}else t('Por favor, escribe "confirmar" para proceder.')};return(0,S.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,S.jsx)(D,{theme:i,showProteinModal:Y,setShowProteinModal:_,newProtein:H,setNewProtein:J,handleAddProtein:async()=>{if(!H.name||!H.quantity||isNaN(H.quantity)||Number(H.quantity)<=0)t("Por favor, ingrese un nombre de prote\xedna v\xe1lido y una cantidad mayor a 0.");else{$(!0);try{await(0,l.gS)((0,l.rJ)(r.db,"dailyProteins"),{name:H.name.trim(),quantity:Number(H.quantity),date:(new Date).toISOString().split("T")[0],createdAt:new Date}),J({name:"",quantity:""}),_(!1),a("Prote\xedna agregada correctamente.")}catch(e){t(`Error al agregar prote\xedna: ${e.message}`)}finally{$(!1)}}},proteins:U,totalProteinUnits:K,isLoading:k,showMealDetails:L,setShowMealDetails:A,editingOrder:c,setEditingOrder:m,editForm:v,handleMealFormFieldChange:(e,t,a)=>{f(n=>{const r=[...n.meals];if(t.includes(".")){const[n,l]=t.split(".");r[e]={...r[e],[n]:{...r[e][n],[l]:a}}}else r[e]="sides"===t?{...r[e],sides:a.split(",").map(e=>({name:e.trim()}))}:"additions"===t?{...r[e],additions:a.split(";").map(e=>{const[t,a="",n="1"]=e.split(",");return{name:t.trim(),[a.includes("por")?"replacement":"protein"]:a.trim(),quantity:Number(n)||1}}).filter(e=>e.name)}:"principle"===t?{...r[e],principle:a.split(",").map(e=>({name:e.trim()})).filter(e=>e.name)}:{...r[e],[t]:a};return{...n,meals:r}})},handleSaveEdit:async()=>{if(c){$(!0);try{const e=v.meals.map(e=>({...e,soup:e.soup&&"string"===typeof e.soup?{name:e.soup}:e.soup,soupReplacement:e.soupReplacement&&"string"===typeof e.soupReplacement?{name:e.soupReplacement}:e.soupReplacement,principle:Array.isArray(e.principle)?e.principle.map(e=>"string"===typeof e?{name:e}:e):e.principle&&"string"===typeof e.principle?[{name:e.principle}]:e.principle,principleReplacement:e.principleReplacement&&"string"===typeof e.principleReplacement?{name:e.principleReplacement}:e.principleReplacement,protein:e.protein&&"string"===typeof e.protein?{name:e.protein}:e.protein,drink:e.drink&&"string"===typeof e.drink?{name:e.drink}:e.drink,cutlery:e.cutlery&&"string"===typeof e.cutlery?{name:e.cutlery}:e.cutlery,time:e.time&&"string"===typeof e.time?{name:e.time}:e.time,payment:e.payment&&"string"===typeof e.payment?{name:e.payment}:e.payment,sides:Array.isArray(e.sides)?e.sides.map(e=>"string"===typeof e?{name:e}:e):[],additions:Array.isArray(e.additions)?e.additions.map(e=>({name:e.name||"",protein:e.protein||"",replacement:e.replacement||"",quantity:e.quantity||1})):[]}));await(0,l.mZ)((0,l.H9)(r.db,"orders",c.id),{...v,meals:e,updatedAt:new Date}),m(null),a("Pedido actualizado correctamente.")}catch(e){t(`Error al guardar: ${e.message}`)}finally{$(!1)}}},showConfirmDeleteAll:E,setShowConfirmDeleteAll:F,confirmText:T,setConfirmText:O,handleDeleteAllOrders:ie,setError:t,setSuccess:a}),(0,S.jsx)(P,{theme:i,orders:o,searchTerm:x,setSearchTerm:h,totals:b,isLoading:k,paginatedOrders:ae,currentPage:w,totalPages:te,setCurrentPage:j,itemsPerPage:N,setItemsPerPage:C,deliveryPersons:z,handleEditOrder:le,handleDeleteOrder:async e=>{$(!0);try{await(0,l.kd)((0,l.H9)(r.db,"orders",e)),a("Pedido eliminado correctamente.")}catch(n){t(`Error al eliminar: ${n.message}`)}finally{$(!1)}},handleStatusChange:async(e,n)=>{try{await(0,l.mZ)((0,l.H9)(r.db,"orders",e),{status:n,updatedAt:new Date}),a("Estado actualizado correctamente.")}catch(i){t(`Error al actualizar estado: ${i.message}`)}},handleSort:e=>{G===e?V("asc"===B?"desc":"asc"):(I(e),V("asc")),j(1)},getSortIcon:e=>G!==e?null:"asc"===B?(0,S.jsx)("svg",{className:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}):(0,S.jsx)("svg",{className:"w-4 h-4 inline ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),setShowMealDetails:A,editingDeliveryId:R,setEditingDeliveryId:q,editForm:v,setEditForm:f,handleDeliveryChange:async(e,n)=>{try{await(0,l.mZ)((0,l.H9)(r.db,"orders",e),{deliveryPerson:n||null,updatedAt:new Date}),q(null),a("Domiciliario actualizado correctamente.")}catch(i){t(`Error al actualizar domiciliario: ${i.message}`)}},sortOrder:B,showProteinModal:Y,setShowProteinModal:_,isMenuOpen:Z,setIsMenuOpen:Q,handleOpenPreview:()=>{const e=window.open("","_blank");e.document.write(((e,t,a)=>{var n,r,l;let i=0;const o=e.flatMap(e=>e&&Array.isArray(e.meals)&&0!==e.meals.length?e.meals.filter(e=>e).map(t=>{var a,n,r;return i+=1,[i,(null===t||void 0===t||null===(a=t.address)||void 0===a?void 0:a.address)||"",(null===t||void 0===t||null===(n=t.address)||void 0===n?void 0:n.phoneNumber)||"",`$${(null===(r=e.total)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`,(null===e||void 0===e?void 0:e.deliveryPerson)||""]}):[]);0===o.length&&o.push(Array(5).fill("-"));const s=Object.entries(a).map(e=>{var t,a,n,r;let[l,i]=e;return[l||"",`$${(null===(t=i.cash)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"}`,`$${(null===(a=i.daviplata)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"}`,`$${(null===(n=i.nequi)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`,`$${(null===(r=i.total)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`]}),d=new Date;return`\n    <html>\n      <head>\n        <title>Previsualizaci\xf3n de Pedidos</title>\n        <style>\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\n          h1 { text-align: center; font-size: 24px; }\n          p.date { text-align: center; font-size: 12px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n          th, td { padding: 8px; border: 1px solid black; }\n          th { background-color: #0066cc; color: white; font-weight: bold; }\n          td { text-align: left; }\n          td:nth-child(4) { text-align: right; }\n          tr:nth-child(even) { background-color: #f5f5f5; }\n          .totals-table { width: 50%; }\n          .delivery-table th:nth-child(n+2), .delivery-table td:nth-child(n+2) { text-align: right; }\n          .button-container { margin-top: 20px; text-align: center; }\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\n          .button.print { background-color: #28a745; }\n          @media print {\n              .button-container { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <h1>Gesti\xf3n de Pedidos</h1>\n        <p class="date">Fecha: ${d.toLocaleDateString("es-CO")} ${d.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",hour12:!0})}</p>\n        <table>\n          <thead>\n            <tr>\n              <th>N</th>\n              <th>Direcci\xf3n</th>\n              <th>Tel\xe9fono</th>\n              <th>Total</th>\n              <th>Domiciliario</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${o.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n        <h2 style="margin-top: 20px; font-size: 18px;">Resumen de Totales</h2>\n        <table class="totals-table">\n          <tbody>\n            <tr><td style="padding: 8px;">Total Efectivo</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(null===(n=t.cash)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`:"$0"}</td></tr>\n            <tr><td style="padding: 8px;">Total Daviplata</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(null===(r=t.daviplata)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`:"$0"}</td></tr>\n            <tr><td style="padding: 8px;">Total Nequi</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(null===(l=t.nequi)||void 0===l?void 0:l.toLocaleString("es-CO"))||"0"}`:"$0"}</td></tr>\n            <tr><td style="padding: 8px;">Total General</td><td style="padding: 8px; text-align: right;">${o.length>0?`$${(t.cash+t.daviplata+t.nequi||0).toLocaleString("es-CO")}`:"$0"}</td></tr>\n          </tbody>\n        </table>\n        <h2 style="margin-top: 20px; font-size: 18px;">Resumen por Domiciliarios</h2>\n        <table class="delivery-table">\n          <thead>\n            <tr>\n              <th>Domiciliario</th>\n              <th>Efectivo</th>\n              <th>Daviplata</th>\n              <th>Nequi</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${s.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n        <div class="button-container">\n          <button class="button print" onclick="window.print()">Imprimir</button>\n          <button class="button" onclick="window.close()">Cerrar Previsualizaci\xf3n</button>\n        </div>\n      </body>\n    </html>\n  `})(o,b,z)),e.document.close()},handleOpenExcelPreview:()=>{const e=window.open("","_blank");e.document.write(function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=0;const i=e.map(e=>{var t,a,n,r,i,o;l+=1;const s=(null===(t=e.meals)||void 0===t?void 0:t[0])||{},d=(null===(a=e.payment)||void 0===a?void 0:a.name)||e.payment||(null===s||void 0===s||null===(n=s.payment)||void 0===n?void 0:n.name)||(null===s||void 0===s?void 0:s.payment)||"Efectivo";return[l,(null===s||void 0===s||null===(r=s.address)||void 0===r?void 0:r.address)||"",(null===s||void 0===s||null===(i=s.address)||void 0===i?void 0:i.phoneNumber)||"",`$${(null===(o=e.total)||void 0===o?void 0:o.toLocaleString("es-CO"))||"0"}`,d,(null===e||void 0===e?void 0:e.deliveryPerson)||""]});0===i.length&&i.push(Array(6).fill("-"));const o=Object.entries(a).map(e=>{var t,a,n,r;let[l,i]=e;return[l||"",`$${(null===(t=i.cash)||void 0===t?void 0:t.toLocaleString("es-CO"))||"0"}`,`$${(null===(a=i.daviplata)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0"}`,`$${(null===(n=i.nequi)||void 0===n?void 0:n.toLocaleString("es-CO"))||"0"}`,`$${(null===(r=i.total)||void 0===r?void 0:r.toLocaleString("es-CO"))||"0"}`]}),s=0===r.length?[["-","-"]]:r.map((e,t)=>{var a;const l=t===r.length-2,i=t===r.length-1;return[e.name||"Sin nombre",(null===(a=e.quantity)||void 0===a?void 0:a.toLocaleString("es-CO"))||"0",l?"TOTAL PROTE\xcdNAS:":i?"Fecha actual:":"",l?n.toLocaleString("es-CO"):i?(new Date).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}):""]}),d={cash:t.cash||0,daviplata:t.daviplata||0,nequi:t.nequi||0},c=d.cash+d.daviplata+d.nequi;return`\n    <html>\n      <head>\n        <title>Previsualizaci\xf3n de Excel</title>\n        <style>\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\n          h1 { text-align: center; font-size: 24px; }\n          table { width: 100%; border-collapse: collapse; }\n          th, td { padding: 8px; border: 1px solid black; }\n          th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\n          td { text-align: left; vertical-align: middle; }\n          td:nth-child(4), td:nth-child(6) { text-align: right; }\n          tr:nth-child(even) { background-color: #f5f5f5; }\n          .totals-table { width: 50%; margin-left: auto; margin-right: auto; }\n\n          .proteins-container { width: auto; margin: 0 auto; max-width: 700px; }\n          .proteins-table {\n            border-collapse: collapse;\n            font-size: 14px;\n            width: 100%;\n            max-width: 700px;\n          }\n          .proteins-table th, .proteins-table td {\n            padding: 6px 12px;\n            border: 1px solid black;\n            white-space: nowrap;\n          }\n          .proteins-table th:nth-child(1), .proteins-table td:nth-child(1) { width: 160px; text-align: left; }\n          .proteins-table th:nth-child(2), .proteins-table td:nth-child(2) { width: 80px; text-align: right; }\n          .proteins-table th:nth-child(3), .proteins-table td:nth-child(3) { width: 220px; text-align: left; }\n\n          .delivery-table th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\n          .delivery-table .green-header th { background-color: #28a745; }\n          .delivery-table td:nth-child(n+2) { text-align: right; }\n\n          .spacer { height: 16px; }\n          .button-container { margin-top: 20px; text-align: center; }\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\n          .button.print { background-color: #28a745; }\n          @media print { .button-container { display: none; } }\n        </style>\n      </head>\n      <body>\n        <h1>Gesti\xf3n de Pedidos</h1>\n        <div class="spacer"></div>\n\n        <div class="proteins-container">\n          <table class="proteins-table" aria-label="Resumen de prote\xednas">\n            <thead>\n              <tr>\n                <th style="background-color: #0066cc; color: white; border: 1px solid black;">Prote\xedna</th>\n                <th style="background-color: #0066cc; color: white; border: 1px solid black;">Unidades</th>\n                <th style="background-color: #0066cc; color: white; border: 1px solid black;"></th>\n              </tr>\n            </thead>\n            <tbody>\n              ${s.map((e,t)=>{const a=e[2]?`\n                  <td style="padding: 0;">\n                    <div style="display: flex; width: 100%; height: 100%;">\n                      <div style="flex: 1; padding: 6px 12px; font-weight: bold; display: flex; align-items: center;">${e[2]}</div>\n                      <div style="width: 1px; background-color: black;"></div>\n                      <div style="flex: 1; padding: 6px 12px; display: flex; justify-content: flex-end; align-items: center; font-weight: ${"TOTAL PROTE\xcdNAS:"===e[2]?"bold":"normal"};">${e[3]}</div>\n                    </div>\n                  </td>\n                `:'<td style="border: none; background-color: white;"></td>';return`\n                  <tr>\n                    <td title="${e[0]}">${e[0]}</td>\n                    <td style="text-align: right;">${e[1]}</td>\n                    ${a}\n                  </tr>\n                `}).join("")}\n            </tbody>\n          </table>\n        </div>\n\n        <div class="spacer"></div><div class="spacer"></div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>N</th>\n              <th>Direcci\xf3n</th>\n              <th>Tel\xe9fono</th>\n              <th>Total</th>\n              <th>M\xe9todo de Pago</th>\n              <th>Domiciliario</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${i.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n                <td>${e[5]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n\n        <div class="spacer"></div><div class="spacer"></div>\n\n        <table class="totals-table">\n          <thead>\n            <tr><th colspan="2">Resumen de Totales</th></tr>\n          </thead>\n          <tbody>\n            <tr><td>Total Efectivo</td><td style="text-align: right;">$${d.cash.toLocaleString("es-CO")}</td></tr>\n            <tr><td>Total Daviplata</td><td style="text-align: right;">$${d.daviplata.toLocaleString("es-CO")}</td></tr>\n            <tr><td>Total Nequi</td><td style="text-align: right;">$${d.nequi.toLocaleString("es-CO")}</td></tr>\n            <tr><td>Total General</td><td style="text-align: right;">$${c.toLocaleString("es-CO")}</td></tr>\n          </tbody>\n        </table>\n\n        <div class="spacer"></div><div class="spacer"></div>\n\n        <table class="delivery-table">\n          <thead>\n            <tr><th colspan="5">Resumen por Domiciliarios</th></tr>\n            <tr class="green-header">\n              <th>Domiciliario</th>\n              <th>Efectivo</th>\n              <th>Daviplata</th>\n              <th>Nequi</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${o.map(e=>`\n              <tr>\n                <td>${e[0]}</td>\n                <td>${e[1]}</td>\n                <td>${e[2]}</td>\n                <td>${e[3]}</td>\n                <td>${e[4]}</td>\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n\n        <div class="button-container">\n          <button class="button print" onclick="window.print()">Imprimir</button>\n          <button class="button" onclick="window.close()">Cerrar Previsualizaci\xf3n</button>\n          <button class="button" onclick="window.opener.postMessage('downloadExcel', '*')">Descargar Excel</button>\n        </div>\n      </body>\n    </html>\n  `}(o,b,z,K,U)),e.document.close()},handleExport:(e,n)=>{try{e(o,b,z,K,U),a(`Exportado correctamente como ${n}.`)}catch(r){console.error(`Error al exportar ${n}:`,r),t(`Error al exportar ${n}: ${r.message}`)}},handleDeleteAllOrders:ie,setShowConfirmDeleteAll:F,exportToExcel:s,exportToPDF:u,exportToCSV:g})]})}}}]);
//# sourceMappingURL=734.bad0e70b.chunk.js.map