/*! For license information please see main.1aa62a5c.js.LICENSE.txt */
(()=>{var e={196:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var r=n(579);const i=()=>(0,r.jsx)("div",{className:"flex justify-center p-2",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-500"})})},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},458:(e,t,n)=>{"use strict";n.d(t,{eJ:()=>ft,xI:()=>zn,hg:()=>gt,J1:()=>pt,zK:()=>rt,p:()=>ut,x9:()=>mt,CI:()=>vt});var r=n(7150),i=n(1529),s=n(443);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(8812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new i.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new s.Vy("@firebase/auth");function h(e){if(d.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.error(`Auth (${r.MF}): ${e}`,...n)}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw v(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e,...n)}function m(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new i.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return m(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw v(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function w(e,t){e||b(t)}function x(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class T{constructor(e,t){this.shortDelay=e,this.longDelay=t,w(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,i.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function C(e,t){w(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class k{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A=new T(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function P(e,t,n,r){return R(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.Am)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},s);return(0,i.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),k.fetch()(await j(e,e.config.apiHost,n,a),c)})}async function R(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new M(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw L(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw L(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);p(e,a)}}catch(s){if(s instanceof i.g)throw s;p(e,"network-request-failed",{message:String(s)})}}async function O(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await P(e,t,n,r,i);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function j(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?C(e.config,i):`${e.config.apiScheme}://${i}`;if(_.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function D(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(f(this.auth,"network-request-failed")),A.get())})}}function L(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=f(e,t,r);return i.customData._tokenResponse=n,i}function F(e){return void 0!==e&&void 0!==e.enterprise}class V{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z(e,t){return P(e,"GET","/v2/recaptchaConfig",I(e,t))}async function U(e,t){return P(e,"POST","/v1/accounts:lookup",t)}function $(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function B(e){return 1e3*Number(e)}function H(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(s){return h("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function q(e){const t=H(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function W(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof i.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class G{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class K{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$(this.lastLoginAt),this.creationTime=$(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t;const n=e.auth,r=await e.getIdToken(),i=await W(e,U(n,{idToken:r}));y(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Y(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function Y(e){return e.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=q(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await R(e,{},async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await j(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),k.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new X;return n&&(y("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return b("not implemented")}}function J(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Z{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new K(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await W(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,i.Ku)(e),r=await n.getIdToken(t),s=H(r);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:$(B(s.auth_time)),issuedAtTime:$(B(s.iat)),expirationTime:$(B(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,i.Ku)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Z(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await W(this,async function(e,t){return P(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:S}=t;y(b&&S,e,"internal-error");const T=X.fromJSON(this.name,S);y("string"===typeof b,e,"internal-error"),J(u,e.name),J(d,e.name),y("boolean"===typeof w,e,"internal-error"),y("boolean"===typeof x,e,"internal-error"),J(h,e.name),J(p,e.name),J(f,e.name),J(m,e.name),J(g,e.name),J(v,e.name);const C=new Z({uid:b,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:T,createdAt:g,lastLoginAt:v});return E&&Array.isArray(E)&&(C.providerData=E.map(e=>Object.assign({},e))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new X;r.updateFromServerResponse(t);const i=new Z({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Q(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Y(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new X;o.updateFromIdToken(n);const a=new Z({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new K(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ee=new Map;function te(e){w(e instanceof Function,"Expected a class definition");let t=ee.get(e);return t?(w(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ee.set(e,t),t)}class ne{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ne.type="NONE";const re=ne;function ie(e,t,n){return`firebase:${e}:${t}:${n}`}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ie(this.userKey,r.apiKey,i),this.fullPersistenceKey=ie("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await U(this.auth,{idToken:e}).catch(()=>{});return t?Z._fromGetAccountInfoResponse(this.auth,t,e):null}return Z._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(te(re),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||te(re);const s=ie(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await U(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Z._fromGetAccountInfoResponse(e,r,t)}else n=Z._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new se(i,e,n)):new se(i,e,n)}}function oe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ue(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(he(t))return"Blackberry";if(pe(t))return"Webos";if(le(t))return"Safari";if((t.includes("chrome/")||ce(t))&&!t.includes("edge/"))return"Chrome";if(de(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/firefox\//i.test(e)}function le(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/crios\//i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iemobile/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/android/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/blackberry/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/webos/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return fe(e)||de(e)||pe(e)||he(e)||/windows phone/i.test(e)||ue(e)}function ge(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oe((0,i.ZQ)());break;case"Worker":t=`${oe((0,i.ZQ)())}-${e}`;break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${s}`}class ve{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ye{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class be{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xe(this),this.idTokenSubscription=new xe(this),this.beforeStateQueue=new ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=te(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await se.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await U(this,{idToken:e}),n=await Z._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==r||!(null===o||void 0===o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,i.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(te(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return P(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new i.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return P(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&te(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[te(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function we(e){return(0,i.Ku)(e)}class xe{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.tD)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Se(e){return Ee.loadJS(e)}function Te(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ce{constructor(){this.enterprise=new ke}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ke{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ne="NO_RECAPTCHA";class _e{constructor(e){this.type="recaptcha-enterprise",this.auth=we(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;F(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ne)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ce).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{z(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new V(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&F(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ee.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Se(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new _e(e);let o;if(i)o=Ne;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ie(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ae(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Ae(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Ae(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Ae(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ae(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Pe(e){const t=we(e),n=await z(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new V(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new _e(t).verify()}}function Re(e,t,n){const r=we(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Oe(t),{host:a,port:l}=function(e){const t=Oe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:je(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:je(t)}}}(t),c=null===l?"":`:${l}`,u={url:`${o}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,i.bD)(u,r.config.emulator)&&(0,i.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,i.zJ)(a)?((0,i.gE)(`${o}//${a}${c}`),(0,i.P1)("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Oe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function je(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class De{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function Me(e,t){return P(e,"POST","/v1/accounts:signUp",t)}async function Le(e,t){return O(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}async function Fe(e,t){return P(e,"POST","/v1/accounts:sendOobCode",I(e,t))}async function Ve(e,t){return Fe(e,t)}class ze extends De{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ze(e,t,"password")}static _fromEmailAndCode(e,t){return new ze(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ie(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Le,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Me,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ue(e,t){return O(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class $e extends De{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $e(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new $e(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ue(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ue(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ue(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.Am)(t)}return e}}async function Be(e,t){return P(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}const He={USER_NOT_FOUND:"user-not-found"};class qe extends De{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),He)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new qe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class We{constructor(e){var t,n,r,s,o,a;const l=(0,i.I9)((0,i.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);y(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.I9)((0,i.hp)(e)).link,n=t?(0,i.I9)((0,i.hp)(t)).deep_link_id:null,r=(0,i.I9)((0,i.hp)(e)).deep_link_id;return(r?(0,i.I9)((0,i.hp)(r)).link:null)||r||n||t||e}(e);try{return new We(t)}catch(n){return null}}}class Ge{constructor(){this.providerId=Ge.PROVIDER_ID}static credential(e,t){return ze._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=We.parseLink(t);return y(n,"argument-error"),ze._fromEmailAndCode(e,n.code,n.tenantId)}}Ge.PROVIDER_ID="password",Ge.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ge.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ke{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qe extends Ke{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ye extends Qe{constructor(){super("facebook.com")}static credential(e){return $e._fromParams({providerId:Ye.PROVIDER_ID,signInMethod:Ye.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ye.credentialFromTaggedObject(e)}static credentialFromError(e){return Ye.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ye.credential(t.oauthAccessToken)}catch(n){return null}}}Ye.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ye.PROVIDER_ID="facebook.com";class Xe extends Qe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $e._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Xe.credential(n,r)}catch(i){return null}}}Xe.GOOGLE_SIGN_IN_METHOD="google.com",Xe.PROVIDER_ID="google.com";class Je extends Qe{constructor(){super("github.com")}static credential(e){return $e._fromParams({providerId:Je.PROVIDER_ID,signInMethod:Je.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Je.credentialFromTaggedObject(e)}static credentialFromError(e){return Je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Je.credential(t.oauthAccessToken)}catch(n){return null}}}Je.GITHUB_SIGN_IN_METHOD="github.com",Je.PROVIDER_ID="github.com";class Ze extends Qe{constructor(){super("twitter.com")}static credential(e,t){return $e._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ze.credential(n,r)}catch(i){return null}}}async function et(e,t){return O(e,"POST","/v1/accounts:signUp",I(e,t))}Ze.TWITTER_SIGN_IN_METHOD="twitter.com",Ze.PROVIDER_ID="twitter.com";class tt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Z._fromIdTokenResponse(e,n,r),s=nt(n);return new tt({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nt(n);return new tt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function rt(e){var t;if((0,r.xZ)(e.app))return Promise.reject(g(e));const n=we(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new tt({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await et(n,{returnSecureToken:!0}),s=await tt._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}class it extends i.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,it.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new it(e,t,n,r)}}function st(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw it._fromErrorAndOperation(e,n,t,r);throw n})}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await W(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tt._forOperation(e,"link",r)}async function at(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if((0,r.xZ)(i.app))return Promise.reject(g(i));const s="reauthenticate";try{const r=await W(e,st(i,s,t,e),n);y(r.idToken,i,"internal-error");const o=H(r.idToken);y(o,i,"internal-error");const{sub:a}=o;return y(e.uid===a,i,"user-mismatch"),tt._forOperation(e,s,r)}catch(o){throw"auth/user-not-found"===(null===o||void 0===o?void 0:o.code)&&p(i,"user-mismatch"),o}}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i="signIn",s=await st(e,i,t),o=await tt._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(o.user),o}async function ct(e,t){return lt(we(e),t)}async function ut(e,t){if((0,r.xZ)(e.app))return Promise.reject(g(e));const n=we(e),i=await async function(e,t){return O(e,"POST","/v1/accounts:signInWithCustomToken",I(e,t))}(n,{token:t,returnSecureToken:!0}),s=await tt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}function dt(e,t,n){var r;y((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),y("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),y("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(y(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(y(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ht(e){const t=we(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function pt(e,t,n){const r=we(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&dt(r,i,n),await Ie(r,i,"getOobCode",Ve,"EMAIL_PASSWORD_PROVIDER")}async function ft(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(g(e));const i=we(e),s=Ie(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et,"EMAIL_PASSWORD_PROVIDER"),o=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ht(e),t}),a=await tt._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function mt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):ct((0,i.Ku)(e),Ge.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ht(e),t})}function gt(e,t,n,r){return(0,i.Ku)(e).onAuthStateChanged(t,n,r)}function vt(e){return(0,i.Ku)(e).signOut()}function yt(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}new WeakMap;const bt="__sak";class wt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bt,"1"),this.storage.removeItem(bt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xt extends wt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=me(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xt.type="LOCAL";const Et=xt;function St(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Tt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Ct{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Tt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return St(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Tt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Tt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=St(n);const i=setInterval(()=>{const e=St(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ct.type="COOKIE";class kt extends wt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kt.type="SESSION";const Nt=kt;class _t{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new _t(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function At(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_t.receivers=[];class It{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=At("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Pt(){return window}function Rt(){return"undefined"!==typeof Pt().WorkerGlobalScope&&"function"===typeof Pt().importScripts}const Ot="firebaseLocalStorageDb",jt="firebaseLocalStorage",Dt="fbase_key";class Mt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lt(e,t){return e.transaction([jt],t?"readwrite":"readonly").objectStore(jt)}function Ft(){const e=indexedDB.open(Ot,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(jt,{keyPath:Dt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(jt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ot);return new Mt(e).toPromise()}(),t(await Ft()))})})}async function Vt(e,t,n){const r=Lt(e,!0).put({[Dt]:t,value:n});return new Mt(r).toPromise()}function zt(e,t){const n=Lt(e,!0).delete(t);return new Mt(n).toPromise()}class Ut{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ft()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_t._getInstance(Rt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new It(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ft();return await Vt(e,bt,"1"),await zt(e,bt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Lt(e,!1).get(t),r=await new Mt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Lt(e,!1).getAll();return new Mt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ut.type="LOCAL";const $t=Ut;function Bt(e,t){return P(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}Te("rcb"),new T(3e4,6e4);const Ht="recaptcha";async function qt(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Pe(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){y("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ie(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ne){y((null===n||void 0===n?void 0:n.type)===Ht,e,"argument-error");return yt(e,await Wt(e,t,n))}return yt(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;y(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Ie(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ne){y((null===n||void 0===n?void 0:n.type)===Ht,e,"argument-error");return Bt(e,await Wt(e,t,n))}return Bt(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ie(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ne){y((null===n||void 0===n?void 0:n.type)===Ht,e,"argument-error");return Be(e,await Wt(e,t,n))}return Be(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Wt(e,t,n){y(n.type===Ht,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Gt{constructor(e){this.providerId=Gt.PROVIDER_ID,this.auth=we(e)}verifyPhoneNumber(e,t){return qt(this.auth,e,(0,i.Ku)(t))}static credential(e,t){return qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Gt.credentialFromTaggedObject(t)}static credentialFromError(e){return Gt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?qe._fromTokenResponse(n,r):null}}function Kt(e,t){return t?te(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Gt.PROVIDER_ID="phone",Gt.PHONE_SIGN_IN_METHOD="phone";class Qt extends De{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ue(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ue(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ue(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yt(e){return lt(e.auth,new Qt(e),e.bypassAuthState)}function Xt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),at(n,new Qt(e),e.bypassAuthState)}async function Jt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),ot(n,new Qt(e),e.bypassAuthState)}class Zt{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yt;case"linkViaPopup":case"linkViaRedirect":return Jt;case"reauthViaPopup":case"reauthViaRedirect":return Xt;default:p(this.auth,"internal-error")}}resolve(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const en=new T(2e3,1e4);class tn extends Zt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,tn.currentPopupAction&&tn.currentPopupAction.cancel(),tn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const e=At();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,en.get())};e()}}tn.currentPopupAction=null;const nn=new Map;class rn extends Zt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=nn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=an(t),r=on(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}nn.set(this.auth._key(),e)}return this.bypassAuthState||nn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sn(e,t){nn.set(e._key(),t)}function on(e){return te(e._redirectPersistence)}function an(e){return ie("pendingRedirect",e.config.apiKey,e.name)}async function ln(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i=we(e),s=Kt(i,t),o=new rn(i,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class cn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!dn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(un(e))}saveEventToCache(e){this.cachedEventUids.add(un(e)),this.lastProcessedEventTime=Date.now()}}function un(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function dn(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pn=/^https?/;async function fn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return P(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(mn(r))return}catch(n){}p(e,"unauthorized-domain")}function mn(e){const t=x(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!pn.test(n))return!1;if(hn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gn=new T(3e4,6e4);function vn(){const e=Pt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function yn(e){return new Promise((t,n)=>{var r,i,s;function o(){vn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vn(),n(f(e,"network-request-failed"))},timeout:gn.get()})}if(null===(i=null===(r=Pt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Pt().gapi)||void 0===s?void 0:s.load)){const t=Te("iframefcb");return Pt()[t]=()=>{gapi.load?o():n(f(e,"network-request-failed"))},Se(`${Ee.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw bn=null,e})}let bn=null;const wn=new T(5e3,15e3),xn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},En=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?C(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:r.MF},o=En.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.Am)(s).slice(1)}`}async function Tn(e){const t=await function(e){return bn=bn||yn(e),bn}(e),n=Pt().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:Sn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=f(e,"network-request-failed"),s=Pt().setTimeout(()=>{r(i)},wn.get());function o(){Pt().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Cn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Nn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Cn),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.ZQ)().toLowerCase();n&&(l=ce(u)?"_blank":n),ae(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new kn(null);const h=window.open(t||"",l,d);y(h,e,"popup-blocked");try{h.focus()}catch(p){}return new kn(h)}const _n="__/auth/handler",An="emulator/auth/handler",In=encodeURIComponent("fac");async function Pn(e,t,n,s,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:o};if(t instanceof Ke){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof Qe){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${In}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${_n}`;return C(t,An)}(e)}?${(0,i.Am)(c).slice(1)}${d}`}const Rn="webStorageSupport";const On=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nt,this._completeRedirectFn=ln,this._overrideRedirectResult=sn}async _openPopup(e,t,n,r){var i;w(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Nn(e,await Pn(e,t,n,x(),r),At())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Pt().location.href=e}(await Pn(e,t,n,x(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Tn(e),n=new cn(e);return t.register("authEvent",t=>{y(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rn,{type:Rn},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Rn];void 0!==i&&t(!!i),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return me()||le()||fe()}};var jn="@firebase/auth",Dn="1.10.8";class Mn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ln=(0,i.XA)("authIdTokenMaxAge")||300;let Fn=null;const Vn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ln)return;const i=null===n||void 0===n?void 0:n.token;Fn!==i&&(Fn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:On,persistence:[$t,Et,Nt]}),s=(0,i.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=Vn(e.toString());!function(e,t,n){(0,i.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,i.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const o=(0,i.Tj)("auth");return o&&Re(n,`http://${o}`),n}var Un;Ee={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Un="Browser",(0,r.om)(new a.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Un,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge(Un)},c=new be(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(te);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new a.uA("auth-internal",e=>(e=>new Mn(e))(we(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(jn,Dn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Un)),(0,r.KO)(jn,Dn,"esm2017")},579:(e,t,n)=>{"use strict";e.exports=n(1153)},1137:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var r=n(579);const i=e=>{let{progress:t,className:n=""}=e;return(0,r.jsx)("div",{className:`relative w-full bg-primary-100 rounded-full h-3 sm:h-4 shadow-sm ${n}`,children:(0,r.jsx)("div",{className:"bg-primary-500 h-3 sm:h-4 rounded-full transition-all duration-300 flex items-center justify-end pr-1 text-[8px] sm:text-[10px] font-medium text-white",style:{width:`${Math.max(t,0)}%`},children:`${Math.round(t)}%`})})}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1173:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5043),i=n(579);const s=()=>window.innerWidth<768,o=e=>{var t;let{title:n,emoji:o,options:a=[],selected:l=[],showReplacements:c=!1,replacements:u=[],multiple:d=!1,className:h="",disabled:p=!1,showConfirmButton:f=!1,onConfirm:m=()=>{},onImmediateSelect:g=()=>{},onImmediateReplacementSelect:v=()=>{},onAdd:y=()=>{},onRemove:b=()=>{},onIncrease:w=()=>{}}=e;const[x,E]=(0,r.useState)(c),[S,T]=(0,r.useState)(d?Array.isArray(l)?l:[]:l),[C,k]=(0,r.useState)(null),[N,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{T(d?Array.isArray(l)?l:[]:l)},[l,d]),(0,r.useEffect)(()=>{let e=c&&Array.isArray(u)&&u.length>0;if("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){const t=S.some(e=>e.requiresReplacement&&("prote\xedna adicional"===e.name.toLowerCase()?!e.protein:!e.replacement));if(e=t,t&&!C){const e=S.find(e=>e.requiresReplacement&&("prote\xedna adicional"===e.name.toLowerCase()?!e.protein:!e.replacement));e&&k(e.id)}}else"Sopa"===n?e="Remplazo por Sopa"===(null===S||void 0===S?void 0:S.name):"Principio"===n&&(e=d&&Array.isArray(S)&&S.some(e=>"Remplazo por Principio"===e.name)||!d&&"Remplazo por Principio"===(null===S||void 0===S?void 0:S.name));E(e)},[c,S,n,u,C,d]),(0,r.useEffect)(()=>{if("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){const e=S.filter(e=>{if(e.id===C)return!0;if(e.requiresReplacement){if("prote\xedna adicional"===e.name.toLowerCase())return!!e.protein;if(["sopa adicional","principio adicional","bebida adicional"].includes(e.name.toLowerCase()))return!!e.replacement}return!0});e.length!==S.length&&(T(e),g(e))}},[S,n,g,C]);const A=(0,r.useCallback)(()=>{if(!f)return!1;if("Principio"===n&&d){var e;if(S.some(e=>"Remplazo por Principio"===e.name))return!(null!==(e=S[0])&&void 0!==e&&e.replacement);return S.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name))?S.length>1:0===S.length||S.length>2}return d?0===S.length:!S},[S,f,n,d]),I=e=>{if(p||e.isFinished)return;let t=d?[...S]:null;const r=d?t.some(t=>t.id===e.id):(null===S||void 0===S?void 0:S.id)===e.id,i=["Remplazo por Principio","Remplazo por Sopa","Prote\xedna adicional","Sopa adicional","Principio adicional","Bebida adicional","prote\xedna adicional","bebida adicional"];if("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){if(r)t=t.filter(t=>t.id!==e.id),b(e.id),C===e.id&&(k(null),_(!1)),E(!1);else{const n={...e,quantity:1};t.push(n),y(n),e.requiresReplacement&&(k(e.id),E(!0))}T(t),g(t)}else{let s=!1;if(i.includes(e.name))r?(t=d?t.filter(t=>t.id!==e.id):null,"Sopa"!==n&&"Principio"!==n||v(null),s=!1):(s="Remplazo por Sopa"===e.name||"Remplazo por Principio"===e.name,d?"Principio"===n&&"Remplazo por Principio"===e.name?t=[e]:t.push(e):t=e);else if(s=!1,"Sopa"!==n&&"Principio"!==n||v(null),"Principio"===n&&d){const n=["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name),i=t.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name)),s=t.some(e=>"Remplazo por Principio"===e.name);if(n||"Remplazo por Principio"===e.name)r?(t=t.filter(t=>t.id!==e.id),s&&v(null)):(t=[e],"Remplazo por Principio"===e.name&&E(!0));else{(i||s)&&(t=t.filter(e=>!["Arroz con pollo","Arroz paisa","Arroz tres carnes","Remplazo por Principio"].includes(e.name)),s&&v(null));const n=t.findIndex(t=>t.id===e.id);n>-1?t.splice(n,1):t.length<2&&t.push(e)}}else if("Acompa\xf1amiento"===n&&d)if("Ninguno"===e.name)t=r?t.filter(t=>t.id!==e.id):(t.length,[e]);else{t.some(e=>"Ninguno"===e.name)&&(t=t.filter(e=>"Ninguno"!==e.name));const n=t.findIndex(t=>t.id===e.id);n>-1?t.splice(n,1):t.push(e)}else if(d){const n=t.findIndex(t=>t.id===e.id);n>-1?t.splice(n,1):t.push(e)}else t=e;T(t),g(t),E(s)}},P=e=>{if(!p&&!e.isFinished)if("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){if(C){const t=S.map(t=>t.id===C?{...t,protein:"prote\xedna adicional"===t.name.toLowerCase()?e.name:t.protein,replacement:["sopa adicional","principio adicional","bebida adicional"].includes(t.name.toLowerCase())?e.name:t.replacement}:t);T(t),g(t),v({id:C,replacement:e}),m({selection:t,replacement:e});const n=t.find(e=>e.requiresReplacement&&!e.replacement&&"prote\xedna adicional"!==e.name.toLowerCase()&&e.id!==C);n?(k(n.id),E(!0)):(k(null),E(!1))}}else if("Sopa"===n||"Principio"===n){const t=d?S.map(t=>({...t,replacement:"Remplazo por Sopa"===t.name||"Remplazo por Principio"===t.name?e.name:t.replacement})):{...S,replacement:e.name};T(t),g(t),v(e),m({selection:t,replacement:e}),E(!1)}},R=()=>{if(("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&C){const e=S.filter(e=>e.id!==C);T(e),g(e),b(C),k(null),_(!1),E(!1)}},O=()=>{if("Adiciones (por almuerzo)"!==n&&"Adiciones (por desayuno)"!==n||!C)"Sopa"!==n&&"Principio"!==n||(T(d?[]:null),g(d?[]:null),v(null),E(!1));else{const e=S.filter(e=>e.id!==C);T(e),g(e),b(C),k(null),_(!1),E(!1)}},j=(0,r.useCallback)(e=>{const t=f?S:l;return d?Array.isArray(t)&&t.some(t=>t.id===e.id):(null===t||void 0===t?void 0:t.id)===e.id},[S,l,f,d]),D=(0,r.useCallback)(e=>{if("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){const t=S.find(e=>e.id===C);return t&&(t.protein===e.name||t.replacement===e.name)}var t;return("Sopa"===n||"Principio"===n)&&((null===S||void 0===S?void 0:S.replacement)===e.name||Array.isArray(S)&&S.some(t=>t.replacement===e.name)||(null===l||void 0===l||null===(t=l.replacement)||void 0===t?void 0:t.name)===e.name)},[S,l,C,n]),M=e=>{const t=d?Array.isArray(S)?S.find(t=>t.id===e.id):null:S;if(!t)return e.name;let r=e.name,i=e.isNew||!1;if(r.includes("(Nuevo)")&&(r=r.replace(" (Nuevo)",""),i=!0),"Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){if("prote\xedna adicional"===e.name.toLowerCase()&&t.protein)return`${r} (${t.protein})`;if(["sopa adicional","principio adicional","bebida adicional"].includes(e.name.toLowerCase())&&t.replacement)return`${r} (${t.replacement})`}else if("Sopa"===n&&"Remplazo por Sopa"===e.name&&t.replacement||"Principio"===n&&"Remplazo por Principio"===e.name&&t.replacement)return`${r} (${t.replacement})`;return r};return(0,i.jsxs)("div",{className:`mb-2 ${h}`,children:[n&&"Adiciones (por almuerzo)"!==n&&"Adiciones (por desayuno)"!==n&&(0,i.jsxs)("h3",{className:"text-sm font-semibold mb-2 flex items-center text-gray-700",children:[(0,i.jsx)("span",{className:"mr-1",children:o}),n]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:a.map((e,t)=>{const r=j(e),o=(e=>{if("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n){const t=S.find(t=>t.id===e.id);return t?t.quantity||1:0}return 0})(e);return s()?((e,t,r,s)=>(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>I(e),disabled:p||e.isFinished,className:`relative w-full p-2 rounded-t-lg text-sm font-medium transition-all duration-200 flex flex-col items-start justify-between text-left min-h-[60px] shadow-sm ${p||e.isFinished?"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed":r?"bg-green-200 text-green-800 border border-green-300":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"} ${("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&C===e.id&&x||("Sopa"===n||"Principio"===n)&&e.name.includes("Remplazo")&&x?"rounded-b-none":"rounded-b-lg"}`,"aria-label":`Seleccionar ${e.name}${r?" (seleccionado)":""}`,children:[(0,i.jsxs)("div",{className:"flex items-center w-full",children:[e.emoji&&(0,i.jsx)("span",{className:"mr-2 text-base sm:text-sm",children:e.emoji}),(0,i.jsx)("div",{className:"flex-grow",children:M(e)}),r&&"Adiciones (por almuerzo)"!==n&&"Adiciones (por desayuno)"!==n&&(0,i.jsx)("svg",{className:"h-4 w-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),e.description&&(0,i.jsx)("span",{className:"text-xs text-gray-500 block mt-1",children:e.description}),("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&r&&(0,i.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[(0,i.jsx)("div",{onClick:t=>{t.stopPropagation(),b(e.id)},className:"text-red-500 hover:text-red-700 cursor-pointer","aria-label":`Disminuir cantidad de ${e.name}`,children:(0,i.jsx)("span",{role:"img","aria-label":"Eliminar",children:"\ud83d\uddd1\ufe0f"})}),(0,i.jsx)("span",{className:"text-sm",children:s}),(0,i.jsx)("div",{onClick:t=>{t.stopPropagation(),w(e.id)},className:"text-green-500 hover:text-green-700 cursor-pointer","aria-label":`Aumentar cantidad de ${e.name}`,children:(0,i.jsx)("span",{role:"img","aria-label":"Agregar",children:"\u2795"})})]})]}),(("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&C===e.id&&x||("Sopa"===n||"Principio"===n)&&e.name.includes("Remplazo")&&x)&&u.length>0&&(0,i.jsxs)("div",{className:"bg-green-50 p-2 rounded-b-lg border border-t-0 border-green-300 shadow-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,i.jsxs)("h4",{className:"text-[10px] font-medium text-gray-600",children:["Selecciona tu opci\xf3n para ",e.name,":"]}),(0,i.jsxs)("div",{children:[("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&(0,i.jsx)("button",{onClick:R,className:"text-red-600 hover:text-red-700 text-xs mr-2","aria-label":"Cancelar selecci\xf3n",children:"Cancelar"}),(0,i.jsx)("button",{onClick:O,className:"text-red-600 hover:text-red-700 text-xs","aria-label":"Deseleccionar opci\xf3n",children:"Deseleccionar"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-1",children:u.map((e,t)=>(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>P(e),disabled:p||e.isFinished,className:"relative w-full p-2 rounded-lg text-sm font-medium transition-all duration-200 flex flex-col items-start text-left min-h-[60px] shadow-sm "+(p||e.isFinished?"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed":D(e)?"bg-green-200 text-green-800 border border-green-300":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"),"aria-label":`Seleccionar opci\xf3n ${e.name}${D(e)?" (seleccionado)":""}`,children:[(0,i.jsxs)("div",{className:"flex items-center w-full",children:[e.emoji&&(0,i.jsx)("span",{className:"mr-2 text-base sm:text-sm",children:e.emoji}),(0,i.jsx)("div",{className:"flex-grow",children:M(e)}),D(e)&&(0,i.jsx)("svg",{className:"ml-2 h-4 w-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),e.description&&(0,i.jsx)("span",{className:"text-xs text-gray-500 block mt-1",children:e.description})]}),e.isNew&&!e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"NUEVO"}),e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-gray-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"AGOTADO"})]},e.id||t))}),N&&(0,i.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona una opci\xf3n o deselecciona la adici\xf3n antes de cerrar."})]}),e.isNew&&!e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"NUEVO"}),e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-gray-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"AGOTADO"})]},e.id||t))(e,t,r,o):((e,t,r,s)=>(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>I(e),disabled:p||e.isFinished,className:"relative w-full p-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-between text-left min-h-[60px] shadow-sm "+(p||e.isFinished?"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed":r?"bg-green-200 text-green-800 border border-green-300":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"),"aria-label":`Seleccionar ${e.name}${r?" (seleccionado)":""}`,children:[(0,i.jsxs)("div",{className:"flex items-center flex-grow",children:[e.emoji&&(0,i.jsx)("span",{className:"mr-2 text-base sm:text-sm",children:e.emoji}),(0,i.jsxs)("div",{children:[M(e),e.description&&(0,i.jsx)("span",{className:"text-xs text-gray-500 block mt-1",children:e.description})]})]}),("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&r&&(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,i.jsx)("div",{onClick:t=>{t.stopPropagation(),b(e.id)},className:"text-red-500 hover:text-red-700 cursor-pointer","aria-label":`Disminuir cantidad de ${e.name}`,children:(0,i.jsx)("span",{role:"img","aria-label":"Eliminar",children:"\ud83d\uddd1\ufe0f"})}),(0,i.jsx)("span",{className:"text-sm",children:s}),(0,i.jsx)("div",{onClick:t=>{t.stopPropagation(),w(e.id)},className:"text-green-500 hover:text-green-700 cursor-pointer","aria-label":`Aumentar cantidad de ${e.name}`,children:(0,i.jsx)("span",{role:"img","aria-label":"Agregar",children:"\u2795"})})]}),r&&"Adiciones (por almuerzo)"!==n&&"Adiciones (por desayuno)"!==n&&(0,i.jsx)("svg",{className:"h-4 w-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),e.isNew&&!e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"NUEVO"}),e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-gray-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"AGOTADO"})]},e.id||t))(e,t,r,o)})}),x&&u.length>0&&!s()&&(0,i.jsxs)("div",{className:"mt-2 pl-2 border-l-2 border-green-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,i.jsxs)("h4",{className:"text-[10px] font-medium text-gray-600",children:["Selecciona tu opci\xf3n para"," ","Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n?(null===(t=a.find(e=>e.id===C))||void 0===t?void 0:t.name)||n:"Sopa"===n?"Remplazo por Sopa":"Remplazo por Principio",":"]}),(0,i.jsxs)("div",{children:[("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&(0,i.jsx)("button",{onClick:R,className:"text-red-600 hover:text-red-700 text-xs mr-2","aria-label":"Cancelar selecci\xf3n",children:"Cancelar"}),(0,i.jsx)("button",{onClick:O,className:"text-red-600 hover:text-red-700 text-xs","aria-label":"Deseleccionar opci\xf3n",children:"Deseleccionar"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:u.map((e,t)=>(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>P(e),disabled:p||e.isFinished,className:"relative w-full p-2 rounded-lg text-sm font-medium transition-all duration-200 flex flex-col items-start text-left min-h-[60px] shadow-sm "+(p||e.isFinished?"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed":D(e)?"bg-green-200 text-green-800 border border-green-300":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"),"aria-label":`Seleccionar opci\xf3n ${e.name}${D(e)?" (seleccionado)":""}`,children:[(0,i.jsxs)("div",{className:"flex items-center w-full",children:[e.emoji&&(0,i.jsx)("span",{className:"mr-2 text-base sm:text-sm",children:e.emoji}),(0,i.jsx)("span",{className:"flex-grow",children:M(e)}),D(e)&&(0,i.jsx)("svg",{className:"h-4 w-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),e.description&&(0,i.jsx)("span",{className:"text-xs text-gray-500 block mt-1",children:e.description})]}),e.isNew&&!e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"NUEVO"}),e.isFinished&&(0,i.jsx)("span",{className:"absolute top-0 right-7 transform translate-x-1/2 -translate-y-1/2 bg-gray-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5",children:"AGOTADO"})]},e.id||t))}),N&&(0,i.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona una opci\xf3n o deselecciona la adici\xf3n antes de cerrar."})]}),d&&"Principio"===n&&(0,i.jsx)("div",{className:"mt-1 text-sm sm:text-base text-gray-600 font-semibold",children:null!==S&&void 0!==S&&S.some(e=>"Remplazo por Principio"===(null===e||void 0===e?void 0:e.name))?"Selecciona tu reemplazo por principio entre las opciones disponibles.":"Puedes seleccionar hasta dos principios. (Mixto)"}),d&&("Adiciones (por almuerzo)"===n||"Adiciones (por desayuno)"===n)&&(0,i.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Selecciona los extras para este almuerzo/desayuno. (Opcional)"}),d&&"Acompa\xf1amiento"===n&&(0,i.jsx)("div",{className:"mt-1 text-xs text-gray-500"}),f&&(0,i.jsx)("button",{onClick:()=>{f&&m&&m({selection:S,replacement:null})},disabled:A(),className:"mt-2 bg-green-500 hover:bg-green-600 text-white px-4 py-1 rounded-lg text-xs transition-colors duration-200 "+(A()?"opacity-50 cursor-not-allowed":""),"aria-label":`Confirmar ${n}`,children:"Confirmar Principio"})]})},a=r.memo(o)},1283:(e,t,n)=>{"use strict";n.d(t,{BV:()=>we,C5:()=>ve,Kd:()=>tt,N_:()=>rt,Zp:()=>ne,qh:()=>ye,zy:()=>Z});var r=n(5043),i=(n(3175),"popstate");function s(){return h(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return c("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function a(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?d(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,u="POP",d=null,h=f();function f(){return(a.state||{idx:null}).idx}function m(){u="POP";let e=f(),t=null==e?null:e-h;h=e,d&&d({action:u,location:v.location,delta:t})}function g(e){return p(e)}null==h&&(h=0,a.replaceState({...a.state,idx:h},""));let v={get action(){return u},get location(){return e(s,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(i,m),d=e,()=>{s.removeEventListener(i,m),d=null}},createHref:e=>t(s,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u="PUSH";let r=c(v.location,e,t);n&&n(r,e),h=f()+1;let i=l(r,h),p=v.createHref(r);try{a.pushState(i,"",p)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(p)}o&&d&&d({action:u,location:v.location,delta:1})},replace:function(e,t){u="REPLACE";let r=c(v.location,e,t);n&&n(r,e),h=f();let i=l(r,h),s=v.createHref(r);a.replaceState(i,"",s),o&&d&&d({action:u,location:v.location,delta:0})},go:e=>a.go(e)};return v}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),o(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:u(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function f(e,t){return m(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function m(e,t,n,r){let i=I(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let s=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=A(i);o=k(s[a],e,r)}return o}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let l=D([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:C(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of v(e.path))i(e,t,n);else i(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=v(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var y=/^:[\w-]+$/,b=3,w=2,x=1,E=10,S=-2,T=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=S),t&&(r+=w),n.filter(e=>!T(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?x:E),r)}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:D([s,u.pathname]),pathnameBase:M(D([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=D([s,u.pathnameBase]))}return o}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return a(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function R(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e){let t=R(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function j(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=d(e):(r={...e},o(!r.pathname||!r.pathname.includes("?"),P("?","pathname","search",r)),o(!r.pathname||!r.pathname.includes("#"),P("#","pathname","hash",r)),o(!r.search||!r.search.includes("#"),P("#","search","hash",r)));let s,a=""===e||""===r.pathname,l=a?"/":r.pathname;if(null==l)s=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?d(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:L(r),hash:F(i)}}(r,s),u=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var D=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var z=["POST","PUT","PATCH","DELETE"],U=(new Set(z),["GET",...z]);new Set(U),Symbol("ResetLoaderData");var $=r.createContext(null);$.displayName="DataRouter";var B=r.createContext(null);B.displayName="DataRouterState";var H=r.createContext({isTransitioning:!1});H.displayName="ViewTransition";var q=r.createContext(new Map);q.displayName="Fetchers";var W=r.createContext(null);W.displayName="Await";var G=r.createContext(null);G.displayName="Navigation";var K=r.createContext(null);K.displayName="Location";var Q=r.createContext({outlet:null,matches:[],isDataRoute:!1});Q.displayName="Route";var Y=r.createContext(null);Y.displayName="RouteError";var X=!0;function J(){return null!=r.useContext(K)}function Z(){return o(J(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(K).location}var ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function te(e){r.useContext(G).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(Q);return e?function(){let{router:e}=de("useNavigate"),t=pe("useNavigate"),n=r.useRef(!1);te(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(n.current,ee),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t]);return i}():function(){o(J(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext($),{basename:t,navigator:n}=r.useContext(G),{matches:i}=r.useContext(Q),{pathname:s}=Z(),l=JSON.stringify(O(i)),c=r.useRef(!1);te(()=>{c.current=!0});let u=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(c.current,ee),!c.current)return;if("number"===typeof r)return void n.go(r);let o=j(r,JSON.parse(l),s,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:D([t,o.pathname])),(i.replace?n.replace:n.push)(o,i.state,i)},[t,n,l,s,e]);return u}()}r.createContext(null);function re(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(Q),{pathname:i}=Z(),s=JSON.stringify(O(n));return r.useMemo(()=>j(e,JSON.parse(s),i,"path"===t),[e,s,i,t])}function ie(e,t,n,i){o(J(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=r.useContext(G),{matches:l}=r.useContext(Q),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;if(X){let e=m&&m.path||"";ge(h,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let g,v=Z();if(t){let e="string"===typeof t?d(t):t;o("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),g=e}else g=v;let y=g.pathname||"/",b=y;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=f(e,{pathname:b});X&&(a(m||null!=w,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),a(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`));let x=ce(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:D([p,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:D([p,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,i);return t&&x?r.createElement(K.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},x):x}function se(){let e=fe(),t=V(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return X&&(console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route."))),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,a)}var oe=r.createElement(se,null),ae=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Q.Provider,{value:this.props.routeContext},r.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function le(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext($);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Q.Provider,{value:t},i)}function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,s=n?.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==s?.[e.route.id]);o(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<i.length;r++){let e=i[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){a=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight((e,o,c)=>{let u,d=!1,h=null,p=null;n&&(u=s&&o.route.id?s[o.route.id]:void 0,h=o.route.errorElement||oe,a&&(l<0&&0===c?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===c&&(d=!0,p=o.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,c+1)),m=()=>{let t;return t=u?h:d?p:o.route.Component?r.createElement(o.route.Component,null):o.route.element?o.route.element:e,r.createElement(le,{match:o,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===c)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}function ue(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function de(e){let t=r.useContext($);return o(t,ue(e)),t}function he(e){let t=r.useContext(B);return o(t,ue(e)),t}function pe(e){let t=function(e){let t=r.useContext(Q);return o(t,ue(e)),t}(e),n=t.matches[t.matches.length-1];return o(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function fe(){let e=r.useContext(Y),t=he("useRouteError"),n=pe("useRouteError");return void 0!==e?e:t.errors?.[n]}var me={};function ge(e,t,n){t||me[e]||(me[e]=!0,a(!1,n))}r.memo(function(e){let{routes:t,future:n,state:r}=e;return ie(t,void 0,r,n)});function ve(e){let{to:t,replace:n,state:i,relative:s}=e;o(J(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=r.useContext(G);a(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=r.useContext(Q),{pathname:u}=Z(),d=ne(),h=j(t,O(c),u,"path"===s),p=JSON.stringify(h);return r.useEffect(()=>{d(JSON.parse(p),{replace:n,state:i,relative:s})},[d,p,s,n,i]),null}function ye(e){o(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function be(e){let{basename:t="/",children:n=null,location:i,navigationType:s="POP",navigator:l,static:c=!1}=e;o(!J(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);"string"===typeof i&&(i=d(i));let{pathname:p="/",search:f="",hash:m="",state:g=null,key:v="default"}=i,y=r.useMemo(()=>{let e=I(p,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:v},navigationType:s}},[u,p,f,m,g,v,s]);return a(null!=y,`<Router basename="${u}"> is not able to match the URL "${p}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),null==y?null:r.createElement(G.Provider,{value:h},r.createElement(K.Provider,{children:n,value:y}))}function we(e){let{children:t,location:n}=e;return ie(xe(t),n)}r.Component;function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,xe(e.props.children,s));o(e.type===ye,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),o(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=xe(e.props.children,s)),n.push(a)}),n}var Ee="get",Se="application/x-www-form-urlencoded";function Te(e){return null!=e&&"string"===typeof e.tagName}var Ce=null;var ke=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ne(e){return null==e||ke.has(e)?e:(a(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Se}"`),null)}function _e(e,t){let n,r,i,s,o;if(Te(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?I(o,t):null,n=e.getAttribute("method")||Ee,i=Ne(e.getAttribute("enctype"))||Se,s=new FormData(e)}else if(function(e){return Te(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Te(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?I(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Ee,i=Ne(e.getAttribute("formenctype"))||Ne(o.getAttribute("enctype"))||Se,s=new FormData(o,e),!function(){if(null===Ce)try{new FormData(document.createElement("form"),0),Ce=!1}catch(e){Ce=!0}return Ce}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(Te(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ee,r=null,i=Se,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Ae(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ie(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pe(e){return null!=e&&"string"===typeof e.page}function Re(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Oe(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function je(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function De(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Pe(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function Me(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Le=new Set([100,101,204,205]);function Fe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===I(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}r.Component;function Ve(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(V(t))return r.createElement(ze,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),X?s:null);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(ze,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function ze(e){let{title:t,renderScripts:n,isOutsideRemixApp:i,children:s}=e,{routeModules:o}=qe();return o.root?.Layout&&!i?s:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,t)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,n?r.createElement(Je,null):null)))}function Ue(e,t){return"lazy"===e.mode&&!0===t}function $e(){let e=r.useContext($);return Ae(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Be(){let e=r.useContext(B);return Ae(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var He=r.createContext(void 0);function qe(){let e=r.useContext(He);return Ae(e,"You must render this element inside a <HydratedRouter> element"),e}function We(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ge(e,t,n){if(n&&!Xe)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function Ke(e){let{page:t,...n}=e,{router:i}=$e(),s=r.useMemo(()=>f(i.routes,t,i.basename),[i.routes,t,i.basename]);return s?r.createElement(Ye,{page:t,matches:s,...n}):null}function Qe(e){let{manifest:t,routeModules:n}=qe(),[i,s]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return De((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ie(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Re).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),i}function Ye(e){let{page:t,matches:n,...i}=e,s=Z(),{manifest:o,routeModules:a}=qe(),{basename:l}=$e(),{loaderData:c,matches:u}=Be(),d=r.useMemo(()=>Oe(t,n,u,o,s,"data"),[t,n,u,o,s]),h=r.useMemo(()=>Oe(t,n,u,o,s,"assets"),[t,n,u,o,s]),p=r.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{let n=o.routes[t.route.id];n&&n.hasLoader&&(!d.some(e=>e.route.id===t.route.id)&&t.route.id in c&&a[t.route.id]?.shouldRevalidate||n.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Fe(t,l);return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[l,c,s,o,d,n,t,a]),f=r.useMemo(()=>je(h,o),[h,o]),m=Qe(h);return r.createElement(r.Fragment,null,p.map(e=>r.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...i})),f.map(e=>r.createElement("link",{key:e,rel:"modulepreload",href:e,...i})),m.map(e=>{let{key:t,link:n}=e;return r.createElement("link",{key:t,...n})}))}He.displayName="FrameworkContext";var Xe=!1;function Je(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:s,routeDiscovery:o,ssr:a}=qe(),{router:l,static:c,staticContext:u}=$e(),{matches:d}=Be(),h=Ue(o,a);s&&(s.didRenderScripts=!0);let p=Ge(d,null,i);r.useEffect(()=>{Xe=!0},[]);let m=r.useMemo(()=>{let i=u?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",s=c?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(t.url)}`};\n${p.map((e,n)=>{let r=`route${n}`,i=t.routes[e.route.id];Ae(i,`Route ${e.route.id} not found in manifest`);let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:`${r}_clientAction`}]:[],...o?[{module:o,varName:`${r}_clientLoader`}]:[],...a?[{module:a,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===u.length?`import * as ${r} from ${JSON.stringify(c)};`:[u.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${r} = {${u.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push(`/${s.join("/")}`),s.pop();o.forEach(e=>{let n=f(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let a=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return{...r,routes:a,sri:!!n||void 0}}(t,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${p.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return r.createElement(r.Fragment,null,r.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Me(i),type:void 0}),r.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Me(s),type:"module",async:!0}))},[]),g=Xe?[]:(v=t.entry.imports.concat(je(p,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let y="object"===typeof t.sri?t.sri:{};return Xe?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}}):null,h?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:y[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:y[t.entry.module],suppressHydrationWarning:!0}),g.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:y[t],suppressHydrationWarning:!0})),m)}function Ze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var et="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{et&&(window.__reactRouterVersion="7.6.3")}catch(ut){}function tt(e){let{basename:t,children:n,window:i}=e,o=r.useRef();null==o.current&&(o.current=s({window:i,v5Compat:!0}));let a=o.current,[l,c]=r.useState({action:a.action,location:a.location}),u=r.useCallback(e=>{r.startTransition(()=>c(e))},[c]);return r.useLayoutEffect(()=>a.listen(u),[a,u]),r.createElement(be,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}var nt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=r.forwardRef(function(e,t){let n,{onClick:i,discover:s="render",prefetch:l="none",relative:c,reloadDocument:d,replace:h,state:p,target:f,to:m,preventScrollReset:g,viewTransition:v,...y}=e,{basename:b}=r.useContext(G),w="string"===typeof m&&nt.test(m),x=!1;if("string"===typeof m&&w&&(n=m,et))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=I(t.pathname,b);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:x=!0}catch(ut){a(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(J(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(G),{hash:s,pathname:a,search:l}=re(e,{relative:t}),c=a;return"/"!==n&&(c="/"===a?n:D([n,a])),i.createHref({pathname:c,search:l,hash:s})}(m,{relative:c}),[S,T,C]=function(e,t){let n=r.useContext(He),[i,s]=r.useState(!1),[o,a]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let f=()=>{s(!0)},m=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,p,{}]:[o,p,{onFocus:We(l,f),onBlur:We(c,m),onMouseEnter:We(u,f),onMouseLeave:We(d,m),onTouchStart:We(h,f)}]:[!1,p,{}]}(l,y),k=function(e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ne(),c=Z(),d=re(e,{relative:o});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:u(c)===u(d);l(e,{replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,t,e,s,o,a])}(m,{replace:h,state:p,target:f,preventScrollReset:g,relative:c,viewTransition:v});let N=r.createElement("a",{...y,...C,href:n||E,onClick:x||d?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:Ze(t,T),target:f,"data-discover":w||"render"!==s?void 0:"true"});return S&&!w?r.createElement(r.Fragment,null,N,r.createElement(Ke,{page:E})):N});rt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d,...h}=e,p=re(c,{relative:h.relative}),f=Z(),m=r.useContext(B),{navigator:g,basename:v}=r.useContext(G),y=null!=m&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(H);o(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ot("useViewTransitionState"),s=re(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=I(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=I(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=N(s.pathname,l)||null!=N(s.pathname,a)}(p)&&!0===u,b=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,w=f.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=I(x,v)||x);const E="/"!==b&&b.endsWith("/")?b.length-1:b.length;let S,T=w===b||!a&&w.startsWith(b)&&"/"===w.charAt(E),C=null!=x&&(x===b||!a&&x.startsWith(b)&&"/"===x.charAt(b.length)),k={isActive:T,isPending:C,isTransitioning:y},_=T?n:void 0;S="function"===typeof s?s(k):[s,T?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(k):l;return r.createElement(rt,{...h,"aria-current":_,className:S,ref:t,style:A,to:c,viewTransition:u},"function"===typeof d?d(k):d)}).displayName="NavLink";var it=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:a,replace:l,state:c,method:d=Ee,action:h,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:g,...v}=e,y=ct(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(G),i=r.useContext(Q);o(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...re(e||".",{relative:t})},l=Z();if(null==e){a.search=l.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:D([n,a.pathname]));return u(a)}(h,{relative:f}),w="get"===d.toLowerCase()?"get":"post",x="string"===typeof h&&nt.test(h);return r.createElement("form",{ref:t,method:w,action:b,onSubmit:a?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||d;y(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:l,state:c,relative:f,preventScrollReset:m,viewTransition:g})},...v,"data-discover":x||"render"!==n?void 0:"true"})});function st(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ot(e){let t=r.useContext($);return o(t,st(e)),t}it.displayName="Form";var at=0,lt=()=>`__${String(++at)}__`;function ct(){let{router:e}=ot("useSubmit"),{basename:t}=r.useContext(G),n=pe("useRouteId");return r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=_e(r,t);if(!1===i.navigate){let t=i.fetcherKey||lt();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},1529:(e,t,n)=>{"use strict";n.d(t,{cY:()=>f,FA:()=>O,g:()=>R,u:()=>a,Uj:()=>o,Fy:()=>v,tD:()=>U,bD:()=>M,hp:()=>z,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>p,mS:()=>l,Ku:()=>H,ZQ:()=>x,sr:()=>C,zJ:()=>m,c1:()=>T,Im:()=>D,lT:()=>N,zW:()=>I,jZ:()=>E,lV:()=>k,nr:()=>_,Ov:()=>A,gE:()=>g,Am:()=>F,I9:()=>V,P1:()=>w,eX:()=>P});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==l)throw new s;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function m(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}const y={};let b=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!m(window.location.host)||y[e]===t||y[e]||b)return;function n(e){return`__firebase__banner__${e}`}y[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(y))y[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function S(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function T(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function N(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){return!S()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class R extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(j,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new R(n,s,t)}}const j=/\{\$([^}]+)}/g;function D(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function M(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(L(n)&&L(s)){if(!M(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function L(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function V(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function z(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function U(e,t){const n=new $(e,t);return n.subscribe.bind(n)}class ${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B(){}function H(e){return e&&e._delegate?e._delegate:e}},1958:(e,t,n)=>{"use strict";n.d(t,{j:()=>l,db:()=>a});var r=n(7150);(0,r.KO)("firebase","11.10.0","app");var i=n(5472),s=n(458);const o=(0,r.Wp)({apiKey:"AIzaSyCNeAkQJYhR8i1yYxaKwvBzE9okr00Pq_Q",authDomain:"cocina-casera-bca8d.firebaseapp.com",projectId:"cocina-casera-bca8d",storageBucket:"cocina-casera-bca8d.firebasestorage.app",messagingSenderId:"741265643266",appId:"1:741265643266:web:c51cd02ced73671f80141b",measurementId:"G-9PNKWZL0JP"}),a=(0,i.aU)(o),l=(0,s.xI)(o)},2049:(e,t,n)=>{"use strict";n.d(t,{Cu:()=>i,F5:()=>o,GF:()=>a,VC:()=>c,ct:()=>r,fB:()=>s,x8:()=>l});const r=e=>{let{isWaitress:t=!1}=e;return{id:0,type:null,eggs:null,broth:null,riceBread:null,drink:null,protein:null,additions:[],notes:"",tableNumber:t?"":null,paymentMethod:null,orderType:t?"table":"takeaway",...t?{}:{time:null,address:{address:"",phoneNumber:"",addressType:"house",recipientName:"",unitDetails:"",localName:""},cutlery:null}}},i=(e,t,n,r)=>{e(e=>e.map(e=>e.id===t?{...e,[n]:r}:e))},s=(e,t,n,r)=>{const i={...r,id:n.length>0?Math.max(...n.map(e=>e.id))+1:0};if(n.length>0){const e=n[0];t("Tu direcci\xf3n, hora y m\xe9todo de pago se han copiado del primer desayuno."),e.time&&(i.time=e.time),e.address&&(i.address=e.address),e.paymentMethod&&(i.paymentMethod=e.paymentMethod)}e(e=>[...e,i])},o=(e,t,n,r)=>{t("Se ha duplicado el desayuno."),e(e=>{const t=Math.max(...e.map(e=>e.id),0)+1,r=JSON.parse(JSON.stringify({...n,id:t})),i=e.findIndex(e=>e.id===n.id),s=[...e];return s.splice(i+1,0,r),s.map((e,t)=>({...e,id:t}))})},a=(e,t,n,r)=>{const i=r.filter(e=>e.id!==n).map((e,t)=>({...e,id:t}));e(i),t(0===i.length?"Todos los desayunos han sido eliminados.":"Desayuno eliminado.")},l=function(e,t){var n,r;if(!e||!e.type||!e.type.name)return 0;const i=e.type.name.toLowerCase().trim(),s=((null===(n=e.broth)||void 0===n?void 0:n.name)||"").toLowerCase().trim(),o=e.orderType||"takeaway",a={"solo huevos":{default:{mesa:7e3,llevar:8e3}},"solo caldo":{"caldo de costilla":{mesa:7e3,llevar:8e3},"caldo de pescado":{mesa:7e3,llevar:8e3},"caldo de pata":{mesa:8e3,llevar:9e3},"caldo de pajarilla":{mesa:9e3,llevar:1e4},default:{mesa:7e3,llevar:8e3}},"desayuno completo":{"caldo de costilla":{mesa:11e3,llevar:12e3},"caldo de pescado":{mesa:11e3,llevar:12e3},"caldo de pata":{mesa:12e3,llevar:13e3},"caldo de pajarilla":{mesa:13e3,llevar:14e3},default:{mesa:11e3,llevar:12e3}},"mo\xf1ona":{default:{mesa:13e3,llevar:14e3}}};let l=0;if(a[i]){const e=a[i];if("solo caldo"===i||"desayuno completo"===i){const t=e[s]||e.default;l="table"===o?t.mesa:t.llevar}else{const t=e.default;l="table"===o?t.mesa:t.llevar}}else l="table"===o?7e3:8e3;return l+((null===(r=e.additions)||void 0===r?void 0:r.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0))||0)},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.reduce((e,r)=>e+l(r,t,n),0)}},2061:(e,t,n)=>{"use strict";n.d(t,{$H:()=>s,N9:()=>o});const r={table:{normal:12e3,bandeja:11e3},takeaway:{normal:13e3,bandeja:12e3}},i=e=>(Array.isArray(null===e||void 0===e?void 0:e.additions)?e.additions:[]).reduce((e,t)=>e+Number((null===t||void 0===t?void 0:t.price)||0)*Number((null===t||void 0===t?void 0:t.quantity)||1),0),s=e=>{var t,n,s;if(!e)return 0;if("mojarra"===((null===e||void 0===e||null===(t=e.protein)||void 0===t?void 0:t.name)||"").toLowerCase().trim())return 15e3+i(e);const o=((e,t)=>{var n,r,i;const s="string"===typeof e?e:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.value)||"",o=String(s||"").toLowerCase().trim();if(["table","mesa","para mesa","en mesa"].includes(o))return"table";if(["takeaway","para llevar","llevar","take away","take-away","delivery","deliveri","deli","domicilio","domicilios","a domicilio"].includes(o))return"takeaway";const a=!(null===t||void 0===t||!t.address)||!(null===t||void 0===t||null===(n=t.address)||void 0===n||!n.street)||!(null===t||void 0===t||null===(r=t.address)||void 0===r||!r.phoneNumber)||!(null===t||void 0===t||null===(i=t.address)||void 0===i||!i.name),l=!(null===t||void 0===t||!t.tableNumber);return a&&!l?"takeaway":"table"})(null===e||void 0===e?void 0:e.orderType,e),a=(e=>{var t,n,r;const i=((null===e||void 0===e||null===(t=e.soup)||void 0===t?void 0:t.name)||"").toLowerCase().trim(),s=((null===e||void 0===e||null===(n=e.soupReplacement)||void 0===n?void 0:n.name)||"").toLowerCase().trim(),o=((null===e||void 0===e||null===(r=e.soupReplacement)||void 0===r?void 0:r.replacement)||"").toLowerCase().trim();return"solo bandeja"===i||!(!s.includes("remplazo")&&!s.includes("reemplazo")||"solo bandeja"!==o)})(e)?"bandeja":"normal";return(null!==(n=null===(s=r[o])||void 0===s?void 0:s[a])&&void 0!==n?n:r.table.normal)+i(e)},o=e=>Array.isArray(e)?e.reduce((e,t)=>e+s(t),0):(console.error("Error: meals no es un arreglo:",e),0)},2319:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>r,mH:()=>i});const r=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),i=e=>encodeURIComponent(e)},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var M,L=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case C:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:$(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return $(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Te=null;function Ce(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Ne(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function _e(e,t){return e(t)}function Ae(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return _e(e,t,n)}finally{Ie=!1,(null!==Se||null!==Te)&&(Ae(),Ne())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Oe=!1}function De(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Le=null,Fe=!1,Ve=null,ze={onError:function(e){Me=!0,Le=e}};function Ue(e,t,n,r,i,s,o,a,l){Me=!1,Le=null,De.apply(ze,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if($e(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,St,Tt,Ct,kt=!1,Nt=[],_t=null,At=null,It=null,Pt=new Map,Rt=new Map,Ot=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Ct(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function zt(){kt=!1,null!==_t&&Ft(_t)&&(_t=null),null!==At&&Ft(At)&&(At=null),null!==It&&Ft(It)&&(It=null),Pt.forEach(Vt),Rt.forEach(Vt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function $t(e){function t(t){return Ut(t,e)}if(0<Nt.length){Ut(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==At&&Ut(At,e),null!==It&&Ut(It,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Bt=w.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Wt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return _t=Mt(_t,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return It=Mt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=$e(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),mn=sn(L({},pn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),vn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Tn}var kn=L({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(kn),_n=sn(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),On=[9,13,27,32],jn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Dn,Ln=u&&(!jn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function qn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Kn(e){Fr(e,0)}function Qn(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,xe(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Tr={};function Cr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Cr("animationend"),Nr=Cr("animationiteration"),_r=Cr("animationstart"),Ar=Cr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var jr=Pr[Or];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Nr,"onAnimationIteration"),Rr(_r,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Le;Me=!1,Le=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,a,c),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[Ur]){e[Ur]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=qt;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=s,i=xe(n),o=[];e:{var a=Ir.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Nr:case _r:l=vn;break;case Ar:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&u.push(qr(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:wi(l),p=null==c?a:wi(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=h;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(o,a,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Hn(a))if(Xn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $n?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&($n||"onCompositionStart"!==b?"onCompositionEnd"===b&&$n&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,$n=!0)),0<(v=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!jn&&zn(e,t)?(e=en(),Zt=Jt=Xt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Re(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(qr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(qr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);$t(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[pi]||null}var Ei=[],Si=-1;function Ti(e){return{current:e}}function Ci(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ni={},_i=Ti(Ni),Ai=Ti(!1),Ii=Ni;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ci(Ai),Ci(_i)}function ji(e,t,n){if(_i.current!==Ni)throw Error(s(168));ki(_i,t),ki(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return L({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ii=_i.current,ki(_i,e),ki(Ai,Ai.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ai),Ci(_i),ki(_i,e)):Ci(Ai),ki(Ai,n)}var Fi=null,Vi=!1,zi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function $i(){if(!zi&&null!==Fi){zi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,$i),i}finally{bt=t,zi=!1}}return null}var Bi=[],Hi=0,qi=null,Wi=0,Gi=[],Ki=0,Qi=null,Yi=1,Xi="";function Ji(e,t){Bi[Hi++]=Wi,Bi[Hi++]=qi,qi=e,Wi=t}function Zi(e,t,n){Gi[Ki++]=Yi,Gi[Ki++]=Xi,Gi[Ki++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Bi[--Hi],Bi[Hi]=null,Wi=Bi[--Hi],Bi[Hi]=null;for(;e===Qi;)Qi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null,Yi=Gi[--Ki],Gi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),is&&Ji(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Ji(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),is&&Ji(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ys(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Dc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=jc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(D(o))return g(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Lc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Es=Ti(null),Ss=null,Ts=null,Cs=null;function ks(){Cs=Ts=Ss=null}function Ns(e){var t=Es.current;Ci(Es),e._currentValue=t}function _s(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Ss=e,Cs=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===Ss)throw Error(s(308));Ts=e,Ss.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Us(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},qs=Ti(Hs),Ws=Ti(Hs),Gs=Ti(Hs);function Ks(e){if(e===Hs)throw Error(s(174));return e}function Qs(e,t){switch(ki(Gs,t),ki(Ws,e),ki(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(qs),ki(qs,t)}function Ys(){Ci(qs),Ci(Ws),Ci(Gs)}function Xs(e){Ks(Gs.current);var t=Ks(qs.current),n=le(t,e.type);t!==n&&(ki(Ws,e),ki(qs,n))}function Js(e){Ws.current===e&&(Ci(qs),Ci(Ws))}var Zs=Ti(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function To(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Mo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,ko.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&so)||Co(n,t,i)}return i}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,_o(t)&&Ao(e)}function No(e,t,n){return n(function(){_o(t)&&Ao(e)})}function _o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=js(e,1);null!==t&&nc(t,e,1,-1)}function Io(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return bo().memoizedState}function Oo(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Do(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return jo(2048,8,e,t)}function Lo(e,t){return jo(4,2,e,t)}function Fo(e,t){return jo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Vo.bind(null,t,e),n)}function Uo(){}function $o(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Wo(){return bo().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Yo(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Xo(n,t,r)}}function Ko(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),Xo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Is,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Zo={readContext:Is,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Io,useDebugValue:Uo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Io(!1),t=e[0];return e=qo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&so)||Co(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Do(No.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Al.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Is,useCallback:$o,useContext:Is,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:Bo,useReducer:xo,useRef:Ro,useState:function(){return xo(wo)},useDebugValue:Uo,useDeferredValue:function(e){return Ho(bo(),ao.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:To,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:Is,useCallback:$o,useContext:Is,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:Bo,useReducer:Eo,useRef:Ro,useState:function(){return Eo(wo)},useDebugValue:Uo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:To,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(nc(t,e,r,n),zs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Ri(t)?Ii:_i.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Ri(t)?Ii:_i.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),$s(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),da(0,t)},n}function fa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=go(e,t,n,r,s,i),n=vo(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Rl),Rl|=r;return wa(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Ri(n)?Ii:_i.current;return s=Pi(t,s),As(t,i),n=go(e,t,n,r,s,i),r=vo(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Na(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(As(t,i),null===t.stateNode)Ba(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Pi(t,c=Ri(n)?Ii:_i.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ds=!1;var h=t.memoizedState;o.state=h,$s(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ai.current||Ds?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ds||sa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ls(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Pi(t,l=Ri(n)?Ii:_i.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),Ds=!1,h=t.memoizedState,o.state=h,$s(t,r,o,i);var f=t.memoizedState;a!==d||h!==f||Ai.current||Ds?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(c=Ds||sa(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _a(e,t,n,r,s,i)}function _a(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Li(t,n,!1),Ha(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Qs(e,t.containerInfo)}function Ia(e,t,n,r,i){return ps(),fs(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Ra,Oa,ja,Da={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Da,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Dc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Da,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,js(e,i),nc(r,e,i,-1))}return mc(),Va(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Ki++]=Yi,Gi[Ki++]=Xi,Gi[Ki++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&fs(r),ws(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_s(e.return,t,n)}function Ua(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $a(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ua(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ua(t,!0,n,null,s);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Wa(t),null;case 3:return r=t.stateNode,Ys(),Ci(Ai),Ci(_i),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ra(e,t),Wa(t),null;case 5:Js(t);var i=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Ks(qs.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Vr(Dr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Vr(Dr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ks(Gs.current),Ks(qs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ci(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Ys(),Ra(e,t),null===e&&$r(t.stateNode.containerInfo),Wa(t),null;case 10:return Ns(t.type._context),Wa(t),null;case 19:if(Ci(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)qa(o,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>$l&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Xe()-o.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ka(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ci(Ai),Ci(_i),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ci(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(Zs),null;case 4:return Ys(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ks(qs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),$t(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Tc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,ml(t,e),Ya=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ja=e,d=e.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Ja=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=o,(Ya=l)&&!c)for(Ja=i;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Ja=l):El(i);for(;null!==s;)Ja=s,bl(s,t,n),s=s.sibling;Ja=i,Qa=a,Ya=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ja=s):wl(e)}}function wl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&$t(h)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(p){Tc(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function El(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Sl,Tl=Math.ceil,Cl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,_l=0,Al=null,Il=null,Pl=0,Rl=0,Ol=Ti(0),jl=0,Dl=null,Ml=0,Ll=0,Fl=0,Vl=null,zl=null,Ul=0,$l=1/0,Bl=null,Hl=!1,ql=null,Wl=null,Gl=!1,Kl=null,Ql=0,Yl=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&_l)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&_l)&&e===Al||(e===Al&&(0===(2&_l)&&(Ll|=n),4===jl&&ac(e,Pl)),rc(e,r),1===n&&0===_l&&0===(1&t.mode)&&($l=Xe()+500,Vi&&$i()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Al?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Vi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),oi(function(){0===(6&_l)&&$i()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&_l))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=_l;_l|=2;var o=fc();for(Al===e&&Pl===t||(Bl=null,$l=Xe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}ks(),Cl.current=o,_l=i,null!==Il?t=0:(Al=null,Pl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=ft(e))&&(r=o,t=sc(e,o))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,zl,Bl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zl,Bl),t);break}xc(e,zl,Bl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zl,Bl),r);break}xc(e,zl,Bl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&_l))throw Error(s(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zl,Bl),rc(e,Xe()),null}function cc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&($l=Xe()+500,Vi&&$i())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&_l)&&Ec();var t=_l;_l|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(_l=t))&&$i()}}function dc(){Rl=Ol.current,Ci(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Ys(),Ci(Ai),Ci(_i),no();break;case 5:Js(r);break;case 4:Ys();break;case 13:case 19:Ci(Zs);break;case 10:Ns(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Il=e=Oc(e.current,null),Pl=Rl=t,jl=0,Dl=null,Fl=Ll=Ml=0,zl=Vl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function pc(e,t){for(;;){var n=Il;try{if(ks(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){jl=1,Dl=t,Il=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),fs(ca(c,l));break e}}o=c=ca(c,l),4!==jl&&(jl=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Us(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Us(o,fa(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Jo,null===e?Jo:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Al||0===(268435455&Ml)&&0===(268435455&Ll)||ac(Al,Pl)}function gc(e,t){var n=_l;_l|=2;var r=fc();for(Al===e&&Pl===t||(Bl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(ks(),_l=n,Cl.current=r,null!==Il)throw Error(s(261));return Al=null,Pl=0,jl}function vc(){for(;null!==Il;)bc(Il)}function yc(){for(;null!==Il&&!Qe();)bc(Il)}function bc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wc(e):Il=t,kl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return jl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===jl&&(jl=5)}function xc(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Kl);if(0!==(6&_l))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Il=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(tt,function(){return Ec(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var a=bt;bt=1;var l=_l;_l|=4,kl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Tc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),_l=l,bt=a,Nl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Ql=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,$i()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function Ec(){if(null!==Kl){var e=wt(Ql),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&_l))throw Error(s(331));var i=_l;for(_l|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var p=(d=Ja).sibling,f=d.return;if(sl(d),d===u){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ja=y;break e}Ja=o.return}}var b=e.current;for(Ja=b;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(_l=i,$i(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function Sc(e,t,n){e=Vs(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Vs(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===jl||3===jl&&(130023424&Pl)===Pl&&500>Xe()-Ul?hc(e,0):Fl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=js(e,t))&&(vt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Ac(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,i,o,t);case T:a=8,i|=8;break;case C:return(e=Pc(12,n,t,2|i)).elementType=C,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case I:return(e=Pc(19,n,t,i)).elementType=I,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case N:a=9;break e;case _:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Uc(e){if(!e)return Ni;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Di(e,n,t)}return t}function $c(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Uc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,o))&&(nc(e,i,o,s),zs(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),ps();break;case 5:Xs(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(ki(Zs,1&Zs.current),null!==(e=Ha(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $a(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ba(e,t),e=t.pendingProps;var i=Pi(t,_i.current);As(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=_a(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Na(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ls(e,t),$s(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ia(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ha(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ca(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return La(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_s(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_s(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Is(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ba(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,As(t,n),oa(t,r,i),la(t,r,i,n),_a(null,t,r,!0,e,n);case 19:return $a(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Bc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=$c(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[fi]=o.current,$r(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fi]=l.current,$r(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(o)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[fi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&_l)&&($l=Xe()+500,$i()))}break;case 13:uc(function(){var t=js(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},Et=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=js(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Tt=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,ke,Ne,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,$r(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,i,0,o,a),e[fi]=t.current,$r(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2781:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(5043),i=n(4005),s=n(2061),o=n(579);const a=["Sopa","Principio","Prote\xedna","Bebida","Cubiertos","Acompa\xf1amientos","Hora","Direcci\xf3n","Pago","Adiciones","Mesa"],l=["address","addressType","recipientName","phoneNumber","unitDetails","localName"],c=["Arroz con pollo","Arroz paisa","Arroz tres carnes"],u=e=>e&&"Remplazo por Principio"!==e&&"Reemplazo por Principio"!==e&&e.replace(" NUEVO","")||"Sin reemplazo",d=e=>{let{commonAddressFields:t={},mealAddress:n,isCommon:r=!1,globalCommonAddressFields:i={}}=e;const s=n||t,a=(null===s||void 0===s?void 0:s.addressType)||"";return(0,o.jsx)("div",{className:"relative",children:l.map(e=>((e,t,n)=>"address"!==e&&"addressType"!==e&&"phoneNumber"!==e||!i[e]||r?"address"===e&&t?(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udccd Direcci\xf3n: ",t]},e):"addressType"===e&&t?(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:["\ud83c\udfe0 Lugar de entrega: ","house"===t?"Casa/Apartamento Individual":"school"===t?"Colegio/Oficina":"complex"===t?"Conjunto Residencial":"shop"===t?"Tienda/Local":"No especificado"]},e):"recipientName"===e&&"school"===n&&t?(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udc64 Nombre: ",t]},e):"phoneNumber"===e&&t?(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:["\ud83d\udcde Tel\xe9fono: ",t]},e):"unitDetails"===e&&"complex"===n&&t?(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83c\udfe2 Detalles: ",t]},e):"localName"===e&&"shop"===n&&t?(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83c\udfec Nombre del local: ",t]},e):null:null)(e,r?t[e]:s[e],a)).filter(Boolean)})},h=e=>{var t;let{meal:n,commonFields:r,isWaiterView:s}=e;const a=null===n||void 0===n||null===(t=n.principle)||void 0===t?void 0:t.some(e=>c.includes(e.name)),l=[];var d,h,p,f,m,g,v,y,b,w;(r.has("Sopa")||r.has("all"))&&("Solo bandeja"===(null===n||void 0===n||null===(d=n.soup)||void 0===d?void 0:d.name)?l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"solo bandeja"},"soup")):null!==n&&void 0!==n&&null!==(h=n.soupReplacement)&&void 0!==h&&h.name?l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:`${u(n.soupReplacement.name)} (por sopa)`},"soup")):null!==n&&void 0!==n&&null!==(p=n.soup)&&void 0!==p&&p.name&&"Sin sopa"!==n.soup.name&&l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:u(n.soup.name)},"soup")));(r.has("Principio")||r.has("all"))&&(((null===n||void 0===n||null===(f=n.principle)||void 0===f?void 0:f.length)>0||null!==n&&void 0!==n&&null!==(m=n.principleReplacement)&&void 0!==m&&m.name)&&l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:null!==n&&void 0!==n&&null!==(g=n.principleReplacement)&&void 0!==g&&g.name?`${u(n.principleReplacement.name)} (por principio)`:`${n.principle.map(e=>u(e.name)).join(", ")}${n.principle.length>1?" (mixto)":""}`},"principle")));!r.has("Prote\xedna")&&!r.has("all")||a?(r.has("Prote\xedna")||r.has("all"))&&a&&l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Prote\xedna: Ya incluida en el arroz"},"protein")):l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:u((null===(v=n.protein)||void 0===v?void 0:v.name)||"Sin prote\xedna")},"protein"));if((r.has("Bebida")||r.has("all"))&&(null!==n&&void 0!==n&&null!==(y=n.drink)&&void 0!==y&&y.name)){const e="Juego de mango"===n.drink.name?"Jugo de mango":u(n.drink.name);l.push((0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:e},"drink"))}((r.has("Cubiertos")||r.has("all"))&&l.push((0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Cubiertos: ",null!==n&&void 0!==n&&n.cutlery?"S\xed":"No"]},"cutlery")),r.has("Acompa\xf1amientos")||r.has("all"))&&l.push((0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Acompa\xf1amientos: ",a?"Ya incluidos":(null===n||void 0===n||null===(b=n.sides)||void 0===b?void 0:b.length)>0?n.sides.map(e=>u(e.name)).join(", "):"Sin acompa\xf1amientos"]},"sides"));(r.has("Adiciones")||r.has("all"))&&((null===n||void 0===n||null===(w=n.additions)||void 0===w?void 0:w.length)>0&&n.additions.forEach((e,t)=>{l.push((0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["- ",u(e.name),e.protein||e.replacement?` (${e.protein||e.replacement})`:""," (",e.quantity||1,")"]},`addition-${t}`))}));return r.has("all")&&l.push((0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Notas: ",(0,i.jQ)(n.notes)||"Ninguna"]},"notes")),(r.has("Mesa")||r.has("all"))&&s&&n.tableNumber&&l.push((0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Mesa: ",n.tableNumber]},"table")),l},p=e=>{let{group:t,globalCommonFields:n,globalCommonAddressFields:r,isWaiterView:p,isTableOrder:f,calculateTotal:m}=e;const g=t.meals[0],v=t.meals.length,y=p&&f?m(t.meals):t.meals.reduce((e,t)=>e+(0,s.$H)(t),0),b=`(${(Array.from(t.payments).filter(e=>e&&"No especificado"!==e).length>0?Array.from(t.payments).filter(e=>e&&"No especificado"!==e):["No especificado"]).join(" y ")})`,w=t.identicalGroups.length>1||t.identicalGroups.some(e=>e.meals.length<t.meals.length);return(0,o.jsxs)("div",{className:"pb-2",children:[(0,o.jsxs)("h3",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:["\ud83c\udf7d ",v>1?`${v} Almuerzos iguales \u2013 $${y.toLocaleString("es-CO")} ${b}`:`${v} Almuerzo \u2013 $${y.toLocaleString("es-CO")} ${b}`]}),(0,o.jsx)(h,{meal:g,commonFields:v>1?t.commonFieldsInGroup:new Set(["all","Mesa"]),isWaiterView:p}),1===v&&!n.has("Direcci\xf3n")&&g.address&&(0,o.jsx)(d,{mealAddress:g.address,isCommon:!1,globalCommonAddressFields:r}),v>1&&t.commonFieldsInGroup.has("Direcci\xf3n")&&!n.has("Direcci\xf3n")&&g.address&&(0,o.jsx)(d,{mealAddress:g.address,isCommon:!1,globalCommonAddressFields:r}),w&&(0,o.jsxs)("div",{className:"mt-1",children:[(0,o.jsx)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:"\ud83d\udd04 Diferencias:"}),t.identicalGroups.map((e,n)=>(0,o.jsxs)("div",{className:"ml-2",children:[(0,o.jsxs)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:["* ",e.indices.length>1?`Almuerzos ${e.indices.map(e=>e+1).join(", ")}`:`Almuerzo ${e.indices[0]+1}`,":"]}),a.map((n,s)=>{if(t.commonFieldsInGroup.has(n))return null;const a=e.meals[0],h=((e,t)=>{return e?"Sopa"===t?"Solo bandeja"===(null===(n=e.soup)||void 0===n?void 0:n.name)?"solo bandeja":null!==(s=e.soupReplacement)&&void 0!==s&&s.name?`${u(e.soupReplacement.name)} (por sopa)`:null!==(a=e.soup)&&void 0!==a&&a.name&&"Sin sopa"!==e.soup.name?u(e.soup.name):"Sin sopa":"Principio"===t?null!==e&&void 0!==e&&null!==(l=e.principleReplacement)&&void 0!==l&&l.name?`${u(e.principleReplacement.name)} (por principio)`:`${(null===(h=e.principle)||void 0===h?void 0:h.map(e=>u(e.name)).join(", "))||"Sin principio"}${(null===(p=e.principle)||void 0===p?void 0:p.length)>1?" (mixto)":""}`:"Prote\xedna"===t?(null===e||void 0===e||null===(w=e.principle)||void 0===w?void 0:w.some(e=>c.includes(e.name)))?"Prote\xedna: Ya incluida en el arroz":u((null===(x=e.protein)||void 0===x?void 0:x.name)||"Sin prote\xedna"):"Bebida"===t?"Juego de mango"===(null===(f=e.drink)||void 0===f?void 0:f.name)?"Jugo de mango":u((null===(m=e.drink)||void 0===m?void 0:m.name)||"Sin bebida"):"Cubiertos"===t?"Cubiertos: "+(e.cutlery?"S\xed":"No"):"Acompa\xf1amientos"===t?`Acompa\xf1amientos: ${(null===e||void 0===e||null===(E=e.principle)||void 0===E?void 0:E.some(e=>c.includes(e.name)))?"Ya incluidos":(null===(S=e.sides)||void 0===S?void 0:S.length)>0?e.sides.map(e=>u(e.name)).join(", "):"Ninguno"}`:"Hora"===t?null!==(g=e.time)&&void 0!==g&&g.name?(0,i.qm)(e.time)?u(e.time.name):"Lo m\xe1s r\xe1pido":null:"Pago"===t?(null===(v=e.payment)||void 0===v?void 0:v.name)||(null===(y=e.paymentMethod)||void 0===y?void 0:y.name)||"No especificado":"Adiciones"===t?(null===(b=e.additions)||void 0===b?void 0:b.length)>0?e.additions.map((e,t)=>(0,o.jsxs)("p",{children:["- ",u(e.name),e.protein||e.replacement?` (${e.protein||e.replacement})`:""," (",e.quantity||1,")"]},`addition-${t}`)):[(0,o.jsx)("p",{children:"Sin adiciones"},"no-additions")]:"Direcci\xf3n"===t?e.address?(0,o.jsx)(d,{mealAddress:e.address,isCommon:!1,globalCommonAddressFields:r}):null:"Mesa"===t?e.tableNumber||"No especificada":null:null;var n,s,a,l,h,p,f,m,g,v,y,b,w,x,E,S})(a,n);return h?"Direcci\xf3n"===n?(0,o.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 ml-2",children:l.map((e,n)=>{var r,i;if(t.commonAddressFieldsInGroup[e])return null;const s=null===(r=a.address)||void 0===r?void 0:r[e],l=(null===(i=a.address)||void 0===i?void 0:i.addressType)||"";return"address"===e&&s?(0,o.jsxs)("p",{children:["\ud83d\udccd Direcci\xf3n: ",s]},n):"addressType"===e&&s?(0,o.jsxs)("p",{children:["\ud83c\udfe0 Lugar de entrega: ","house"===s?"Casa/Apartamento Individual":"school"===s?"Colegio/Oficina":"complex"===s?"Conjunto Residencial":"shop"===s?"Tienda/Local":"No especificado"]},n):"recipientName"===e&&"school"===l&&s?(0,o.jsxs)("p",{children:["\ud83d\udc64 Nombre: ",s]},n):"phoneNumber"===e&&s?(0,o.jsxs)("p",{children:["\ud83d\udcde Tel\xe9fono: ",s]},n):"unitDetails"===e&&"complex"===l&&s?(0,o.jsxs)("p",{children:["\ud83c\udfe2 Detalles: ",s]},n):"localName"===e&&"shop"===l&&s?(0,o.jsxs)("p",{children:["\ud83c\udfec Nombre del local: ",s]},n):null}).filter(Boolean)},s):(0,o.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 ml-2",children:(Array.isArray(h),h)},s):null})]},n))]})]})},f=e=>{let{paymentSummary:t,total:n,isWaiterView:r,isTableOrder:i}=e;const s=Object.keys(t).every(e=>"Efectivo"===e||"No especificado"===e);return(0,o.jsxs)("div",{className:"pt-2 border-t",children:[(0,o.jsxs)("p",{className:"text-sm sm:text-base font-bold text-right text-gray-800",children:["Total: ",(0,o.jsxs)("span",{className:"text-green-600",children:["$",n.toLocaleString("es-CO")]})]}),!r&&!i&&(0,o.jsxs)(o.Fragment,{children:[s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:"Paga en efectivo al momento de la entrega."}),(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udcb5 Efectivo: $",n.toLocaleString("es-CO")]}),(0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Si no tienes efectivo, puedes transferir por Nequi o DaviPlata al n\xfamero: 313 850 5647."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:"\ud83d\udcb3 Instrucciones de pago:"}),(0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Env\xeda al n\xfamero 313 850 5647 (Nequi o DaviPlata):"}),Object.entries(t).map(e=>{let[t,n]=e;return"No especificado"!==t&&n>0&&(0,o.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udd39 ",t,": $",n.toLocaleString("es-CO")]},t)})]}),(0,o.jsxs)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:["\ud83d\udcb0 Total: $",n.toLocaleString("es-CO")]})]})]})},m=e=>{let{meals:t,onSendOrder:n,calculateTotal:c,isTableOrder:h=!1,isWaiterView:m=!1,statusClass:g=""}=e;const{groupedMeals:v,total:y,paymentSummary:b,commonDeliveryTime:w,commonAddressFields:x,globalCommonFields:E}=(e=>{const t=(e,t)=>{if(!e)return"";var n,r,i,s,o,a,c,d,h,p;if("Sopa"===t)return"Solo bandeja"===(null===(n=e.soup)||void 0===n?void 0:n.name)?"solo bandeja":null!==(r=e.soupReplacement)&&void 0!==r&&r.name?JSON.stringify({name:u(e.soupReplacement.name),type:"por sopa"}):null!==(i=e.soup)&&void 0!==i&&i.name&&"Sin sopa"!==e.soup.name?u(e.soup.name):"Sin sopa";if("Principio"===t){var f,m;const t=(null===(f=e.principle)||void 0===f?void 0:f.map(e=>u(e.name)).sort())||[],n=null!==(m=e.principleReplacement)&&void 0!==m&&m.name?u(e.principleReplacement.name):"";return JSON.stringify([t.join(","),n])}return"Prote\xedna"===t?u((null===(s=e.protein)||void 0===s?void 0:s.name)||"Sin prote\xedna"):"Bebida"===t?u((null===(o=e.drink)||void 0===o?void 0:o.name)||"Sin bebida"):"Cubiertos"===t?e.cutlery?"S\xed":"No":"Acompa\xf1amientos"===t?JSON.stringify((null===(a=e.sides)||void 0===a?void 0:a.map(e=>u(e.name)).sort())||[]):"Hora"===t?(null===(c=e.time)||void 0===c?void 0:c.name)||"No especificada":"Direcci\xf3n"===t?JSON.stringify(l.map(t=>{var n;return(null===(n=e.address)||void 0===n?void 0:n[t])||""})):"Pago"===t?(null===(d=e.payment)||void 0===d?void 0:d.name)||(null===(h=e.paymentMethod)||void 0===h?void 0:h.name)||"No especificado":"Adiciones"===t?JSON.stringify((null===(p=e.additions)||void 0===p?void 0:p.map(e=>({name:u(e.name),protein:e.protein||"",replacement:e.replacement||"",quantity:e.quantity||1})).sort((e,t)=>e.name.localeCompare(t.name)))||[]):"Mesa"===t?e.tableNumber||"No especificada":""},n=(0,r.useMemo)(()=>{var n;if(!e||0===e.length)return{groupedMeals:[],commonDeliveryTime:null,commonAddressFields:{},globalCommonFields:new Set,areAddressesGloballyCommon:!1,areCoreAddressesCommon:!1};const r=[],i=e[0],s=e.every(e=>{var t,n;return(null===(t=e.time)||void 0===t?void 0:t.name)===(null===i||void 0===i||null===(n=i.time)||void 0===n?void 0:n.name)})?null===i||void 0===i||null===(n=i.time)||void 0===n?void 0:n.name:null,o={};let c=!0,u=!0;l.forEach(t=>{var n;const r=e.every(e=>{var n,r;return(null===(n=e.address)||void 0===n?void 0:n[t])===(null===i||void 0===i||null===(r=i.address)||void 0===r?void 0:r[t])});o[t]=r?null===i||void 0===i||null===(n=i.address)||void 0===n?void 0:n[t]:null,r||"recipientName"===t||"unitDetails"===t||"localName"===t||(c=!1),r||"address"!==t&&"phoneNumber"!==t||(u=!1)});const d=new Set(a.filter(n=>{const r=t(i,n);return e.every(e=>t(e,n)===r)})),h=new Map;return e.forEach((e,n)=>{let r=!1;for(let[,f]of h){const c=f.meals[0];let u=0;if(a.forEach(n=>{t(e,n)!==t(c,n)&&u++}),u<=3){var i,s,o,l;f.meals.push(e),f.indices.push(n),(null!==(i=e.payment)&&void 0!==i&&i.name||null!==(s=e.paymentMethod)&&void 0!==s&&s.name)&&f.payments.add((null===(o=e.payment)||void 0===o?void 0:o.name)||(null===(l=e.paymentMethod)||void 0===l?void 0:l.name)),r=!0;break}}if(!r){var c,u,d,p;const r=`${n}|${a.map(n=>t(e,n)).join("|")}`;h.set(r,{meals:[e],indices:[n],payments:new Set(null!==(c=e.payment)&&void 0!==c&&c.name||null!==(u=e.paymentMethod)&&void 0!==u&&u.name?[(null===(d=e.payment)||void 0===d?void 0:d.name)||(null===(p=e.paymentMethod)||void 0===p?void 0:p.name)]:[])})}}),h.forEach(e=>{const n=e.meals,i={meals:n,payments:e.payments,originalIndices:e.indices};i.commonFieldsInGroup=new Set(a.filter(e=>{const r=t(n[0],e);return n.every(n=>t(n,e)===r)})),i.commonAddressFieldsInGroup={},l.forEach(e=>{var t;const r=n.every(t=>{var r,i;return(null===(r=t.address)||void 0===r?void 0:r[e])===(null===(i=n[0].address)||void 0===i?void 0:i[e])});i.commonAddressFieldsInGroup[e]=r?null===(t=n[0].address)||void 0===t?void 0:t[e]:null});const s=new Map;n.forEach((n,r)=>{const i=a.map(e=>t(n,e)).join("|");s.has(i)||s.set(i,{meals:[],indices:[]}),s.get(i).meals.push(n),s.get(i).indices.push(e.indices[r])}),i.identicalGroups=Array.from(s.values()),r.push(i)}),{groupedMeals:r,commonDeliveryTime:s,commonAddressFields:o,globalCommonFields:d,areAddressesGloballyCommon:c,areCoreAddressesCommon:u}},[e]),i=(0,r.useMemo)(()=>e.reduce((e,t)=>e+(0,s.$H)(t),0),[e]),o=(0,r.useMemo)(()=>e&&0!==e.length?e.reduce((e,t)=>{var n,r;const i=(0,s.$H)(t),o=(null===(n=t.payment)||void 0===n?void 0:n.name)||(null===(r=t.paymentMethod)||void 0===r?void 0:r.name)||"No especificado";return e[o]=(e[o]||0)+i,e},{}):{},[e]);return{groupedMeals:n.groupedMeals,total:i,paymentSummary:o,commonDeliveryTime:n.commonDeliveryTime,commonAddressFields:n.commonAddressFields,globalCommonFields:n.globalCommonFields,areAddressesGloballyCommon:n.areAddressesGloballyCommon,areCoreAddressesCommon:n.areCoreAddressesCommon}})(t),S=h?c(t):y,T=m?`${g} p-4 rounded-lg shadow-md`:"bg-white p-3 rounded-lg shadow-lg mt-6 leading-relaxed";return(0,o.jsxs)("div",{className:T,children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u2705 Resumen del Pedido"}),0===(null===t||void 0===t?void 0:t.length)?(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"No hay almuerzos en tu pedido."}),(0,o.jsxs)("p",{className:"text-base font-bold text-right mt-2 text-gray-800",children:["\ud83d\udcb0 Total: ",(0,o.jsx)("span",{className:"text-green-600",children:"$0"})]})]}):(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("p",{className:"text-sm text-gray-700",children:(0,o.jsxs)("span",{className:"font-medium text-gray-800",children:["\ud83c\udf7d ",t.length," almuerzos en total"]})}),!m&&v.map((e,t)=>e.meals.length>1&&(0,o.jsxs)("p",{className:"text-sm text-gray-700",children:["* ",e.meals.length," almuerzos iguales"]},`group-${t}`)),!m&&(0,o.jsx)("p",{className:"text-sm text-gray-700",children:(0,o.jsxs)("span",{className:"font-medium text-gray-800",children:["\ud83d\udcb0 Total: $",S.toLocaleString("es-CO")]})}),(0,o.jsx)("hr",{className:"border-t border-gray-300 my-2"}),v.map((e,t)=>(0,o.jsx)(p,{group:e,globalCommonFields:E,globalCommonAddressFields:x,isWaiterView:m,isTableOrder:h,calculateTotal:c},t)),!h&&t.length>0&&(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,o.jsx)("hr",{className:"border-t border-gray-300 my-2"}),w&&(0,o.jsxs)("p",{className:"font-medium text-gray-800",children:["\ud83d\udd52 Entrega: ",(0,i.qm)(t[0].time)?u(t[0].time.name):"Lo m\xe1s r\xe1pido"]}),Object.keys(x).some(e=>x[e])&&(0,o.jsx)(d,{commonAddressFields:x,isCommon:!0,globalCommonAddressFields:x}),(0,o.jsx)("hr",{className:"border-t border-gray-300 my-2"}),!m&&(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"\ud83d\ude9a Estimado: 25-30 min (10-15 si est\xe1n cerca)."})]}),(0,o.jsx)(f,{paymentSummary:b,total:S,isWaiterView:m,isTableOrder:h}),n&&(0,o.jsx)("button",{onClick:n,disabled:!t||0===t.length,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg mt-2 transition-colors text-sm "+(t&&0!==t.length?"":"opacity-50 cursor-not-allowed"),children:h&&!m?"Guardar Pedido":"Enviar Pedido por WhatsApp"})]})]})}},2861:e=>{"use strict";var t=function(e,t){return e+n(t)},n=function(e){return null===e||"boolean"===typeof e||"undefined"===typeof e?"":"number"===typeof e?e.toString():"string"===typeof e?e:Array.isArray(e)?e.reduce(t,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?n(e.props.children):""};n.default=n,e.exports=n},2916:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(5043),i=n(2049),s=n(579);const o=e=>e&&e.replace(" NUEVO","")||"",a=["Tipo","Caldo","Huevos","Arroz/Pan","Bebida","Prote\xedna","Cubiertos","Adiciones","Mesa","Direcci\xf3n"],l=["address","addressType","recipientName","phoneNumber","unitDetails","localName"],c=(e,t)=>{var n,r,i,s,o,a;const l=((null===e||void 0===e||null===(n=e.paymentMethod)||void 0===n?void 0:n.name)||("string"===typeof(null===e||void 0===e?void 0:e.paymentMethod)?e.paymentMethod:"")||(null===e||void 0===e||null===(r=e.payment)||void 0===r?void 0:r.name)||(null===e||void 0===e||null===(i=e.payment)||void 0===i?void 0:i.method)||("string"===typeof(null===e||void 0===e?void 0:e.payment)?e.payment:"")||(null===e||void 0===e||null===(s=e.breakfasts)||void 0===s||null===(o=s[0])||void 0===o||null===(a=o.payment)||void 0===a?void 0:a.name)||""||t||"").toString().trim();if(!l)return"No especificado";const c=l.toLowerCase();return c.includes("efect")?"Efectivo":c.includes("nequi")?"Nequi":c.includes("davi")?"Daviplata":l},u=e=>{let{commonAddressFields:t={},breakfastAddress:n,isCommon:r=!1,globalCommonAddressFields:i={}}=e;const o=n||t,a=(null===o||void 0===o?void 0:o.addressType)||"";return(0,s.jsx)("div",{className:"relative",children:l.map(e=>((e,t,n)=>"address"!==e&&"addressType"!==e&&"phoneNumber"!==e||!i[e]||r?"address"===e&&t?(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udccd Direcci\xf3n: ",t]},e):"addressType"===e&&t?(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:["\ud83c\udfe0 Lugar de entrega: ","house"===t?"Casa/Apartamento Individual":"school"===t?"Colegio/Oficina":"complex"===t?"Conjunto Residencial":"shop"===t?"Tienda/Local":"No especificado"]},e):"recipientName"===e&&"school"===n&&t?(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udc64 Nombre: ",t]},e):"phoneNumber"===e&&t?(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:["\ud83d\udcde Tel\xe9fono: ",t]},e):"unitDetails"===e&&"complex"===n&&t?(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83c\udfe2 Detalles: ",t]},e):"localName"===e&&"shop"===n&&t?(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83c\udfec Nombre del local: ",t]},e):null:null)(e,r?t[e]:o[e],a)).filter(Boolean)})},d=e=>{let{breakfast:t,commonFields:n,isWaiterView:r}=e;const i=[];var a,l;(n.has("Tipo")||n.has("all"))&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Tipo: ",o(null===(a=t.type)||void 0===a?void 0:a.name)||"Sin tipo"]},"type"));((n.has("Caldo")||n.has("all"))&&t.broth&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Caldo: ",o(t.broth.name)||"Sin caldo"]},"broth")),(n.has("Huevos")||n.has("all"))&&t.eggs&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Huevos: ",o(t.eggs.name)||"Sin huevos"]},"eggs")),(n.has("Arroz/Pan")||n.has("all"))&&t.riceBread&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Arroz/Pan: ",o(t.riceBread.name)||"Sin arroz/pan"]},"riceBread")),(n.has("Bebida")||n.has("all"))&&t.drink&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Bebida: ",o(t.drink.name)||"Sin bebida"]},"drink")),(n.has("Prote\xedna")||n.has("all"))&&t.protein&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Prote\xedna: ",o(t.protein.name)||"Sin prote\xedna"]},"protein")),!n.has("Cubiertos")&&!n.has("all")||r||i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Cubiertos: ",t.cutlery?"S\xed":"No"]},"cutlery")),n.has("Adiciones")||n.has("all"))&&((null===(l=t.additions)||void 0===l?void 0:l.length)>0&&(i.push((0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Adiciones:"},"additions-label")),t.additions.forEach((e,t)=>{i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["- ",o(e.name)," (",e.quantity||1,")"]},`addition-${t}`))})));return n.has("all")&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Notas: ",t.notes||"Ninguna"]},"notes")),(n.has("Mesa")||n.has("all"))&&r&&t.tableNumber&&i.push((0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Mesa: ",t.tableNumber]},"table")),(n.has("Direcci\xf3n")||n.has("all"))&&!r&&t.address&&i.push((0,s.jsx)(u,{breakfastAddress:t.address,isCommon:!1,globalCommonAddressFields:{}},"address")),i},h=e=>{let{group:t,globalCommonFields:n,isWaiterView:r}=e;const c=t.items[0],h=t.items.length,p=t.items.reduce((e,t)=>e+(0,i.x8)(t,3),0),f=Array.from(t.payments).filter(Boolean),m=`(${(f.length?f:["No especificado"]).join(" y ")})`,g=t.identicalGroups.length>1||t.identicalGroups.some(e=>e.items.length<t.items.length);return(0,s.jsxs)("div",{className:"pb-2",children:[(0,s.jsxs)("h3",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:["\ud83c\udf7d ",h>1?`${h} Desayunos iguales \u2013 $${p.toLocaleString("es-CO")} ${m}`:`${h} Desayuno \u2013 $${p.toLocaleString("es-CO")} ${m}`]}),(0,s.jsx)(d,{breakfast:c,commonFields:h>1?t.commonFieldsInGroup:new Set(["all"]),isWaiterView:r}),1===h&&!n.has("Direcci\xf3n")&&c.address&&!r&&(0,s.jsx)(u,{breakfastAddress:c.address,isCommon:!1,globalCommonAddressFields:{}}),h>1&&t.commonFieldsInGroup.has("Direcci\xf3n")&&!n.has("Direcci\xf3n")&&c.address&&!r&&(0,s.jsx)(u,{breakfastAddress:c.address,isCommon:!0,globalCommonAddressFields:{}}),g&&(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:"\ud83d\udd04 Diferencias:"}),t.identicalGroups.map((e,n)=>(0,s.jsxs)("div",{className:"ml-2",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:["* ",e.indices.length>1?`Desayunos ${e.indices.map(e=>e+1).join(", ")}`:`Desayuno ${e.indices[0]+1}`,":"]}),a.map((n,r)=>{if(t.commonFieldsInGroup.has(n))return null;const i=e.items[0],a=((e,t)=>{var n,r,i,a,l,c,d;return"Tipo"===t?o(null===(n=e.type)||void 0===n?void 0:n.name)||"Sin tipo":"Caldo"===t?o(null===(r=e.broth)||void 0===r?void 0:r.name)||"Sin caldo":"Huevos"===t?o(null===(i=e.eggs)||void 0===i?void 0:i.name)||"Sin huevos":"Arroz/Pan"===t?o(null===(a=e.riceBread)||void 0===a?void 0:a.name)||"Sin arroz/pan":"Bebida"===t?o(null===(l=e.drink)||void 0===l?void 0:l.name)||"Sin bebida":"Prote\xedna"===t?o(null===(c=e.protein)||void 0===c?void 0:c.name)||"Sin prote\xedna":"Cubiertos"===t?"Cubiertos: "+(e.cutlery?"S\xed":"No"):"Adiciones"===t?(null===(d=e.additions)||void 0===d?void 0:d.length)>0?[(0,s.jsx)("p",{children:"Adiciones:"},"additions-label"),...e.additions.map((e,t)=>(0,s.jsxs)("p",{children:["- ",o(e.name)," (",e.quantity||1,")"]},`addition-${t}`))]:[(0,s.jsx)("p",{children:"Sin adiciones"},"no-additions")]:"Mesa"===t?e.tableNumber||"No especificada":"Direcci\xf3n"===t&&e.address?(0,s.jsx)(u,{breakfastAddress:e.address,isCommon:!1,globalCommonAddressFields:{}}):null})(i,n);return a?"Direcci\xf3n"===n?(0,s.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 ml-2",children:l.map((e,n)=>{var r,o;if(t.commonAddressFieldsInGroup[e])return null;const a=null===(r=i.address)||void 0===r?void 0:r[e],l=(null===(o=i.address)||void 0===o?void 0:o.addressType)||"";return"address"===e&&a?(0,s.jsxs)("p",{children:["\ud83d\udccd Direcci\xf3n: ",a]},n):"addressType"===e&&a?(0,s.jsxs)("p",{children:["\ud83c\udfe0 Lugar de entrega: ","house"===a?"Casa/Apartamento Individual":"school"===a?"Colegio/Oficina":"complex"===a?"Conjunto Residencial":"shop"===a?"Tienda/Local":"No especificado"]},n):"recipientName"===e&&"school"===l&&a?(0,s.jsxs)("p",{children:["\ud83d\udc64 Nombre: ",a]},n):"phoneNumber"===e&&a?(0,s.jsxs)("p",{children:["\ud83d\udcde Tel\xe9fono: ",a]},n):"unitDetails"===e&&"complex"===l&&a?(0,s.jsxs)("p",{children:["\ud83c\udfe2 Detalles: ",a]},n):"localName"===e&&"shop"===l&&a?(0,s.jsxs)("p",{children:["\ud83c\udfec Nombre del local: ",a]},n):null}).filter(Boolean)},r):(0,s.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 ml-2",children:(Array.isArray(a),a)},r):null})]},n))]})]})},p=e=>{let{paymentSummary:t,total:n,isWaiterView:r}=e;const i=Object.keys(t).every(e=>"Efectivo"===e||"No especificado"===e);return(0,s.jsxs)("div",{className:"pt-2 border-t",children:[(0,s.jsxs)("p",{className:"text-sm sm:text-base font-bold text-right text-gray-800",children:["Total: ",(0,s.jsxs)("span",{className:"text-green-600",children:["$",n.toLocaleString("es-CO")]})]}),!r&&(0,s.jsxs)(s.Fragment,{children:[i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:"Paga en efectivo al momento de la entrega."}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udcb5 Efectivo: $",n.toLocaleString("es-CO")]}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Si no tienes efectivo, puedes transferir por Nequi o DaviPlata al n\xfamero: 313 850 5647."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:"\ud83d\udcb3 Instrucciones de pago:"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Env\xeda al n\xfamero 313 850 5647 (Nequi o DaviPlata):"}),Object.entries(t).map(e=>{let[t,n]=e;return"No especificado"!==t&&n>0&&(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["\ud83d\udd39 ",t,": $",n.toLocaleString("es-CO")]},t)})]}),(0,s.jsxs)("p",{className:"font-medium text-gray-800 text-xs sm:text-sm",children:["\ud83d\udcb0 Total: $",n.toLocaleString("es-CO")]})]})]})},f=e=>{let{items:t,onSendOrder:n,user:u,breakfastTypes:d,statusClass:f="",showSaveButton:m=!0,selectedPayment:g}=e;const v=3===(null===u||void 0===u?void 0:u.role),y=null===g||void 0===g?void 0:g.name,{groupedItems:b,total:w,paymentSummary:x,globalCommonFields:E,commonAddressFields:S,areAddressesGloballyCommon:T}=((e,t,n)=>{const s=(e,t)=>{var n,r,i,s,a,c,u;return"Tipo"===t?o(null===(n=e.type)||void 0===n?void 0:n.name)||"Sin tipo":"Caldo"===t?o(null===(r=e.broth)||void 0===r?void 0:r.name)||"Sin caldo":"Huevos"===t?o(null===(i=e.eggs)||void 0===i?void 0:i.name)||"Sin huevos":"Arroz/Pan"===t?o(null===(s=e.riceBread)||void 0===s?void 0:s.name)||"Sin arroz/pan":"Bebida"===t?o(null===(a=e.drink)||void 0===a?void 0:a.name)||"Sin bebida":"Prote\xedna"===t?o(null===(c=e.protein)||void 0===c?void 0:c.name)||"Sin prote\xedna":"Cubiertos"===t?e.cutlery?"S\xed":"No":"Adiciones"===t?JSON.stringify((null===(u=e.additions)||void 0===u?void 0:u.map(e=>({name:o(e.name),quantity:e.quantity||1})).sort((e,t)=>e.name.localeCompare(t.name)))||[]):"Mesa"===t?e.tableNumber||"No especificada":"Direcci\xf3n"===t?JSON.stringify(l.map(t=>{var n;return(null===(n=e.address)||void 0===n?void 0:n[t])||""})):""},u=(0,r.useMemo)(()=>{if(!e||0===e.length)return{groupedItems:[],globalCommonFields:new Set,commonAddressFields:{},areAddressesGloballyCommon:!1,areCoreAddressesCommon:!1};const t=[],r=e[0],i=new Set(a.filter(t=>{const n=s(r,t);return e.every(e=>s(e,t)===n)})),o={};let u=!0,d=!0;l.forEach(t=>{var n;const i=e.every(e=>{var n,i;return(null===(n=e.address)||void 0===n?void 0:n[t])===(null===r||void 0===r||null===(i=r.address)||void 0===i?void 0:i[t])});o[t]=i?null===r||void 0===r||null===(n=r.address)||void 0===n?void 0:n[t]:null,i||"recipientName"===t||"unitDetails"===t||"localName"===t||(u=!1),i||"address"!==t&&"phoneNumber"!==t||(d=!1)});const h=new Map;return e.forEach((e,t)=>{let r=!1;for(const[,i]of h){const o=i.items[0];let l=0;if(a.forEach(t=>{s(e,t)!==s(o,t)&&l++}),l<=3){i.items.push(e),i.indices.push(t);const s=c(e,n);s&&i.payments.add(s),r=!0;break}}if(!r){const r=`${t}|${a.map(t=>s(e,t)).join("|")}`,i=c(e,n);h.set(r,{items:[e],indices:[t],payments:new Set(i?[i]:[])})}}),h.forEach(e=>{const n=e.items,r={items:n,payments:e.payments,originalIndices:e.indices};r.commonFieldsInGroup=new Set(a.filter(e=>{const t=s(n[0],e);return n.every(n=>s(n,e)===t)})),r.commonAddressFieldsInGroup={},l.forEach(e=>{var t;const i=n.every(t=>{var r,i;return(null===(r=t.address)||void 0===r?void 0:r[e])===(null===(i=n[0].address)||void 0===i?void 0:i[e])});r.commonAddressFieldsInGroup[e]=i?null===(t=n[0].address)||void 0===t?void 0:t[e]:null});const i=new Map;n.forEach((t,n)=>{const r=a.map(e=>s(t,e)).join("|");i.has(r)||i.set(r,{items:[],indices:[]}),i.get(r).items.push(t),i.get(r).indices.push(e.indices[n])}),r.identicalGroups=Array.from(i.values()),t.push(r)}),{groupedItems:t,globalCommonFields:i,commonAddressFields:o,areAddressesGloballyCommon:u,areCoreAddressesCommon:d}},[e,n]),d=(0,r.useMemo)(()=>e.reduce((e,t)=>e+(0,i.x8)(t,3),0),[e]),h=(0,r.useMemo)(()=>e&&0!==e.length?e.reduce((e,t)=>{const r=(0,i.x8)(t,3),s=c(t,n);return e[s]=(e[s]||0)+r,e},{}):{},[e,n]);return{groupedItems:u.groupedItems,total:d,paymentSummary:h,globalCommonFields:u.globalCommonFields,commonAddressFields:u.commonAddressFields,areAddressesGloballyCommon:u.areAddressesGloballyCommon,areCoreAddressesCommon:u.areCoreAddressesCommon}})(t,0,y),C=v&&!m?`${f} p-4 rounded-lg shadow-md`:"bg-white p-3 rounded-lg shadow-lg mt-6 leading-relaxed";return(0,s.jsxs)("div",{className:C,children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u2705 Resumen del Pedido de Desayuno"}),t&&0!==t.length?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-700",children:(0,s.jsxs)("span",{className:"font-medium text-gray-800",children:["\ud83c\udf7d ",t.length," desayunos en total"]})}),!v&&b.map((e,t)=>e.items.length>1&&(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["* ",e.items.length," desayunos iguales"]},`group-${t}`)),!v&&(0,s.jsx)("p",{className:"text-sm text-gray-700",children:(0,s.jsxs)("span",{className:"font-medium text-gray-800",children:["\ud83d\udcb0 Total: $",w.toLocaleString("es-CO")]})}),(0,s.jsx)("hr",{className:"border-t border-gray-300 my-2"}),b.map((e,t)=>(0,s.jsx)(h,{group:e,globalCommonFields:new Set,isWaiterView:v},t)),(0,s.jsx)("hr",{className:"border-t border-gray-300 my-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"\ud83d\ude9a Estimado: 25-30 min (10-15 si est\xe1n cerca)."}),(0,s.jsx)(p,{paymentSummary:x,total:w,isWaiterView:v}),n&&m&&(0,s.jsx)("button",{onClick:n,disabled:!t||0===t.length,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg mt-2 transition-colors text-sm "+(t&&0!==t.length?"":"opacity-50 cursor-not-allowed"),children:v?"Guardar Pedido":"Enviar Pedido por WhatsApp"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"No hay desayunos en tu pedido."}),(0,s.jsxs)("p",{className:"text-base font-bold text-right mt-2 text-gray-800",children:["\ud83d\udcb0 Total: ",(0,s.jsx)("span",{className:"text-green-600",children:"$0"})]})]})]})}},3125:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5043),i=n(4916),s=n(579);const o=e=>{let{id:t,label:n,value:r,onChange:i,placeholder:o,icon:a,type:l="text",autoComplete:c,ariaRequired:u=!1,error:d=""}=e;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{htmlFor:t,className:"block font-medium text-gray-800 mb-1",children:[(0,s.jsx)("span",{role:"img","aria-label":"icon",children:a})," ",n]}),(0,s.jsx)("input",{id:t,type:l,value:r,onChange:i,placeholder:o,className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 "+(d?"border-red-500 focus:ring-red-500":"focus:ring-green-500"),autoComplete:c,"aria-required":u}),d&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d})]})},a=e=>{let{onConfirm:t,initialAddress:n={}}=e;const[a,l]=(0,i.A)("userAddress",n.address||""),[c,u]=(0,i.A)("userPhoneNumber",n.phoneNumber||""),[d,h]=(0,i.A)("userAddressType",n.addressType||"school"),[p,f]=(0,i.A)("userRecipientName",n.recipientName||""),[m,g]=(0,i.A)("userUnitDetails",n.unitDetails||""),[v,y]=(0,i.A)("userLocalName",n.localName||""),[b,w]=(0,r.useState)(!n.address),[x,E]=(0,r.useState)(""),[S,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n.address?(l(n.address),u(n.phoneNumber||""),h(n.addressType||"school"),f(n.recipientName||""),g(n.unitDetails||""),y(n.localName||"")):h("school")},[n,h]);const C=e=>/^3\d{9}$/.test(e),k=c&&!C(c)?"Formato de tel\xe9fono no v\xe1lido quita el +57 (Ej: 3001234567)":"",N=e=>{if(!e.trim())return!1;return!/^(cl|cra|calle|carrera|tv|trasversal|dig|diagonal)/i.test(e.trim())};(0,r.useEffect)(()=>{E(""),a&&!N(a)?T(!0):T(!1)},[a]),(0,r.useEffect)(()=>{if(!a||N(a))return T(!1),void(N(a)&&E("Formato de direcci\xf3n no v\xe1lido (Ej: CL 123 #125-67)"));const e=setTimeout(()=>{E((e=>{const t=e.trim().match(/^(cl|cra|calle|carrera|tv|trasversal|dig|diagonal)\.?\s*(\d{1,3})([a-df]|bis|abis|bbis|cbis|fbis)?\s*[#n]+\s*(\d{1,3})([a-df]|bis|abis|bbis|cbis|fbis)?-(\d{1,2})$/i);if(!t)return"Formato de direcci\xf3n no v\xe1lido (Ej: CL 123 #125-67)";const n=parseInt(t[2],10),r=parseInt(t[4],10);return 155===n||n>=200&&n<=299||n<100||r<100?"Direcci\xf3n fuera de cobertura (muy lejana, supera los 4km)":""})(a)),T(!1)},2e3);return()=>clearTimeout(e)},[a]);const _=a&&C(c)&&!x&&!S&&("school"!==d||p)&&("complex"!==d||m)&&("shop"!==d||v),A=()=>{if(_){const e={address:a,phoneNumber:c,addressType:d,recipientName:"school"===d?p:"",unitDetails:"complex"===d?m:"",localName:"shop"===d?v:""};t(e),window.dispatchEvent(new CustomEvent("userAddressUpdated",{detail:e})),w(!1)}else alert("Por favor, completa todos los campos requeridos correctamente.")};return _&&!b?(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow space-y-4 text-sm sm:text-base",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-800",children:"Datos Guardados"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["\ud83d\udccd Direcci\xf3n: ",a]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["\ud83c\udfe2 Tipo de lugar: ","house"===d?"Casa/Apartamento Individual":"school"===d?"Colegio/Oficina":"complex"===d?"Conjunto Residencial":"Tienda/Local"]}),"school"===d&&p&&(0,s.jsxs)("p",{className:"text-gray-600",children:["\ud83d\udc64 Recibe: ",p]}),"complex"===d&&m&&(0,s.jsxs)("p",{className:"text-gray-600",children:["\ud83c\udfe2 Detalles: ",m]}),"shop"===d&&v&&(0,s.jsxs)("p",{className:"text-gray-600",children:["\ud83c\udfec Nombre del local: ",v]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["\ud83d\udcde Tel\xe9fono: ",c]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full",children:[(0,s.jsx)("button",{onClick:A,className:"w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white text-sm font-medium px-3 py-2 rounded-md transition-colors",children:"Usar datos guardados"}),(0,s.jsx)("button",{onClick:()=>w(!0),className:"w-full sm:w-auto bg-gray-500 hover:bg-gray-600 text-white text-sm font-medium px-3 py-2 rounded-md transition-colors",children:"Editar datos"})]})]}):(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow space-y-4 text-sm sm:text-base",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"address-type",className:"block font-medium text-gray-800 mb-1",children:"\xbfQu\xe9 tipo de direcci\xf3n es?"}),(0,s.jsxs)("select",{id:"address-type",value:d,onChange:e=>{h(e.target.value),f(""),g(""),y("")},className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,s.jsx)("option",{value:"house",children:"Casa/Apartamento Individual"}),(0,s.jsx)("option",{value:"school",children:"Colegio/Oficina"}),(0,s.jsx)("option",{value:"complex",children:"Conjunto Residencial"}),(0,s.jsx)("option",{value:"shop",children:"Tienda/Local"})]})]}),(0,s.jsx)(o,{id:"address-input",label:"Direcci\xf3n de entrega",value:a,onChange:e=>l(e.target.value),placeholder:"Ej: CL 123 #125-67",icon:"\ud83d\udccd",autoComplete:"street-address",ariaRequired:!0,error:x}),"school"===d&&(0,s.jsx)(o,{id:"recipient-name-input",label:"Nombre completo de quien recibe",value:p,onChange:e=>f(e.target.value),placeholder:"Ej: Juan P\xe9rez (Estudiante/Profesor/Empleado)",icon:"\ud83d\udc64",ariaRequired:!0}),"complex"===d&&(0,s.jsx)(o,{id:"unit-details-input",label:"Torre, Apartamento, Bloque, etc.",value:m,onChange:e=>g(e.target.value),placeholder:"Ej: Torre 5, Apto 302 / Bloque C, Casa 15",icon:"\ud83c\udfe2",ariaRequired:!0}),"shop"===d&&(0,s.jsx)(o,{id:"local-name-input",label:"Nombre completo del local",value:v,onChange:e=>y(e.target.value),placeholder:"Ej: Tienda El Progreso",icon:"\ud83c\udfec",ariaRequired:!0}),(0,s.jsx)(o,{id:"phone-number-input",label:"N\xfamero de tel\xe9fono",value:c,onChange:e=>u(e.target.value),placeholder:"Ej: 3001234567",icon:"\ud83d\udcde",type:"tel",autoComplete:"tel",ariaRequired:!0,error:k}),(0,s.jsx)("button",{onClick:A,disabled:!_,className:"w-full mt-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded-md transition-colors "+(_?"":"opacity-50 cursor-not-allowed"),children:"Confirmar direcci\xf3n y n\xfamero"})]})}},3175:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3262:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var r=n(579);const i=e=>{let{cutlery:t,setCutlery:n}=e;return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-3 text-gray-800",children:"\ud83c\udf74 \xbfNecesitas cubiertos?"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)("button",{onClick:()=>n(!0),className:`\n            p-3 rounded-lg text-base font-medium transition-all duration-200 ease-in-out\n            focus:outline-none focus:ring-2 focus:ring-offset-2\n            ${!0===t?"bg-green-500 text-white shadow-md focus:ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-300"}\n            flex items-center justify-center text-center\n          `,style:{minHeight:"56px"},"aria-pressed":!0===t,children:"S\xed, por favor"}),(0,r.jsx)("button",{onClick:()=>n(!1),className:`\n            p-3 rounded-lg text-base font-medium transition-all duration-200 ease-in-out\n            focus:outline-none focus:ring-2 focus:ring-offset-2\n            ${!1===t?"bg-red-500 text-white shadow-md focus:ring-red-500":"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-300"}\n            flex items-center justify-center text-center\n          `,style:{minHeight:"56px"},"aria-pressed":!1===t,children:"No, gracias"})]})]})}},3360:(e,t,n)=>{"use strict";n.d(t,{A:()=>fr});var r=n(5043),i=n(1173),s=n(579);const o=e=>{let{times:t,selectedTime:n,setSelectedTime:i,onConfirm:o}=e;const[a,l]=(0,r.useState)(""),c=e=>{try{const t=(e=>{if(!e)return 0;const t=e.trim().match(/^(\d{1,2}:\d{2})(?:\s)?([AaPp][Mm])$/i);if(!t)throw new Error(`Formato de hora inv\xe1lido: ${e}`);const[,n,r]=t,[i,s]=n.split(":").map(Number);if(isNaN(i)||isNaN(s))throw new Error(`Formato de hora inv\xe1lido: ${e}`);let o=60*i+s;return"PM"===r.toUpperCase()&&12!==i&&(o+=720),"AM"===r.toUpperCase()&&12===i&&(o=s),o})(e);return t>=690&&t<=950}catch(a){return!1}};return(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-1 xs:p-2 sm:p-3 rounded-lg shadow-sm",children:[(0,s.jsxs)("h2",{className:"text-[10px] xs:text-xs sm:text-sm font-semibold mb-1 xs:mb-2 flex items-center text-green-700",children:[(0,s.jsx)("span",{className:"mr-1",children:"\ud83d\udd52"})," \xbfPara qu\xe9 hora?"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 xs:grid-cols-2 gap-1 xs:gap-2",children:[t.map(e=>(0,s.jsx)("button",{onClick:()=>{i(e),l("")},className:"relative p-1 xs:p-2 rounded-lg text-[10px] xs:text-xs sm:text-sm font-medium transition-all duration-200 flex items-center justify-center text-center min-h-[30px] xs:min-h-[40px] shadow-sm "+((null===n||void 0===n?void 0:n.id)===e.id?"bg-green-200 text-green-800 border border-green-300":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"),"aria-label":`Seleccionar hora ${e.name}`,children:e.name},e.id)),(0,s.jsx)("input",{type:"text",placeholder:"Otra hora (e.g., 1:00 PM)",value:0===(null===n||void 0===n?void 0:n.id)?n.name:"",onChange:e=>{const t=e.target.value;i({id:0,name:t}),l("")},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},className:"col-span-2 mt-2 p-1 xs:p-2 text-[10px] xs:text-xs sm:text-sm bg-white border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400 placeholder-gray-400 w-full","aria-label":"Ingresar una hora personalizada"}),a&&(0,s.jsx)("p",{className:"text-[10px] xs:text-xs text-red-600 mt-1",children:a})]}),(0,s.jsx)("button",{onClick:()=>{if(n&&n.name){if(0===n.id){if(!(e=n.name)||!/^([1-9]|1[0-2]):[0-5][0-9](?:\s)?(AM|PM|am|pm)$/i.test(e.trim()))return void l("Por favor, ingresa una hora v\xe1lida (Ej: 1:00 PM)");if(!c(n.name))return void l("\ud83d\udc49 No tenemos almuerzo a esa hora solo de 11:30am a 3:50pm")}else if(!c(n.name))return void l("\ud83d\udc49 No tenemos almuerzo a esa hora");var e;0,o()}else l("Por favor, ingresa una hora v\xe1lida (Ej: 1:00 PM)")},disabled:!n||!n.name,className:"mt-2 bg-green-500 hover:bg-green-600 text-white px-2 xs:px-3 py-0.5 xs:py-1 rounded-lg text-[10px] xs:text-xs sm:text-sm transition-colors "+(n&&n.name?"":"opacity-50 cursor-not-allowed"),"aria-label":"Confirmar hora",children:"Confirmar hora"})]})};var a=n(3125),l=n(5575),c=n(3262),u=n(1137);function d(e){return t=>typeof t===e}var h=d("function"),p=e=>"RegExp"===Object.prototype.toString.call(e).slice(8,-1),f=e=>!m(e)&&!(e=>null===e)(e)&&(h(e)||"object"===typeof e),m=d("undefined");function g(e,t){if(e===t)return!0;if(e&&f(e)&&t&&f(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t))return function(e,t){const{length:n}=e;if(n!==t.length)return!1;for(let r=n;0!==r--;)if(!g(e[r],t[r]))return!1;return!0}(e,t);if(e instanceof Map&&t instanceof Map)return function(e,t){if(e.size!==t.size)return!1;for(const n of e.entries())if(!t.has(n[0]))return!1;for(const n of e.entries())if(!g(n[1],t.get(n[0])))return!1;return!0}(e,t);if(e instanceof Set&&t instanceof Set)return function(e,t){if(e.size!==t.size)return!1;for(const n of e.entries())if(!t.has(n[0]))return!1;return!0}(e,t);if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return function(e,t){if(e.byteLength!==t.byteLength)return!1;const n=new DataView(e.buffer),r=new DataView(t.buffer);let i=e.byteLength;for(;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}(e,t);if(p(e)&&p(t))return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let e=n.length;0!==e--;)if(!Object.prototype.hasOwnProperty.call(t,n[e]))return!1;for(let i=n.length;0!==i--;){const r=n[i];if(("_owner"!==r||!e.$$typeof)&&!g(e[r],t[r]))return!1}return!0}return!(!Number.isNaN(e)||!Number.isNaN(t))||e===t}var v=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],y=["bigint","boolean","null","number","string","symbol","undefined"];function b(e){const t=Object.prototype.toString.call(e).slice(8,-1);return/HTML\w+Element/.test(t)?"HTMLElement":(n=t,v.includes(n)?t:void 0);var n}function w(e){return t=>b(t)===e}function x(e){return t=>typeof t===e}var E=["innerHTML","ownerDocument","style","attributes","nodeValue"];function S(e){if(null===e)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(S.array(e))return"Array";if(S.plainFunction(e))return"Function";const t=b(e);return t||"Object"}S.array=Array.isArray,S.arrayOf=(e,t)=>!(!S.array(e)&&!S.function(t))&&e.every(e=>t(e)),S.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===b(e),S.asyncFunction=w("AsyncFunction"),S.bigint=x("bigint"),S.boolean=e=>!0===e||!1===e,S.date=w("Date"),S.defined=e=>!S.undefined(e),S.domElement=e=>S.object(e)&&!S.plainObject(e)&&1===e.nodeType&&S.string(e.nodeName)&&E.every(t=>t in e),S.empty=e=>S.string(e)&&0===e.length||S.array(e)&&0===e.length||S.object(e)&&!S.map(e)&&!S.set(e)&&0===Object.keys(e).length||S.set(e)&&0===e.size||S.map(e)&&0===e.size,S.error=w("Error"),S.function=x("function"),S.generator=e=>S.iterable(e)&&S.function(e.next)&&S.function(e.throw),S.generatorFunction=w("GeneratorFunction"),S.instanceOf=(e,t)=>!(!e||!t)&&Object.getPrototypeOf(e)===t.prototype,S.iterable=e=>!S.nullOrUndefined(e)&&S.function(e[Symbol.iterator]),S.map=w("Map"),S.nan=e=>Number.isNaN(e),S.null=e=>null===e,S.nullOrUndefined=e=>S.null(e)||S.undefined(e),S.number=e=>x("number")(e)&&!S.nan(e),S.numericString=e=>S.string(e)&&e.length>0&&!Number.isNaN(Number(e)),S.object=e=>!S.nullOrUndefined(e)&&(S.function(e)||"object"===typeof e),S.oneOf=(e,t)=>!!S.array(e)&&e.indexOf(t)>-1,S.plainFunction=w("Function"),S.plainObject=e=>{if("Object"!==b(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},S.primitive=e=>{return S.null(e)||(t=typeof e,y.includes(t));var t},S.promise=w("Promise"),S.propertyOf=(e,t,n)=>{if(!S.object(e)||!t)return!1;const r=e[t];return S.function(n)?n(r):S.defined(r)},S.regexp=w("RegExp"),S.set=w("Set"),S.string=x("string"),S.symbol=x("symbol"),S.undefined=x("undefined"),S.weakMap=w("WeakMap"),S.weakSet=w("WeakSet");var T=S;function C(e,t,n){const{actual:r,key:i,previous:s,type:o}=n,a=O(e,i),l=O(t,i);let c=[a,l].every(T.number)&&("increased"===o?a<l:a>l);return T.undefined(r)||(c=c&&l===r),T.undefined(s)||(c=c&&a===s),c}function k(e,t,n){const{key:r,type:i,value:s}=n,o=O(e,r),a=O(t,r),l="added"===i?o:a,c="added"===i?a:o;return T.nullOrUndefined(s)?[o,a].every(T.array)?!c.every(P(l)):[o,a].every(T.plainObject)?function(e,t){return t.some(t=>!e.includes(t))}(Object.keys(l),Object.keys(c)):![o,a].every(e=>T.primitive(e)&&T.defined(e))&&("added"===i?!T.defined(o)&&T.defined(a):T.defined(o)&&!T.defined(a)):T.defined(l)?!(!T.array(l)&&!T.plainObject(l))&&function(e,t,n){return!!R(e,t)&&([e,t].every(T.array)?!e.some(A(n))&&t.some(A(n)):[e,t].every(T.plainObject)?!Object.entries(e).some(_(n))&&Object.entries(t).some(_(n)):t===n)}(l,c,s):g(c,s)}function N(e,t){let{key:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=O(e,n),i=O(t,n);if(!R(r,i))throw new TypeError("Inputs have different types");if(!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(e=>T.string(e)||T.array(e)||T.plainObject(e))}(r,i))throw new TypeError("Inputs don't have length");return[r,i].every(T.plainObject)&&(r=Object.keys(r),i=Object.keys(i)),[r,i]}function _(e){return t=>{let[n,r]=t;return T.array(e)?g(e,r)||e.some(e=>g(e,r)||T.array(r)&&P(r)(e)):T.plainObject(e)&&e[n]?!!e[n]&&g(e[n],r):g(e,r)}}function A(e){return t=>T.array(e)?e.some(e=>g(e,t)||T.array(t)&&P(t)(e)):g(e,t)}function I(e,t){return T.array(e)?e.some(e=>g(e,t)):g(e,t)}function P(e){return t=>e.some(e=>g(e,t))}function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(T.array)||t.every(T.number)||t.every(T.plainObject)||t.every(T.string)}function O(e,t){if(T.plainObject(e)||T.array(e)){if(T.string(t)){return t.split(".").reduce((e,t)=>e&&e[t],e)}return T.number(t)?e[t]:e}return e}function j(e,t){if([e,t].some(T.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every(e=>T.plainObject(e)||T.array(e)))throw new Error("Expected plain objects or array");return{added:(n,r)=>{try{return k(e,t,{key:n,type:"added",value:r})}catch{return!1}},changed:(n,r,i)=>{try{const s=O(e,n),o=O(t,n),a=T.defined(r),l=T.defined(i);if(a||l){const e=l?I(i,s):!I(r,s),t=I(r,o);return e&&t}return[s,o].every(T.array)||[s,o].every(T.plainObject)?!g(s,o):s!==o}catch{return!1}},changedFrom:(n,r,i)=>{if(!T.defined(n))return!1;try{const s=O(e,n),o=O(t,n),a=T.defined(i);return I(r,s)&&(a?I(i,o):!a)}catch{return!1}},decreased:(n,r,i)=>{if(!T.defined(n))return!1;try{return C(e,t,{key:n,actual:r,previous:i,type:"decreased"})}catch{return!1}},emptied:n=>{try{const[r,i]=N(e,t,{key:n});return!!r.length&&!i.length}catch{return!1}},filled:n=>{try{const[r,i]=N(e,t,{key:n});return!r.length&&!!i.length}catch{return!1}},increased:(n,r,i)=>{if(!T.defined(n))return!1;try{return C(e,t,{key:n,actual:r,previous:i,type:"increased"})}catch{return!1}},removed:(n,r)=>{try{return k(e,t,{key:n,type:"removed",value:r})}catch{return!1}}}}var D=n(3865),M=n(9496),L=n(7950),F=n(2861),V=n(7789),z=n.n(V),U=n(5173),$=n.n(U),B="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,H=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(B&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var q=B&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},H))}};function W(e){return e&&"[object Function]"==={}.toString.call(e)}function G(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function K(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function Q(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=G(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:Q(K(e))}function Y(e){return e&&e.referenceNode?e.referenceNode:e}var X=B&&!(!window.MSInputMethodContext||!document.documentMode),J=B&&/MSIE 10/.test(navigator.userAgent);function Z(e){return 11===e?X:10===e?J:X||J}function ee(e){if(!e)return document.documentElement;for(var t=Z(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===G(n,"position")?ee(n):n:e?e.ownerDocument.documentElement:document.documentElement}function te(e){return null!==e.parentNode?te(e.parentNode):e}function ne(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,s=document.createRange();s.setStart(r,0),s.setEnd(i,0);var o=s.commonAncestorContainer;if(e!==o&&t!==o||r.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||ee(e.firstElementChild)===e)}(o)?o:ee(o);var a=te(e);return a.host?ne(a.host,t):ne(e,te(t).host)}function re(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function ie(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+r+"Width"])}function se(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],Z(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function oe(e){var t=e.body,n=e.documentElement,r=Z(10)&&getComputedStyle(n);return{height:se("Height",t,n,r),width:se("Width",t,n,r)}}var ae=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),le=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ue(e){return ce({},e,{right:e.left+e.width,bottom:e.top+e.height})}function de(e){var t={};try{if(Z(10)){t=e.getBoundingClientRect();var n=re(e,"top"),r=re(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(d){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},s="HTML"===e.nodeName?oe(e.ownerDocument):{},o=s.width||e.clientWidth||i.width,a=s.height||e.clientHeight||i.height,l=e.offsetWidth-o,c=e.offsetHeight-a;if(l||c){var u=G(e);l-=ie(u,"x"),c-=ie(u,"y"),i.width-=l,i.height-=c}return ue(i)}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Z(10),i="HTML"===t.nodeName,s=de(e),o=de(t),a=Q(e),l=G(t),c=parseFloat(l.borderTopWidth),u=parseFloat(l.borderLeftWidth);n&&i&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var d=ue({top:s.top-o.top-c,left:s.left-o.left-u,width:s.width,height:s.height});if(d.marginTop=0,d.marginLeft=0,!r&&i){var h=parseFloat(l.marginTop),p=parseFloat(l.marginLeft);d.top-=c-h,d.bottom-=c-h,d.left-=u-p,d.right-=u-p,d.marginTop=h,d.marginLeft=p}return(r&&!n?t.contains(a):t===a&&"BODY"!==a.nodeName)&&(d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=re(t,"top"),i=re(t,"left"),s=n?-1:1;return e.top+=r*s,e.bottom+=r*s,e.left+=i*s,e.right+=i*s,e}(d,t)),d}function pe(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===G(e,"position"))return!0;var n=K(e);return!!n&&pe(n)}function fe(e){if(!e||!e.parentElement||Z())return document.documentElement;for(var t=e.parentElement;t&&"none"===G(t,"transform");)t=t.parentElement;return t||document.documentElement}function me(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},o=i?fe(e):ne(e,Y(t));if("viewport"===r)s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=he(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),s=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:re(n),a=t?0:re(n,"left");return ue({top:o-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:i,height:s})}(o,i);else{var a=void 0;"scrollParent"===r?"BODY"===(a=Q(K(t))).nodeName&&(a=e.ownerDocument.documentElement):a="window"===r?e.ownerDocument.documentElement:r;var l=he(a,o,i);if("HTML"!==a.nodeName||pe(o))s=l;else{var c=oe(e.ownerDocument),u=c.height,d=c.width;s.top+=l.top-l.marginTop,s.bottom=u+l.top,s.left+=l.left-l.marginLeft,s.right=d+l.left}}var h="number"===typeof(n=n||0);return s.left+=h?n:n.left||0,s.top+=h?n:n.top||0,s.right-=h?n:n.right||0,s.bottom-=h?n:n.bottom||0,s}function ge(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=me(n,r,s,i),a={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},l=Object.keys(a).map(function(e){return ce({key:e},a[e],{area:(t=a[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),c=l.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),u=c.length>0?c[0].key:l[0].key,d=e.split("-")[1];return u+(d?"-"+d:"")}function ve(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return he(n,r?fe(t):ne(t,Y(n)),r)}function ye(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function be(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function we(e,t,n){n=n.split("-")[0];var r=ye(e),i={width:r.width,height:r.height},s=-1!==["right","left"].indexOf(n),o=s?"top":"left",a=s?"left":"top",l=s?"height":"width",c=s?"width":"height";return i[o]=t[o]+t[l]/2-r[l]/2,i[a]=n===a?t[a]-r[c]:t[be(a)],i}function xe(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function Ee(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=xe(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&W(n)&&(t.offsets.popper=ue(t.offsets.popper),t.offsets.reference=ue(t.offsets.reference),t=n(t,e))}),t}function Se(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=ve(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=ge(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=we(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=Ee(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function Te(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function Ce(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],s=i?""+i+n:e;if("undefined"!==typeof document.body.style[s])return s}return null}function ke(){return this.state.isDestroyed=!0,Te(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Ce("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Ne(e){var t=e.ownerDocument;return t?t.defaultView:window}function _e(e,t,n,r){var i="BODY"===e.nodeName,s=i?e.ownerDocument.defaultView:e;s.addEventListener(t,n,{passive:!0}),i||_e(Q(s.parentNode),t,n,r),r.push(s)}function Ae(e,t,n,r){n.updateBound=r,Ne(e).addEventListener("resize",n.updateBound,{passive:!0});var i=Q(e);return _e(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function Ie(){this.state.eventsEnabled||(this.state=Ae(this.reference,this.options,this.state,this.scheduleUpdate))}function Pe(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,Ne(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Re(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Oe(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Re(t[n])&&(r="px"),e.style[n]=t[n]+r})}var je=B&&/Firefox/i.test(navigator.userAgent);function De(e,t,n){var r=xe(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var s="`"+t+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return i}var Me=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Le=Me.slice(3);function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Le.indexOf(e),r=Le.slice(n+1).concat(Le.slice(0,n));return t?r.reverse():r}var Ve="flip",ze="clockwise",Ue="counterclockwise";function $e(e,t,n,r){var i=[0,0],s=-1!==["right","left"].indexOf(r),o=e.split(/(\+|\-)/).map(function(e){return e.trim()}),a=o.indexOf(xe(o,function(e){return-1!==e.search(/,|\s/)}));o[a]&&-1===o[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[o.slice(0,a).concat([o[a].split(l)[0]]),[o[a].split(l)[1]].concat(o.slice(a+1))]:[o];return c=c.map(function(e,r){var i=(1===r?!s:s)?"height":"width",o=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+i[1],o=i[2];if(!s)return e;if(0===o.indexOf("%")){return ue("%p"===o?n:r)[t]/100*s}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s;return s}(e,i,t,n)})}),c.forEach(function(e,t){e.forEach(function(n,r){Re(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))})}),i}var Be={shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,s=i.reference,o=i.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",u={start:le({},l,s[l]),end:le({},l,s[l]+s[c]-o[c])};e.offsets.popper=ce({},o,u[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,s=i.popper,o=i.reference,a=r.split("-")[0],l=void 0;return l=Re(+n)?[+n,0]:$e(n,s,o,a),"left"===a?(s.top+=l[0],s.left-=l[1]):"right"===a?(s.top+=l[0],s.left+=l[1]):"top"===a?(s.left+=l[0],s.top-=l[1]):"bottom"===a&&(s.left+=l[0],s.top+=l[1]),e.popper=s,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||ee(e.instance.popper);e.instance.reference===n&&(n=ee(n));var r=Ce("transform"),i=e.instance.popper.style,s=i.top,o=i.left,a=i[r];i.top="",i.left="",i[r]="";var l=me(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=s,i.left=o,i[r]=a,t.boundaries=l;var c=t.priority,u=e.offsets.popper,d={primary:function(e){var n=u[e];return u[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(u[e],l[e])),le({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=u[n];return u[e]>l[e]&&!t.escapeWithReference&&(r=Math.min(u[n],l[e]-("right"===e?u.width:u.height))),le({},n,r)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=ce({},u,d[t](e))}),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],s=Math.floor,o=-1!==["top","bottom"].indexOf(i),a=o?"right":"bottom",l=o?"left":"top",c=o?"width":"height";return n[a]<s(r[l])&&(e.offsets.popper[l]=s(r[l])-n[c]),n[l]>s(r[a])&&(e.offsets.popper[l]=s(r[a])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!De(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"===typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],s=e.offsets,o=s.popper,a=s.reference,l=-1!==["left","right"].indexOf(i),c=l?"height":"width",u=l?"Top":"Left",d=u.toLowerCase(),h=l?"left":"top",p=l?"bottom":"right",f=ye(r)[c];a[p]-f<o[d]&&(e.offsets.popper[d]-=o[d]-(a[p]-f)),a[d]+f>o[p]&&(e.offsets.popper[d]+=a[d]+f-o[p]),e.offsets.popper=ue(e.offsets.popper);var m=a[d]+a[c]/2-f/2,g=G(e.instance.popper),v=parseFloat(g["margin"+u]),y=parseFloat(g["border"+u+"Width"]),b=m-e.offsets.popper[d]-v-y;return b=Math.max(Math.min(o[c]-f,b),0),e.arrowElement=r,e.offsets.arrow=(le(n={},d,Math.round(b)),le(n,h,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(Te(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=me(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=be(r),s=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case Ve:o=[r,i];break;case ze:o=Fe(r);break;case Ue:o=Fe(r,!0);break;default:o=t.behavior}return o.forEach(function(a,l){if(r!==a||o.length===l+1)return e;r=e.placement.split("-")[0],i=be(r);var c=e.offsets.popper,u=e.offsets.reference,d=Math.floor,h="left"===r&&d(c.right)>d(u.left)||"right"===r&&d(c.left)<d(u.right)||"top"===r&&d(c.bottom)>d(u.top)||"bottom"===r&&d(c.top)<d(u.bottom),p=d(c.left)<d(n.left),f=d(c.right)>d(n.right),m=d(c.top)<d(n.top),g=d(c.bottom)>d(n.bottom),v="left"===r&&p||"right"===r&&f||"top"===r&&m||"bottom"===r&&g,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===s&&p||y&&"end"===s&&f||!y&&"start"===s&&m||!y&&"end"===s&&g),w=!!t.flipVariationsByContent&&(y&&"start"===s&&f||y&&"end"===s&&p||!y&&"start"===s&&g||!y&&"end"===s&&m),x=b||w;(h||v||x)&&(e.flipped=!0,(h||v)&&(r=o[l+1]),x&&(s=function(e){return"end"===e?"start":"start"===e?"end":e}(s)),e.placement=r+(s?"-"+s:""),e.offsets.popper=ce({},e.offsets.popper,we(e.instance.popper,e.offsets.reference,e.placement)),e=Ee(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,s=r.reference,o=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=s[n]-(a?i[o?"width":"height"]:0),e.placement=be(t),e.offsets.popper=ue(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!De(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=xe(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,s=xe(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==s?s:t.gpuAcceleration,a=ee(e.instance.popper),l=de(a),c={position:i.position},u=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,s=Math.round,o=Math.floor,a=function(e){return e},l=s(i.width),c=s(r.width),u=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),h=t?u||d||l%2===c%2?s:o:a,p=t?s:a;return{left:h(l%2===1&&c%2===1&&!d&&t?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:h(r.right)}}(e,window.devicePixelRatio<2||!je),d="bottom"===n?"top":"bottom",h="right"===r?"left":"right",p=Ce("transform"),f=void 0,m=void 0;if(m="bottom"===d?"HTML"===a.nodeName?-a.clientHeight+u.bottom:-l.height+u.bottom:u.top,f="right"===h?"HTML"===a.nodeName?-a.clientWidth+u.right:-l.width+u.right:u.left,o&&p)c[p]="translate3d("+f+"px, "+m+"px, 0)",c[d]=0,c[h]=0,c.willChange="transform";else{var g="bottom"===d?-1:1,v="right"===h?-1:1;c[d]=m*g,c[h]=f*v,c.willChange=d+", "+h}var y={"x-placement":e.placement};return e.attributes=ce({},y,e.attributes),e.styles=ce({},c,e.styles),e.arrowStyles=ce({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return Oe(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&Oe(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var s=ve(i,t,e,n.positionFixed),o=ge(n.placement,s,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),Oe(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}},He={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Be},qe=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=q(this.update.bind(this)),this.options=ce({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(ce({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){r.options.modifiers[t]=ce({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return ce({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&W(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return ae(e,[{key:"update",value:function(){return Se.call(this)}},{key:"destroy",value:function(){return ke.call(this)}},{key:"enableEventListeners",value:function(){return Ie.call(this)}},{key:"disableEventListeners",value:function(){return Pe.call(this)}}]),e}();qe.Utils=("undefined"!==typeof window?window:n.g).PopperUtils,qe.placements=Me,qe.Defaults=He;const We=qe;var Ge=["innerHTML","ownerDocument","style","attributes","nodeValue"],Ke=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],Qe=["bigint","boolean","null","number","string","symbol","undefined"];function Ye(e){var t,n=Object.prototype.toString.call(e).slice(8,-1);return/HTML\w+Element/.test(n)?"HTMLElement":(t=n,Ke.includes(t)?n:void 0)}function Xe(e){return function(t){return Ye(t)===e}}function Je(e){return function(t){return typeof t===e}}function Ze(e){if(null===e)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Ze.array(e))return"Array";if(Ze.plainFunction(e))return"Function";var t=Ye(e);return t||"Object"}Ze.array=Array.isArray,Ze.arrayOf=function(e,t){return!(!Ze.array(e)&&!Ze.function(t))&&e.every(function(e){return t(e)})},Ze.asyncGeneratorFunction=function(e){return"AsyncGeneratorFunction"===Ye(e)},Ze.asyncFunction=Xe("AsyncFunction"),Ze.bigint=Je("bigint"),Ze.boolean=function(e){return!0===e||!1===e},Ze.date=Xe("Date"),Ze.defined=function(e){return!Ze.undefined(e)},Ze.domElement=function(e){return Ze.object(e)&&!Ze.plainObject(e)&&1===e.nodeType&&Ze.string(e.nodeName)&&Ge.every(function(t){return t in e})},Ze.empty=function(e){return Ze.string(e)&&0===e.length||Ze.array(e)&&0===e.length||Ze.object(e)&&!Ze.map(e)&&!Ze.set(e)&&0===Object.keys(e).length||Ze.set(e)&&0===e.size||Ze.map(e)&&0===e.size},Ze.error=Xe("Error"),Ze.function=Je("function"),Ze.generator=function(e){return Ze.iterable(e)&&Ze.function(e.next)&&Ze.function(e.throw)},Ze.generatorFunction=Xe("GeneratorFunction"),Ze.instanceOf=function(e,t){return!(!e||!t)&&Object.getPrototypeOf(e)===t.prototype},Ze.iterable=function(e){return!Ze.nullOrUndefined(e)&&Ze.function(e[Symbol.iterator])},Ze.map=Xe("Map"),Ze.nan=function(e){return Number.isNaN(e)},Ze.null=function(e){return null===e},Ze.nullOrUndefined=function(e){return Ze.null(e)||Ze.undefined(e)},Ze.number=function(e){return Je("number")(e)&&!Ze.nan(e)},Ze.numericString=function(e){return Ze.string(e)&&e.length>0&&!Number.isNaN(Number(e))},Ze.object=function(e){return!Ze.nullOrUndefined(e)&&(Ze.function(e)||"object"===typeof e)},Ze.oneOf=function(e,t){return!!Ze.array(e)&&e.indexOf(t)>-1},Ze.plainFunction=Xe("Function"),Ze.plainObject=function(e){if("Object"!==Ye(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},Ze.primitive=function(e){return Ze.null(e)||(t=typeof e,Qe.includes(t));var t},Ze.promise=Xe("Promise"),Ze.propertyOf=function(e,t,n){if(!Ze.object(e)||!t)return!1;var r=e[t];return Ze.function(n)?n(r):Ze.defined(r)},Ze.regexp=Xe("RegExp"),Ze.set=Xe("Set"),Ze.string=Je("string"),Ze.symbol=Je("symbol"),Ze.undefined=Je("undefined"),Ze.weakMap=Xe("WeakMap"),Ze.weakSet=Xe("WeakSet");const et=Ze;function tt(e){return function(t){return typeof t===e}}var nt=tt("function"),rt=function(e){return"RegExp"===Object.prototype.toString.call(e).slice(8,-1)},it=function(e){return!st(e)&&!function(e){return null===e}(e)&&(nt(e)||"object"===typeof e)},st=tt("undefined"),ot=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function at(e,t){if(e===t)return!0;if(e&&it(e)&&t&&it(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t))return function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=n;0!==r--;)if(!at(e[r],t[r]))return!1;return!0}(e,t);if(e instanceof Map&&t instanceof Map)return function(e,t){var n,r,i,s;if(e.size!==t.size)return!1;try{for(var o=ot(e.entries()),a=o.next();!a.done;a=o.next()){var l=a.value;if(!t.has(l[0]))return!1}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}try{for(var c=ot(e.entries()),u=c.next();!u.done;u=c.next())if(!at((l=u.value)[1],t.get(l[0])))return!1}catch(h){i={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}return!0}(e,t);if(e instanceof Set&&t instanceof Set)return function(e,t){var n,r;if(e.size!==t.size)return!1;try{for(var i=ot(e.entries()),s=i.next();!s.done;s=i.next()){var o=s.value;if(!t.has(o[0]))return!1}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!0}(e,t);if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e.buffer),r=new DataView(t.buffer),i=e.byteLength;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}(e,t);if(rt(e)&&rt(t))return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=n.length;0!==i--;)if(!Object.prototype.hasOwnProperty.call(t,n[i]))return!1;for(i=n.length;0!==i--;){var s=n[i];if(("_owner"!==s||!e.$$typeof)&&!at(e[s],t[s]))return!1}return!0}return!(!Number.isNaN(e)||!Number.isNaN(t))||e===t}function lt(e,t,n){var r=n.actual,i=n.key,s=n.previous,o=n.type,a=gt(e,i),l=gt(t,i),c=[a,l].every(et.number)&&("increased"===o?a<l:a>l);return et.undefined(r)||(c=c&&l===r),et.undefined(s)||(c=c&&a===s),c}function ct(e,t,n){var r=n.key,i=n.type,s=n.value,o=gt(e,r),a=gt(t,r),l="added"===i?o:a,c="added"===i?a:o;return et.nullOrUndefined(s)?[o,a].every(et.array)?!c.every(ft(l)):[o,a].every(et.plainObject)?function(e,t){return t.some(function(t){return!e.includes(t)})}(Object.keys(l),Object.keys(c)):![o,a].every(function(e){return et.primitive(e)&&et.defined(e)})&&("added"===i?!et.defined(o)&&et.defined(a):et.defined(o)&&!et.defined(a)):et.defined(l)?!(!et.array(l)&&!et.plainObject(l))&&function(e,t,n){return!!mt(e,t)&&([e,t].every(et.array)?!e.some(ht(n))&&t.some(ht(n)):[e,t].every(et.plainObject)?!Object.entries(e).some(dt(n))&&Object.entries(t).some(dt(n)):t===n)}(l,c,s):at(c,s)}function ut(e,t,n){var r=(void 0===n?{}:n).key,i=gt(e,r),s=gt(t,r);if(!mt(i,s))throw new TypeError("Inputs have different types");if(!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(function(e){return et.string(e)||et.array(e)||et.plainObject(e)})}(i,s))throw new TypeError("Inputs don't have length");return[i,s].every(et.plainObject)&&(i=Object.keys(i),s=Object.keys(s)),[i,s]}function dt(e){return function(t){var n=t[0],r=t[1];return et.array(e)?at(e,r)||e.some(function(e){return at(e,r)||et.array(r)&&ft(r)(e)}):et.plainObject(e)&&e[n]?!!e[n]&&at(e[n],r):at(e,r)}}function ht(e){return function(t){return et.array(e)?e.some(function(e){return at(e,t)||et.array(t)&&ft(t)(e)}):at(e,t)}}function pt(e,t){return et.array(e)?e.some(function(e){return at(e,t)}):at(e,t)}function ft(e){return function(t){return e.some(function(e){return at(e,t)})}}function mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(et.array)||e.every(et.number)||e.every(et.plainObject)||e.every(et.string)}function gt(e,t){return et.plainObject(e)||et.array(e)?et.string(t)?t.split(".").reduce(function(e,t){return e&&e[t]},e):et.number(t)?e[t]:e:e}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach(function(t){Et(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,At(r.key),r)}}function xt(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Et(e,t,n){return(t=At(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function kt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var i=Tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nt(e)}(this,n)}}function At(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var It={flip:{padding:20},preventOverflow:{padding:10}};function Pt(e,t,n){return function(e,t){if("function"!==typeof e)throw new TypeError("The typeValidator argument must be a function with the signature function(props, propName, componentName).");if(Boolean(t)&&"string"!==typeof t)throw new TypeError("The error message is optional, but must be a string if provided.")}(e,n),function(r,i,s){for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return function(e,t,n,r){return"boolean"===typeof e?e:"function"===typeof e?e(t,n,r):!0===Boolean(e)&&Boolean(e)}(t,r,i,s)?function(e,t){return Object.hasOwnProperty.call(e,t)}(r,i)?e.apply(void 0,[r,i,s].concat(a)):function(e,t,n,r){return r?new Error(r):new Error("Required ".concat(e[t]," `").concat(t,"` was not specified in `").concat(n,"`."))}(r,i,s,n):e.apply(void 0,[r,i,s].concat(a))}}var Rt={INIT:"init",IDLE:"idle",OPENING:"opening",OPEN:"open",CLOSING:"closing",ERROR:"error"},Ot=void 0!==L.createPortal;function jt(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function Dt(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function Mt(e){var t=e.title,n=e.data,r=e.warn,i=void 0!==r&&r,s=e.debug,o=void 0!==s&&s,a=i?console.warn||console.error:console.log;o&&t&&n&&(console.groupCollapsed("%creact-floater: ".concat(t),"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(n)?n.forEach(function(e){et.plainObject(e)&&e.key?a.apply(console,[e.key,e.value]):a.apply(console,[e])}):a.apply(console,[n]),console.groupEnd())}function Lt(){}var Ft=function(e){St(n,e);var t=_t(n);function n(){return bt(this,n),t.apply(this,arguments)}return xt(n,[{key:"componentDidMount",value:function(){jt()&&(this.node||this.appendNode(),Ot||this.renderPortal())}},{key:"componentDidUpdate",value:function(){jt()&&(Ot||this.renderPortal())}},{key:"componentWillUnmount",value:function(){jt()&&this.node&&(Ot||L.unmountComponentAtNode(this.node),this.node&&this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=void 0))}},{key:"appendNode",value:function(){var e=this.props,t=e.id,n=e.zIndex;this.node||(this.node=document.createElement("div"),t&&(this.node.id=t),n&&(this.node.style.zIndex=n),document.body.appendChild(this.node))}},{key:"renderPortal",value:function(){if(!jt())return null;var e=this.props,t=e.children,n=e.setRef;return this.node||this.appendNode(),Ot?L.createPortal(t,this.node):(n(L.unstable_renderSubtreeIntoContainer(this,t.length>1?r.createElement("div",null,t):t[0],this.node)),null)}},{key:"renderReact16",value:function(){var e=this.props,t=e.hasChildren,n=e.placement,r=e.target;return t||r||"center"===n?this.renderPortal():null}},{key:"render",value:function(){return Ot?this.renderReact16():null}}]),n}(r.Component);Et(Ft,"propTypes",{children:$().oneOfType([$().element,$().array]),hasChildren:$().bool,id:$().oneOfType([$().string,$().number]),placement:$().string,setRef:$().func.isRequired,target:$().oneOfType([$().object,$().string]),zIndex:$().number});var Vt=function(e){St(n,e);var t=_t(n);function n(){return bt(this,n),t.apply(this,arguments)}return xt(n,[{key:"parentStyle",get:function(){var e=this.props,t=e.placement,n=e.styles.arrow.length,r={pointerEvents:"none",position:"absolute",width:"100%"};return t.startsWith("top")?(r.bottom=0,r.left=0,r.right=0,r.height=n):t.startsWith("bottom")?(r.left=0,r.right=0,r.top=0,r.height=n):t.startsWith("left")?(r.right=0,r.top=0,r.bottom=0):t.startsWith("right")&&(r.left=0,r.top=0),r}},{key:"render",value:function(){var e,t=this.props,n=t.placement,i=t.setArrowRef,s=t.styles.arrow,o=s.color,a=s.display,l=s.length,c=s.margin,u=s.position,d=s.spread,h={display:a,position:u},p=d,f=l;return n.startsWith("top")?(e="0,0 ".concat(p/2,",").concat(f," ").concat(p,",0"),h.bottom=0,h.marginLeft=c,h.marginRight=c):n.startsWith("bottom")?(e="".concat(p,",").concat(f," ").concat(p/2,",0 0,").concat(f),h.top=0,h.marginLeft=c,h.marginRight=c):n.startsWith("left")?(f=d,e="0,0 ".concat(p=l,",").concat(f/2," 0,").concat(f),h.right=0,h.marginTop=c,h.marginBottom=c):n.startsWith("right")&&(f=d,e="".concat(p=l,",").concat(f," ").concat(p,",0 0,").concat(f/2),h.left=0,h.marginTop=c,h.marginBottom=c),r.createElement("div",{className:"__floater__arrow",style:this.parentStyle},r.createElement("span",{ref:i,style:h},r.createElement("svg",{width:p,height:f,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.createElement("polygon",{points:e,fill:o}))))}}]),n}(r.Component);Et(Vt,"propTypes",{placement:$().string.isRequired,setArrowRef:$().func.isRequired,styles:$().object.isRequired});var zt=["color","height","width"];function Ut(e){var t=e.handleClick,n=e.styles,i=n.color,s=n.height,o=n.width,a=kt(n,zt);return r.createElement("button",{"aria-label":"close",onClick:t,style:a,type:"button"},r.createElement("svg",{width:"".concat(o,"px"),height:"".concat(s,"px"),viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},r.createElement("g",null,r.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:i}))))}function $t(e){var t=e.content,n=e.footer,i=e.handleClick,s=e.open,o=e.positionWrapper,a=e.showCloseButton,l=e.title,c=e.styles,u={content:r.isValidElement(t)?t:r.createElement("div",{className:"__floater__content",style:c.content},t)};return l&&(u.title=r.isValidElement(l)?l:r.createElement("div",{className:"__floater__title",style:c.title},l)),n&&(u.footer=r.isValidElement(n)?n:r.createElement("div",{className:"__floater__footer",style:c.footer},n)),!a&&!o||et.boolean(s)||(u.close=r.createElement(Ut,{styles:c.close,handleClick:i})),r.createElement("div",{className:"__floater__container",style:c.container},u.close,u.title,u.content,u.footer)}Ut.propTypes={handleClick:$().func.isRequired,styles:$().object.isRequired},$t.propTypes={content:$().node.isRequired,footer:$().node,handleClick:$().func.isRequired,open:$().bool,positionWrapper:$().bool.isRequired,showCloseButton:$().bool.isRequired,styles:$().object.isRequired,title:$().node};var Bt=function(e){St(n,e);var t=_t(n);function n(){return bt(this,n),t.apply(this,arguments)}return xt(n,[{key:"style",get:function(){var e=this.props,t=e.disableAnimation,n=e.component,r=e.placement,i=e.hideArrow,s=e.status,o=e.styles,a=o.arrow.length,l=o.floater,c=o.floaterCentered,u=o.floaterClosing,d=o.floaterOpening,h=o.floaterWithAnimation,p=o.floaterWithComponent,f={};return i||(r.startsWith("top")?f.padding="0 0 ".concat(a,"px"):r.startsWith("bottom")?f.padding="".concat(a,"px 0 0"):r.startsWith("left")?f.padding="0 ".concat(a,"px 0 0"):r.startsWith("right")&&(f.padding="0 0 0 ".concat(a,"px"))),-1!==[Rt.OPENING,Rt.OPEN].indexOf(s)&&(f=yt(yt({},f),d)),s===Rt.CLOSING&&(f=yt(yt({},f),u)),s!==Rt.OPEN||t||(f=yt(yt({},f),h)),"center"===r&&(f=yt(yt({},f),c)),n&&(f=yt(yt({},f),p)),yt(yt({},l),f)}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.handleClick,i=e.hideArrow,s=e.setFloaterRef,o=e.status,a={},l=["__floater"];return a.content=t?r.isValidElement(t)?r.cloneElement(t,{closeFn:n}):t({closeFn:n}):r.createElement($t,this.props),o===Rt.OPEN&&l.push("__floater__open"),i||(a.arrow=r.createElement(Vt,this.props)),r.createElement("div",{ref:s,className:l.join(" "),style:this.style},r.createElement("div",{className:"__floater__body"},a.content,a.arrow))}}]),n}(r.Component);Et(Bt,"propTypes",{component:$().oneOfType([$().func,$().element]),content:$().node,disableAnimation:$().bool.isRequired,footer:$().node,handleClick:$().func.isRequired,hideArrow:$().bool.isRequired,open:$().bool,placement:$().string.isRequired,positionWrapper:$().bool.isRequired,setArrowRef:$().func.isRequired,setFloaterRef:$().func.isRequired,showCloseButton:$().bool,status:$().string.isRequired,styles:$().object.isRequired,title:$().node});var Ht=function(e){St(n,e);var t=_t(n);function n(){return bt(this,n),t.apply(this,arguments)}return xt(n,[{key:"render",value:function(){var e,t=this.props,n=t.children,i=t.handleClick,s=t.handleMouseEnter,o=t.handleMouseLeave,a=t.setChildRef,l=t.setWrapperRef,c=t.style,u=t.styles;if(n)if(1===r.Children.count(n))if(r.isValidElement(n)){var d=et.function(n.type)?"innerRef":"ref";e=r.cloneElement(r.Children.only(n),Et({},d,a))}else e=r.createElement("span",null,n);else e=n;return e?r.createElement("span",{ref:l,style:yt(yt({},u),c),onClick:i,onMouseEnter:s,onMouseLeave:o},e):null}}]),n}(r.Component);Et(Ht,"propTypes",{children:$().node,handleClick:$().func.isRequired,handleMouseEnter:$().func.isRequired,handleMouseLeave:$().func.isRequired,setChildRef:$().func.isRequired,setWrapperRef:$().func.isRequired,style:$().object,styles:$().object.isRequired});var qt={zIndex:100};var Wt=["arrow","flip","offset"],Gt=["position","top","right","bottom","left"],Kt=function(e){St(n,e);var t=_t(n);function n(e){var r;return bt(this,n),Et(Nt(r=t.call(this,e)),"setArrowRef",function(e){r.arrowRef=e}),Et(Nt(r),"setChildRef",function(e){r.childRef=e}),Et(Nt(r),"setFloaterRef",function(e){r.floaterRef=e}),Et(Nt(r),"setWrapperRef",function(e){r.wrapperRef=e}),Et(Nt(r),"handleTransitionEnd",function(){var e=r.state.status,t=r.props.callback;r.wrapperPopper&&r.wrapperPopper.instance.update(),r.setState({status:e===Rt.OPENING?Rt.OPEN:Rt.IDLE},function(){var e=r.state.status;t(e===Rt.OPEN?"open":"close",r.props)})}),Et(Nt(r),"handleClick",function(){var e=r.props,t=e.event,n=e.open;if(!et.boolean(n)){var i=r.state,s=i.positionWrapper,o=i.status;("click"===r.event||"hover"===r.event&&s)&&(Mt({title:"click",data:[{event:t,status:o===Rt.OPEN?"closing":"opening"}],debug:r.debug}),r.toggle())}}),Et(Nt(r),"handleMouseEnter",function(){var e=r.props,t=e.event,n=e.open;if(!et.boolean(n)&&!Dt()){var i=r.state.status;"hover"===r.event&&i===Rt.IDLE&&(Mt({title:"mouseEnter",data:[{key:"originalEvent",value:t}],debug:r.debug}),clearTimeout(r.eventDelayTimeout),r.toggle())}}),Et(Nt(r),"handleMouseLeave",function(){var e=r.props,t=e.event,n=e.eventDelay,i=e.open;if(!et.boolean(i)&&!Dt()){var s=r.state,o=s.status,a=s.positionWrapper;"hover"===r.event&&(Mt({title:"mouseLeave",data:[{key:"originalEvent",value:t}],debug:r.debug}),n?-1===[Rt.OPENING,Rt.OPEN].indexOf(o)||a||r.eventDelayTimeout||(r.eventDelayTimeout=setTimeout(function(){delete r.eventDelayTimeout,r.toggle()},1e3*n)):r.toggle(Rt.IDLE))}}),r.state={currentPlacement:e.placement,needsUpdate:!1,positionWrapper:e.wrapperOptions.position&&!!e.target,status:Rt.INIT,statusWrapper:Rt.INIT},r._isMounted=!1,r.hasMounted=!1,jt()&&window.addEventListener("load",function(){r.popper&&r.popper.instance.update(),r.wrapperPopper&&r.wrapperPopper.instance.update()}),r}return xt(n,[{key:"componentDidMount",value:function(){if(jt()){var e=this.state.positionWrapper,t=this.props,n=t.children,r=t.open,i=t.target;this._isMounted=!0,Mt({title:"init",data:{hasChildren:!!n,hasTarget:!!i,isControlled:et.boolean(r),positionWrapper:e,target:this.target,floater:this.floaterRef},debug:this.debug}),this.hasMounted||(this.initPopper(),this.hasMounted=!0),!n&&i&&et.boolean(r)}}},{key:"componentDidUpdate",value:function(e,t){if(jt()){var n,r=this.props,i=r.autoOpen,s=r.open,o=r.target,a=r.wrapperOptions,l=function(e,t){if([e,t].some(et.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every(function(e){return et.plainObject(e)||et.array(e)}))throw new Error("Expected plain objects or array");var n=function(n,r,i){try{var s=gt(e,n),o=gt(t,n),a=et.defined(r),l=et.defined(i);if(a||l){var c=l?pt(i,s):!pt(r,s),u=pt(r,o);return c&&u}return[s,o].every(et.array)||[s,o].every(et.plainObject)?!at(s,o):s!==o}catch(d){return!1}};return{added:function(n,r){try{return ct(e,t,{key:n,type:"added",value:r})}catch(i){return!1}},changed:n,changedFrom:function(n,r,i){if(!et.defined(n))return!1;try{var s=gt(e,n),o=gt(t,n),a=et.defined(i);return pt(r,s)&&(a?pt(i,o):!a)}catch(l){return!1}},changedTo:function(e,t){return!!et.defined(e)&&n(e,t)},decreased:function(n,r,i){if(!et.defined(n))return!1;try{return lt(e,t,{key:n,actual:r,previous:i,type:"decreased"})}catch(s){return!1}},emptied:function(n){try{var r=ut(e,t,{key:n}),i=r[0],s=r[1];return!!i.length&&!s.length}catch(o){return!1}},filled:function(n){try{var r=ut(e,t,{key:n}),i=r[0],s=r[1];return!i.length&&!!s.length}catch(o){return!1}},increased:function(n,r,i){if(!et.defined(n))return!1;try{return lt(e,t,{key:n,actual:r,previous:i,type:"increased"})}catch(s){return!1}},removed:function(n,r){try{return ct(e,t,{key:n,type:"removed",value:r})}catch(i){return!1}}}}(t,this.state),c=l.changedFrom,u=l.changed;if(e.open!==s)et.boolean(s)&&(n=s?Rt.OPENING:Rt.CLOSING),this.toggle(n);e.wrapperOptions.position===a.position&&e.target===o||this.changeWrapperPosition(this.props),(u("status",Rt.IDLE)&&s||c("status",Rt.INIT,Rt.IDLE)&&i)&&this.toggle(Rt.OPEN),this.popper&&u("status",Rt.OPENING)&&this.popper.instance.update(),this.floaterRef&&(u("status",Rt.OPENING)||u("status",Rt.CLOSING))&&function(e,t,n){var r;r=function(i){n(i),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,n,r)}(e,t,r)},function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r)}(e,t,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(this.floaterRef,"transitionend",this.handleTransitionEnd),u("needsUpdate",!0)&&this.rebuildPopper()}}},{key:"componentWillUnmount",value:function(){jt()&&(this._isMounted=!1,this.popper&&this.popper.instance.destroy(),this.wrapperPopper&&this.wrapperPopper.instance.destroy())}},{key:"initPopper",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target,n=this.state.positionWrapper,r=this.props,i=r.disableFlip,s=r.getPopper,o=r.hideArrow,a=r.offset,l=r.placement,c=r.wrapperOptions,u="top"===l||"bottom"===l?"flip":["right","bottom-end","top-end","left","top-start","bottom-start"];if("center"===l)this.setState({status:Rt.IDLE});else if(t&&this.floaterRef){var d=this.options,h=d.arrow,p=d.flip,f=d.offset,m=kt(d,Wt);new We(t,this.floaterRef,{placement:l,modifiers:yt({arrow:yt({enabled:!o,element:this.arrowRef},h),flip:yt({enabled:!i,behavior:u},p),offset:yt({offset:"0, ".concat(a,"px")},f)},m),onCreate:function(t){var n;e.popper=t,null!==(n=e.floaterRef)&&void 0!==n&&n.isConnected?(s(t,"floater"),e._isMounted&&e.setState({currentPlacement:t.placement,status:Rt.IDLE}),l!==t.placement&&setTimeout(function(){t.instance.update()},1)):e.setState({needsUpdate:!0})},onUpdate:function(t){e.popper=t;var n=e.state.currentPlacement;e._isMounted&&t.placement!==n&&e.setState({currentPlacement:t.placement})}})}if(n){var g=et.undefined(c.offset)?0:c.offset;new We(this.target,this.wrapperRef,{placement:c.placement||l,modifiers:{arrow:{enabled:!1},offset:{offset:"0, ".concat(g,"px")},flip:{enabled:!1}},onCreate:function(t){e.wrapperPopper=t,e._isMounted&&e.setState({statusWrapper:Rt.IDLE}),s(t,"wrapper"),l!==t.placement&&setTimeout(function(){t.instance.update()},1)}})}}},{key:"rebuildPopper",value:function(){var e=this;this.floaterRefInterval=setInterval(function(){var t;null!==(t=e.floaterRef)&&void 0!==t&&t.isConnected&&(clearInterval(e.floaterRefInterval),e.setState({needsUpdate:!1}),e.initPopper())},50)}},{key:"changeWrapperPosition",value:function(e){var t=e.target,n=e.wrapperOptions;this.setState({positionWrapper:n.position&&!!t})}},{key:"toggle",value:function(e){var t=this.state.status===Rt.OPEN?Rt.CLOSING:Rt.OPENING;et.undefined(e)||(t=e),this.setState({status:t})}},{key:"debug",get:function(){return this.props.debug||jt()&&"ReactFloaterDebug"in window&&!!window.ReactFloaterDebug}},{key:"event",get:function(){var e=this.props,t=e.disableHoverToClick,n=e.event;return"hover"===n&&Dt()&&!t?"click":n}},{key:"options",get:function(){var e=this.props.options;return z()(It,e||{})}},{key:"styles",get:function(){var e,t=this,n=this.state,r=n.status,i=n.positionWrapper,s=n.statusWrapper,o=this.props.styles,a=z()(function(e){var t=z()(qt,e.options||{});return{wrapper:{cursor:"help",display:"inline-flex",flexDirection:"column",zIndex:t.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:t.zIndex},floaterOpening:{opacity:1,visibility:"visible"},floaterWithAnimation:{opacity:1,transition:"opacity 0.3s, transform 0.2s",visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},floaterClosing:{opacity:0,visibility:"visible"},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},arrow:{color:"#fff",display:"inline-flex",length:16,margin:8,position:"absolute",spread:32},options:t}}(o),o);i&&(e=-1===[Rt.IDLE].indexOf(r)||-1===[Rt.IDLE].indexOf(s)?a.wrapperPosition:this.wrapperPopper.styles,a.wrapper=yt(yt({},a.wrapper),e));if(this.target){var l=window.getComputedStyle(this.target);this.wrapperStyles?a.wrapper=yt(yt({},a.wrapper),this.wrapperStyles):-1===["relative","static"].indexOf(l.position)&&(this.wrapperStyles={},i||(Gt.forEach(function(e){t.wrapperStyles[e]=l[e]}),a.wrapper=yt(yt({},a.wrapper),this.wrapperStyles),this.target.style.position="relative",this.target.style.top="auto",this.target.style.right="auto",this.target.style.bottom="auto",this.target.style.left="auto"))}return a}},{key:"target",get:function(){if(!jt())return null;var e=this.props.target;return e?et.domElement(e)?e:document.querySelector(e):this.childRef||this.wrapperRef}},{key:"render",value:function(){var e=this.state,t=e.currentPlacement,n=e.positionWrapper,i=e.status,s=this.props,o=s.children,a=s.component,l=s.content,c=s.disableAnimation,u=s.footer,d=s.hideArrow,h=s.id,p=s.open,f=s.showCloseButton,m=s.style,g=s.target,v=s.title,y=r.createElement(Ht,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:m,styles:this.styles.wrapper},o),b={};return n?b.wrapperInPortal=y:b.wrapperAsChildren=y,r.createElement("span",null,r.createElement(Ft,{hasChildren:!!o,id:h,placement:t,setRef:this.setFloaterRef,target:g,zIndex:this.styles.options.zIndex},r.createElement(Bt,{component:a,content:l,disableAnimation:c,footer:u,handleClick:this.handleClick,hideArrow:d||"center"===t,open:p,placement:t,positionWrapper:n,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:f,status:i,styles:this.styles,title:v}),b.wrapperInPortal),b.wrapperAsChildren)}}]),n}(r.Component);Et(Kt,"propTypes",{autoOpen:$().bool,callback:$().func,children:$().node,component:Pt($().oneOfType([$().func,$().element]),function(e){return!e.content}),content:Pt($().node,function(e){return!e.component}),debug:$().bool,disableAnimation:$().bool,disableFlip:$().bool,disableHoverToClick:$().bool,event:$().oneOf(["hover","click"]),eventDelay:$().number,footer:$().node,getPopper:$().func,hideArrow:$().bool,id:$().oneOfType([$().string,$().number]),offset:$().number,open:$().bool,options:$().object,placement:$().oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto","center"]),showCloseButton:$().bool,style:$().object,styles:$().object,target:$().oneOfType([$().object,$().string]),title:$().node,wrapperOptions:$().shape({offset:$().number,placement:$().oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto"]),position:$().bool})}),Et(Kt,"defaultProps",{autoOpen:!1,callback:Lt,debug:!1,disableAnimation:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,getPopper:Lt,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1}});var Qt=Object.defineProperty,Yt=(e,t,n)=>((e,t,n)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!==typeof t?t+"":t,n),Xt="init",Jt="start",Zt="stop",en="reset",tn="prev",nn="next",rn="go",sn="close",on="skip",an="update",ln="tour:start",cn="step:before",un="beacon",dn="tooltip",hn="step:after",pn="tour:end",fn="tour:status",mn="error:target_not_found",gn={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},vn={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"};function yn(){var e;return!("undefined"===typeof window||!(null==(e=window.document)?void 0:e.createElement))}function bn(e){return e?e.getBoundingClientRect():null}function wn(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{body:t,documentElement:n}=document;if(!t||!n)return 0;if(e){const e=[t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight].sort((e,t)=>e-t),r=Math.floor(e.length/2);return e.length%2===0?(e[r-1]+e[r])/2:e[r]}return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)}function xn(e){if("string"===typeof e)try{return document.querySelector(e)}catch(t){return null}return e}function En(e,t,n){if(!e)return kn();const r=M(e);if(r){if(r.isSameNode(kn()))return n?document:kn();if(!(r.scrollHeight>r.offsetHeight)&&!t)return r.style.overflow="initial",kn()}return r}function Sn(e,t){if(!e)return!1;const n=En(e,t);return!!n&&!n.isSameNode(kn())}function Tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fixed";if(!e||!(e instanceof HTMLElement))return!1;const{nodeName:n}=e,r=function(e){return e&&1===e.nodeType?getComputedStyle(e):null}(e);return"BODY"!==n&&"HTML"!==n&&(!(!r||r.position!==t)||!!e.parentNode&&Tn(e.parentNode,t))}function Cn(e,t,n){var r;if(!e)return 0;const{offsetTop:i=0,scrollTop:s=0}=null!=(r=M(e))?r:{};let o=e.getBoundingClientRect().top+s;i&&(Sn(e,n)||function(e){return e.offsetParent!==document.body}(e))&&(o-=i);const a=Math.floor(o-t);return a<0?0:a}function kn(){var e;return null!=(e=document.scrollingElement)?e:document.documentElement}var Nn=void 0!==L.createPortal;function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,t=e;return"undefined"===typeof window?t="node":document.documentMode?t="ie":/Edge/.test(e)?t="edge":Boolean(window.opera)||e.includes(" OPR/")?t="opera":"undefined"!==typeof window.InstallTrigger?t="firefox":window.chrome?t="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(e)&&(t="safari"),t}function An(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function In(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{defaultValue:n,step:i,steps:s}=t;let o=F(e);if(o)(o.includes("{step}")||o.includes("{steps}"))&&i&&s&&(o=o.replace("{step}",i.toString()).replace("{steps}",s.toString()));else if((0,r.isValidElement)(e)&&!Object.values(e.props).length&&"function"===An(e.type)){o=In(e.type({}),t)}else o=F(n);return o}function Pn(e){const t=e.replace(/^#?([\da-f])([\da-f])([\da-f])$/i,(e,t,n,r)=>t+t+n+n+r+r),n=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}function Rn(e){return e.disableBeacon||"center"===e.placement}function On(){return!["chrome","safari","firefox","opera"].includes(_n())}function jn(e){let{data:t,debug:n=!1,title:r,warn:i=!1}=e;const s=i?console.warn||console.error:console.log;n&&(r&&t?(console.groupCollapsed(`%creact-joyride: ${r}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(t)?t.forEach(e=>{T.plainObject(e)&&e.key?s.apply(console,[e.key,e.value]):s.apply(console,[e])}):s.apply(console,[t]),console.groupEnd()):console.error("Missing title or data props"))}function Dn(e){if(!T.plainObject(e))throw new TypeError("Expected an object");const t={};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s in e)({}).hasOwnProperty.call(e,s)&&(r.includes(s)||(t[s]=e[s]));return t}function Mn(e,t,n){const i=e=>e.replace("{step}",String(t)).replace("{steps}",String(n));if("string"===An(e))return i(e);if(!(0,r.isValidElement)(e))return e;const{children:s}=e.props;if("string"===An(s)&&s.includes("{step}"))return(0,r.cloneElement)(e,{children:i(s)});if(Array.isArray(s))return(0,r.cloneElement)(e,{children:s.map(e=>"string"===typeof e?i(e):Mn(e,t,n))});if("function"===An(e.type)&&!Object.values(e.props).length){return Mn(e.type({}),t,n)}return e}var Ln={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},Fn={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},Vn={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:Fn,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},zn={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},Un={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},$n={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},Bn={borderRadius:4,position:"absolute"};function Hn(e){return function(e){if(!T.plainObject(e))throw new TypeError("Expected an object");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i={};for(const s in e)({}).hasOwnProperty.call(e,s)&&n.includes(s)&&(i[s]=e[s]);return i}(e,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function qn(e,t){var n,r,i,s,o,a;const l=null!=t?t:{},c=V.all([Vn,Hn(e),l],{isMergeableObject:T.plainObject}),u=function(e,t){var n,r,i,s,o;const{floaterProps:a,styles:l}=e,c=V(null!=(n=t.floaterProps)?n:{},null!=a?a:{}),u=V(null!=l?l:{},null!=(r=t.styles)?r:{}),d=V(Un,u.options||{}),h="center"===t.placement||t.disableBeacon;let{width:p}=d;window.innerWidth>480&&(p=380),"width"in d&&(p="number"===typeof d.width&&window.innerWidth<d.width?window.innerWidth-30:d.width);const f={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:d.zIndex},m={beacon:{...$n,display:h?"none":"inline-block",height:d.beaconSize,position:"relative",width:d.beaconSize,zIndex:d.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:d.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${Pn(d.primaryColor).join(",")}, 0.2)`,border:`2px solid ${d.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:d.backgroundColor,borderRadius:5,boxSizing:"border-box",color:d.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:p},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...$n,backgroundColor:d.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...$n,color:d.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...$n,color:d.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...$n,color:d.textColor,fontSize:14},overlay:{...f,backgroundColor:d.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...f},overlayLegacyCenter:{...f,backgroundColor:d.overlayColor},spotlight:{...Bn,backgroundColor:"gray"},spotlightLegacy:{...Bn,boxShadow:`0 0 0 9999px ${d.overlayColor}, ${d.spotlightShadow}`},floaterStyles:{arrow:{color:null!=(o=null==(s=null==(i=null==c?void 0:c.styles)?void 0:i.arrow)?void 0:s.color)?o:d.arrowColor},options:{zIndex:d.zIndex+100}},options:d};return V(m,u)}(e,c),d=Sn(xn(c.target),c.disableScrollParentFix),h=V.all([Ln,null!=(n=e.floaterProps)?n:{},null!=(r=c.floaterProps)?r:{}]);return h.offset=c.offset,h.styles=V(null!=(i=h.styles)?i:{},u.floaterStyles),h.offset+=null!=(o=null!=(s=e.spotlightPadding)?s:c.spotlightPadding)?o:0,c.placementBeacon&&h.wrapperOptions&&(h.wrapperOptions.placement=c.placementBeacon),d&&h.options.preventOverflow&&(h.options.preventOverflow.boundariesElement="window"),{...c,locale:V.all([Fn,null!=(a=e.locale)?a:{},c.locale||{}]),floaterProps:h,styles:Dn(u,"floaterStyles")}}function Wn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return T.plainObject(e)?!!e.target||(jn({title:"validateStep",data:"target is missing from the step",warn:!0,debug:t}),!1):(jn({title:"validateStep",data:"step must be an object",warn:!0,debug:t}),!1)}function Gn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return T.array(e)?e.every(e=>Wn(e,t)):(jn({title:"validateSteps",data:"steps must be an array",warn:!0,debug:t}),!1)}var Kn,Qn={action:"init",controlled:!1,index:0,lifecycle:gn.INIT,origin:null,size:0,status:vn.IDLE},Yn=(Kn=Dn(Qn,"controlled","size"),Object.keys(Kn)),Xn=class{constructor(e){var t=this;Yt(this,"beaconPopper"),Yt(this,"tooltipPopper"),Yt(this,"data",new Map),Yt(this,"listener"),Yt(this,"store",new Map),Yt(this,"addListener",e=>{this.listener=e}),Yt(this,"setSteps",e=>{const{size:t,status:n}=this.getState(),r={size:e.length,status:n};this.data.set("steps",e),n===vn.WAITING&&!t&&e.length&&(r.status=vn.RUNNING),this.setState(r)}),Yt(this,"getPopper",e=>"beacon"===e?this.beaconPopper:this.tooltipPopper),Yt(this,"setPopper",(e,t)=>{"beacon"===e?this.beaconPopper=t:this.tooltipPopper=t}),Yt(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),Yt(this,"close",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{index:n,status:r}=t.getState();r===vn.RUNNING&&t.setState({...t.getNextState({action:sn,index:n+1,origin:e})})}),Yt(this,"go",e=>{const{controlled:t,status:n}=this.getState();if(t||n!==vn.RUNNING)return;const r=this.getSteps()[e];this.setState({...this.getNextState({action:rn,index:e}),status:r?n:vn.FINISHED})}),Yt(this,"info",()=>this.getState()),Yt(this,"next",()=>{const{index:e,status:t}=this.getState();t===vn.RUNNING&&this.setState(this.getNextState({action:nn,index:e+1}))}),Yt(this,"open",()=>{const{status:e}=this.getState();e===vn.RUNNING&&this.setState({...this.getNextState({action:an,lifecycle:gn.TOOLTIP})})}),Yt(this,"prev",()=>{const{index:e,status:t}=this.getState();t===vn.RUNNING&&this.setState({...this.getNextState({action:tn,index:e-1})})}),Yt(this,"reset",function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{controlled:n}=t.getState();n||t.setState({...t.getNextState({action:en,index:0}),status:e?vn.RUNNING:vn.READY})}),Yt(this,"skip",()=>{const{status:e}=this.getState();e===vn.RUNNING&&this.setState({action:on,lifecycle:gn.INIT,status:vn.SKIPPED})}),Yt(this,"start",e=>{const{index:t,size:n}=this.getState();this.setState({...this.getNextState({action:Jt,index:T.number(e)?e:t},!0),status:n?vn.RUNNING:vn.WAITING})}),Yt(this,"stop",function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{index:n,status:r}=t.getState();[vn.FINISHED,vn.SKIPPED].includes(r)||t.setState({...t.getNextState({action:Zt,index:n+(e?1:0)}),status:vn.PAUSED})}),Yt(this,"update",e=>{var t,n,r,i;if(r=e,i=Yn,!(T.plainObject(r)&&T.array(i)&&Object.keys(r).every(e=>i.includes(e))))throw new Error(`State is not valid. Valid keys: ${Yn.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...e,action:null!=(t=e.action)?t:an,origin:null!=(n=e.origin)?n:null},!0)})});const{continuous:n=!1,stepIndex:r,steps:i=[]}=null!=e?e:{};this.setState({action:Xt,controlled:T.number(r),continuous:n,index:T.number(r)?r:0,lifecycle:gn.INIT,origin:null,status:i.length?vn.READY:vn.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(i)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...Qn}}getNextState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r,i,s,o;const{action:a,controlled:l,index:c,size:u,status:d}=this.getState(),h=T.number(e.index)?e.index:c,p=l&&!t?c:Math.min(Math.max(h,0),u);return{action:null!=(n=e.action)?n:a,controlled:l,index:p,lifecycle:null!=(r=e.lifecycle)?r:gn.INIT,origin:null!=(i=e.origin)?i:null,size:null!=(s=e.size)?s:u,status:p===u?vn.FINISHED:null!=(o=e.status)?o:d}}getSteps(){const e=this.data.get("steps");return Array.isArray(e)?e:[]}hasUpdatedState(e){return JSON.stringify(e)!==JSON.stringify(this.getState())}setState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.getState(),{action:r,index:i,lifecycle:s,origin:o=null,size:a,status:l}={...n,...e};this.store.set("action",r),this.store.set("index",i),this.store.set("lifecycle",s),this.store.set("origin",o),this.store.set("size",a),this.store.set("status",l),t&&(this.store.set("controlled",e.controlled),this.store.set("continuous",e.continuous)),this.listener&&this.hasUpdatedState(n)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};var Jn=function(e){let{styles:t}=e;return r.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:t})},Zn=class extends r.Component{constructor(){super(...arguments),Yt(this,"isActive",!1),Yt(this,"resizeTimeout"),Yt(this,"scrollTimeout"),Yt(this,"scrollParent"),Yt(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),Yt(this,"hideSpotlight",()=>{const{continuous:e,disableOverlay:t,lifecycle:n}=this.props,r=[gn.INIT,gn.BEACON,gn.COMPLETE,gn.ERROR];return t||(e?r.includes(n):n!==gn.TOOLTIP)}),Yt(this,"handleMouseMove",e=>{const{mouseOverSpotlight:t}=this.state,{height:n,left:r,position:i,top:s,width:o}=this.spotlightStyles,a="fixed"===i?e.clientY:e.pageY,l="fixed"===i?e.clientX:e.pageX,c=l>=r&&l<=r+o&&(a>=s&&a<=s+n);c!==t&&this.updateState({mouseOverSpotlight:c})}),Yt(this,"handleScroll",()=>{const{target:e}=this.props,t=xn(e);if(this.scrollParent!==document){const{isScrolling:e}=this.state;e||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else Tn(t,"sticky")&&this.updateState({})}),Yt(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:e,disableScrolling:t,disableScrollParentFix:n=!1,target:r}=this.props,i=xn(r);this.scrollParent=En(null!=i?i:document.body,n,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){var t;const{disableScrollParentFix:n,lifecycle:r,spotlightClicks:i,target:s}=this.props,{changed:o}=j(e,this.props);if(o("target")||o("disableScrollParentFix")){const e=xn(s);this.scrollParent=En(null!=e?e:document.body,n,!0)}o("lifecycle",gn.TOOLTIP)&&(null==(t=this.scrollParent)||t.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:e}=this.state;e||this.updateState({showSpotlight:!0})},100)),(o("spotlightClicks")||o("disableOverlay")||o("lifecycle"))&&(i&&r===gn.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):r!==gn.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var e;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),null==(e=this.scrollParent)||e.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:e}=this.state,{disableOverlayClose:t,placement:n,styles:r}=this.props;let i=r.overlay;return On()&&(i="center"===n?r.overlayLegacyCenter:r.overlayLegacy),{cursor:t?"default":"pointer",height:wn(),pointerEvents:e?"none":"auto",...i}}get spotlightStyles(){var e,t,n;const{showSpotlight:r}=this.state,{disableScrollParentFix:i=!1,spotlightClicks:s,spotlightPadding:o=0,styles:a,target:l}=this.props,c=xn(l),u=bn(c),d=Tn(c),h=function(e,t,n){var r,i,s;const o=bn(e),a=En(e,n),l=Sn(e,n),c=Tn(e);let u=0,d=null!=(r=null==o?void 0:o.top)?r:0;l&&c?d=(null!=(i=null==e?void 0:e.offsetTop)?i:0)-(null!=(s=null==a?void 0:a.scrollTop)?s:0):a instanceof HTMLElement&&(u=a.scrollTop,l||Tn(e)||(d+=u),a.isSameNode(kn())||(d+=kn().scrollTop));return Math.floor(d-t)}(c,o,i);return{...On()?a.spotlightLegacy:a.spotlight,height:Math.round((null!=(e=null==u?void 0:u.height)?e:0)+2*o),left:Math.round((null!=(t=null==u?void 0:u.left)?t:0)-o),opacity:r?1:0,pointerEvents:s?"none":"auto",position:d?"fixed":"absolute",top:h,transition:"opacity 0.2s",width:Math.round((null!=(n=null==u?void 0:u.width)?n:0)+2*o)}}updateState(e){this.isActive&&this.setState(t=>({...t,...e}))}render(){const{showSpotlight:e}=this.state,{onClickOverlay:t,placement:n}=this.props,{hideSpotlight:i,overlayStyles:s,spotlightStyles:o}=this;if(i())return null;let a="center"!==n&&e&&r.createElement(Jn,{styles:o});if("safari"===_n()){const{mixBlendMode:e,zIndex:t,...n}=s;a=r.createElement("div",{style:{...n}},a),delete s.backgroundColor}return r.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:t,role:"presentation",style:s},a)}},er=class extends r.Component{constructor(){super(...arguments),Yt(this,"node",null)}componentDidMount(){const{id:e}=this.props;yn()&&(this.node=document.createElement("div"),this.node.id=e,document.body.appendChild(this.node),Nn||this.renderReact15())}componentDidUpdate(){yn()&&(Nn||this.renderReact15())}componentWillUnmount(){yn()&&this.node&&(Nn||L.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!yn())return;const{children:e}=this.props;this.node&&L.unstable_renderSubtreeIntoContainer(this,e,this.node)}renderReact16(){if(!yn()||!Nn)return null;const{children:e}=this.props;return this.node?L.createPortal(e,this.node):null}render(){return Nn?this.renderReact16():null}},tr=class{constructor(e,t){if(Yt(this,"element"),Yt(this,"options"),Yt(this,"canBeTabbed",e=>{const{tabIndex:t}=e;return!(null===t||t<0)&&this.canHaveFocus(e)}),Yt(this,"canHaveFocus",e=>{const t=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(t)&&!e.getAttribute("disabled")||"a"===t&&!!e.getAttribute("href"))&&this.isVisible(e)}),Yt(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),Yt(this,"handleKeyDown",e=>{const{code:t="Tab"}=this.options;e.code===t&&this.interceptTab(e)}),Yt(this,"interceptTab",e=>{e.preventDefault();const t=this.findValidTabElements(),{shiftKey:n}=e;if(!t.length)return;let r=document.activeElement?t.indexOf(document.activeElement):0;-1===r||!n&&r+1===t.length?r=0:n&&0===r?r=t.length-1:r+=n?-1:1,t[r].focus()}),Yt(this,"isHidden",e=>{const t=e.offsetWidth<=0&&e.offsetHeight<=0,n=window.getComputedStyle(e);return!(!t||e.innerHTML)||(t&&"visible"!==n.getPropertyValue("overflow")||"none"===n.getPropertyValue("display"))}),Yt(this,"isVisible",e=>{let t=e;for(;t;)if(t instanceof HTMLElement){if(t===document.body)break;if(this.isHidden(t))return!1;t=t.parentNode}return!0}),Yt(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),Yt(this,"checkFocus",e=>{document.activeElement!==e&&(e.focus(),window.requestAnimationFrame(()=>this.checkFocus(e)))}),Yt(this,"setFocus",()=>{const{selector:e}=this.options;if(!e)return;const t=this.element.querySelector(e);t&&window.requestAnimationFrame(()=>this.checkFocus(t))}),!(e instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=e,this.options=t,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},nr=class extends r.Component{constructor(e){if(super(e),Yt(this,"beacon",null),Yt(this,"setBeaconRef",e=>{this.beacon=e}),e.beaconComponent)return;const t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id="joyride-beacon-animation",e.nonce&&n.setAttribute("nonce",e.nonce);n.appendChild(document.createTextNode("\n        @keyframes joyride-beacon-inner {\n          20% {\n            opacity: 0.9;\n          }\n        \n          90% {\n            opacity: 0.7;\n          }\n        }\n        \n        @keyframes joyride-beacon-outer {\n          0% {\n            transform: scale(1);\n          }\n        \n          45% {\n            opacity: 0.7;\n            transform: scale(0.75);\n          }\n        \n          100% {\n            opacity: 0.9;\n            transform: scale(1);\n          }\n        }\n      ")),t.appendChild(n)}componentDidMount(){const{shouldFocus:e}=this.props;setTimeout(()=>{T.domElement(this.beacon)&&e&&this.beacon.focus()},0)}componentWillUnmount(){const e=document.getElementById("joyride-beacon-animation");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)}render(){const{beaconComponent:e,continuous:t,index:n,isLastStep:i,locale:s,onClickOrHover:o,size:a,step:l,styles:c}=this.props,u=In(s.open),d={"aria-label":u,onClick:o,onMouseEnter:o,ref:this.setBeaconRef,title:u};let h;if(e){const s=e;h=r.createElement(s,{continuous:t,index:n,isLastStep:i,size:a,step:l,...d})}else h=r.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:c.beacon,type:"button",...d},r.createElement("span",{style:c.beaconInner}),r.createElement("span",{style:c.beaconOuter}));return h}};var rr=function(e){let{styles:t,...n}=e;const{color:i,height:s,width:o,...a}=t;return r.createElement("button",{style:a,type:"button",...n},r.createElement("svg",{height:"number"===typeof s?`${s}px`:s,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:"number"===typeof o?`${o}px`:o,xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",null,r.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:i}))))};var ir=function(e){const{backProps:t,closeProps:n,index:i,isLastStep:s,primaryProps:o,skipProps:a,step:l,tooltipProps:c}=e,{content:u,hideBackButton:d,hideCloseButton:h,hideFooter:p,showSkipButton:f,styles:m,title:g}=l,v={};return v.primary=r.createElement("button",{"data-test-id":"button-primary",style:m.buttonNext,type:"button",...o}),f&&!s&&(v.skip=r.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:m.buttonSkip,type:"button",...a})),!d&&i>0&&(v.back=r.createElement("button",{"data-test-id":"button-back",style:m.buttonBack,type:"button",...t})),v.close=!h&&r.createElement(rr,{"data-test-id":"button-close",styles:m.buttonClose,...n}),r.createElement("div",{key:"JoyrideTooltip","aria-label":In(null!=g?g:u),className:"react-joyride__tooltip",style:m.tooltip,...c},r.createElement("div",{style:m.tooltipContainer},g&&r.createElement("h1",{"aria-label":In(g),style:m.tooltipTitle},g),r.createElement("div",{style:m.tooltipContent},u)),!p&&r.createElement("div",{style:m.tooltipFooter},r.createElement("div",{style:m.tooltipFooterSpacer},v.skip),v.back,v.primary),v.close)},sr=class extends r.Component{constructor(){super(...arguments),Yt(this,"handleClickBack",e=>{e.preventDefault();const{helpers:t}=this.props;t.prev()}),Yt(this,"handleClickClose",e=>{e.preventDefault();const{helpers:t}=this.props;t.close("button_close")}),Yt(this,"handleClickPrimary",e=>{e.preventDefault();const{continuous:t,helpers:n}=this.props;t?n.next():n.close("button_primary")}),Yt(this,"handleClickSkip",e=>{e.preventDefault();const{helpers:t}=this.props;t.skip()}),Yt(this,"getElementsProps",()=>{const{continuous:e,index:t,isLastStep:n,setTooltipRef:r,size:i,step:s}=this.props,{back:o,close:a,last:l,next:c,nextLabelWithProgress:u,skip:d}=s.locale,h=In(o),p=In(a),f=In(l),m=In(c),g=In(d);let v=a,y=p;if(e){if(v=c,y=m,s.showProgress&&!n){const e=In(u,{step:t+1,steps:i});v=Mn(u,t+1,i),y=e}n&&(v=l,y=f)}return{backProps:{"aria-label":h,children:o,"data-action":"back",onClick:this.handleClickBack,role:"button",title:h},closeProps:{"aria-label":p,children:a,"data-action":"close",onClick:this.handleClickClose,role:"button",title:p},primaryProps:{"aria-label":y,children:v,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:y},skipProps:{"aria-label":g,children:d,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:g},tooltipProps:{"aria-modal":!0,ref:r,role:"alertdialog"}}})}render(){const{continuous:e,index:t,isLastStep:n,setTooltipRef:i,size:s,step:o}=this.props,{beaconComponent:a,tooltipComponent:l,...c}=o;let u;if(l){const o={...this.getElementsProps(),continuous:e,index:t,isLastStep:n,size:s,step:c,setTooltipRef:i},a=l;u=r.createElement(a,{...o})}else u=r.createElement(ir,{...this.getElementsProps(),continuous:e,index:t,isLastStep:n,size:s,step:o});return u}},or=class extends r.Component{constructor(){super(...arguments),Yt(this,"scope",null),Yt(this,"tooltip",null),Yt(this,"handleClickHoverBeacon",e=>{const{step:t,store:n}=this.props;"mouseenter"===e.type&&"hover"!==t.event||n.update({lifecycle:gn.TOOLTIP})}),Yt(this,"setTooltipRef",e=>{this.tooltip=e}),Yt(this,"setPopper",(e,t)=>{var n;const{action:r,lifecycle:i,step:s,store:o}=this.props;"wrapper"===t?o.setPopper("beacon",e):o.setPopper("tooltip",e),o.getPopper("beacon")&&(o.getPopper("tooltip")||"center"===s.placement)&&i===gn.INIT&&o.update({action:r,lifecycle:gn.READY}),(null==(n=s.floaterProps)?void 0:n.getPopper)&&s.floaterProps.getPopper(e,t)}),Yt(this,"renderTooltip",e=>{const{continuous:t,helpers:n,index:i,size:s,step:o}=this.props;return r.createElement(sr,{continuous:t,helpers:n,index:i,isLastStep:i+1===s,setTooltipRef:this.setTooltipRef,size:s,step:o,...e})})}componentDidMount(){const{debug:e,index:t}=this.props;jn({title:`step:${t}`,data:[{key:"props",value:this.props}],debug:e})}componentDidUpdate(e){var t;const{action:n,callback:r,continuous:i,controlled:s,debug:o,helpers:a,index:l,lifecycle:c,shouldScroll:u,status:d,step:h,store:p}=this.props,{changed:f,changedFrom:m}=j(e,this.props),g=a.info(),v=i&&n!==sn&&(l>0||n===tn),y=f("action")||f("index")||f("lifecycle")||f("status"),b=m("lifecycle",[gn.TOOLTIP,gn.INIT],gn.INIT),w=f("action",[nn,tn,on,sn]),x=s&&l===e.index;if(w&&(b||x)&&r({...g,index:e.index,lifecycle:gn.COMPLETE,step:e.step,type:hn}),"center"===h.placement&&d===vn.RUNNING&&f("index")&&n!==Jt&&c===gn.INIT&&p.update({lifecycle:gn.READY}),y){const e=xn(h.target),t=!!e,i=t&&function(e){var t;if(!e)return!1;let n=e;for(;n&&n!==document.body;){if(n instanceof HTMLElement){const{display:e,visibility:t}=getComputedStyle(n);if("none"===e||"hidden"===t)return!1}n=null!=(t=n.parentElement)?t:null}return!0}(e);i?(m("status",vn.READY,vn.RUNNING)||m("lifecycle",gn.INIT,gn.READY))&&r({...g,step:h,type:cn}):(console.warn(t?"Target not visible":"Target not mounted",h),r({...g,type:mn,step:h}),s||p.update({index:l+(n===tn?-1:1)}))}m("lifecycle",gn.INIT,gn.READY)&&p.update({lifecycle:Rn(h)||v?gn.TOOLTIP:gn.BEACON}),f("index")&&jn({title:`step:${c}`,data:[{key:"props",value:this.props}],debug:o}),f("lifecycle",gn.BEACON)&&r({...g,step:h,type:un}),f("lifecycle",gn.TOOLTIP)&&(r({...g,step:h,type:dn}),u&&this.tooltip&&(this.scope=new tr(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),m("lifecycle",[gn.TOOLTIP,gn.INIT],gn.INIT)&&(null==(t=this.scope)||t.removeScope(),p.cleanupPoppers())}componentWillUnmount(){var e;null==(e=this.scope)||e.removeScope()}get open(){const{lifecycle:e,step:t}=this.props;return Rn(t)||e===gn.TOOLTIP}render(){const{continuous:e,debug:t,index:n,nonce:i,shouldScroll:s,size:o,step:a}=this.props,l=xn(a.target);return Wn(a)&&T.domElement(l)?r.createElement("div",{key:`JoyrideStep-${n}`,className:"react-joyride__step"},r.createElement(Kt,{...a.floaterProps,component:this.renderTooltip,debug:t,getPopper:this.setPopper,id:`react-joyride-step-${n}`,open:this.open,placement:a.placement,target:a.target},r.createElement(nr,{beaconComponent:a.beaconComponent,continuous:e,index:n,isLastStep:n+1===o,locale:a.locale,nonce:i,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:s,size:o,step:a,styles:a.styles}))):null}},ar=class extends r.Component{constructor(e){super(e),Yt(this,"helpers"),Yt(this,"store"),Yt(this,"callback",e=>{const{callback:t}=this.props;T.function(t)&&t(e)}),Yt(this,"handleKeyboard",e=>{const{index:t,lifecycle:n}=this.state,{steps:r}=this.props,i=r[t];n===gn.TOOLTIP&&"Escape"===e.code&&i&&!i.disableCloseOnEsc&&this.store.close("keyboard")}),Yt(this,"handleClickOverlay",()=>{const{index:e}=this.state,{steps:t}=this.props;qn(this.props,t[e]).disableOverlayClose||this.helpers.close("overlay")}),Yt(this,"syncState",e=>{this.setState(e)});const{debug:t,getHelpers:n,run:r=!0,stepIndex:i}=e;var s;this.store=(s={...e,controlled:r&&T.number(i)},new Xn(s)),this.helpers=this.store.getHelpers();const{addListener:o}=this.store;jn({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:t}),o(this.syncState),n&&n(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!yn())return;const{debug:e,disableCloseOnEsc:t,run:n,steps:r}=this.props,{start:i}=this.store;Gn(r,e)&&n&&i(),t||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(e,t){if(!yn())return;const{action:n,controlled:r,index:i,status:s}=this.state,{debug:o,run:a,stepIndex:l,steps:c}=this.props,{stepIndex:u,steps:d}=e,{reset:h,setSteps:p,start:f,stop:m,update:v}=this.store,{changed:y}=j(e,this.props),{changed:b,changedFrom:w}=j(t,this.state),x=qn(this.props,c[i]),E=!g(d,c),S=T.number(l)&&y("stepIndex"),C=xn(x.target);if(E&&(Gn(c,o)?p(c):console.warn("Steps are not valid",c)),y("run")&&(a?f(l):m()),S){let e=T.number(u)&&u<l?nn:tn;n===Zt&&(e=Jt),[vn.FINISHED,vn.SKIPPED].includes(s)||v({action:n===sn?sn:e,index:l,lifecycle:gn.INIT})}r||s!==vn.RUNNING||0!==i||C||(this.store.update({index:i+1}),this.callback({...this.state,type:mn,step:x}));const k={...this.state,index:i,step:x};if(b("action",[nn,tn,on,sn])&&b("status",vn.PAUSED)){const e=qn(this.props,c[t.index]);this.callback({...k,index:t.index,lifecycle:gn.COMPLETE,step:e,type:hn})}if(b("status",[vn.FINISHED,vn.SKIPPED])){const e=qn(this.props,c[t.index]);r||this.callback({...k,index:t.index,lifecycle:gn.COMPLETE,step:e,type:hn}),this.callback({...k,type:pn,step:e,index:t.index}),h()}else w("status",[vn.IDLE,vn.READY],vn.RUNNING)?this.callback({...k,type:ln}):(b("status")||b("action",en))&&this.callback({...k,type:fn});this.scrollToStep(t)}componentWillUnmount(){const{disableCloseOnEsc:e}=this.props;e||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(e){const{index:t,lifecycle:n,status:r}=this.state,{debug:i,disableScrollParentFix:s=!1,scrollDuration:o,scrollOffset:a=20,scrollToFirstStep:l=!1,steps:c}=this.props,u=qn(this.props,c[t]),d=xn(u.target),h=function(e){const{isFirstStep:t,lifecycle:n,previousLifecycle:r,scrollToFirstStep:i,step:s,target:o}=e;return!s.disableScrolling&&(!t||i||n===gn.TOOLTIP)&&"center"!==s.placement&&(!s.isFixed||!Tn(o))&&r!==n&&[gn.BEACON,gn.TOOLTIP].includes(n)}({isFirstStep:0===t,lifecycle:n,previousLifecycle:e.lifecycle,scrollToFirstStep:l,step:u,target:d});if(r===vn.RUNNING&&h){const e=Sn(d,s),l=En(d,s);let c=Math.floor(Cn(d,a,s))||0;jn({title:"scrollToStep",data:[{key:"index",value:t},{key:"lifecycle",value:n},{key:"status",value:r}],debug:i});const h=this.store.getPopper("beacon"),p=this.store.getPopper("tooltip");if(n===gn.BEACON&&h){const{offsets:t,placement:n}=h;["bottom"].includes(n)||e||(c=Math.floor(t.popper.top-a))}else if(n===gn.TOOLTIP&&p){const{flipped:t,offsets:n,placement:r}=p;!["top","right","left"].includes(r)||t||e?c-=u.spotlightPadding:c=Math.floor(n.popper.top-a)}c=c>=0?c:0,r===vn.RUNNING&&function(e,t){const{duration:n,element:r}=t;return new Promise((t,i)=>{const{scrollTop:s}=r,o=e>s?e-s:s-e;D.top(r,e,{duration:o<100?50:n},e=>e&&"Element already at target scroll position"!==e.message?i(e):t())})}(c,{element:l,duration:o}).then(()=>{setTimeout(()=>{var e;null==(e=this.store.getPopper("tooltip"))||e.instance.update()},10)})}}render(){if(!yn())return null;const{index:e,lifecycle:t,status:n}=this.state,{continuous:i=!1,debug:s=!1,nonce:o,scrollToFirstStep:a=!1,steps:l}=this.props,c={};if(n===vn.RUNNING&&l[e]){const n=qn(this.props,l[e]);c.step=r.createElement(or,{...this.state,callback:this.callback,continuous:i,debug:s,helpers:this.helpers,nonce:o,shouldScroll:!n.disableScrolling&&(0!==e||a),step:n,store:this.store}),c.overlay=r.createElement(er,{id:"react-joyride-portal"},r.createElement(Zn,{...n,continuous:i,debug:s,lifecycle:t,onClickOverlay:this.handleClickOverlay}))}return r.createElement("div",{className:"react-joyride"},c.step,c.overlay)}};Yt(ar,"defaultProps",zn);var lr=ar;const cr=e=>{let t=[{target:".add-meal-button",content:"Toca para **a\xf1adir tu almuerzo**. \ud83c\udf7d\ufe0f",placement:"bottom",disableBeacon:!0},{target:".slide-item",content:"**Desliza** para ver categor\xedas (Sopa, Prote\xedna...). \ud83d\udc49",placement:"auto",disableBeacon:!0},{target:".next-button",content:"Usa la flecha para **avanzar**. \u2728",placement:"bottom"},{target:".prev-button",content:"Toca para **volver atr\xe1s**. \u21a9\ufe0f",placement:"bottom"},{target:".order-summary",content:"**Resumen** de tu pedido aqu\xed. \ud83d\udcdd",placement:"bottom"},{target:".total-price",content:"**Valor total** a pagar. \ud83d\udcb0",placement:"top"},{target:".send-order-button",content:"\xa1Toca para **enviar pedido por WhatsApp**! \ud83d\ude80",placement:"top"},{target:".back-to-whatsapp",content:'**\xbfPrimera vez?** Env\xeda "Hola" a WhatsApp antes de pedir. \ud83d\udcac',placement:"bottom"}];return e>1&&t.splice(4,0,{target:".duplicate-button",content:"\xa1Toca para **duplicar este almuerzo**! \ud83c\udf5d",placement:"bottom"},{target:".remove-button",content:"Toca para **eliminar este almuerzo**. \ud83d\uddd1\ufe0f",placement:"bottom"}),t},ur=e=>{let{run:t=!0,onComplete:n,mealsCount:i}=e;const[o,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t||(a(!1),c(!1))},[t]);const u=()=>{a(!1),c(!0)},d=()=>{a(!1),n()};return o&&t?(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10002},children:(0,s.jsxs)("div",{style:{backgroundColor:"white",padding:"25px",borderRadius:"8px",textAlign:"center",maxWidth:"350px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.2)",color:"#333"},children:[(0,s.jsx)("h2",{children:"\xa1Bienvenido/a! \ud83d\udc4b"}),(0,s.jsx)("p",{style:{lineHeight:"1.4",marginBottom:"20px"},children:"Este tour te guiar\xe1 para hacer tu pedido de almuerzo de forma r\xe1pida y sencilla."}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:[(0,s.jsx)("button",{onClick:u,style:{backgroundColor:"#10B981",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",transition:"background-color 0.2s ease"},children:"Empezar Tour"}),(0,s.jsx)("button",{onClick:d,style:{backgroundColor:"#6B7280",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",transition:"background-color 0.2s ease"},children:"No, gracias"})]})]})}):(0,s.jsx)(lr,{steps:cr(i),run:l&&t,continuous:!0,showSkipButton:!0,callback:e=>{const{status:t,action:r}=e;"finished"!==t&&"skipped"!==t&&"close"!==r||(c(!1),n())},disableOverlayClose:!0,spotlightClicks:!0,styles:{options:{zIndex:10001,primaryColor:"#10B981",overlayColor:"rgba(0, 0, 0, 0.6)",spotlightPadding:5},tooltip:{fontSize:"14px",maxWidth:"300px"}},disableScrolling:!1,locale:{back:"Atr\xe1s",next:"Siguiente",skip:"Omitir",last:"\xa1Entendido!"}})};var dr=n(5492),hr=n(2061);const pr=e=>{var t,n,d,h,p,f,m,g,v,y;let{id:b,meal:w,onMealChange:x,onRemoveMeal:E,onDuplicateMeal:S,soups:T=[],soupReplacements:C=[],principles:k=[],proteins:N=[],drinks:_=[],sides:A=[],times:I=[],paymentMethods:P=[],additions:R=[],isIncomplete:O=!1,incompleteSlideIndex:j=null,address:D={},showTutorial:M,setShowTutorial:L,maxMeals:F,totalMeals:V,successMessage:z,setSuccessMessage:U,isTableOrder:$=!1,userRole:B}=e;const[H,q]=(0,r.useState)(!0),[W,G]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(0),[Y,X]=(0,r.useState)(null),[J,Z]=(0,r.useState)(0),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(!1),ie=(0,r.useRef)(null),se=(0,r.useRef)(null),oe=3===B;(0,r.useEffect)(()=>{oe&&void 0===w.orderType&&x(b,"orderType",null)},[oe,w.orderType,b,x]);const[ae,le]=(0,r.useState)((null===w||void 0===w?void 0:w.time)||null),[ce,ue]=(0,r.useState)((null===w||void 0===w?void 0:w.address)||{});(0,r.useEffect)(()=>{le((null===w||void 0===w?void 0:w.time)||null),ue((null===w||void 0===w?void 0:w.address)||{})},[w]);const de=(null===w||void 0===w?void 0:w.soup)||(null===w||void 0===w?void 0:w.soupReplacement),he=(null===w||void 0===w?void 0:w.principle)&&(Array.isArray(w.principle)&&1===w.principle.length&&"Remplazo por Principio"===(null===(t=w.principle[0])||void 0===t?void 0:t.name)&&!(null===w||void 0===w||!w.principleReplacement)||Array.isArray(w.principle)&&w.principle.length>=1&&w.principle.length<=2&&!w.principle.some(e=>"Remplazo por Principio"===e.name)),pe=Array.isArray(null===w||void 0===w?void 0:w.principle)&&w.principle.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name)),fe=pe?null===(n=w.principle.find(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name)))||void 0===n?void 0:n.name:"",me=Array.isArray(null===w||void 0===w?void 0:w.principle)&&w.principle.some(e=>"Remplazo por Principio"===e.name)&&(null===w||void 0===w?void 0:w.principleReplacement),ge=pe||Array.isArray(null===w||void 0===w?void 0:w.sides)&&w.sides.length>0,ve=pe?fe:(null===w||void 0===w||null===(d=w.protein)||void 0===d?void 0:d.name)||"Selecciona",ye=$?oe?7:6:9,be=[de,he,pe||!(null===w||void 0===w||!w.protein),!(null===w||void 0===w||!w.drink),$?!(null===w||void 0===w||!w.tableNumber):null!==(null===w||void 0===w?void 0:w.cutlery),$?!(null===w||void 0===w||!w.paymentMethod):!(null===w||void 0===w||!w.time),...$?oe?[!(null===w||void 0===w||!w.orderType)]:[]:[!(null===w||void 0===w||null===(h=w.address)||void 0===h||!h.address),!(null===w||void 0===w||!w.payment)],ge].filter(Boolean).length,we=Math.min(Math.round(be/ye*100),100),xe=$?oe?de&&he&&(pe||!(null===w||void 0===w||!w.protein))&&!(null===w||void 0===w||!w.drink)&&!(null===w||void 0===w||!w.tableNumber)&&!(null===w||void 0===w||!w.paymentMethod)&&!(null===w||void 0===w||!w.orderType)&&ge:de&&he&&(pe||!(null===w||void 0===w||!w.protein))&&!(null===w||void 0===w||!w.drink)&&!(null===w||void 0===w||!w.tableNumber)&&!(null===w||void 0===w||!w.paymentMethod)&&ge:de&&he&&(pe||!(null===w||void 0===w||!w.protein))&&!(null===w||void 0===w||!w.drink)&&!(null===w||void 0===w||!w.time)&&!(null===w||void 0===w||null===(p=w.address)||void 0===p||!p.address)&&!(null===w||void 0===w||!w.payment)&&null!==(null===w||void 0===w?void 0:w.cutlery)&&ge,Ee=(e,t)=>{var n,r,i,s,o,a,l,c,u,d,h;let p={...w,[e]:t},f=!1;if("principle"===e){var m,g,v;const e=Array.isArray(t)&&t.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name));e&&(p={...p,protein:null},x(b,"protein",null)),x(b,"principle",t),f=(null===(m=p)||void 0===m?void 0:m.principle)&&(Array.isArray(p.principle)&&1===p.principle.length&&"Remplazo por Principio"===(null===(g=p.principle[0])||void 0===g?void 0:g.name)&&!(null===(v=p)||void 0===v||!v.principleReplacement)||Array.isArray(p.principle)&&p.principle.length>=1&&p.principle.length<=2&&!p.principle.some(e=>"Remplazo por Principio"===e.name)),e&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300)}else x(b,e,t);switch(e){case"soup":f=!(null===(n=p)||void 0===n||!n.soup)&&("Remplazo por Sopa"!==(null===(r=p)||void 0===r?void 0:r.soup.name)||!(null===(i=p)||void 0===i||!i.soup.replacement));break;case"soupReplacement":f=!(null===(s=p)||void 0===s||!s.soupReplacement);break;case"principle":default:break;case"protein":f=pe||!(null===(o=p)||void 0===o||!o.protein);break;case"drink":f=!(null===(a=p)||void 0===a||!a.drink);break;case"cutlery":f=null!==(null===(l=p)||void 0===l?void 0:l.cutlery),f&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300);break;case"time":f=!(null===(c=p)||void 0===c||!c.time),f&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300);break;case"payment":case"paymentMethod":f=!(null===(u=p)||void 0===u||!u[e]),f&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300);break;case"sides":f=pe||Array.isArray(t)&&t.length>0;break;case"notes":case"additions":if(f=!0,"additions"===e&&W){Y&&clearTimeout(Y);const e=setTimeout(()=>G(!1),45e3);X(e)}break;case"tableNumber":f=!(null===(d=p)||void 0===d||!d.tableNumber),f&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300);break;case"orderType":f=!(null===(h=p)||void 0===h||!h.orderType),f&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300)}f&&"additions"!==e&&"principle"!==e&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300)},Se=T.filter(e=>"Solo bandeja"!==e.name&&"Remplazo por Sopa"!==e.name),Te=k.filter(e=>"Remplazo por Principio"!==e.name&&!["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name)),Ce=R.map(e=>({...e,price:"Mojarra"===e.name?8e3:e.price,requiresReplacement:e.requiresReplacement||["Prote\xedna adicional","Sopa adicional","Principio adicional","Bebida adicional"].includes(e.name)})).filter(e=>"Arroz con pollo"!==e.name&&"Arroz paisa"!==e.name&&"Arroz tres carnes"!==e.name),ke=null===w||void 0===w||null===(f=w.additions)||void 0===f?void 0:f.some(e=>"Prote\xedna adicional"===e.name&&!e.protein||"Sopa adicional"===e.name&&!e.replacement||"Principio adicional"===e.name&&!e.replacement||"Bebida adicional"===e.name&&!e.replacement),Ne=[{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:(0,s.jsx)(i.A,{title:"Sopa",emoji:"\ud83e\udd63",options:T,selected:null===w||void 0===w?void 0:w.soup,onImmediateSelect:e=>Ee("soup",e),showReplacements:"Remplazo por Sopa"===(null===w||void 0===w||null===(m=w.soup)||void 0===m?void 0:m.name),replacements:C,onImmediateReplacementSelect:e=>Ee("soupReplacement",e)})}),isComplete:de,label:"Sopa",associatedField:"soup"},{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:(0,s.jsx)(i.A,{title:"Principio",emoji:"\ud83c\udf5a",options:k,selected:null===w||void 0===w?void 0:w.principle,multiple:!0,showConfirmButton:!pe&&!me,onImmediateSelect:e=>Ee("principle",e),onConfirm:e=>((e,t)=>{let{selection:n,replacement:r}=t;if("principle"===e){var i;let e=n;n.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name))?(e=n.filter(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name)).slice(-1),x(b,"protein",null)):n.length>2&&(e=n.slice(0,2)),x(b,"principle",e),r&&x(b,"principleReplacement",r);const t={...w,principle:e,principleReplacement:r||w.principleReplacement};(null===t||void 0===t?void 0:t.principle)&&(Array.isArray(t.principle)&&1===t.principle.length&&"Remplazo por Principio"===(null===(i=t.principle[0])||void 0===i?void 0:i.name)&&null!==t&&void 0!==t&&t.principleReplacement||Array.isArray(t.principle)&&t.principle.length>=1&&t.principle.length<=2&&!t.principle.some(e=>"Remplazo por Principio"===e.name))&&K<Ne.length-1&&setTimeout(()=>Q(K+1),300)}else x(b,e,n),r&&x(b,`${e}Replacement`,r),K<Ne.length-1&&setTimeout(()=>Q(K+1),300)})("principle",e),showReplacements:Array.isArray(null===w||void 0===w?void 0:w.principle)&&w.principle.some(e=>"Remplazo por Principio"===e.name),replacements:C,onImmediateReplacementSelect:e=>Ee("principleReplacement",e)})}),isComplete:he,label:"Principio",associatedField:"principle"},{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:pe?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-green-700",children:`${fe} seleccionado`}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"La prote\xedna ya est\xe1 incluida. Si no te gusta, escoge un principio diferente que s\xed tenga la prote\xedna aparte."}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Pasa a la siguiente o retrocede, si quieres prote\xedna incluida con el arroz, escoge la prote\xedna como adicional abajo en la \u2795 Adiciones para Almuerzo"}),(0,s.jsxs)("div",{className:"mt-2 flex justify-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>Q(K+1),className:"px-3 py-1 bg-green-600 text-white rounded-md text-xs hover:bg-green-700",children:"Siguiente"}),(0,s.jsx)("button",{onClick:()=>Q(K-1),className:"px-3 py-1 bg-gray-300 text-gray-700 rounded-md text-xs hover:bg-gray-400",children:"Retroceder"})]})]}):(0,s.jsx)(i.A,{title:"Prote\xedna",emoji:"\ud83c\udf57",options:N,selected:null===w||void 0===w?void 0:w.protein,onImmediateSelect:e=>Ee("protein",e)})}),isComplete:pe||!(null===w||void 0===w||!w.protein),label:"Prote\xedna",associatedField:"protein"},{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:(0,s.jsx)(i.A,{title:"Bebida",emoji:"\ud83e\udd64",options:_,selected:null===w||void 0===w?void 0:w.drink,onImmediateSelect:e=>Ee("drink",e)})}),isComplete:!(null===w||void 0===w||!w.drink),label:"Bebida",associatedField:"drink"},...$?[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:"N\xfamero de Mesa"}),(0,s.jsx)("input",{type:"text",value:(null===w||void 0===w?void 0:w.tableNumber)||"",onChange:e=>Ee("tableNumber",e.target.value),placeholder:"Ej. Mesa 1, Mesa 1 y 7",className:"w-full p-2 text-sm border rounded-md"}),!(null!==w&&void 0!==w&&w.tableNumber)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, ingresa el n\xfamero de mesa"})]}),isComplete:!(null===w||void 0===w||!w.tableNumber),label:"Mesa",associatedField:"tableNumber"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:"M\xe9todo de Pago"}),(0,s.jsx)(l.A,{paymentMethods:P,selectedPayment:null===w||void 0===w?void 0:w.paymentMethod,setSelectedPayment:e=>Ee("paymentMethod",e)}),!(null!==w&&void 0!==w&&w.paymentMethod)&&(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600 bg-red-50 p-2 rounded mt-2",children:"Por favor, selecciona un m\xe9todo de pago"})]}),isComplete:!(null===w||void 0===w||!w.paymentMethod),label:"M\xe9todo de pago",associatedField:"paymentMethod"},...oe&&$?[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:"\xbfPara llevar o para mesa?"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:()=>Ee("orderType","takeaway"),className:"px-4 py-2 rounded-md "+("takeaway"===w.orderType?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),children:"Para llevar"}),(0,s.jsx)("button",{onClick:()=>Ee("orderType","table"),className:"px-4 py-2 rounded-md "+("table"===w.orderType?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),children:"Para mesa"})]}),!(null!==w&&void 0!==w&&w.orderType)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona el tipo de pedido"})]}),isComplete:!(null===w||void 0===w||!w.orderType),label:"Tipo de pedido",associatedField:"orderType"}]:[]]:[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:"Cubiertos"}),(0,s.jsx)(c.A,{cutlery:null===w||void 0===w?void 0:w.cutlery,setCutlery:e=>Ee("cutlery",e)}),null===(null===w||void 0===w?void 0:w.cutlery)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona si necesitas cubiertos"})]}),isComplete:null!==(null===w||void 0===w?void 0:w.cutlery),associatedField:"cutlery"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)(o,{times:I,selectedTime:ae,setSelectedTime:le,onConfirm:()=>{ae&&Ee("time",ae)}}),!(null!==w&&void 0!==w&&w.time)&&(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600 bg-red-50 p-2 rounded mt-2",children:"Por favor, selecciona una hora y confirma"})]}),isComplete:!(null===w||void 0===w||!w.time),label:"Hora",associatedField:"time"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-600 text-center md:text-left",children:["\ud83c\udf89 Ingresa tu direcci\xf3n y tel\xe9fono ",(0,s.jsx)("strong",{className:"text-green-700",children:"una sola vez"}),". La pr\xf3xima vez, solo haz clic en ",(0,s.jsx)("strong",{className:"text-blue-600",children:'"Confirmar" \xa1y listo!'})]}),(0,s.jsx)(a.A,{onConfirm:e=>{x(b,"address",e),K<Ne.length-1&&setTimeout(()=>Q(K+1),300)},initialAddress:(null===w||void 0===w?void 0:w.address)||{}}),!(null!==w&&void 0!==w&&null!==(g=w.address)&&void 0!==g&&g.address)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 mt-1",children:"Por favor, completa tu direcci\xf3n y tel\xe9fono."})]}),isComplete:!(null===w||void 0===w||null===(v=w.address)||void 0===v||!v.address),label:"Direcci\xf3n",associatedField:"address"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:"M\xe9todo de Pago"}),(0,s.jsx)(l.A,{paymentMethods:P,selectedPayment:null===w||void 0===w?void 0:w.payment,setSelectedPayment:e=>Ee("payment",e)}),!(null!==w&&void 0!==w&&w.payment)&&(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600 bg-red-50 p-2 rounded mt-2",children:"Por favor, selecciona un m\xe9todo de pago"})]}),isComplete:!(null===w||void 0===w||!w.payment),label:"M\xe9todo de pago",associatedField:"payment"}],{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:pe?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-green-700",children:`${fe} seleccionado`}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"La prote\xedna ya est\xe1 incluida y viene acompa\xf1ada de papa a la francesa, ensalada dulce, sopa y bebida."}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Si tienes alguna preferencia, por favor agr\xe9gala en las notas adicionales."}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-1",children:"Notas Adicionales"}),(0,s.jsx)("textarea",{value:(null===w||void 0===w?void 0:w.notes)||"",onChange:e=>Ee("notes",e.target.value),placeholder:"Ejemplo: Sin ensalada dulce, m\xe1s papa a la francesa, etc",className:"w-full p-2 text-sm border rounded-md",rows:"2"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-2 text-sm text-gray-700 px-2",children:["Selecciona los acompa\xf1amientos que prefieras;"," ",(0,s.jsx)("span",{className:"font-semibold",children:"los no seleccionados se considerar\xe1n no deseados."})]}),(0,s.jsx)(i.A,{title:"Acompa\xf1amiento",emoji:"\ud83e\udd57",options:A,selected:null===w||void 0===w?void 0:w.sides,multiple:!0,onImmediateSelect:e=>Ee("sides",e)}),!ge&&(0,s.jsx)("p",{className:"text-xs font-semibold text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona al menos un acompa\xf1amiento"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-1",children:"Notas Adicionales"}),(0,s.jsx)("textarea",{value:(null===w||void 0===w?void 0:w.notes)||"",onChange:e=>Ee("notes",e.target.value),placeholder:"Ejemplo: Poquito arroz, m\xe1s pl\xe1tano en lugar de ensalada, etc",className:"w-full p-2 text-sm border rounded-md",rows:"2"})]})]})}),isComplete:ge,label:"Acompa\xf1amiento",associatedField:"sides"}];(0,r.useEffect)(()=>{O&&null!==j&&(q(!0),Q(j))},[O,j]),(0,r.useEffect)(()=>{let e;return xe&&K===Ne.length-1&&(e=setTimeout(()=>{se.current&&(se.current.style.height="0"),setTimeout(()=>q(!1),300)},3e4)),()=>clearTimeout(e)},[xe,K,Ne.length]),(0,r.useEffect)(()=>{const e=e=>{e.detail&&void 0!==e.detail.slideIndex&&Q(e.detail.slideIndex)},t=document.getElementById(`meal-item-${b}`);return t&&t.addEventListener("updateSlide",e),()=>{t&&t.removeEventListener("updateSlide",e),Y&&clearTimeout(Y)}},[b,Y]),(0,r.useEffect)(()=>{if(!se.current||!ie.current||!H)return void(se.current&&(se.current.style.height="0"));let e,t=null;const n=()=>{if(ie.current&&ie.current.children&&ie.current.children[K]){const e=ie.current.children[K].offsetHeight;se.current.style.height=`${e+8}px`}else se.current.style.height="auto"},r=()=>{clearTimeout(e),e=setTimeout(n,100)};r();const i=new ResizeObserver(()=>r());ie.current&&ie.current.children[K]&&(t=ie.current.children[K],i.observe(t));const s=()=>r();return window.addEventListener("optionsUpdated",s),()=>{t&&i.unobserve(t),i.disconnect(),clearTimeout(e),window.removeEventListener("optionsUpdated",s)}},[K,H,T,C,k,N,_,A,I,P,R]);return(0,s.jsxs)("div",{id:`meal-item-${b}`,className:"relative mb-2",children:[M&&0===b&&(0,s.jsx)(ur,{run:M,onComplete:()=>L(!1)}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md",children:[(0,s.jsx)("div",{className:"sticky top-0 z-[10000] bg-white p-2 border-b border-gray-200 rounded-t-lg",onClick:()=>{H?se.current&&(se.current.style.height="0",setTimeout(()=>q(!1),300)):q(!0)},children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center cursor-pointer hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,s.jsx)("div",{className:`w-6 h-6 rounded-full mr-2 flex items-center justify-center ${xe?"bg-green-700 text-white":"bg-green-200 text-green-700"} text-xs font-medium`,children:xe?"\u2713":b+1}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-bold text-sm text-gray-800",children:["Almuerzo #",b+1," - ",ve," - $",(0,hr.$H)(w,B).toLocaleString("es-CO")]}),(0,s.jsx)(u.A,{progress:we,className:"w-24 sm:w-32 mt-1"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-1 sm:mt-0",children:[xe&&(0,s.jsx)("span",{className:"hidden sm:inline-flex",children:(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-green-200 text-green-700",children:"Completo"})}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),(()=>{if(V>=F)return re(!0),void setTimeout(()=>re(!1),3e3);re(!1),S(w)})()},className:"duplicate-button p-1 text-green-700 hover:text-green-800 flex items-center transition-colors "+(V>=F?"opacity-50 cursor-not-allowed":""),"aria-label":`Duplicar Almuerzo #${b+1}`,disabled:V>=F,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"Duplicar"})]}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),E(b)},className:"remove-button p-1 text-red-600 hover:text-red-700 flex items-center transition-colors","aria-label":`Eliminar Almuerzo #${b+1}`,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"Eliminar"})]})]})]})}),ne&&(0,s.jsx)(dr.A,{message:"Has alcanzado el m\xe1ximo de 15 almuerzos. No puedes duplicar m\xe1s.",className:"fixed top-4 right-4 z-50 bg-green-100 text-green-800",onClose:()=>re(!1)}),z&&!ne&&(0,s.jsx)(dr.A,{message:z,className:"fixed top-12 right-4 z-50 bg-green-100 text-green-800 mt-2",onClose:()=>U("")}),H&&(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{ref:se,className:"relative overflow-hidden rounded-lg",onTouchStart:e=>{Z(e.touches[0].clientX),te(!1)},onTouchMove:e=>{if(ee||!ie.current)return;const t=e.touches[0].clientX,n=J-t;Math.abs(n)>100&&(te(!0),n>0&&K<Ne.length-1?(Q(K+1),ie.current.style.transform=`translateX(-${100*(K+1)}%)`):n<0&&K>0&&(Q(K-1),ie.current.style.transform=`translateX(-${100*(K-1)}%)`))},onTouchEnd:()=>{Z(0),te(!1)},style:{transition:"height 0.3s ease-in-out"},children:(0,s.jsx)("div",{ref:ie,className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${100*K}%)`},children:Ne.map((e,t)=>(0,s.jsx)("div",{className:"w-full flex-shrink-0",style:{height:"fit-content"},children:(0,s.jsx)("div",{className:"p-2",style:{height:"fit-content"},children:e.component})},t))})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,s.jsx)("button",{className:"prev-button p-1 rounded-full text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{K>0&&K<Ne.length&&(Q(K-1),ie.current.style.transform=`translateX(-${100*(K-1)}%)`)},disabled:0===K,"aria-label":"Anterior",children:(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"flex space-x-1",children:Ne.map((e,t)=>(0,s.jsx)("button",{onClick:()=>(e=>{ie.current&&(Q(e),ie.current.style.transform=`translateX(-${100*e}%)`)})(t),className:"w-2 h-2 rounded-full transition-colors "+(K===t?"bg-green-700":e.isComplete?"bg-green-400":"bg-green-200"),"aria-label":`Ir a ${e.label}`,title:e.label},t))}),(0,s.jsx)("button",{className:"next-button p-1 rounded-full text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{K<Ne.length-1&&(Q(K+1),ie.current.style.transform=`translateX(-${100*(K+1)}%)`)},disabled:K===Ne.length-1,"aria-label":"Siguiente",children:(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md mt-2 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center cursor-pointer justify-between p-2 hover:bg-gray-50",onClick:()=>{G(!W),Y&&clearTimeout(Y)},children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-700 flex flex-wrap items-center gap-x-1",children:[(0,s.jsx)("span",{className:"text-base",children:"\u2795"}),(0,s.jsxs)("span",{children:["Adiciones para Almuerzo #",b+1]}),(0,s.jsx)("span",{className:"font-bold text-gray-800",children:"(opcional)"})]}),(0,s.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:W?"Ocultar":"Mostrar"})]}),W&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(i.A,{title:"Adiciones (por almuerzo)",emoji:"\u2795",options:Ce,selected:(null===w||void 0===w?void 0:w.additions)||[],multiple:!0,showReplacements:ke,replacements:(()=>{const e=((null===w||void 0===w?void 0:w.additions)||[]).filter(e=>e.requiresReplacement&&("Prote\xedna adicional"===e.name?!e.protein:!e.replacement));if(0===e.length)return[];const t=e[0];return"Sopa adicional"===t.name?Se:"Principio adicional"===t.name?Te:"Prote\xedna adicional"===t.name?N.filter(e=>"Mojarra"!==e.name):"Bebida adicional"===t.name?_.filter(e=>"Sin bebida"!==e.name):[]})(),onImmediateSelect:e=>{const t=e.map(e=>{var t;const n=null===w||void 0===w||null===(t=w.additions)||void 0===t?void 0:t.find(t=>t.id===e.id);return{...e,quantity:n&&n.quantity||1,protein:(e.name,e.protein||""),replacement:("Sopa adicional"===e.name||e.name,e.replacement||"")}});Ee("additions",t)},onImmediateReplacementSelect:e=>{let{id:t,replacement:n}=e;const r=((null===w||void 0===w?void 0:w.additions)||[]).map(e=>e.id===t?{...e,protein:"Prote\xedna adicional"===e.name&&(null===n||void 0===n?void 0:n.name)||e.protein,replacement:["Sopa adicional","Principio adicional","Bebida adicional"].includes(e.name)&&(null===n||void 0===n?void 0:n.name)||e.replacement}:e);Ee("additions",r)},onAdd:e=>{var t;const n=null===w||void 0===w||null===(t=w.additions)||void 0===t?void 0:t.find(t=>t.id===e.id),r=null!==w&&void 0!==w&&w.additions?[...w.additions]:[];n?r[r.findIndex(t=>t.id===e.id)]={...n,quantity:(n.quantity||1)+1}:r.push({...e,quantity:1}),Ee("additions",r)},onRemove:e=>{const t=((null===w||void 0===w?void 0:w.additions)||[]).map(t=>t.id===e?{...t,quantity:(t.quantity||1)-1}:t).filter(e=>e.quantity>0);Ee("additions",t)},onIncrease:e=>{const t=((null===w||void 0===w?void 0:w.additions)||[]).map(t=>t.id===e?{...t,quantity:(t.quantity||1)+1}:t);Ee("additions",t)}}),(null===w||void 0===w||null===(y=w.additions)||void 0===y?void 0:y.length)>0&&(0,s.jsxs)("div",{className:"mt-2 text-sm font-semibold text-gray-700",children:["Total Adiciones de este almuerzo: $",w.additions.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.price)||0)*((null===t||void 0===t?void 0:t.quantity)||1),0).toLocaleString("es-CO")]})]})]})]})},fr=e=>{let{meals:t,soups:n,soupReplacements:i,principles:o,proteins:a,drinks:l,sides:c,additions:u,paymentMethods:d,times:h,isTableOrder:p,userRole:f,onMealChange:m,onRemoveMeal:g,onAddMeal:v,onDuplicateMeal:y,incompleteMealIndex:b,incompleteSlideIndex:w,isOrderingDisabled:x}=e;const[E,S]=(0,r.useState)(0===t.length),[T,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{0},[u]),(0,r.useEffect)(()=>{if(t.length>=15){C(!0);const e=setTimeout(()=>C(!1),3e3);return()=>clearTimeout(e)}C(!1)},[t.length,15]);const k=t.filter(e=>{const t=Array.isArray(null===e||void 0===e?void 0:e.principle)&&e.principle.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name));return(e.soup||e.soupReplacement)&&e.principle&&(t||e.protein)&&e.drink&&(p?e.tableNumber&&e.paymentMethod:e.time&&e.address&&e.payment&&null!==e.cutlery)&&(t||e.sides&&e.sides.length>0)}).length;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 bg-white p-2 xs:p-3 sm:p-3 rounded-md shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm sm:text-lg md:text-xl font-bold text-gray-800",children:"Tus Almuerzos"}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm md:text-base text-gray-600",children:[k," de ",t.length," completos"]})]}),(0,s.jsxs)("button",{onClick:v,className:"add-meal-button bg-green-600 hover:bg-green-700 text-white px-2 xs:px-3 py-1 xs:py-1.5 rounded-md transition-colors text-xs sm:text-sm md:text-base font-bold flex items-center shadow-sm flex-shrink-0 "+(t.length>=15||x?"opacity-50 cursor-not-allowed":""),"aria-label":"A\xf1adir un nuevo almuerzo",disabled:t.length>=15||x,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 xs:h-5 w-4 xs:w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"A\xf1adir un nuevo almuerzo"]})]}),T&&(0,s.jsx)("div",{className:"fixed right-4 z-[10002] w-80 max-w-xs",style:{top:"128px"},children:(0,s.jsx)(dr.A,{message:"Has alcanzado el m\xe1ximo de 15 almuerzos. No puedes a\xf1adir m\xe1s.",className:"bg-green-100 text-green-800 min-h-[60px]",onClose:()=>C(!1)})}),(0,s.jsx)("div",{className:"space-y-2 sm:space-y-4",children:0===t.length?(0,s.jsx)("p",{className:"text-center text-gray-600",children:"No hay almuerzos. \xa1A\xf1ade uno para comenzar!"}):t.map((e,r)=>(0,s.jsx)(pr,{id:e.id,meal:e,onMealChange:m,onRemoveMeal:()=>g(r),onDuplicateMeal:()=>y(e),soups:n,soupReplacements:i,principles:o,proteins:a,drinks:l,sides:c,additions:u,times:h,paymentMethods:d,isTableOrder:p,userRole:f,showTutorial:E&&0===r,setShowTutorial:S,isIncomplete:r===b,incompleteSlideIndex:w,address:e.address||"",isOrderingDisabled:x,maxMeals:15,totalMeals:t.length},e.id))}),t.length>0&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 shadow-md",children:[(0,s.jsxs)("h3",{className:"font-semibold text-blue-800 mb-2 flex items-center text-sm md:text-base",children:[(0,s.jsx)("span",{className:"mr-1.5 text-xl",children:"\ud83d\ude80"}),(0,s.jsx)("span",{className:"font-bold",children:"\xa1Configura tu almuerzo!"})]}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-blue-700 leading-relaxed",children:[(0,s.jsx)("strong",{className:"font-bold",children:"Desliza"})," para navegar por las opciones. Cada almuerzo se ",(0,s.jsx)("strong",{className:"font-bold",children:"esconde en 30 segundos"})," al completarse."]}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-blue-700 leading-relaxed mt-1",children:["\xbfQuieres verlo de nuevo? \xa1Solo ",(0,s.jsx)("strong",{children:"haz clic"}),"!"]})]})]})}},3865:e=>{var t=new Error("Element already at target scroll position"),n=new Error("Scroll cancelled"),r=Math.min,i=Date.now;function s(e){return function(s,l,c,u){"function"==typeof(c=c||{})&&(u=c,c={}),"function"!=typeof u&&(u=a);var d=i(),h=s[e],p=c.ease||o,f=isNaN(c.duration)?350:+c.duration,m=!1;return h===l?u(t,s[e]):requestAnimationFrame(function t(o){if(m)return u(n,s[e]);var a=i(),c=r(1,(a-d)/f),g=p(c);s[e]=g*(l-h)+h,c<1?requestAnimationFrame(t):requestAnimationFrame(function(){u(null,s[e])})}),function(){m=!0}}}function o(e){return.5*(1-Math.cos(Math.PI*e))}function a(){}e.exports={left:s("scrollLeft"),top:s("scrollTop")}},4005:(e,t,n)=>{"use strict";n.d(t,{Hg:()=>o,Ln:()=>a,WS:()=>d,Wy:()=>s,gG:()=>l,h5:()=>u,iy:()=>i,jQ:()=>p,qm:()=>f});var r=n(2319);const i=e=>{let{address:t,phoneNumber:n,addressType:r,recipientName:i,unitDetails:s,localName:o,isWaitress:a=!1}=e;return{id:0,soup:null,soupReplacement:null,principle:null,principleReplacement:null,protein:null,drink:null,sides:[],additions:[],notes:"",tableNumber:a?"":null,paymentMethod:null,...a?{}:{time:null,address:{address:t||"",phoneNumber:n||"",addressType:r||"house",recipientName:i||"",unitDetails:s||"",localName:o||""},payment:null,cutlery:null}}},s=(e,t,n,r)=>{e(e=>e.map(e=>e.id===t?{...e,[n]:r}:e))},o=(e,t,n,r)=>{const i={...r,id:n.length>0?Math.max(...n.map(e=>e.id))+1:0};if(n.length>0){const e=n[0];t("Tu direcci\xf3n, hora y m\xe9todo de pago se han copiado del primer almuerzo."),e.time&&(i.time=e.time),e.address&&(i.address=e.address),e.payment&&(i.payment=e.payment),e.paymentMethod&&(i.paymentMethod=e.paymentMethod)}e(e=>[...e,i])},a=(e,t,n,r)=>{t("Se ha duplicado el almuerzo."),e(e=>{const t=Math.max(...e.map(e=>e.id),0)+1,r=JSON.parse(JSON.stringify({...n,id:t})),i=e.findIndex(e=>e.id===n.id),s=[...e];return s.splice(i+1,0,r),s.map((e,t)=>({...e,id:t}))})},l=(e,t,n,r)=>{const i=r.filter(e=>e.id!==n).map((e,t)=>({...e,id:t}));e(i),t(0===i.length?"Todos los almuerzos han sido eliminados.":"Almuerzo eliminado.")},c=e=>{var t,n,r;if(!e)return 0;const i=(null===e||void 0===e||null===(t=e.soup)||void 0===t?void 0:t.name)&&"Sin sopa"!==e.soup.name&&"Solo bandeja"!==e.soup.name||(null===e||void 0===e?void 0:e.soupReplacement);return("Mojarra"===(null===e||void 0===e||null===(n=e.protein)||void 0===n?void 0:n.name)?15e3:i?13e3:12e3)+((null===e||void 0===e||null===(r=e.additions)||void 0===r?void 0:r.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0))||0)},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)&&0!==e.length?e.reduce((e,n)=>{var r,i;const s=c(n),o=t?(null===n||void 0===n||null===(r=n.paymentMethod)||void 0===r?void 0:r.name)||"No especificado":(null===n||void 0===n||null===(i=n.payment)||void 0===i?void 0:i.name)||"No especificado";return e[o]=(e[o]||0)+s,e},{}):{}},d=function(e,t,n,i,s,o,a,l,c,u){let d=arguments.length>10&&void 0!==arguments[10]&&arguments[10];return new Promise(s=>{if(e(!0),t(null),n(null),!Array.isArray(i))return t("Error: Los pedidos no est\xe1n correctamente definidos."),e(!1),void s();const a=(Array.isArray(i)?i:[]).map((e,t)=>{const n=[],r=Array.isArray(null===e||void 0===e?void 0:e.principle)&&e.principle.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name));var i,s,o;(null!==e&&void 0!==e&&e.soup||null!==e&&void 0!==e&&e.soupReplacement||n.push("Sopa o reemplazo de sopa"),null!==e&&void 0!==e&&e.principle||n.push("Principio"),r||null!==e&&void 0!==e&&e.protein||n.push("Prote\xedna"),null!==e&&void 0!==e&&e.drink||n.push("Bebida"),d)?(null!==e&&void 0!==e&&e.tableNumber||n.push("N\xfamero de mesa"),null!==e&&void 0!==e&&e.paymentMethod||n.push("M\xe9todo de pago")):(null!==e&&void 0!==e&&e.time||n.push("Hora"),null!==e&&void 0!==e&&null!==(i=e.address)&&void 0!==i&&i.address||n.push("Direcci\xf3n"),null!==e&&void 0!==e&&e.payment||n.push("M\xe9todo de pago"),null===(null===e||void 0===e?void 0:e.cutlery)&&n.push("Cubiertos"),"shop"!==(null===e||void 0===e||null===(s=e.address)||void 0===s?void 0:s.addressType)||null!==e&&void 0!==e&&null!==(o=e.address)&&void 0!==o&&o.localName||n.push("Nombre del local"));return r||null!==e&&void 0!==e&&e.sides&&0!==e.sides.length||n.push("Acompa\xf1amientos"),n.length,{index:t,missing:n}}).filter(e=>e.missing.length>0);if(a.length>0){const n=a[0],r=d?{"Sopa o reemplazo de sopa":0,Principio:1,"Prote\xedna":2,Bebida:3,"N\xfamero de mesa":4,"M\xe9todo de pago":5,"Acompa\xf1amientos":6}:{"Sopa o reemplazo de sopa":0,Principio:1,"Prote\xedna":2,Bebida:3,Cubiertos:4,Hora:5,"Direcci\xf3n":6,"M\xe9todo de pago":7,"Acompa\xf1amientos":8,"Nombre del local":6},i=n.missing[0];return o(n.index),l(r[i]||0),t(`Por favor, completa el campo "${i}" para el Almuerzo #${n.index+1}.`),setTimeout(()=>{const e=document.getElementById(`meal-item-${n.index}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlight-incomplete"),setTimeout(()=>e.classList.remove("highlight-incomplete"),3e3),e.dispatchEvent(new CustomEvent("updateSlide",{detail:{slideIndex:r[i]}})))},100),e(!1),void s()}const h=y(i,c,u,d),p=(0,r.mH)(h);if((0,r.Fr)()){const e=`whatsapp://send?phone=573023931292&text=${p}`,t=`https://wa.me/573023931292?text=${p}`,n=Date.now();window.location=e,setTimeout(()=>{Date.now()-n<2e3&&window.open(t,"_blank")},2e3)}else window.open(`https://web.whatsapp.com/send?phone=573023931292&text=${p}`,"_blank");n("\xa1Pedido enviado correctamente a WhatsApp!"),e(!1),setTimeout(()=>n(null),5e3),s()})},h=e=>(null===e||void 0===e?void 0:e.replace(" NUEVO",""))||"No seleccionado",p=e=>e?e.split(". ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(". "):"",f=e=>e&&e.name&&"Lo antes posible"!==e.name,m=["Sopa","Principio","Prote\xedna","Bebida","Cubiertos","Acompa\xf1amientos","Hora","Direcci\xf3n","Pago","Adiciones","Mesa"],g=["address","addressType","phoneNumber","recipientName","unitDetails","localName"],v=["Arroz con pollo","Arroz paisa","Arroz tres carnes"],y=function(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s="\ud83d\udc4b \xa1Hola Cocina Casera! \ud83c\udf74\nQuiero hacer mi pedido:\n\n";const o=Array.isArray(e)?e:[];if(0===o.length)return s+="\ud83c\udf7d 0 almuerzos en total\n\ud83d\udcb0 Total: $0\n\xa1Gracias por tu pedido! \ud83d\ude0a",s;const a=(e,t)=>{if(!e)return"";var n,r,s,o,a,l,c,u,d,p;if("Sopa"===t)return"Solo bandeja"===(null===(n=e.soup)||void 0===n?void 0:n.name)?"solo bandeja":null!==(r=e.soupReplacement)&&void 0!==r&&r.name?JSON.stringify({name:h(e.soupReplacement.name),type:"por sopa"}):null!==(s=e.soup)&&void 0!==s&&s.name&&"Sin sopa"!==e.soup.name?h(e.soup.name):"Sin sopa";if("Principio"===t){var f,m;const t=(null===(f=e.principle)||void 0===f?void 0:f.map(e=>h(e.name)).sort())||[],n=null!==(m=e.principleReplacement)&&void 0!==m&&m.name?h(e.principleReplacement.name):"";return JSON.stringify([t.join(","),n])}return"Prote\xedna"===t?h((null===(o=e.protein)||void 0===o?void 0:o.name)||"Sin prote\xedna"):"Bebida"===t?h((null===(a=e.drink)||void 0===a?void 0:a.name)||"Sin bebida"):"Cubiertos"===t?e.cutlery?"S\xed":"No":"Acompa\xf1amientos"===t?JSON.stringify((null===(l=e.sides)||void 0===l?void 0:l.map(e=>h(e.name)).sort())||[]):"Hora"===t?(null===(c=e.time)||void 0===c?void 0:c.name)||"No especificada":"Direcci\xf3n"===t?JSON.stringify(g.map(t=>{var n;return(null===(n=e.address)||void 0===n?void 0:n[t])||""})):"Pago"===t?i?(null===(u=e.paymentMethod)||void 0===u?void 0:u.name)||"No especificado":(null===(d=e.payment)||void 0===d?void 0:d.name)||"No especificado":"Adiciones"===t?JSON.stringify((null===(p=e.additions)||void 0===p?void 0:p.map(e=>({name:h(e.name),protein:e.protein||"",replacement:e.replacement||"",quantity:e.quantity||1})).sort((e,t)=>e.name.localeCompare(t.name)))||[]):"Mesa"===t?e.tableNumber||"No especificada":""},l=new Map;o.forEach((e,t)=>{let n=!1;for(let[,f]of l){const l=f.meals[0];let u=0;if(m.forEach(t=>{a(e,t)!==a(l,t)&&u++}),u<=3){var r,s,o,c;if(f.meals.push(e),f.indices.push(t),i?null===(r=e.paymentMethod)||void 0===r?void 0:r.name:null===(s=e.payment)||void 0===s?void 0:s.name)f.payments.add(i?null===(o=e.paymentMethod)||void 0===o?void 0:o.name:null===(c=e.payment)||void 0===c?void 0:c.name);n=!0;break}}if(!n){var u,d,h,p;const n=`${t}|${m.map(t=>a(e,t)).join("|")}`;l.set(n,{meals:[e],indices:[t],payments:new Set((i?null===(u=e.paymentMethod)||void 0===u?void 0:u.name:null===(d=e.payment)||void 0===d?void 0:d.name)?[i?null===(h=e.paymentMethod)||void 0===h?void 0:h.name:null===(p=e.payment)||void 0===p?void 0:p.name]:[])})}});const c=Array.from(l.values()).map(e=>{const t={meals:e.meals,payments:e.payments,originalIndices:e.indices};t.commonFieldsInGroup=new Set(m.filter(e=>{const n=a(t.meals[0],e);return t.meals.every(t=>a(t,e)===n)})),t.commonAddressFieldsInGroup={},g.forEach(e=>{var n;t.commonAddressFieldsInGroup[e]=t.meals.every(n=>{var r,i;return(null===(r=n.address)||void 0===r?void 0:r[e])===(null===(i=t.meals[0].address)||void 0===i?void 0:i[e])})?null===(n=t.meals[0].address)||void 0===n?void 0:n[e]:null});const n=new Map;return t.meals.forEach((t,r)=>{const i=m.map(e=>a(t,e)).join("|");n.has(i)||n.set(i,{meals:[],indices:[]}),n.get(i).meals.push(t),n.get(i).indices.push(e.indices[r])}),t.identicalGroups=Array.from(n.values()),t}),d=o[0],y=o.every(e=>{var t,n;return(null===(t=e.time)||void 0===t?void 0:t.name)===(null===d||void 0===d||null===(n=d.time)||void 0===n?void 0:n.name)})?null===d||void 0===d||null===(r=d.time)||void 0===r?void 0:r.name:null,b={};g.forEach(e=>{var t;const n=o.every(t=>{var n,r;return(null===(n=t.address)||void 0===n?void 0:n[e])===(null===d||void 0===d||null===(r=d.address)||void 0===r?void 0:r[e])});b[e]=n?null===d||void 0===d||null===(t=d.address)||void 0===t?void 0:t[e]:null});const w=["address","addressType","phoneNumber"];"school"===b.addressType?w.push("recipientName"):"complex"===b.addressType?w.push("unitDetails"):"shop"===b.addressType&&w.push("localName");const x=!i&&y&&w.every(e=>{var t;return null!==b[e]||!(null!==d&&void 0!==d&&null!==(t=d.address)&&void 0!==t&&t[e])}),E=o.length;s+=`\ud83c\udf7d ${E} almuerzos en total\n`,c.forEach(e=>{e.meals.length>1&&(s+=`* ${e.meals.length} almuerzos iguales\n`)}),s+=`\ud83d\udcb0 Total: $${n.toLocaleString("es-CO")}\n`,s+="\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n",c.forEach((e,n)=>{var r;const o=e.meals[0],l=e.meals.length,c=e.meals.reduce((e,n)=>e+t(n),0),u=Array.from(e.payments).filter(e=>e&&"No especificado"!==e),d=u.length>0?`(${u.join(" y ")})`:"(No especificado)",y=null===o||void 0===o||null===(r=o.principle)||void 0===r?void 0:r.some(e=>v.includes(e.name));if(s+=`\ud83c\udf7d ${1===l?"1 Almuerzo":`${l} Almuerzos iguales`} \u2013 $${c.toLocaleString("es-CO")} ${d}\n`,1===l){var w,E,S,T,C,k,N,_,A,I,P,R;const e="Solo bandeja"===(null===(w=o.soup)||void 0===w?void 0:w.name)?"solo bandeja":null!==(E=o.soupReplacement)&&void 0!==E&&E.name?`${h(o.soupReplacement.name)} (por sopa)`:null!==(S=o.soup)&&void 0!==S&&S.name&&"Sin sopa"!==o.soup.name?h(o.soup.name):"Sin sopa";s+=`${e}\n`;const t=null!==(T=o.principleReplacement)&&void 0!==T&&T.name?`${h(o.principleReplacement.name)} (por principio)`:(null===(C=o.principle)||void 0===C?void 0:C.length)>0?`${o.principle.map(e=>h(e.name)).join(", ")}${o.principle.length>1?" (mixto)":""}`:"Sin principio";s+=`${t}\n`,!y&&null!==(k=o.protein)&&void 0!==k&&k.name&&(s+=`${h(o.protein.name)}\n`);const n="Juego de mango"===(null===(N=o.drink)||void 0===N?void 0:N.name)?"Jugo de mango":h((null===(_=o.drink)||void 0===_?void 0:_.name)||"Sin bebida");s+=`${n}\n`,i||(s+=`Cubiertos: ${o.cutlery?"S\xed":"No"}\n`),s+=`Acompa\xf1amientos: ${y?"Ya incluidos":(null===(A=o.sides)||void 0===A?void 0:A.length)>0?o.sides.map(e=>h(e.name)).join(", "):"Sin acompa\xf1amientos"}\n`,(null===(I=o.additions)||void 0===I?void 0:I.length)>0&&o.additions.forEach((e,t)=>{s+=`- ${h(e.name)}${e.protein||e.replacement?` (${e.protein||e.replacement})`:""} (${e.quantity||1})\n`});const r=p(o.notes)||"Ninguna";if(s+=`Notas: ${r}\n`,i&&(s+=`\ud83d\udccd Mesa: ${o.tableNumber||"No especificada"}\n`),!i&&!x){const e=[];g.forEach(t=>{var n,r;if(b[t])return;const i=null===(n=o.address)||void 0===n?void 0:n[t],s=(null===(r=o.address)||void 0===r?void 0:r.addressType)||"";"address"===t&&i?e.push(`\ud83d\udccd Direcci\xf3n: ${i}`):"addressType"===t&&i?e.push("\ud83c\udfe0 Lugar de entrega: "+("house"===i?"Casa/Apartamento Individual":"school"===i?"Colegio/Oficina":"complex"===i?"Conjunto Residencial":"shop"===i?"Tienda/Local":"No especificado")):"recipientName"===t&&"school"===s&&i?e.push(`\ud83d\udc64 Nombre del destinatario: ${i}`):"phoneNumber"===t&&i?e.push(`\ud83d\udcde Tel\xe9fono: ${i}`):"unitDetails"===t&&"complex"===s&&i?e.push(`\ud83c\udfe2 Detalles: ${i}`):"localName"===t&&"shop"===s&&i&&e.push(`\ud83c\udfec Nombre del local: ${i}`)}),e.length>0&&(s+=`${e.join("\n")}\n`)}s+=`\ud83d\udcb3 Pago: ${i?(null===(P=o.paymentMethod)||void 0===P?void 0:P.name)||"No especificado":(null===(R=o.payment)||void 0===R?void 0:R.name)||"No especificado"}\n`}else{var O,j,D;if(e.commonFieldsInGroup.has("Sopa")){var M,L,F;const e="Solo bandeja"===(null===(M=o.soup)||void 0===M?void 0:M.name)?"solo bandeja":null!==(L=o.soupReplacement)&&void 0!==L&&L.name?`${h(o.soupReplacement.name)} (por sopa)`:null!==(F=o.soup)&&void 0!==F&&F.name&&"Sin sopa"!==o.soup.name?h(o.soup.name):"Sin sopa";s+=`${e}\n`}if(e.commonFieldsInGroup.has("Principio")){var V,z;const e=null!==(V=o.principleReplacement)&&void 0!==V&&V.name?`${h(o.principleReplacement.name)} (por principio)`:(null===(z=o.principle)||void 0===z?void 0:z.length)>0?`${o.principle.map(e=>h(e.name)).join(", ")}${o.principle.length>1?" (mixto)":""}`:"Sin principio";s+=`${e}\n`}if(e.commonFieldsInGroup.has("Prote\xedna")&&!y)s+=`${h((null===(j=o.protein)||void 0===j?void 0:j.name)||"Sin prote\xedna")}\n`;if(e.commonFieldsInGroup.has("Bebida")){var U,$;const e="Juego de mango"===(null===(U=o.drink)||void 0===U?void 0:U.name)?"Jugo de mango":h((null===($=o.drink)||void 0===$?void 0:$.name)||"Sin bebida");s+=`${e}\n`}if(e.commonFieldsInGroup.has("Cubiertos")&&!i&&(s+=`Cubiertos: ${o.cutlery?"S\xed":"No"}\n`),e.commonFieldsInGroup.has("Acompa\xf1amientos"))s+=`Acompa\xf1amientos: ${y?"Ya incluidos":(null===(D=o.sides)||void 0===D?void 0:D.length)>0?o.sides.map(e=>h(e.name)).join(", "):"Sin acompa\xf1amientos"}\n`;if(e.commonFieldsInGroup.has("Adiciones")&&(null===(O=o.additions)||void 0===O?void 0:O.length)>0&&o.additions.forEach((e,t)=>{s+=`- ${h(e.name)}${e.protein||e.replacement?` (${e.protein||e.replacement})`:""} (${e.quantity||1})\n`}),e.commonFieldsInGroup.has("Notas")){const e=p(o.notes)||"Ninguna";s+=`Notas: ${e}\n`}e.commonFieldsInGroup.has("Mesa")&&i&&(s+=`\ud83d\udccd Mesa: ${o.tableNumber||"No especificada"}\n`)}s+="\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n";l>1&&(e.identicalGroups.length>1||e.identicalGroups.some(t=>t.meals.length<e.meals.length))&&(s+="\ud83d\udd04 Diferencias:\n",e.identicalGroups.forEach((t,n)=>{var r;const l=t.indices.map(e=>e+1).sort((e,t)=>e-t),c=l.length>1?`*Almuerzos ${l.slice(0,-1).join(", ")}${l.length>2?",":""} y ${l[l.length-1]}*`:`*Almuerzo ${l[0]}*`;s+=`${c}:\n`;const u=t.meals[0],d=null===u||void 0===u||null===(r=u.principle)||void 0===r?void 0:r.some(e=>v.includes(e.name));m.forEach(t=>{if(e.commonFieldsInGroup.has(t)&&a(u,t)===a(o,t))return;let n;var r,l,c;if("Sopa"===t)n="Solo bandeja"===(null===(r=u.soup)||void 0===r?void 0:r.name)?"solo bandeja":null!==(l=u.soupReplacement)&&void 0!==l&&l.name?`${h(u.soupReplacement.name)} (por sopa)`:null!==(c=u.soup)&&void 0!==c&&c.name&&"Sin sopa"!==u.soup.name?h(u.soup.name):"Sin sopa";else if("Principio"===t){var m,v;n=null!==(m=u.principleReplacement)&&void 0!==m&&m.name?`${h(u.principleReplacement.name)} (por principio)`:(null===(v=u.principle)||void 0===v?void 0:v.length)>0?`${u.principle.map(e=>h(e.name)).join(", ")}${u.principle.length>1?" (mixto)":""}`:"Sin principio"}else if("Prote\xedna"===t){var y;n=d?"Prote\xedna: Ya incluida en el arroz":h((null===(y=u.protein)||void 0===y?void 0:y.name)||"Sin prote\xedna")}else if("Bebida"===t){var b,w;n="Juego de mango"===(null===(b=u.drink)||void 0===b?void 0:b.name)?"Jugo de mango":h((null===(w=u.drink)||void 0===w?void 0:w.name)||"Sin bebida")}else if("Cubiertos"===t)n="Cubiertos: "+(u.cutlery?"S\xed":"No");else if("Acompa\xf1amientos"===t){var x;n=d?"Acompa\xf1amientos: Ya incluidos":`Acompa\xf1amientos: ${(null===(x=u.sides)||void 0===x?void 0:x.length)>0?u.sides.map(e=>h(e.name)).join(", "):"Ninguno"}`}else if("Hora"===t)n=f(u.time)?h(u.time.name):"Lo m\xe1s r\xe1pido";else if("Pago"===t){var E,S;n=h(i?(null===(E=u.paymentMethod)||void 0===E?void 0:E.name)||"No especificado":(null===(S=u.payment)||void 0===S?void 0:S.name)||"No especificado")}else if("Notas"===t)n=`Notas: ${p(u.notes)||"Ninguna"}`;else if("Mesa"===t&&i)n=`Mesa: ${u.tableNumber||"No especificada"}`;else if("Direcci\xf3n"===t){const t=[];g.forEach(n=>{var r,i;if(e.commonAddressFieldsInGroup[n])return;const s=null===(r=u.address)||void 0===r?void 0:r[n],o=(null===(i=u.address)||void 0===i?void 0:i.addressType)||"";"address"===n&&s?t.push(`\ud83d\udccd Direcci\xf3n: ${s}`):"addressType"===n&&s?t.push("\ud83c\udfe0 Lugar de entrega: "+("house"===s?"Casa/Apartamento Individual":"school"===s?"Colegio/Oficina":"complex"===s?"Conjunto Residencial":"shop"===s?"Tienda/Local":"No especificado")):"recipientName"===n&&"school"===o&&s?t.push(`\ud83d\udc64 Nombre del destinatario: ${s}`):"phoneNumber"===n&&s?t.push(`\ud83d\udcde Tel\xe9fono: ${s}`):"unitDetails"===n&&"complex"===o&&s?t.push(`\ud83c\udfe2 Detalles: ${s}`):"localName"===n&&"shop"===o&&s&&t.push(`\ud83c\udfec Nombre del local: ${s}`)}),n=t.join("\n")}!n||a(u,t)===a(o,t)&&e.commonFieldsInGroup.has(t)||(s+=`${n}\n`)}),s+="\n"}),s+="\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n")}),(y||Object.keys(b).some(e=>b[e]))&&(y&&(s+=`\ud83d\udd52 Entrega: ${f(d.time)?h(d.time.name):"Lo m\xe1s r\xe1pido"}\n`),w.forEach(e=>{if(b[e]){const t=b[e],n=b.addressType||"";"address"===e&&t?s+=`\ud83d\udccd Direcci\xf3n: ${t}\n`:"addressType"===e&&t?s+=`\ud83c\udfe0 Lugar de entrega: ${"house"===t?"Casa/Apartamento Individual":"school"===t?"Colegio/Oficina":"complex"===t?"Conjunto Residencial":"shop"===t?"Tienda/Local":"No especificado"}\n`:"recipientName"===e&&"school"===n&&t?s+=`\ud83d\udc64 Nombre del destinatario: ${t}\n`:"phoneNumber"===e&&t?s+=`\ud83d\udcde Tel\xe9fono: ${t}\n`:"unitDetails"===e&&"complex"===n&&t?s+=`\ud83c\udfe2 Detalles: ${t}\n`:"localName"===e&&"shop"===n&&t&&(s+=`\ud83c\udfec Nombre del local: ${t}\n`)}}),s+="\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const S=u(o);const T=Object.keys(S).every(e=>"Efectivo"===e||"No especificado"===e);return Object.keys(S).length>0&&(T?(s+="Paga en efectivo al momento de la entrega.\n",s+=`\ud83d\udcb5 Efectivo: $${(n||0).toLocaleString("es-CO")}\n`,s+="Si no tienes efectivo, puedes transferir por Nequi o DaviPlata al n\xfamero: 313 850 5647.\n",s+=`\n\ud83d\udcb0 Total: $${(n||0).toLocaleString("es-CO")}\n`,s+="\ud83d\ude9a Estimado: 25-30 min (10-15 si est\xe1n cerca).\n"):(s+="\ud83d\udcb3 Instrucciones de pago:\n",s+="Env\xeda al n\xfamero 313 850 5647 (Nequi o DaviPlata):\n",Object.entries(S).forEach(e=>{let[t,n]=e;"No especificado"!==t&&n>0&&(s+=`\ud83d\udd39 ${t}: $${(n||0).toLocaleString("es-CO")}\n`)}),s+=`\n\ud83d\udcb0 Total: $${(n||0).toLocaleString("es-CO")}\n`,s+="\ud83d\ude9a Estimado: 25-30 min (10-15 si est\xe1n cerca).\n")),s+="\n\xa1Gracias por tu pedido! \ud83d\ude0a",s}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+_(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),A(o,t,i,"",function(e){return e})):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+_(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+_(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.H=r.createRoot,r.hydrateRoot},4489:(e,t,n)=>{"use strict";n.d(t,{X:()=>i,x8:()=>r});const r=function(e,t){var n,r;if(!e||!e.type||!e.type.name)return 0;const i=e.type.name.toLowerCase().trim(),s=((null===(n=e.broth)||void 0===n?void 0:n.name)||"").toLowerCase().trim(),o=e.orderType||"takeaway",a={"solo huevos":{default:{mesa:7e3,llevar:8e3}},"solo caldo":{"caldo de costilla":{mesa:7e3,llevar:8e3},"caldo de pescado":{mesa:7e3,llevar:8e3},"caldo de pata":{mesa:8e3,llevar:9e3},"caldo de pajarilla":{mesa:9e3,llevar:1e4},default:{mesa:7e3,llevar:8e3}},"desayuno completo":{"caldo de costilla":{mesa:11e3,llevar:12e3},"caldo de pescado":{mesa:11e3,llevar:12e3},"caldo de pata":{mesa:12e3,llevar:13e3},"caldo de pajarilla":{mesa:13e3,llevar:14e3},default:{mesa:11e3,llevar:12e3}},"mo\xf1ona":{default:{mesa:13e3,llevar:14e3}}};let l=0;if(a[i]){const e=a[i];if("solo caldo"===i||"desayuno completo"===i){const t=e[s]||e.default;l="table"===o?t.mesa:t.llevar}else{const t=e.default;l="table"===o?t.mesa:t.llevar}}else l="table"===o?7e3:8e3;return l+((null===(r=e.additions)||void 0===r?void 0:r.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0))||0)},i=function(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e||!e.type)return 0;const s=i.find(t=>{var n;return t.id===(null===(n=e.type)||void 0===n?void 0:n.id)})||{steps:[],requiresProtein:!1},o=s.steps||[],a=["type"];o.includes("broth")&&a.push("broth"),o.includes("eggs")&&a.push("eggs"),o.includes("riceBread")&&a.push("riceBread"),o.includes("drink")&&a.push("drink"),o.includes("protein")&&s.requiresProtein&&a.push("protein"),t?(a.push("tableNumber","payment"),n&&a.push("orderType")):a.push("cutlery","time","address","payment");const l={type:!(null===e||void 0===e||!e.type),broth:!(null===e||void 0===e||!e.broth),eggs:!(null===e||void 0===e||!e.eggs),riceBread:!(null===e||void 0===e||!e.riceBread),drink:!(null===e||void 0===e||!e.drink),protein:!(null===e||void 0===e||!e.protein),cutlery:null!==(null===e||void 0===e?void 0:e.cutlery),time:!(null===e||void 0===e||!e.time),address:!(null===e||void 0===e||null===(r=e.address)||void 0===r||!r.address),payment:!(null===e||void 0===e||!e.payment),tableNumber:!(null===e||void 0===e||!e.tableNumber),orderType:!(null===e||void 0===e||!e.orderType)},c=a.filter(e=>l[e]).length,u=a.length,d=u>0?c/u*100:0;return Math.round(d)}},4916:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i=(e,t)=>{const[n,i]=(0,r.useState)(()=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Error reading localStorage:",n),t}});return(0,r.useEffect)(()=>{try{localStorage.setItem(e,JSON.stringify(n))}catch(t){console.error("Error writing to localStorage:",t)}},[n,e]),[n,i]}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},5323:(e,t,n)=>{"use strict";function r(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy(function(){return e(...arguments)},{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function i(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function s(e){const t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function o(e,t,n,r){if("function"===typeof t){const[i,o]=s(r);t=t(void 0!==n?n:e.custom,i,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,o]=s(r);t=t(void 0!==n?n:e.custom,i,o)}return t}function a(e,t,n){const r=e.getProps();return o(r,t,void 0!==n?n:r.custom,e)}function l(e,t){return e?.[t]??e?.default??e}n.d(t,{P:()=>Go});const c=e=>e,u={},d=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],h={value:null,addProjectionMetrics:null};function p(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=d.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){o.has(t)&&(u.schedule(t),e()),l++,t(a)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{a=e,i?s=!0:(i=!0,[n,r]=[r,n],n.forEach(c),t&&h.value&&h.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(e)))}};return u}(s,t?n:void 0),e),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:p,update:f,preRender:m,render:g,postRender:v}=o,y=()=>{const s=u.useManualTiming?i.timestamp:performance.now();n=!1,u.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),p.process(i),f.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(y))},b=d.reduce((t,s)=>{const a=o[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(y)),a.schedule(t,s,o)},t},{});return{schedule:b,cancel:e=>{for(let t=0;t<d.length;t++)o[d[t]].cancel(e)},state:i,steps:o}}const{schedule:f,cancel:m,state:g,steps:v}=p("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:c,!0),y=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],b=(()=>new Set(y))(),w=new Set(["width","height","top","left","right","bottom",...y]);function x(e,t){-1===e.indexOf(t)&&e.push(t)}function E(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class S{constructor(){this.subscriptions=[]}add(e){return x(this.subscriptions,e),()=>E(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function T(e,t){return t?e*(1e3/t):0}let C;function k(){C=void 0}const N={now:()=>(void 0===C&&N.set(g.isProcessing||u.useManualTiming?g.timestamp:performance.now()),C),set:e=>{C=e,queueMicrotask(k)}},_={current:void 0};class A{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=N.now();if(t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&(t.events.change?.notify(t.current),t.dependents))for(const i of t.dependents)i.dirty();n&&t.events.renderRequest?.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var t;this.current=e,this.updatedAt=N.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new S);const n=this.events[e].add(t);return"change"===e?()=>{n(),f.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return _.current&&_.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=N.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return T(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function I(e,t){return new A(e,t)}const P=e=>Array.isArray(e);function R(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,I(n))}function O(e){return P(e)?e[e.length-1]||0:e}const j=e=>Boolean(e&&e.getVelocity);function D(e,t){const n=e.getValue("willChange");if(r=n,Boolean(j(r)&&r.add))return n.add(t);if(!n&&u.WillChange){const n=new u.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}const M=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),L="data-"+M("framerAppearId");function F(e){return e.props[L]}const V=(e,t)=>n=>t(e(n)),z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(V)},U=(e,t,n)=>n>t?t:n<e?e:n,$=e=>1e3*e,B=e=>e/1e3,H={layout:0,mainThread:0,waapi:0};const q=e=>t=>"string"===typeof t&&t.startsWith(e),W=q("--"),G=q("var(--"),K=e=>!!G(e)&&Q.test(e.split("/*")[0].trim()),Q=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Y={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},X={...Y,transform:e=>U(0,1,e)},J={...Y,default:1},Z=e=>Math.round(1e5*e)/1e5,ee=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const te=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ne=(e,t)=>n=>Boolean("string"===typeof n&&te.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),re=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,s,o,a]=r.match(ee);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},ie={...Y,transform:e=>Math.round((e=>U(0,255,e))(e))},se={test:ne("rgb","red"),parse:re("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+ie.transform(t)+", "+ie.transform(n)+", "+ie.transform(r)+", "+Z(X.transform(i))+")"}};const oe={test:ne("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:se.transform},ae=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),le=ae("deg"),ce=ae("%"),ue=ae("px"),de=ae("vh"),he=ae("vw"),pe=(()=>({...ce,parse:e=>ce.parse(e)/100,transform:e=>ce.transform(100*e)}))(),fe={test:ne("hsl","hue"),parse:re("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+ce.transform(Z(n))+", "+ce.transform(Z(r))+", "+Z(X.transform(i))+")"}},me={test:e=>se.test(e)||oe.test(e)||fe.test(e),parse:e=>se.test(e)?se.parse(e):fe.test(e)?fe.parse(e):oe.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?se.transform(e):fe.transform(e),getAnimatableNone:e=>{const t=me.parse(e);return t.alpha=0,me.transform(t)}},ge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const ve="number",ye="color",be=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function we(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(be,e=>(me.test(e)?(r.color.push(s),i.push(ye),n.push(me.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(ve),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:o,indexes:r,types:i}}function xe(e){return we(e).values}function Ee(e){const{split:t,types:n}=we(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===ve?Z(e[s]):t===ye?me.transform(e[s]):e[s]}return i}}const Se=e=>"number"===typeof e?0:me.test(e)?me.getAnimatableNone(e):e;const Te={test:function(e){return isNaN(e)&&"string"===typeof e&&(e.match(ee)?.length||0)+(e.match(ge)?.length||0)>0},parse:xe,createTransformer:Ee,getAnimatableNone:function(e){const t=xe(e);return Ee(e)(t.map(Se))}};function Ce(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ke(e,t){return n=>n>0?t:e}const Ne=(e,t,n)=>e+(t-e)*n,_e=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Ae=[oe,se,fe];function Ie(e){const t=(n=e,Ae.find(e=>e.test(n)));var n;if(Boolean(t),!Boolean(t))return!1;let r=t.parse(e);return t===fe&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=Ce(i,e,t+1/3),o=Ce(i,e,t),a=Ce(i,e,t-1/3)}else s=o=a=r;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:i}}(r)),r}const Pe=(e,t)=>{const n=Ie(e),r=Ie(t);if(!n||!r)return ke(e,t);const i={...n};return e=>(i.red=_e(n.red,r.red,e),i.green=_e(n.green,r.green,e),i.blue=_e(n.blue,r.blue,e),i.alpha=Ne(n.alpha,r.alpha,e),se.transform(i))},Re=new Set(["none","hidden"]);function Oe(e,t){return n=>Ne(e,t,n)}function je(e){return"number"===typeof e?Oe:"string"===typeof e?K(e)?ke:me.test(e)?Pe:Le:Array.isArray(e)?De:"object"===typeof e?me.test(e)?Pe:Me:ke}function De(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>je(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Me(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=je(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const Le=(e,t)=>{const n=Te.createTransformer(t),r=we(e),i=we(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Re.has(e)&&!i.values.length||Re.has(t)&&!r.values.length?function(e,t){return Re.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):z(De(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],a=e.values[o]??0;n[i]=a,r[s]++}return n}(r,i),i.values),n):ke(e,t)};function Fe(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Ne(e,t,n);return je(e)(e,t)}const Ve=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return f.update(t,e)},stop:()=>m(t),now:()=>g.isProcessing?g.timestamp:N.now()}},ze=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(1e4*e(s/(i-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ue=2e4;function $e(e){let t=0;let n=e.next(t);for(;!n.done&&t<Ue;)t+=50,n=e.next(t);return t>=Ue?1/0:t}function Be(e,t,n){const r=Math.max(t-5,0);return T(n-e(r),t-r)}const He={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qe=.001;function We(e){let t,n,{duration:r=He.duration,bounce:i=He.bounce,velocity:s=He.velocity,mass:o=He.mass}=e;$(He.maxDuration);let a=1-i;a=U(He.minDamping,He.maxDamping,a),r=U(He.minDuration,He.maxDuration,B(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-s,o=Ke(e,a),l=Math.exp(-n);return qe-i/o*l},n=e=>{const n=e*a*r,i=n*s+s,o=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Ke(Math.pow(e,2),a);return(-t(e)+qe>0?-1:1)*((i-o)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<Ge;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=$(r),isNaN(l))return{stiffness:He.stiffness,damping:He.damping,duration:r};{const e=Math.pow(l,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const Ge=12;function Ke(e,t){return e*Math.sqrt(1-t*t)}const Qe=["duration","bounce"],Ye=["stiffness","damping","mass"];function Xe(e,t){return t.some(t=>void 0!==e[t])}function Je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:He.velocity,stiffness:He.stiffness,damping:He.damping,mass:He.mass,isResolvedFromDuration:!1,...e};if(!Xe(e,Ye)&&Xe(e,Qe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*U(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:He.mass,stiffness:i,damping:s}}else{const n=We(e);t={...t,...n,mass:He.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-B(n.velocity||0)}),f=h||0,m=c/(2*Math.sqrt(l*u)),g=o-s,v=B(Math.sqrt(l/u)),y=Math.abs(g)<5;let b;if(r||(r=y?He.restSpeed.granular:He.restSpeed.default),i||(i=y?He.restDelta.granular:He.restDelta.default),m<1){const e=Ke(v,m);b=t=>{const n=Math.exp(-m*v*t);return o-n*((f+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>o-Math.exp(-v*e)*(g+(f+v*g)*e);else{const e=v*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*v*t),r=Math.min(e*t,300);return o-n*((f+m*v*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const w={calculatedDuration:p&&d||null,next:e=>{const t=b(e);if(p)a.done=e>=d;else{let n=0===e?f:0;m<1&&(n=0===e?$(f):Be(b,e,t));const s=Math.abs(n)<=r,l=Math.abs(o-t)<=i;a.done=s&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min($e(w),Ue),t=ze(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function Ze(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,v=void 0===a?g:a(g);v!==g&&(m=v-h);const y=e=>-m*Math.exp(-e/i),b=e=>v+y(e),w=e=>{const t=y(e),n=b(e);p.done=Math.abs(t)<=u,p.value=p.done?v:n};let x,E;const S=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(x=e,E=Je({keyframes:[p.value,f(p.value)],velocity:Be(b,e,p.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return E||void 0!==x||(t=!0,w(e),S(e)),void 0!==x&&e>=x?E.next(e-x):(!t&&w(e),p)}}}Je.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)({...e,keyframes:[0,t]}),r=Math.min($e(n),Ue);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:B(r)}}(e,100,Je);return e.ease=t.ease,e.duration=$(t.duration),e.type="keyframes",e};const et=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function tt(e,t,n,r){if(e===t&&n===r)return c;const i=t=>function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=et(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:et(i(e),t,r)}const nt=tt(.42,0,1,1),rt=tt(0,0,.58,1),it=tt(.42,0,.58,1),st=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ot=e=>t=>1-e(1-t),at=tt(.33,1.53,.69,.99),lt=ot(at),ct=st(lt),ut=e=>(e*=2)<1?.5*lt(e):.5*(2-Math.pow(2,-10*(e-1))),dt=e=>1-Math.sin(Math.acos(e)),ht=ot(dt),pt=st(dt),ft=e=>Array.isArray(e)&&"number"===typeof e[0],mt={linear:c,easeIn:nt,easeInOut:it,easeOut:rt,circIn:dt,circInOut:pt,circOut:ht,backIn:lt,backInOut:ct,backOut:at,anticipate:ut},gt=e=>{if(ft(e)){e.length;const[t,n,r,i]=e;return tt(t,n,r,i)}return"string"===typeof e?mt[e]:e},vt=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function yt(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(t.length,1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],i=n||u.mix||Fe,s=e.length-1;for(let o=0;o<s;o++){let n=i(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||c:t;n=z(e,n)}r.push(n)}return r}(t,r,i),l=a.length,d=n=>{if(o&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=vt(e[r],e[r+1],n);return a[r](i)};return n?t=>d(U(e[0],e[s-1],t)):d}function bt(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=vt(0,t,r);e.push(Ne(n,1,i))}}(t,e.length-1),t}function wt(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(gt):gt(i),o={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:bt(n),t),l=yt(a,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||it).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(o.value=l(e),o.done=e>=t,o)}}const xt=e=>null!==e;function Et(e,t,n){let{repeat:r,repeatType:i="loop"}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.filter(xt),a=s<0||r&&"loop"!==i&&r%2===1?0:o.length-1;return a&&void 0!==n?n:o[a]}const St={decay:Ze,inertia:Ze,tween:wt,keyframes:wt,spring:Je};function Tt(e){"string"===typeof e.type&&(e.type=St[e.type])}class Ct{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const kt=e=>e/100;class Nt extends Ct{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==N.now()&&this.tick(N.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},H.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Tt(e);const{type:t=wt,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=e;let{keyframes:o}=e;const a=t||wt;a!==wt&&"number"!==typeof o[0]&&(this.mixKeyframes=z(kt,Fe(o[0],o[1])),o=[0,100]);const l=a({...e,keyframes:o});"mirror"===i&&(this.mirroredGenerator=a({...e,keyframes:[...o].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=$e(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,b=n;if(u){const e=Math.min(this.currentTime,r)/o;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/o)):"mirror"===d&&(b=s)),y=U(0,1,n)*o}const w=v?{done:!1,value:c[0]}:b.next(y);i&&(w.value=i(w.value));let{done:x}=w;v||null===a||(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return E&&p!==Ze&&(w.value=Et(c,this.options,m,this.speed)),f&&f(w.value),E&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return B(this.calculatedDuration)}get time(){return B(this.currentTime)}set time(e){e=$(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(N.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=B(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Ve,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(N.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,H.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}const _t=e=>180*e/Math.PI,At=e=>{const t=_t(Math.atan2(e[1],e[0]));return Pt(t)},It={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:At,rotateZ:At,skewX:e=>_t(Math.atan(e[1])),skewY:e=>_t(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Pt=e=>((e%=360)<0&&(e+=360),e),Rt=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ot=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),jt={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Rt,scaleY:Ot,scale:e=>(Rt(e)+Ot(e))/2,rotateX:e=>Pt(_t(Math.atan2(e[6],e[5]))),rotateY:e=>Pt(_t(Math.atan2(-e[2],e[0]))),rotateZ:At,rotate:At,skewX:e=>_t(Math.atan(e[4])),skewY:e=>_t(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Dt(e){return e.includes("scale")?1:0}function Mt(e,t){if(!e||"none"===e)return Dt(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=jt,i=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=It,i=t}if(!i)return Dt(t);const s=r[t],o=i[1].split(",").map(Lt);return"function"===typeof s?s(o):o[s]}function Lt(e){return parseFloat(e.trim())}const Ft=e=>e===Y||e===ue,Vt=new Set(["x","y","z"]),zt=y.filter(e=>!Vt.has(e));const Ut={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return Mt(n,"x")},y:(e,t)=>{let{transform:n}=t;return Mt(n,"y")}};Ut.translateX=Ut.x,Ut.translateY=Ut.y;const $t=new Set;let Bt=!1,Ht=!1,qt=!1;function Wt(){if(Ht){const e=Array.from($t).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return zt.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{let[n,r]=t;e.getValue(n)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Ht=!1,Bt=!1,$t.forEach(e=>e.complete(qt)),$t.clear()}function Gt(){$t.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ht=!0)})}class Kt{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?($t.add(this),Bt||(Bt=!0,f.read(Gt),f.resolveKeyframes(Wt))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=r?.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$t.delete(this)}cancel(){"scheduled"===this.state&&($t.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function Qt(e){let t;return()=>(void 0===t&&(t=e()),t)}const Yt=Qt(()=>void 0!==window.ScrollTimeline),Xt={};function Jt(e,t){const n=Qt(e);return()=>Xt[t]??n()}const Zt=Jt(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),en=e=>{let[t,n,r,i]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${i})`},tn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:en([0,.65,.55,1]),circOut:en([.55,0,1,.45]),backIn:en([.31,.01,.66,-.59]),backOut:en([.33,1.53,.69,.99])};function nn(e,t){return e?"function"===typeof e?Zt()?ze(e,t):"ease-out":ft(e)?en(e):Array.isArray(e)?e.map(e=>nn(e,t)||tn.easeOut):tn[e]:void 0}function rn(e,t,n){let{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=nn(a,i);Array.isArray(d)&&(u.easing=d),h.value&&H.waapi++;const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"};c&&(p.pseudoElement=c);const f=e.animate(u,p);return h.value&&f.finished.finally(()=>{H.waapi--}),f}function sn(e){return"function"===typeof e&&"applyToOptions"in e}class on extends Ct{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:a}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=s,this.options=e,e.type;const l=function(e){let{type:t,...n}=e;return sn(t)&&Zt()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}(e);this.animation=rn(t,n,r,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=Et(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}a?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return B(Number(e))}get time(){return B(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Yt()?(this.animation.timeline=t,c):n(this)}}const an={anticipate:ut,backInOut:ct,circInOut:pt};function ln(e){"string"===typeof e.ease&&e.ease in an&&(e.ease=an[e.ease])}class cn extends on{constructor(e){ln(e),Tt(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:i,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const o=new Nt({...s,autoplay:!1}),a=$(this.finishedTime??this.time);t.setWithVelocity(o.sample(a-10).value,o.sample(a).value,10),o.stop()}}const un=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Te.test(e)&&"0"!==e||e.startsWith("url(")));const dn=new Set(["opacity","clipPath","filter","transform"]),hn=Qt(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class pn extends Ct{constructor(e){let{autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...d}=e;super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=N.now();const h={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...d},p=u?.KeyframeResolver||Kt;this.keyframeResolver=new p(a,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),l,c,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:a,isHandoff:l,onUpdate:d}=n;this.resolvedAt=N.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],o=un(i,t),a=un(s,t);return!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||sn(n))&&r)}(e,i,s,o)||(!u.instantAnimations&&a||d?.(Et(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const h={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},p=!l&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e,a=t?.owner?.current;if(!(a instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return hn()&&n&&dn.has(n)&&("transform"!==n||!c)&&!l&&!r&&"mirror"!==i&&0!==s&&"inertia"!==o}(h)?new cn({...h,element:h.motionValue.owner.current}):new Nt(h);p.finished.then(()=>this.notifyFinished()).catch(c),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),qt=!0,Gt(),Wt(),qt=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const fn=e=>null!==e;const mn={type:"spring",stiffness:500,damping:25,restSpeed:10},gn={type:"keyframes",duration:.8},vn={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yn=(e,t)=>{let{keyframes:n}=t;return n.length>2?gn:b.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:mn:vn};const bn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return o=>{const a=l(r,e)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d-=$(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-d,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length})(a)||Object.assign(h,yn(e,h)),h.duration&&(h.duration=$(h.duration)),h.repeatDelay&&(h.repeatDelay=$(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let p=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(h.duration=0,0===h.delay&&(p=!0)),(u.instantAnimations||u.skipAnimations)&&(p=!0,h.duration=0,h.delay=0),h.allowFlatten=!a.type&&!a.ease,p&&!s&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const s=e.filter(fn),o=r&&"loop"!==i&&r%2===1?0:s.length-1;return o&&void 0!==n?n:s[o]}(h.keyframes,a);if(void 0!==e)return void f.update(()=>{h.onUpdate(e),h.onComplete()})}return a.isSync?new Nt(h):new pn(h)}};function wn(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function xn(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:s=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const a in c){const t=e.getValue(a,e.latestValues[a]??null),r=c[a];if(void 0===r||d&&wn(d,a))continue;const i={delay:n,...l(s||{},a)},o=t.get();if(void 0!==o&&!t.isAnimating&&!Array.isArray(r)&&r===o&&!i.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=F(e);if(t){const e=window.MotionHandoffAnimation(t,a,f);null!==e&&(i.startTime=e,h=!0)}}D(e,a),t.start(bn(a,t,r,e.shouldReduceMotion&&w.has(a)?{type:!1}:i,e,h));const p=t.animation;p&&u.push(p)}return o&&Promise.all(u).then(()=>{f.update(()=>{o&&function(e,t){const n=a(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s)R(e,o,O(s[o]))}(e,o)})}),u}function En(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=a(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(xn(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:s=0,staggerChildren:o,staggerDirection:a}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0;const a=[],l=e.variantChildren.size,c=(l-1)*i,u="function"===typeof r,d=u?e=>r(e,l):1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return c-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort(Sn).forEach((e,i)=>{e.notify("AnimationStart",t),a.push(En(e,t,{...o,delay:n+(u?0:r)+d(i)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,r,s,o,a,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[s,o]:[o,s];return e().then(()=>t())}return Promise.all([s(),o(n.delay)])}function Sn(e,t){return e.sortNodePosition(t)}function Tn(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Cn(e){return"string"===typeof e||Array.isArray(e)}const kn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nn=["initial",...kn],_n=Nn.length;function An(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&An(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<_n;n++){const r=Nn[n],i=e.props[r];(Cn(i)||!1===i)&&(t[r]=i)}return t}const In=[...kn].reverse(),Pn=kn.length;function Rn(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>En(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=En(e,t,r);else{const i="function"===typeof t?a(e,t,r.custom):t;n=Promise.all(xn(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function On(e){let t=Rn(e),n=Mn(),r=!0;const s=t=>(n,r)=>{const i=a(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(i){const{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function o(o){const{props:l}=e,c=An(e.parent)||{},u=[],d=new Set;let h={},p=1/0;for(let t=0;t<Pn;t++){const a=In[t],f=n[a],m=void 0!==l[a]?l[a]:c[a],g=Cn(m),v=a===o?f.isActive:null;!1===v&&(p=t);let y=m===c[a]&&m!==l[a]&&g;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...h},!f.isActive&&null===v||!m&&!f.prevProp||i(m)||"boolean"===typeof m)continue;const b=jn(f.prevProp,m);let w=b||a===o&&f.isActive&&!y&&g||t>p&&g,x=!1;const E=Array.isArray(m)?m:[m];let S=E.reduce(s(a),{});!1===v&&(S={});const{prevResolvedValues:T={}}=f,C={...T,...S},k=t=>{w=!0,d.has(t)&&(x=!0,d.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in C){const t=S[e],n=T[e];if(h.hasOwnProperty(e))continue;let r=!1;r=P(t)&&P(n)?!Tn(t,n):t!==n,r?void 0!==t&&null!==t?k(e):d.add(e):void 0!==t&&d.has(e)?k(e):f.protectedKeys[e]=!0}f.prevProp=m,f.prevResolvedValues=S,f.isActive&&(h={...h,...S}),r&&e.blockInitialAnimation&&(w=!1);w&&(!(y&&b)||x)&&u.push(...E.map(e=>({animation:e,options:{type:a}})))}if(d.size){const t={};if("boolean"!==typeof l.initial){const n=a(e,Array.isArray(l.initial)?l.initial[0]:l.initial);n&&n.transition&&(t.transition=n.transition)}d.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),u.push({animation:t})}let f=Boolean(u.length);return!r||!1!==l.initial&&l.initial!==l.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(u):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;const i=o(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Mn(),r=!0}}}function jn(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Tn(t,e)}function Dn(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mn(){return{animate:Dn(!0),whileInView:Dn(),whileHover:Dn(),whileTap:Dn(),whileDrag:Dn(),whileFocus:Dn(),exit:Dn()}}class Ln{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Fn=0;const Vn={animation:{Feature:class extends Ln{constructor(e){super(e),e.animationState||(e.animationState=On(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();i(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends Ln{constructor(){super(...arguments),this.id=Fn++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},zn={x:!1,y:!1};function Un(){return zn.x||zn.y}function $n(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Bn=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Hn(e){return{point:{x:e.pageX,y:e.pageY}}}function qn(e,t,n,r){return $n(e,t,(e=>t=>Bn(t)&&e(t,Hn(t)))(n),r)}function Wn(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function Gn(e){return e.max-e.min}function Kn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Ne(t.min,t.max,e.origin),e.scale=Gn(n)/Gn(t),e.translate=Ne(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Qn(e,t,n,r){Kn(e.x,t.x,n.x,r?r.originX:void 0),Kn(e.y,t.y,n.y,r?r.originY:void 0)}function Yn(e,t,n){e.min=n.min+t.min,e.max=e.min+Gn(t)}function Xn(e,t,n){e.min=t.min-n.min,e.max=e.min+Gn(t)}function Jn(e,t,n){Xn(e.x,t.x,n.x),Xn(e.y,t.y,n.y)}const Zn=()=>({x:{min:0,max:0},y:{min:0,max:0}});function er(e){return[e("x"),e("y")]}function tr(e){return void 0===e||1===e}function nr(e){let{scale:t,scaleX:n,scaleY:r}=e;return!tr(t)||!tr(n)||!tr(r)}function rr(e){return nr(e)||ir(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ir(e){return sr(e.x)||sr(e.y)}function sr(e){return e&&"0%"!==e}function or(e,t,n){return n+t*(e-n)}function ar(e,t,n,r,i){return void 0!==i&&(e=or(e,i,r)),or(e,n,r)+t}function lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=ar(e.min,t,n,r,i),e.max=ar(e.max,t,n,r,i)}function cr(e,t){let{x:n,y:r}=t;lr(e.x,n.translate,n.scale,n.originPoint),lr(e.y,r.translate,r.scale,r.originPoint)}const ur=.999999999999,dr=1.0000000000001;function hr(e,t){e.min=e.min+t,e.max=e.max+t}function pr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;lr(e,t,n,Ne(e.min,e.max,i),r)}function fr(e,t){pr(e.x,t.x,t.scaleX,t.scale,t.originX),pr(e.y,t.y,t.scaleY,t.scale,t.originY)}function mr(e,t){return Wn(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const gr=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null};function vr(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const yr=(e,t)=>Math.abs(e-t);class br{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Er(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=yr(e.x,t.x),r=yr(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=g;this.history.push({...r,timestamp:i});const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=wr(t,this.transformPagePoint),f.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=Er("pointercancel"===e.type?this.lastMoveEventInfo:wr(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!Bn(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=r||window;const o=wr(Hn(e),this.transformPagePoint),{point:a}=o,{timestamp:l}=g;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,Er(o,this.history)),this.removeListeners=z(qn(this.contextWindow,"pointermove",this.handlePointerMove),qn(this.contextWindow,"pointerup",this.handlePointerUp),qn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),m(this.updatePoint)}}function wr(e,t){return t?{point:t(e.point)}:e}function xr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Er(e,t){let{point:n}=e;return{point:n,delta:xr(n,Tr(t)),offset:xr(n,Sr(t)),velocity:Cr(t,.1)}}function Sr(e){return e[0]}function Tr(e){return e[e.length-1]}function Cr(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Tr(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>$(t)));)n--;if(!r)return{x:0,y:0};const s=B(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function kr(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Nr(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const _r=.35;function Ar(e,t,n){return{min:Ir(e,t),max:Ir(e,n)}}function Ir(e,t){return"number"===typeof e?e:e[t]||0}const Pr=new WeakMap;class Rr{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new br(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Hn(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?zn[s]?null:(zn[s]=!0,()=>{zn[s]=!1}):zn.x||zn.y?null:(zn.x=zn.y=!0,()=>{zn.x=zn.y=!1}),!this.openDragLock))return;var s;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),er(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ce.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Gn(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&f.postRender(()=>i(e,t)),D(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>er(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:gr(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&f.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Or(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?Ne(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Ne(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&vr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:kr(e.x,r,s),y:kr(e.y,n,i)}}(n.layoutBox,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;return!1===e?e=0:!0===e&&(e=_r),{x:Ar(e,"left","right"),y:Ar(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&er(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!vr(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=mr(e,n),{scroll:i}=t;return i&&(hr(r.x,i.offset.x),hr(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:Nr(e.x,t.x),y:Nr(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Wn(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=er(o=>{if(!Or(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,d)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return D(this.visualElement,e),n.start(bn(e,n,0,t,this.visualElement,!1))}stopAnimation(){er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){er(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){er(t=>{const{drag:n}=this.getProps();if(!Or(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-Ne(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!vr(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};er(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=Gn(e),i=Gn(t);return i>r?n=vt(t.min,t.max-r,e.min):r>i&&(n=vt(e.min,e.max-i,t.min)),U(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),er(t=>{if(!Or(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(Ne(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;Pr.set(this.visualElement,this);const e=qn(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();vr(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),f.read(t);const i=$n(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(er(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=_r,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function Or(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const jr=e=>(t,n)=>{e&&f.postRender(()=>e(t,n))};var Dr=n(579);const{schedule:Mr,cancel:Lr}=p(queueMicrotask,!1);var Fr=n(5043);const Vr=(0,Fr.createContext)(null);const zr=(0,Fr.createContext)({}),Ur=(0,Fr.createContext)({}),$r={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Br(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Hr={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!ue.test(e))return e;e=parseFloat(e)}return`${Br(e,t.target.x)}% ${Br(e,t.target.y)}%`}},qr={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=Te.parse(e);if(s.length>5)return i;const o=Te.createTransformer(e),a="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+a]/=l,s[1+a]/=c;const u=Ne(l,c,.5);return"number"===typeof s[2+a]&&(s[2+a]/=u),"number"===typeof s[3+a]&&(s[3+a]/=u),o(s)}},Wr={};let Gr=!1;class Kr extends Fr.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)Wr[t]=e[t],W(t)&&(Wr[t].isCSSVariable=!0)}(Yr),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),Gr&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$r.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:s}=n;return s?(s.isPresent=i,Gr=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||f.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Mr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Qr(e){const[t,n]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,Fr.useContext)(Vr);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=(0,Fr.useId)();(0,Fr.useEffect)(()=>{if(e)return i(s)},[e]);const o=(0,Fr.useCallback)(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}(),r=(0,Fr.useContext)(zr);return(0,Dr.jsx)(Kr,{...e,layoutGroup:r,switchLayoutGroup:(0,Fr.useContext)(Ur),isPresent:t,safeToRemove:n})}const Yr={borderRadius:{...Hr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hr,borderTopRightRadius:Hr,borderBottomLeftRadius:Hr,borderBottomRightRadius:Hr,boxShadow:qr};function Xr(e){return"object"===typeof e&&null!==e}function Jr(e){return Xr(e)&&"ownerSVGElement"in e}const Zr=(e,t)=>e.depth-t.depth;class ei{constructor(){this.children=[],this.isDirty=!1}add(e){x(this.children,e),this.isDirty=!0}remove(e){E(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Zr),this.isDirty=!1,this.children.forEach(e)}}function ti(e,t){const n=N.now(),r=i=>{let{timestamp:s}=i;const o=s-n;o>=t&&(m(r),e(o-t))};return f.setup(r,!0),()=>m(r)}function ni(e){return j(e)?e.get():e}const ri=["TopLeft","TopRight","BottomLeft","BottomRight"],ii=ri.length,si=e=>"string"===typeof e?parseFloat(e):e,oi=e=>"number"===typeof e||ue.test(e);function ai(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const li=ui(0,.5,ht),ci=ui(.5,.95,c);function ui(e,t,n){return r=>r<e?0:r>t?1:n(vt(e,t,r))}function di(e,t){e.min=t.min,e.max=t.max}function hi(e,t){di(e.x,t.x),di(e.y,t.y)}function pi(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function fi(e,t,n,r,i){return e=or(e-=t,1/n,r),void 0!==i&&(e=or(e,1/i,r)),e}function mi(e,t,n,r,i){let[s,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;ce.test(t)&&(t=parseFloat(t),t=Ne(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=Ne(s.min,s.max,r);e===s&&(a-=t),e.min=fi(e.min,t,n,a,i),e.max=fi(e.max,t,n,a,i)}(e,t[s],t[o],t[a],t.scale,r,i)}const gi=["x","scaleX","originX"],vi=["y","scaleY","originY"];function yi(e,t,n,r){mi(e.x,t,gi,n?n.x:void 0,r?r.x:void 0),mi(e.y,t,vi,n?n.y:void 0,r?r.y:void 0)}function bi(e){return 0===e.translate&&1===e.scale}function wi(e){return bi(e.x)&&bi(e.y)}function xi(e,t){return e.min===t.min&&e.max===t.max}function Ei(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Si(e,t){return Ei(e.x,t.x)&&Ei(e.y,t.y)}function Ti(e){return Gn(e.x)/Gn(e.y)}function Ci(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ki{constructor(){this.members=[]}add(e){x(this.members,e),e.scheduleRender()}remove(e){if(E(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ni={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},_i=["","X","Y","Z"];let Ai=0;function Ii(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Pi(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=F(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",f,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Pi(r)}function Ri(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n?.();this.id=Ai++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,h.value&&(Ni.nodes=Ni.calculatedTargetDeltas=Ni.calculatedProjections=0),this.nodes.forEach(Di),this.nodes.forEach($i),this.nodes.forEach(Bi),this.nodes.forEach(Mi),h.addProjectionMetrics&&h.addProjectionMetrics(Ni)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new ei)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new S),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=Jr(e)&&!(Jr(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;f.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=ti(i,250),$r.hasAnimatedSinceResize&&($r.hasAnimatedSinceResize=!1,this.nodes.forEach(Ui)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||Qi,{onLayoutAnimationStart:a,onLayoutAnimationComplete:c}=s.getProps(),u=!this.targetLayout||!Si(this.targetLayout,i),d=!n&&r;if(this.options.layoutRoot||this.resumeFrom||d||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e={...l(o,"layout"),onPlay:a,onComplete:c};(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||Ui(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),m(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hi),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Pi(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Fi);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Vi);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zi),this.nodes.forEach(Oi),this.nodes.forEach(ji)):this.nodes.forEach(Vi),this.clearAllSnapshots();const e=N.now();g.delta=U(0,1e3/60,e-g.timestamp),g.timestamp=e,g.isProcessing=!0,v.update.process(g),v.preRender.process(g),v.render.process(g),g.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Li),this.sharedNodes.forEach(qi)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,f.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){f.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Gn(this.snapshot.measuredBox.x)||Gn(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!wi(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||rr(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Ji((r=n).x),Ji(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(es))){const{scroll:e}=this.root;e&&(hr(t.x,e.offset.x),hr(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(hi(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:s}=r;r!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&hi(t,e),hr(t.x,i.offset.x),hr(t.y,i.offset.y))}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};hi(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&fr(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),rr(e.latestValues)&&fr(n,e.latestValues)}return rr(this.latestValues)&&fr(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};hi(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!rr(e.latestValues))continue;nr(e.latestValues)&&e.updateSnapshot();const r=Zn();hi(r,e.measurePageBox()),yi(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return rr(this.latestValues)&&yi(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==g.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:i}=this.options;if(this.layout&&(r||i)){if(this.resolvedRelativeTargetAt=g.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Jn(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),hi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,o,a;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,o=this.relativeTarget,a=this.relativeParent.target,Yn(s.x,o.x,a.x),Yn(s.y,o.y,a.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):hi(this.target,this.layout.layoutBox),cr(this.target,this.targetDelta)):hi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Jn(this.relativeTargetOrigin,this.target,e.target),hi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}h.value&&Ni.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!nr(this.parent.latestValues)&&!ir(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===g.timestamp&&(n=!1),n)return;const{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!i)return;hi(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,o;t.x=t.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&fr(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,cr(e,o)),r&&rr(s.latestValues)&&fr(e,s.latestValues))}t.x<dr&&t.x>ur&&(t.x=1),t.y<dr&&t.y>ur&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:a}=e;a?(this.projectionDelta&&this.prevProjectionDelta?(pi(this.prevProjectionDelta.x,this.projectionDelta.x),pi(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Qn(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&Ci(this.projectionDelta.x,this.prevProjectionDelta.x)&&Ci(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a)),h.value&&Ni.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(Ki));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,f,m,g;Wi(s.x,e.x,n),Wi(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jn(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=o,g=n,Gi(p.x,f.x,m.x,g),Gi(p.y,f.y,m.y,g),d&&(l=this.relativeTarget,h=d,xi(l.x,h.x)&&xi(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),hi(d,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=Ne(0,n.opacity??1,li(r)),e.opacityExit=Ne(t.opacity??1,0,ci(r))):s&&(e.opacity=Ne(t.opacity??1,n.opacity??1,r));for(let o=0;o<ii;o++){const i=`border${ri[o]}Radius`;let s=ai(t,i),a=ai(n,i);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||oi(s)===oi(a)?(e[i]=Math.max(Ne(si(s),si(a),r),0),(ce.test(a)||ce.test(s))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=Ne(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(m(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=f.update(()=>{$r.hasAnimatedSinceResize=!0,H.layout++,this.motionValue||(this.motionValue=I(0)),this.currentAnimation=function(e,t,n){const r=j(e)?e:I(e);return r.start(bn("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{H.layout--},onComplete:()=>{H.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Zi(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Gn(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Gn(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}hi(t,n),fr(t,i),Qn(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ki);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&Ii("z",e,r,this.animationValues);for(let i=0;i<_i.length;i++)Ii(`rotate${_i[i]}`,e,r,this.animationValues),Ii(`skew${_i[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=ni(t?.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ni(t?.pointerEvents)||""),void(this.hasProjected&&!rr(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:o,skewY:a}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),s&&(r+=`rotateY(${s}deg) `),o&&(r+=`skewX(${o}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+=`scale(${a}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(s=n(i,s)),e.transform=s;const{x:o,y:a}=this.projectionDelta;e.transformOrigin=`${100*o.origin}% ${100*a.origin}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const l in Wr){if(void 0===i[l])continue;const{correct:t,applyTo:n,isCSSVariable:o}=Wr[l],a="none"===s?i[l]:t(i[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=a}else o?this.options.visualElement.renderState.vars[l]=a:e[l]=a}this.options.layoutId&&(e.pointerEvents=r===this?ni(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(Fi),this.root.sharedNodes.clear()}}}function Oi(e){e.updateLayout()}function ji(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;"size"===i?er(e=>{const r=s?t.measuredBox[e]:t.layoutBox[e],i=Gn(r);r.min=n[e].min,r.max=r.min+i}):Zi(i,t.layoutBox,n)&&er(r=>{const i=s?t.measuredBox[r]:t.layoutBox[r],o=Gn(n[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Qn(o,n,t.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?Qn(a,e.applyTransform(r,!0),t.measuredBox):Qn(a,n,t.layoutBox);const l=!wi(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o={x:{min:0,max:0},y:{min:0,max:0}};Jn(o,t.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Jn(a,n,s.layoutBox),Si(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Di(e){h.value&&Ni.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Mi(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Li(e){e.clearSnapshot()}function Fi(e){e.clearMeasurements()}function Vi(e){e.isLayoutDirty=!1}function zi(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ui(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $i(e){e.resolveTargetDelta()}function Bi(e){e.calcProjection()}function Hi(e){e.resetSkewAndRotation()}function qi(e){e.removeLeadSnapshot()}function Wi(e,t,n){e.translate=Ne(t.translate,0,n),e.scale=Ne(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Gi(e,t,n,r){e.min=Ne(t.min,n.min,r),e.max=Ne(t.max,n.max,r)}function Ki(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Qi={duration:.45,ease:[.4,0,.1,1]},Yi=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Xi=Yi("applewebkit/")&&!Yi("chrome/")?Math.round:c;function Ji(e){e.min=Xi(e.min),e.max=Xi(e.max)}function Zi(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Ti(t),i=Ti(n),s=.2,!(Math.abs(r-i)<=s));var r,i,s}function es(e){return e!==e.root&&e.scroll?.wasRoot}const ts=Ri({attachResizeListener:(e,t)=>$n(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ns={current:void 0},rs=Ri({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ns.current){const e=new ts({});e.mount(window),e.setOptions({layoutScroll:!0}),ns.current=e}return ns.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),is={pan:{Feature:class extends Ln{constructor(){super(...arguments),this.removePointerDownListener=c}onPointerDown(e){this.session=new br(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gr(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:jr(e),onStart:jr(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&f.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=qn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Ln{constructor(e){super(e),this.removeGroupControls=c,this.removeListeners=c,this.controls=new Rr(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||c}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:rs,MeasureLayout:Qr}};function ss(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){let r=document;t&&(r=t.current);const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function os(e){return!("touch"===e.pointerType||Un())}function as(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&f.postRender(()=>i(t,Hn(t)))}const ls=(e,t)=>!!t&&(e===t||ls(e,t.parentElement)),cs=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const us=new WeakSet;function ds(e){return t=>{"Enter"===t.key&&e(t)}}function hs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ps(e){return Bn(e)&&!Un()}function fs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=ss(e,n),o=e=>{const r=e.currentTarget;if(!ps(e))return;us.add(r);const s=t(r,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),us.has(r)&&us.delete(r),ps(e)&&"function"===typeof s&&s(e,{success:t})},a=e=>{o(e,r===window||r===document||n.useGlobalTarget||ls(r,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,i),Xr(t=e)&&"offsetHeight"in t&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=ds(()=>{if(us.has(n))return;hs(n,"down");const e=ds(()=>{hs(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>hs(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),function(e){return cs.has(e.tagName)||-1!==e.tabIndex}(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}function ms(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&f.postRender(()=>i(t,Hn(t)))}const gs=new WeakMap,vs=new WeakMap,ys=e=>{const t=gs.get(e.target);t&&t(e)},bs=e=>{e.forEach(ys)};function ws(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;vs.has(r)||vs.set(r,{});const i=vs.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(bs,{root:t,...n})),i[s]}(t);return gs.set(e,n),r.observe(e),()=>{gs.delete(e),r.unobserve(e)}}const xs={some:0,all:1};const Es={inView:{Feature:class extends Ln{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:xs[r]};return ws(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Ln{mount(){const{current:e}=this.node;e&&(this.unmount=fs(e,(e,t)=>(ms(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return ms(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Ln{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=z($n(this.node.current,"focus",()=>this.onFocus()),$n(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Ln{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=ss(e,n),o=e=>{if(!os(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const s=e=>{os(e)&&(r(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach(e=>{e.addEventListener("pointerenter",o,i)}),s}(e,(e,t)=>(as(this.node,t,"Start"),e=>as(this.node,e,"End"))))}unmount(){}}}},Ss={layout:{ProjectionNode:rs,MeasureLayout:Qr}},Ts=(0,Fr.createContext)({strict:!1}),Cs=(0,Fr.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ks=(0,Fr.createContext)({});function Ns(e){return i(e.animate)||Nn.some(t=>Cn(e[t]))}function _s(e){return Boolean(Ns(e)||e.variants)}function As(e){const{initial:t,animate:n}=function(e,t){if(Ns(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Cn(t)?t:void 0,animate:Cn(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,Fr.useContext)(ks));return(0,Fr.useMemo)(()=>({initial:t,animate:n}),[Is(t),Is(n)])}function Is(e){return Array.isArray(e)?e.join(" "):e}const Ps="undefined"!==typeof window,Rs={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Os={};for(const Ko in Rs)Os[Ko]={isEnabled:e=>Rs[Ko].some(t=>!!e[t])};const js=Symbol.for("motionComponentSymbol");function Ds(e,t,n){return(0,Fr.useCallback)(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):vr(n)&&(n.current=r))},[t])}const Ms=Ps?Fr.useLayoutEffect:Fr.useEffect;function Ls(e,t,n,r,i){const{visualElement:s}=(0,Fr.useContext)(ks),o=(0,Fr.useContext)(Ts),a=(0,Fr.useContext)(Vr),l=(0,Fr.useContext)(Cs).reducedMotion,c=(0,Fr.useRef)(null);r=r||o.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:l}));const u=c.current,d=(0,Fr.useContext)(Ur);!u||u.projection||!i||"html"!==u.type&&"svg"!==u.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Fs(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(o)||a&&vr(a),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(c.current,n,i,d);const h=(0,Fr.useRef)(!1);(0,Fr.useInsertionEffect)(()=>{u&&h.current&&u.update(n,a)});const p=n[L],f=(0,Fr.useRef)(Boolean(p)&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return Ms(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),Mr.render(u.render),f.current&&u.animationState&&u.animationState.animateChanges())}),(0,Fr.useEffect)(()=>{u&&(!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),f.current=!1))}),u}function Fs(e){if(e)return!1!==e.options.allowProjection?e.projection:Fs(e.parent)}function Vs(e){let{preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:i,Component:s}=e;function o(e,t){let o;const a={...(0,Fr.useContext)(Cs),...e,layoutId:zs(e)},{isStatic:l}=a,c=As(e),u=i(e,l);if(!l&&Ps){!function(){(0,Fr.useContext)(Ts).strict;0}();const e=function(e){const{drag:t,layout:n}=Os;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(a);o=e.MeasureLayout,c.visualElement=Ls(s,u,a,n,e.ProjectionNode)}return(0,Dr.jsxs)(ks.Provider,{value:c,children:[o&&c.visualElement?(0,Dr.jsx)(o,{visualElement:c.visualElement,...a}):null,r(s,e,Ds(u,c.visualElement,t),u,l,c.visualElement)]})}t&&function(e){for(const t in e)Os[t]={...Os[t],...e[t]}}(t),o.displayName=`motion.${"string"===typeof s?s:`create(${s.displayName??s.name??""})`}`;const a=(0,Fr.forwardRef)(o);return a[js]=s,a}function zs(e){let{layoutId:t}=e;const n=(0,Fr.useContext)(zr).id;return n&&void 0!==t?n+"-"+t:t}function Us(e,t){let{layout:n,layoutId:r}=t;return b.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Wr[e]||"opacity"===e)}const $s=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Bs={...Y,transform:Math.round},Hs={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,...{rotate:le,rotateX:le,rotateY:le,rotateZ:le,scale:J,scaleX:J,scaleY:J,scaleZ:J,skew:le,skewX:le,skewY:le,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:X,originX:pe,originY:pe,originZ:ue},zIndex:Bs,fillOpacity:X,strokeOpacity:X,numOctaves:Bs},qs={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ws=y.length;function Gs(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(b.has(l))o=!0;else if(W(l))i[l]=e;else{const t=$s(e,Hs[l]);l.startsWith("origin")?(a=!0,s[l]=t):r[l]=t}}if(t.transform||(o||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<Ws;s++){const o=y[s],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=$s(a,Hs[o]);l||(i=!1,r+=`${qs[o]||o}(${e}) `),n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin=`${e} ${t} ${n}`}}const Ks=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qs(e,t,n){for(const r in t)j(t[r])||Us(r,n)||(e[r]=t[r])}function Ys(e,t){const n={};return Qs(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,Fr.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Gs(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function Xs(e,t){const n={},r=Ys(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Js={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zs={offset:"strokeDashoffset",array:"strokeDasharray"};function eo(e,t,n,r,i){let{attrX:s,attrY:o,attrScale:a,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...d}=t;if(Gs(e,d,r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=i?.transformBox??"fill-box",delete h.transformBox),void 0!==s&&(h.x=s),void 0!==o&&(h.y=o),void 0!==a&&(h.scale=a),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?Js:Zs;e[s.offset]=ue.transform(-r);const o=ue.transform(t),a=ue.transform(n);e[s.array]=`${o} ${a}`}(h,l,c,u,!1)}const to=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),no=e=>"string"===typeof e&&"svg"===e.toLowerCase();function ro(e,t,n,r){const i=(0,Fr.useMemo)(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return eo(n,t,no(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};Qs(t,e.style,e),i.style={...t,...i.style}}return i}const io=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function so(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||io.has(e)}let oo=e=>!so(e);try{"function"===typeof(ao=require("@emotion/is-prop-valid").default)&&(oo=e=>e.startsWith("on")?!so(e):ao(e))}catch{}var ao;const lo=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function co(e){return"string"===typeof e&&!e.includes("-")&&!!(lo.indexOf(e)>-1||/[A-Z]/u.test(e))}function uo(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,r,i,s)=>{let{latestValues:o}=i;const a=(co(t)?ro:Xs)(n,o,s,t),l=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(oo(i)||!0===n&&so(i)||!t&&!so(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),c=t!==Fr.Fragment?{...l,...a,ref:r}:{},{children:u}=n,d=(0,Fr.useMemo)(()=>j(u)?u.get():u,[u]);return(0,Fr.createElement)(t,{...c,children:d})}}const ho=e=>(t,n)=>{const r=(0,Fr.useContext)(ks),i=(0,Fr.useContext)(Vr),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s}=e;return{latestValues:po(t,n,r,i),renderState:s()}}(e,t,r,i);return n?s():function(e){const t=(0,Fr.useRef)(null);return null===t.current&&(t.current=e()),t.current}(s)};function po(e,t,n,r){const s={},a=r(e,{});for(const i in a)s[i]=ni(a[i]);let{initial:l,animate:c}=e;const u=Ns(e),d=_s(e);t&&d&&!u&&!1!==e.inherit&&(void 0===l&&(l=t.initial),void 0===c&&(c=t.animate));let h=!!n&&!1===n.initial;h=h||!1===l;const p=h?c:l;if(p&&"boolean"!==typeof p&&!i(p)){const t=Array.isArray(p)?p:[p];for(let n=0;n<t.length;n++){const r=o(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[h?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}function fo(e,t,n){const{style:r}=e,i={};for(const s in r)(j(r[s])||t.style&&j(t.style[s])||Us(s,e)||void 0!==n?.getValue(s)?.liveStyle)&&(i[s]=r[s]);return i}const mo={useVisualState:ho({scrapeMotionValuesFromProps:fo,createRenderState:Ks})};function go(e,t,n){const r=fo(e,t,n);for(const i in e)if(j(e[i])||j(t[i])){r[-1!==y.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const vo={useVisualState:ho({scrapeMotionValuesFromProps:go,createRenderState:to})};function yo(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return Vs({...co(n)?vo:mo,preloadedFeatures:e,useRender:uo(r),createVisualElement:t,Component:n})}}const bo=e=>t=>t.test(e),wo=[Y,ue,ce,le,he,de,{test:e=>"auto"===e,parse:e=>e}],xo=e=>wo.find(bo(e)),Eo=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),So=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function To(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const[r,i]=function(e){const t=So.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return Eo(e)?parseFloat(e):e}return K(i)?To(i,t,n+1):i}const Co=e=>/^0[^.\s]+$/u.test(e);function ko(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Co(e))}const No=new Set(["brightness","contrast","saturate","opacity"]);function _o(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(ee)||[];if(!r)return e;const i=n.replace(r,"");let s=No.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Ao=/\b([a-z-]*)\(.*?\)/gu,Io={...Te,getAnimatableNone:e=>{const t=e.match(Ao);return t?t.map(_o).join(" "):e}},Po={...Hs,color:me,backgroundColor:me,outlineColor:me,fill:me,stroke:me,borderColor:me,borderTopColor:me,borderRightColor:me,borderBottomColor:me,borderLeftColor:me,filter:Io,WebkitFilter:Io},Ro=e=>Po[e];function Oo(e,t){let n=Ro(e);return n!==Io&&(n=Te),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jo=new Set(["auto","none","0"]);class Do extends Kt{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),K(n))){const r=To(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!w.has(n)||2!==e.length)return;const[r,i]=e,s=xo(r),o=xo(i);if(s!==o)if(Ft(s)&&Ft(o))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else Ut[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||ko(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!jo.has(t)&&we(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=Oo(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ut[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,s=n[i];n[i]=Ut[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),this.resolveNoneKeyframes()}}const Mo=[...wo,me,Te],Lo={current:null},Fo={current:!1};const Vo=new WeakMap;const zo=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Uo{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kt,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=N.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,f.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Ns(n),this.isVariantNode=_s(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const e=d[h];void 0!==l[h]&&j(e)&&e.set(l[h],!1)}}mount(e){this.current=e,Vo.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Fo.current||function(){if(Fo.current=!0,Ps)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Lo.current=e.matches;e.addEventListener("change",t),t()}else Lo.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Lo.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),m(this.notifyUpdate),m(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=b.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&f.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Os){const t=Os[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<zo.length;n++){const t=zo[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if(j(i))e.addValue(r,i);else if(j(s))e.addValue(r,I(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,I(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=I(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return void 0!==n&&null!==n&&("string"===typeof n&&(Eo(n)||Co(n))?n=parseFloat(n):(r=n,!Mo.find(bo(r))&&Te.test(t)&&(n=Oo(e,t))),this.setBaseTarget(e,j(n)?n.get():n)),j(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){const r=o(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||j(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new S),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class $o extends Uo{constructor(){super(...arguments),this.KeyframeResolver=Do}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;j(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function Bo(e,t,n,r){let{style:i,vars:s}=t;const o=e.style;let a;for(a in i)o[a]=i[a];for(a in r?.applyProjectionStyles(o,n),s)o.setProperty(a,s[a])}class Ho extends $o{constructor(){super(...arguments),this.type="html",this.renderInstance=Bo}readValueFromInstance(e,t){if(b.has(t))return this.projection?.isProjecting?Dt(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Mt(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),i=(W(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return mr(e,n)}build(e,t,n){Gs(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return fo(e,t,n)}}const qo=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class Wo extends $o{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(b.has(t)){const e=Ro(t);return e&&e.default||0}return t=qo.has(t)?t:M(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return go(e,t,n)}build(e,t,n){eo(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){Bo(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(qo.has(i)?i:M(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=no(e.tagName),super.mount(e)}}const Go=r(yo({...Vn,...Es,...is,...Ss},(e,t)=>co(e)?new Wo(t):new Ho(t,{allowProjection:e!==Fr.Fragment})))},5472:(e,t,n)=>{"use strict";n.d(t,{Dc:()=>ve,gS:()=>vc,rJ:()=>rl,kd:()=>gc,H9:()=>il,x7:()=>dc,GG:()=>pc,aU:()=>ul,AB:()=>Zl,aQ:()=>yc,My:()=>Xl,P:()=>Wl,c4:()=>kc,O5:()=>Nc,BN:()=>fc,mZ:()=>mc,_M:()=>Kl,wP:()=>_c});var r,i,s=n(7150),o=n(8812),a=n(443),l=n(1529),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],0>e?-1:0)}):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=a(0),d=a(1),h=a(16777216);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(d)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(p(t))throw Error("division by zero");if(p(e))return new y(c,c);if(f(e))return t=b(m(e),t),new y(m(t.g),m(t.h));if(f(t))return t=b(e,m(t)),new y(m(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!p(r);){var o=s.add(r);0>=o.l(e)&&(i=i.add(n),s=o),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=l(n)).j(t);f(o)||0<o.l(e);)o=(s=l(n-=r)).j(t);p(s)&&(s=d),i=i.add(s),e=g(e,o)}return new y(i,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(f(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(f(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=b(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(p(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return f(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return f(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(f(this))return f(e)?m(this).j(m(e)):m(m(this).j(e));if(f(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.i(r)>>>16,a=65535&this.i(r),u=e.i(i)>>>16,d=65535&e.i(i);n[2*r+2*i]+=a*d,v(n,2*r+2*i),n[2*r+2*i+1]+=o*d,v(n,2*r+2*i+1),n[2*r+2*i+1]+=a*u,v(n,2*r+2*i+1),n[2*r+2*i+2]+=o*u,v(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=u.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=l(Math.pow(n,o)),i=i.j(o).add(l(a))):i=(i=i.j(r)).add(l(a))}return i},r=u.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,p,f,m,g,v,y,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function E(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function T(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function k(e){return k[" "](e),e}k[" "]=function(){};var N=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function _(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<I.length;t++)n=I[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function R(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function O(e){i.setTimeout(()=>{throw e},0)}function j(){var e=V;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var D=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new M,e=>e.reset());class M{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,V=new class{constructor(){this.h=this.g=null}add(e,t){const n=D.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},z=()=>{const e=i.Promise.resolve(void 0);L=()=>{e.then(U)}};var U=()=>{for(var e;e=j();){try{e.h.call(e.g)}catch(n){O(n)}var t=D;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function $(){this.s=this.s,this.C=this.C}function B(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},B.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function q(e,t){if(B.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(N){e:{try{k(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q.aa.h.call(this)}}x(q,B);var W={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Q(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++K,this.da=this.fa=!1}function Y(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Y(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}X.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Z(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,i){if(r&&r.once)return ie(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ne(e,t[s],n,r,i);return null}return n=de(n),e&&e[G]?e.K(t,n,o(r)?!!r.capture:!!r,i):re(e,t,n,!1,r,i)}function re(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=ce(e);if(l||(e[ee]=l=new X(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ie(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=de(n),e&&e[G]?e.L(t,n,o(r)?!!r.capture:!!r,i):re(e,t,n,!0,r,i)}function se(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)se(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=de(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(s=e.g[t],n,r,i))&&(Y(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,i)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])J(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):Y(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new q(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof X?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){$.call(this),this.i=new X(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new B(t,e);else if(t instanceof B)t.target=t.target||e;else{var i=t;P(t=new B(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=fe(o,r,!0,t)&&i}if(i=fe(o=t.g=e,r,!0,t)&&i,i=fe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=fe(o=t.g=n[s],r,!1,t)&&i}function fe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&J(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function me(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ge(e){e.g=me(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(he,$),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,r){se(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Y(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ve extends ${constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){$.call(this),this.h=e,this.g={}}x(ye,$);var be=[];function we(e){_(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),we(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=i.JSON.stringify,Ee=i.JSON.parse,Se=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Te(){}function Ce(e){return e.h||(e.h=e.i())}function ke(){}Te.prototype.h=null;var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _e(){B.call(this,"d")}function Ae(){B.call(this,"c")}x(_e,B),x(Ae,B);var Ie={},Pe=null;function Re(){return Pe=Pe||new he}function Oe(e){B.call(this,Ie.La,e)}function je(e){const t=Re();pe(t,new Oe(t))}function De(e,t){B.call(this,Ie.STAT_EVENT,e),this.stat=t}function Me(e){const t=Re();pe(t,new De(t,e))}function Le(e,t){B.call(this,Ie.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ve(){this.g=!0}function ze(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return xe(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ie.La="serverreachability",x(Oe,B),Ie.STAT_EVENT="statevent",x(De,B),Ie.Ma="timingevent",x(Le,B),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var Ue,$e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function qe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}x(He,Te),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},Ue=new He;var Ge={},Ke={};function Qe(e,t,n){e.L=1,e.v=xt(gt(t)),e.m=n,e.P=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new We,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ve(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(be[0]=i.toString()),i=be);for(var s=0;s<i.length;s++){var o=ne(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),je(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ke:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Ke:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(c(e.ba,e),t)}function tt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||yn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,we(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function it(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),an(n)}fn(n),Me(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&vn(n),!T(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ut(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=En(r,r.J?r.ia:null,r.W),o.K){dt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(tt(a),Ze(a)),r.g=o}else pn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}je()}catch(u){}}qe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},qe.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||je(),tt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=nn(this.g);e="";var s=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Me(12),rt(this),nt(this);break e}ze(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Je(this,a),e==Ke){4==h&&(this.s=4,Me(14),n=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Me(15),ze(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}ze(this.i,this.l,e,null),it(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Me(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(d),d.M=!0,Me(11))}}else ze(this.i,this.l,a,"[Invalid Chunked Response]"),rt(this),nt(this)}else ze(this.i,this.l,a,null),it(this,a);4==h&&rt(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=R(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),rt(this),nt(this)}}}catch(h){}},qe.prototype.cancel=function(){this.J=!0,rt(this)},qe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(je(),Me(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var st=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return E(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}ot.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(ft))?(this.h=!1,vt(this,t[1]||"",!0),this.o=Et(t[2]||""),this.g=Et(t[3]||"",!0),yt(this,t[4]),this.l=Et(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=Et(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function gt(e){return new mt(e)}function vt(e,t,n){e.j=n?Et(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ot(this,t),Dt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,At)),e.i=new Pt(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Et(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,kt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,kt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?_t:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,It)),e.join("")};var Ct,kt=/[#\/\?@]/g,Nt=/[#\?:]/g,_t=/[#\?]/g,At=/[#\?@]/g,It=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ot(e,t){Rt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function jt(e,t){return Rt(e),t=Mt(e,t),e.g.has(t)}function Dt(e,t,n){Ot(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),E(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Lt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ft(){this.g=new Se}function Vt(e,t,n){const r=n||"";try{pt(e,function(e,n){let i=e;o(e)&&(i=xe(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $t(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function qt(e){let t="";return _(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Gt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){Rt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)jt(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,jt(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},x(zt,Te),zt.prototype.g=function(){return new Ut(this.l,this.j)},zt.prototype.i=(Ct={},function(){return Ct}),x(Ut,he),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$t(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):Ht(this),3==this.readyState&&$t(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Qa=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Gt,he);var Kt=/^https?$/i,Qt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))me(e.Ea,0,e);else if(pe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(ft)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Kt.test(o?o.toLowerCase():"")}n=s}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),dn(e,n),(t=new qe(e,e.j,t)).L=2,t.v=xt(gt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function an(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||z(),F||(L(),F=!0),V.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new qe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Qe(n,r,t)}function dn(e,t){e.H&&_(e.H,function(e,n){wt(t,n,e)}),e.l&&pt({},function(e,n){wt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Vt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||z(),F||(L(),F=!0),V.add(t,e),e.v=0}}function fn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new qe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(gt(t)),n.m=null,n.P=!0,Ye(n,e)}function vn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),mn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;pe(r=Re(),new Le(r,n)),cn(e)}else pn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&fn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||vt(r,"https"),xt(r),t?function(e,t){const n=new Ve;if(i.Image){const r=new Image;r.onload=u(Lt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Lt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Lt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Lt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ve;const n=new AbortController,r=setTimeout(()=>{n.abort(),Lt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Lt(0,0,!0,t):Lt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Lt(0,0,!1,t)})}(r.toString(),n)}else Me(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,E(e.i),e.i.length=0),e.l.ra()}}function En(e,t,n){var r=n instanceof mt?gt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new mt(null);r&&vt(o,r),t&&(o.g=t),s&&yt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),dn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new zt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function Tn(){}function Cn(){}function kn(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!T(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function Nn(e){_e.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){Ae.call(this),this.status=1}function An(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ue.g(),this.v=this.o?Ce(this.o):Ce(Ue),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Yt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Yt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ee(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Me(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=En(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new qe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=A(s),P(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),wt(n=gt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(qt(s)))+"&"+t:this.m&&Wt(n,this.m,s)),ut(this.h,i),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),i.T=!0,Qe(i,n,null)):Qe(i,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||at(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),fn(this),Me(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new kn(e,t)},x(kn,he),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){on(this.g)},kn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new st(t.Ya++,e)),3==t.G&&cn(t)},kn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,kn.aa.N.call(this)},x(Nn,_e),x(_n,Ae),x(An,Tn),An.prototype.ua=function(){pe(this.g,"a")},An.prototype.ta=function(e){pe(this.g,new Nn(e))},An.prototype.sa=function(e){pe(this.g,new _n)},An.prototype.ra=function(){pe(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,y=w.createWebChannelTransport=function(){return new Cn},v=w.getStatEventTarget=function(){return Re()},g=w.Event=Ie,m=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$e.NO_ERROR=0,$e.TIMEOUT=8,$e.HTTP_ERROR=6,f=w.ErrorCode=$e,Be.COMPLETE="complete",p=w.EventType=Be,ke.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",he.prototype.listen=he.prototype.K,h=w.WebChannel=ke,w.FetchXmlHttpFactory=zt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,d=w.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",E="4.8.0";class S{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}S.UNAUTHENTICATED=new S(null),S.GOOGLE_CREDENTIALS=new S("google-credentials-uid"),S.FIRST_PARTY=new S("first-party-uid"),S.MOCK_USER=new S("mock-user");let T="11.10.0";const C=new a.Vy("@firebase/firestore");function k(){return C.logLevel}function N(e){if(C.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);C.debug(`Firestore (${T}): ${e}`,...i)}}function _(e){if(C.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);C.error(`Firestore (${T}): ${e}`,...i)}}function A(e){if(C.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);C.warn(`Firestore (${T}): ${e}`,...i)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,R(e,r,n)}function R(e,t,n){let r=`FIRESTORE (${T}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw _(r),new Error(r)}function O(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||R(t,i,r)}function j(e,t){return e}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class L{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(S.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U{constructor(e){this.t=e,this.currentUser=S.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){O(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(O("string"==typeof t.accessToken,31837,{l:t}),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e,2055,{h:e}),new S(e)}}class ${constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=S.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new $(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(S.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,s.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){O(void 0===this.o,3512);const n=e=>{null!=e.error&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,N("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new H(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(O("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new H(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function G(){return new TextEncoder}class K{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=W(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Q(e,t){return e<t?-1:e>t?1:0}function Y(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Q(r,i);{const s=G(),o=J(s.encode(X(e,n)),s.encode(X(t,n)));return 0!==o?o:Q(r,i)}}n+=r>65535?2:1}return Q(e.length,t.length)}function X(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function J(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Q(e[n],t[n]);return Q(e.length,t.length)}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Q(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):Y(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new M(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ie extends te{construct(e,t,n){return new ie(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new ie([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new M(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new M(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new M(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new M(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ie(t)}static emptyPath(){return new ie([])}}class se{constructor(e){this.path=e}static fromPath(e){return new se(ne.fromString(e))}static fromName(e){return new se(ne.fromString(e).popFirst(5))}static empty(){return new se(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new ne(e.slice()))}}function oe(e,t,n){if(!n)throw new M(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ae(e){if(!se.isDocumentKey(e))throw new M(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function le(e){if(se.isDocumentKey(e))throw new M(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ue(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":P(12329,{type:typeof e})}function de(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ue(e);throw new M(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function he(e,t){if(t<=0)throw new M(D.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function fe(e,t){if(!ce(e))throw new M(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new M(D.INVALID_ARGUMENT,n);return!0}const me=-62135596800,ge=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ve(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<me)throw new M(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fe(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-me;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:pe("string",ve._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ve(0,0))}static max(){return new ye(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class we{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}we.UNKNOWN_ID=-1;function xe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(1e9===r?new ve(n+1,0):new ve(n,r));return new Se(i,se.empty(),t)}function Ee(e){return new Se(e.readTime,e.key,be)}class Se{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Se(ye.min(),se.empty(),be)}static max(){return new Se(ye.max(),se.empty(),be)}}function Te(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=se.comparator(e.documentKey,t.documentKey),0!==n?n:Q(e.largestBatchId,t.largestBatchId))}const Ce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ke{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ne(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==Ce)throw e;N("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(e){return _e.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,n)=>{t(e)})}static reject(e){return new _e((t,n)=>{n(e)})}static waitFor(e){return new _e((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=_e.resolve(!1);for(const n of e)t=t.next(e=>e?_e.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new _e((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new _e((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ae(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ie(e){return"IndexedDbTransactionError"===e.name}class Pe{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pe.ue=-1;const Re=-1;function Oe(e){return null==e}function je(e){return 0===e&&1/e==-1/0}function De(e){return"number"==typeof e&&Number.isInteger(e)&&!je(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Me="\x01";function Le(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ve(t)),t=Fe(e.get(n),t);return Ve(t)}function Fe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Me:n+="\x01\x11";break;default:n+=t}}return n}function Ve(e){return e+Me+"\x01"}const ze="remoteDocuments",Ue="owner",$e="mutationQueues",Be="mutations";const He="documentMutations",qe="remoteDocumentsV14",We="remoteDocumentGlobal",Ge="targets",Ke="targetDocuments",Qe="targetGlobal",Ye="collectionParents",Xe="clientMetadata",Je="bundles",Ze="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",rt="documentOverlays",it="globals",st=[$e,Be,He,ze,Ge,Ue,Qe,Ke,Xe,We,Ye,Je,Ze],ot=[$e,Be,He,qe,Ge,Ue,Qe,Ke,Xe,We,Ye,Je,Ze,rt],at=ot,lt=[...at,et,tt,nt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pt(this.root,e,this.comparator,!1)}getReverseIterator(){return new pt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pt(this.root,e,this.comparator,!0)}}class pt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=i?i:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof mt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(ie.comparator)}static empty(){return new vt([])}unionWith(e){let t=new mt(ie.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const wt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(e){if(O(!!e,39018),"string"==typeof e){let t=0;const n=wt.exec(e);if(O(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Et(e.seconds),nanos:Et(e.nanos)}}function Et(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function St(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const Tt="server_timestamp",Ct="__type__",kt="__previous_value__",Nt="__local_write_time__";function _t(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ct])||void 0===n?void 0:n.stringValue)===Tt}function At(e){const t=e.mapValue.fields[kt];return _t(t)?At(t):t}function It(e){const t=xt(e.mapValue.fields[Nt].timestampValue);return new ve(t.seconds,t.nanos)}class Pt{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Rt="(default)";class Ot{constructor(e,t){this.projectId=e,this.database=t||Rt}static empty(){return new Ot("","")}get isDefaultDatabase(){return this.database===Rt}isEqual(e){return e instanceof Ot&&e.projectId===this.projectId&&e.database===this.database}}const jt="__type__",Dt="__max__",Mt={mapValue:{fields:{__type__:{stringValue:Dt}}}},Lt="__vector__",Ft="value";function Vt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_t(e)?4:nn(e)?9007199254740991:en(e)?10:11:P(28295,{value:e})}function zt(e,t){if(e===t)return!0;const n=Vt(e);if(n!==Vt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return It(e).isEqual(It(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xt(e.timestampValue),r=xt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return St(e.bytesValue).isEqual(St(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Et(e.geoPointValue.latitude)===Et(t.geoPointValue.latitude)&&Et(e.geoPointValue.longitude)===Et(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Et(e.integerValue)===Et(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Et(e.doubleValue),r=Et(t.doubleValue);return n===r?je(n)===je(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],zt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zt(n[i],r[i])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function Ut(e,t){return void 0!==(e.values||[]).find(e=>zt(e,t))}function $t(e,t){if(e===t)return 0;const n=Vt(e),r=Vt(t);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Et(e.integerValue||e.doubleValue),r=Et(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bt(e.timestampValue,t.timestampValue);case 4:return Bt(It(e),It(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){const n=St(e),r=St(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Q(n[i],r[i]);if(0!==e)return e}return Q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Q(Et(e.latitude),Et(t.latitude));return 0!==n?n:Q(Et(e.longitude),Et(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ht(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Ft])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Ft])||void 0===r?void 0:r.arrayValue,u=Q((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ht(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Mt.mapValue&&t===Mt.mapValue)return 0;if(e===Mt.mapValue)return 1;if(t===Mt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Y(r[o],s[o]);if(0!==e)return e;const t=$t(n[r[o]],i[s[o]]);if(0!==t)return t}return Q(r.length,s.length)}(e.mapValue,t.mapValue);default:throw P(23264,{le:n})}}function Bt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);const n=xt(e),r=xt(t),i=Q(n.seconds,r.seconds);return 0!==i?i:Q(n.nanos,r.nanos)}function Ht(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$t(n[i],r[i]);if(e)return e}return Q(n.length,r.length)}function qt(e){return Wt(e)}function Wt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xt(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return St(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return se.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Wt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Wt(e.fields[i])}`;return n+"}"}(e.mapValue):P(61005,{value:e})}function Gt(e){switch(Vt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=At(e);return t?16+Gt(t):16;case 5:return 2*e.stringValue.length;case 6:return St(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Gt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ut(e.fields,(e,n)=>{t+=e.length+Gt(n)}),t}(e.mapValue);default:throw P(13486,{value:e})}}function Kt(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qt(e){return!!e&&"integerValue"in e}function Yt(e){return!!e&&"arrayValue"in e}function Xt(e){return!!e&&"nullValue"in e}function Jt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zt(e){return!!e&&"mapValue"in e}function en(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[jt])||void 0===n?void 0:n.stringValue)===Lt}function tn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tn(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Dt}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tn(t)}setAll(e){let t=ie.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=tn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ut(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new rn(tn(this.value))}}function sn(e){const t=[];return ut(e.fields,(e,n)=>{const r=new ie([e]);if(Zt(n)){const e=sn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new vt(t)}class on{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new on(e,0,ye.min(),ye.min(),ye.min(),rn.empty(),0)}static newFoundDocument(e,t,n,r){return new on(e,1,t,ye.min(),n,r,0)}static newNoDocument(e,t){return new on(e,2,t,ye.min(),ye.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,ye.min(),ye.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class an{constructor(e,t){this.position=e,this.inclusive=t}}function ln(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?se.comparator(se.fromName(o.referenceValue),n.key):$t(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function cn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zt(e.position[n],t.position[n]))return!1;return!0}class un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hn{}class pn extends hn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xn(e,t,n):"array-contains"===t?new Cn(e,n):"in"===t?new kn(e,n):"not-in"===t?new Nn(e,n):"array-contains-any"===t?new _n(e,n):new pn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new En(e,n):new Sn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison($t(t,this.value)):null!==t&&Vt(this.value)===Vt(t)&&this.matchesComparison($t(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends hn{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new fn(e,t)}matches(e){return mn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function mn(e){return"and"===e.op}function gn(e){return vn(e)&&mn(e)}function vn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function yn(e){if(e instanceof pn)return e.field.canonicalString()+e.op.toString()+qt(e.value);if(gn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return`${e.op}(${t})`}}function bn(e,t){return e instanceof pn?function(e,t){return t instanceof pn&&e.op===t.op&&e.field.isEqual(t.field)&&zt(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void P(19439)}function wn(e){return e instanceof pn?function(e){return`${e.field.canonicalString()} ${e.op} ${qt(e.value)}`}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(wn).join(" ,")+"}"}(e):"Filter"}class xn extends pn{constructor(e,t,n){super(e,t,n),this.key=se.fromName(n.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class En extends pn{constructor(e,t){super(e,"in",t),this.keys=Tn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sn extends pn{constructor(e,t){super(e,"not-in",t),this.keys=Tn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>se.fromName(e.referenceValue))}class Cn extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yt(t)&&Ut(t.arrayValue,this.value)}}class kn extends pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ut(this.value.arrayValue,t)}}class Nn extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ut(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ut(this.value.arrayValue,t)}}class _n extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ut(this.value.arrayValue,e))}}class An{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Pe=null}}function In(e){return new An(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pn(e){const t=j(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Oe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>qt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>qt(e)).join(",")),t.Pe=e}return t.Pe}function Rn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cn(e.startAt,t.startAt)&&cn(e.endAt,t.endAt)}function On(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class jn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Dn(e,t,n,r,i,s,o,a){return new jn(e,t,n,r,i,s,o,a)}function Mn(e){return new jn(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function Vn(e){const t=j(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new mt(ie.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new un(r,n))}),e.has(ie.keyField().canonicalString())||t.Te.push(new un(ie.keyField(),n))}return t.Te}function zn(e){const t=j(e);return t.Ie||(t.Ie=Un(t,Vn(e))),t.Ie}function Un(e,t){if("F"===e.limitType)return In(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new un(e.field,t)});const n=e.endAt?new an(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new an(e.startAt.position,e.startAt.inclusive):null;return In(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function $n(e,t){const n=e.filters.concat([t]);return new jn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bn(e,t,n){return new jn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hn(e,t){return Rn(zn(e),zn(t))&&e.limitType===t.limitType}function qn(e){return`${Pn(zn(e))}|lt:${e.limitType}`}function Wn(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>wn(e)).join(", ")}]`),Oe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>qt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>qt(e)).join(",")),`Target(${t})`}(zn(e))}; limitType=${e.limitType})`}function Gn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):se.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ln(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vn(e),t))&&!(e.endAt&&!function(e,t,n){const r=ln(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vn(e),t))}(e,t)}function Kn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qn(e){return(t,n)=>{let r=!1;for(const i of Vn(e)){const e=Yn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Yn(e,t,n){const r=e.field.isKeyField()?se.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$t(r,i):P(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P(19790,{direction:e.dir})}}class Xn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return dt(this.inner)}size(){return this.innerSize}}const Jn=new ht(se.comparator);function Zn(){return Jn}const er=new ht(se.comparator);function tr(){let e=er;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function nr(e){let t=er;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function rr(){return sr()}function ir(){return sr()}function sr(){return new Xn(e=>e.toString(),(e,t)=>e.isEqual(t))}const or=new ht(se.comparator),ar=new mt(se.comparator);function lr(){let e=ar;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cr=new mt(Q);function ur(){return cr}function dr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:je(t)?"-0":t}}function hr(e){return{integerValue:""+e}}function pr(e,t){return De(t)?hr(t):dr(e,t)}class fr{constructor(){this._=void 0}}function mr(e,t,n){return e instanceof yr?function(e,t){const n={fields:{[Ct]:{stringValue:Tt},[Nt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&_t(t)&&(t=At(t)),t&&(n.fields[kt]=t),{mapValue:n}}(n,t):e instanceof br?wr(e,t):e instanceof xr?Er(e,t):function(e,t){const n=vr(e,t),r=Tr(n)+Tr(e.Ee);return Qt(n)&&Qt(e.Ee)?hr(r):dr(e.serializer,r)}(e,t)}function gr(e,t,n){return e instanceof br?wr(e,t):e instanceof xr?Er(e,t):n}function vr(e,t){return e instanceof Sr?function(e){return Qt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yr extends fr{}class br extends fr{constructor(e){super(),this.elements=e}}function wr(e,t){const n=Cr(t);for(const r of e.elements)n.some(e=>zt(e,r))||n.push(r);return{arrayValue:{values:n}}}class xr extends fr{constructor(e){super(),this.elements=e}}function Er(e,t){let n=Cr(t);for(const r of e.elements)n=n.filter(e=>!zt(e,r));return{arrayValue:{values:n}}}class Sr extends fr{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Tr(e){return Et(e.integerValue||e.doubleValue)}function Cr(e){return Yt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class kr{constructor(e,t){this.field=e,this.transform=t}}class Nr{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ar(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ir{}function Pr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ur(e.key,_r.none()):new Mr(e.key,e.data,_r.none());{const n=e.data,r=rn.empty();let i=new mt(ie.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lr(e.key,r,new vt(i.toArray()),_r.none())}}function Rr(e,t,n){e instanceof Mr?function(e,t,n){const r=e.value.clone(),i=Vr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!Ar(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Vr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Fr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Or(e,t,n,r){return e instanceof Mr?function(e,t,n,r){if(!Ar(e.precondition,t))return n;const i=e.value.clone(),s=zr(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lr?function(e,t,n,r){if(!Ar(e.precondition,t))return n;const i=zr(e.fieldTransforms,r,t),s=t.data;return s.setAll(Fr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ar(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vr(r.transform,e||null);null!=i&&(null===n&&(n=rn.empty()),n.set(r.field,i))}return n||null}function Dr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof br&&t instanceof br||e instanceof xr&&t instanceof xr?Z(e.elements,t.elements,zt):e instanceof Sr&&t instanceof Sr?zt(e.Ee,t.Ee):e instanceof yr&&t instanceof yr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mr extends Ir{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lr extends Ir{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Vr(e,t,n){const r=new Map;O(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,gr(o,a,n[i]))}return r}function zr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,mr(e,s,t))}return r}class Ur extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $r extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Br{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Or(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Or(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ir();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Pr(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lr())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>Dr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>Dr(e,t))}}class Hr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){O(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=or;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Hr(e,t,n,r)}}class qr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,Kr;function Qr(e){switch(e){case D.OK:return P(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function Yr(e){if(void 0===e)return _("GRPC error has no .code"),D.UNKNOWN;switch(e){case Gr.OK:return D.OK;case Gr.CANCELLED:return D.CANCELLED;case Gr.UNKNOWN:return D.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return D.INTERNAL;case Gr.UNAVAILABLE:return D.UNAVAILABLE;case Gr.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Gr.NOT_FOUND:return D.NOT_FOUND;case Gr.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Gr.ABORTED:return D.ABORTED;case Gr.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Gr.DATA_LOSS:return D.DATA_LOSS;default:return P(39323,{code:e})}}(Kr=Gr||(Gr={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";let Xr=null;const Jr=new r([4294967295,4294967295],0);function Zr(e){const t=G().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ei(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,i],0),new r([s,o],0)]}class ti{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ni(`Invalid padding: ${t}`);if(n<0)throw new ni(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ni(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ni(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=r.fromNumber(this.fe)}pe(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(Jr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=Zr(e),[n,r]=ei(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ti(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.fe)return;const t=Zr(e),[n,r]=ei(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ri{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ii.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ri(ye.min(),r,new ht(Q),Zn(),lr())}}class ii{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ii(n,t,lr(),lr(),lr())}}class si{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class oi{constructor(e,t){this.targetId=e,this.De=t}}class ai{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class li{constructor(){this.ve=0,this.Ce=di(),this.Fe=bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=lr(),t=lr(),n=lr();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}}),new ii(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=di()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,O(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ci{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zn(),this.je=ui(),this.Je=ui(),this.He=new ht(Q)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:P(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const i=r.target;if(On(i))if(0===n){const e=new se(i.path);this.Xe(t,e,on.newNoDocument(e,ye.min()))}else O(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),i=n?this.ut(n,e,r):1;if(0!==i){this.rt(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==Xr||Xr.ct(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,i))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=St(n).toUint8Array()}catch(e){if(e instanceof yt)return A("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ti(s,r,i)}catch(e){return A(e instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.fe?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.We.lt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const i=this.st(r);if(i){if(n.current&&On(i.target)){const t=new se(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,on.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=lr();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new ri(e,t,this.He,this.ze,n);return this.ze=Zn(),this.je=ui(),this.Je=ui(),this.He=new ht(Q),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new li,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new mt(Q),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new mt(Q),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||N("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new li),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ui(){return new ht(se.comparator)}function di(){return new ht(se.comparator)}const hi={asc:"ASCENDING",desc:"DESCENDING"},pi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fi={and:"AND",or:"OR"};class mi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gi(e,t){return e.useProto3Json||Oe(t)?t:{value:t}}function vi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bi(e,t){return vi(e,t.toTimestamp())}function wi(e){return O(!!e,49232),ye.fromTimestamp(function(e){const t=xt(e);return new ve(t.seconds,t.nanos)}(e))}function xi(e,t){return Ei(e,t).canonicalString()}function Ei(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Si(e){const t=ne.fromString(e);return O(Bi(t),10190,{key:t.toString()}),t}function Ti(e,t){return xi(e.databaseId,t.path)}function Ci(e,t){const n=Si(t);if(n.get(1)!==e.databaseId.projectId)throw new M(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new se(Ai(n))}function ki(e,t){return xi(e.databaseId,t)}function Ni(e){const t=Si(e);return 4===t.length?ne.emptyPath():Ai(t)}function _i(e){return new ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ai(e){return O(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ii(e,t,n){return{name:Ti(e,t),fields:n.value.mapValue.fields}}function Pi(e,t){let n;if(t instanceof Mr)n={update:Ii(e,t.key,t.value)};else if(t instanceof Ur)n={delete:Ti(e,t.key)};else if(t instanceof Lr)n={update:Ii(e,t.key,t.data),updateMask:$i(t.fieldMask)};else{if(!(t instanceof $r))return P(16599,{Rt:t.type});n={verify:Ti(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof br)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sr)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw P(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P(27497)}(e,t.precondition)),n}function Ri(e,t){return{documents:[ki(e,t.path)]}}function Oi(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ki(e,i);const s=function(e){if(0!==e.length)return Ui(fn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Vi(e.field),direction:Mi(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gi(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function ji(e){let t=Ni(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){O(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Di(e);return t instanceof fn&&gn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new un(zi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Oe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new an(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new an(n,t)}(n.endAt)),Dn(t,i,o,s,a,"F",l,c)}function Di(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zi(e.unaryFilter.field);return pn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zi(e.unaryFilter.field);return pn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zi(e.unaryFilter.field);return pn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zi(e.unaryFilter.field);return pn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P(61313);default:return P(60726)}}(e):void 0!==e.fieldFilter?function(e){return pn.create(zi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Di(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P(1026)}}(e.compositeFilter.op))}(e):P(30097,{filter:e})}function Mi(e){return hi[e]}function Li(e){return pi[e]}function Fi(e){return fi[e]}function Vi(e){return{fieldPath:e.canonicalString()}}function zi(e){return ie.fromServerFormat(e.fieldPath)}function Ui(e){return e instanceof pn?function(e){if("=="===e.op){if(Jt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NAN"}};if(Xt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NOT_NAN"}};if(Xt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vi(e.field),op:Li(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>Ui(e));return 1===t.length?t[0]:{compositeFilter:{op:Fi(e.op),filters:t}}}(e):P(54877,{filter:e})}function $i(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qi{constructor(e){this.gt=e}}function Wi(e){const t=ji({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bn(t,t.limit,"L"):t}class Gi{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Et(e.integerValue));else if("doubleValue"in e){const n=Et(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),je(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=xt(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(St(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?nn(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):en(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):P(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const i=e.fields||{};this.Ct(t,53);const s=Ft,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(Et(o)),this.xt(s,t),this.Dt(i[s],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),se.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Gi.Ut=new Gi;class Ki{constructor(){this.Dn=new Qi}addToCollectionParentIndex(e,t){return this.Dn.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getIndexType(e,t){return _e.resolve(0)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,t){return _e.resolve(Se.min())}getMinOffsetFromCollectionGroup(e,t){return _e.resolve(Se.min())}updateCollectionGroup(e,t,n){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class Qi{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mt(ne.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mt(ne.comparator)).toArray()}}new Uint8Array(0);const Yi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xi=41943040;class Ji{static withCacheSize(e){return new Ji(e,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ji.DEFAULT_COLLECTION_PERCENTILE=10,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ji.DEFAULT=new Ji(Xi,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ji.DISABLED=new Ji(-1,0,0);class Zi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Zi(0)}static ur(){return new Zi(-1)}}const es="LruGarbageCollector",ts=1048576;function ns(e,t){let[n,r]=e,[i,s]=t;const o=Q(n,i);return 0===o?Q(r,s):o}class rs{constructor(e){this.Tr=e,this.buffer=new mt(ns),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ns(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class is{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){N(es,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ie(e)?N(es,"Ignoring IndexedDB error during garbage collection: ",e):await Ne(e)}await this.Rr(3e5)})}}class ss{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return _e.resolve(Pe.ue);const n=new rs(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(Yi)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yi):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,s,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(N("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),k()<=a.$b.DEBUG&&N("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(l-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function os(e,t){return new ss(e,t)}class as{constructor(){this.changes=new Xn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_e.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ls{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cs{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Or(n.mutation,e,vt.empty(),ve.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,lr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lr();const r=rr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=tr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=rr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,lr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Zn();const s=sr(),o=sr();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Lr)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Or(o.mutation,t,o.mutation.getFieldMask(),ve.now())):s.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new ls(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=sr();let r=new ht((e,t)=>e-t),i=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||vt.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||lr()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=ir();l.forEach(e=>{if(!i.has(e)){const r=Pr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return _e.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):_e.resolve(rr());let o=be,a=i;return s.next(t=>_e.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?_e.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,lr())).next(e=>({batchId:o,changes:nr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(e=>{let t=tr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=tr();return this.indexManager.getCollectionParents(e,i).next(o=>_e.forEach(o,o=>{const a=function(e,t){return new jn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,on.newInvalidDocument(r)))});let n=tr();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Or(s.mutation,r,vt.empty(),ve.now()),Gn(t,r)&&(n=n.insert(e,r))}),n})}}class us{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return _e.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:wi(e.createTime)}}(t)),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Wi(e.bundledQuery),readTime:wi(e.readTime)}}(t)),_e.resolve()}}class ds{constructor(){this.overlays=new ht(se.comparator),this.kr=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rr();return _e.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),_e.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),_e.resolve()}getOverlaysForCollection(e,t,n){const r=rr(),i=t.length+1,s=new se(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return _e.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ht((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=rr(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=rr(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return _e.resolve(o)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qr(t,n));let i=this.kr.get(t);void 0===i&&(i=lr(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}class hs{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_e.resolve()}}class ps{constructor(){this.qr=new mt(fs.Qr),this.$r=new mt(fs.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new fs(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new fs(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new se(new ne([])),n=new fs(t,e),r=new fs(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new se(new ne([])),n=new fs(t,e),r=new fs(t,e+1);let i=lr();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new fs(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fs{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return se.comparator(e.key,t.key)||Q(e.Hr,t.Hr)}static Ur(e,t){return Q(e.Hr,t.Hr)||se.comparator(e.key,t.key)}}class ms{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new mt(fs.Qr)}checkEmpty(e){return _e.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Br(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Yr=this.Yr.add(new fs(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return _e.resolve(s)}lookupMutationBatch(e,t){return _e.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return _e.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.mutationQueue.length?Re:this.er-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fs(t,0),r=new fs(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),_e.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(Q);return t.forEach(e=>{const t=new fs(e,0),r=new fs(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),_e.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;se.isDocumentKey(i)||(i=i.child(""));const s=new fs(new se(i),0);let o=new mt(Q);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},s),_e.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){O(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return _e.forEach(t.mutations,r=>{const i=new fs(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new fs(t,0),r=this.Yr.firstAfterOrEqual(n);return _e.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gs{constructor(e){this.ni=e,this.docs=new ht(se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _e.resolve(n?n.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let n=Zn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():on.newInvalidDocument(e))}),_e.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zn();const s=t.path,o=new se(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Te(Ee(o),n)<=0||(r.has(o.key)||Gn(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ri(e,t){return _e.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vs(this)}getSize(e){return _e.resolve(this.size)}}class vs extends as{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),_e.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class ys{constructor(e){this.persistence=e,this.ii=new Xn(e=>Pn(e),Rn),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.si=0,this.oi=new ps,this.targetCount=0,this._i=Zi.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),_e.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Zi(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.hr(t),_e.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),_e.waitFor(i).next(()=>r)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return _e.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),_e.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),_e.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return _e.resolve(n)}containsKey(e,t){return _e.resolve(this.oi.containsKey(t))}}class bs{constructor(e,t){this.ai={},this.overlays={},this.ui=new Pe(0),this.ci=!1,this.ci=!0,this.li=new hs,this.referenceDelegate=e(this),this.hi=new ys(this),this.indexManager=new Ki,this.remoteDocumentCache=function(e){return new gs(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new qi(t),this.Ti=new us(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ds,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new ms(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){N("MemoryPersistence","Starting transaction:",e);const r=new ws(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return _e.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class ws extends ke{constructor(e){super(),this.currentSequenceNumber=e}}class xs{constructor(e){this.persistence=e,this.Ai=new ps,this.Ri=null}static Vi(e){return new xs(e)}get mi(){if(this.Ri)return this.Ri;throw P(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),_e.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),_e.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.mi,n=>{const r=se.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,ye.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return _e.or([()=>_e.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Es{constructor(e,t){this.persistence=e,this.gi=new Xn(e=>Le(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=os(this,t)}static Vi(e,t){return new Es(e,t)}Ii(){}di(e){return _e.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return _e.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?_e.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ye.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),_e.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),_e.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),_e.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gt(e.data.value)),t}Sr(e,t,n){return _e.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return _e.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ss{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=lr(),r=lr();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ss(e,t.fromCache,n,r)}}class Ts{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Cs{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(0,l.nr)()?8:Ae((0,l.ZQ)())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ts;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(k()<=a.$b.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",Wn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),_e.resolve()):(k()<=a.$b.DEBUG&&N("QueryEngine","Query:",Wn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(k()<=a.$b.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",Wn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):_e.resolve())}ps(e,t){if(Ln(t))return _e.resolve(null);let n=zn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Bn(t,null,"F"),n=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=lr(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ds(t,s,i,n.readTime)?this.ps(e,Bn(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,r){return Ln(t)||r.isEqual(ye.min())?_e.resolve(null):this.gs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ds(t,s,n,r)?_e.resolve(null):(k()<=a.$b.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wn(t)),this.vs(e,s,t,xe(r,be)).next(e=>e))})}bs(e,t){let n=new mt(Qn(e));return t.forEach((t,r)=>{Gn(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return k()<=a.$b.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",Wn(t)),this.gs.getDocumentsMatchingQuery(e,t,Se.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ks="LocalStore",Ns=3e8;class _s{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new ht(Q),this.Ms=new Xn(e=>Pn(e),Rn),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cs(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function As(e,t,n,r){return new _s(e,t,n,r)}async function Is(e,t){const n=j(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=lr();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ps(e){const t=j(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Rs(e,t,n){let r=lr(),i=lr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Zn();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ye.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):N(ks,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ls:r,ks:i}})}function Os(e,t){const n=j(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Re),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function js(e,t){const n=j(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(i=>i?(r=i,_e.resolve(r)):n.hi.allocateTargetId(e).next(i=>(r=new Hi(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function Ds(e,t,n){const r=j(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ie(e))throw e;N(ks,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Ms(e,t,n){const r=j(e);let i=ye.min(),s=lr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=j(e),i=r.Ms.get(n);return void 0!==i?_e.resolve(r.Fs.get(i)):r.hi.getTargetData(t,n)}(r,e,zn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:ye.min(),n?s:lr())).next(e=>(Ls(r,Kn(t),e),{documents:e,qs:s})))}function Ls(e,t,n){let r=e.xs.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class Fs{constructor(){this.activeTargetIds=ur()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vs{constructor(){this.Fo=new Fs,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fs,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zs{xo(e){}shutdown(){}}const Us="ConnectivityMonitor";class $s{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){N(Us,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){N(Us,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bs=null;function Hs(){return null===Bs?Bs=268435456+Math.round(2147483648*Math.random()):Bs++,"0x"+Bs.toString(16)}const qs="RestConnection",Ws={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gs{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===Rt?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const s=Hs(),o=this.Go(e,t.toUriEncodedString());N(qs,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,i);const{host:c}=new URL(o),u=(0,l.zJ)(c);return this.jo(e,o,a,n,u).then(t=>(N(qs,`Received RPC '${e}' ${s}: `,t),t),t=>{throw A(qs,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+T,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Ws[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class Ks{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Qs="WebChannelConnection";class Ys extends Gs{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const s=Hs();return new Promise((i,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(p.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case f.NO_ERROR:const t=a.getResponseJson();N(Qs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case f.TIMEOUT:N(Qs,`RPC '${e}' ${s} timed out`),o(new M(D.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:const n=a.getStatus();if(N(Qs,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(t)>=0?t:D.UNKNOWN}(t.status);o(new M(e,t.message))}else o(new M(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new M(D.UNAVAILABLE,"Connection failed."));break;default:P(9055,{c_:e,streamId:s,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{N(Qs,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);N(Qs,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Hs(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y(),o=v(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");N(Qs,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);this.T_(u);let d=!1,p=!1;const f=new Ks({Ho:t=>{p?N(Qs,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(N(Qs,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),N(Qs,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{p||(N(Qs,`RPC '${e}' stream ${r} transport opened.`),f.s_())}),b(u,h.EventType.CLOSE,()=>{p||(p=!0,N(Qs,`RPC '${e}' stream ${r} transport closed`),f.__(),this.I_(u))}),b(u,h.EventType.ERROR,t=>{p||(p=!0,A(Qs,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.__(new M(D.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{var n;if(!p){const i=t.data[0];O(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){N(Qs,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Gr[e];if(void 0!==t)return Yr(t)}(t),i=o.message;void 0===n&&(n=D.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),p=!0,f.__(new M(n,i)),u.close()}else N(Qs,`RPC '${e}' stream ${r} received:`,i),f.a_(i)}}),b(o,g.STAT_EVENT,t=>{t.stat===m.PROXY?N(Qs,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===m.NOPROXY&&N(Qs,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Xs(){return"undefined"!=typeof document?document:null}function Js(e){return new mi(e,!0)}class Zs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&N("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const eo="PersistentStream";class to{constructor(e,t,n,r,i,s,o,a){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zs(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(_(t.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===D.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new M(D.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return N(eo,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(N(eo,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class no extends to{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(O(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(O(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?D.UNKNOWN:Yr(e.code);return new M(t,e.message||"")}(o);n=new ai(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ci(e,r.document.name),s=wi(r.document.updateTime),o=r.document.createTime?wi(r.document.createTime):ye.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=on.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new si(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ci(e,r.document),s=r.readTime?wi(r.readTime):ye.min(),o=on.newNoDocument(i,s),a=r.removedTargetIds||[];n=new si([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ci(e,r.document),s=r.removedTargetIds||[];n=new si([],s,i,null)}else{if(!("filter"in t))return P(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Wr(r,i),o=e.targetId;n=new oi(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?wi(t.readTime):ye.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=_i(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=On(r)?{documents:Ri(e,r)}:{query:Oi(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yi(e,t.resumeToken);const r=gi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=vi(e,t.snapshotVersion.toTimestamp());const r=gi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=_i(this.serializer),t.removeTarget=e,this.k_(t)}}class ro extends to{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return O(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,O(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){O(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(O(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?wi(e.updateTime):wi(t);return n.isEqual(ye.min())&&(n=wi(t)),new Nr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=wi(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=_i(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Pi(this.serializer,e))};this.k_(t)}}class io{}class so extends io{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new M(D.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Wo(e,Ei(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(D.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Jo(e,Ei(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(D.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class oo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_(t),this._a=!1):N("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const ao="RemoteStore";class lo{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{yo(this)&&(N(ao,"Restarting streams for network reachability change."),await async function(e){const t=j(e);t.Ia.add(4),await uo(t),t.Aa.set("Unknown"),t.Ia.delete(4),await co(t)}(this))})}),this.Aa=new oo(n,r)}}async function co(e){if(yo(e))for(const t of e.da)await t(!0)}async function uo(e){for(const t of e.da)await t(!1)}function ho(e,t){const n=j(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),vo(n)?go(n):Lo(n).x_()&&fo(n,t))}function po(e,t){const n=j(e),r=Lo(n);n.Ta.delete(t),r.x_()&&mo(n,t),0===n.Ta.size&&(r.x_()?r.B_():yo(n)&&n.Aa.set("Unknown"))}function fo(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Lo(e).H_(t)}function mo(e,t){e.Ra.$e(t),Lo(e).Y_(t)}function go(e){e.Ra=new ci({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Lo(e).start(),e.Aa.aa()}function vo(e){return yo(e)&&!Lo(e).M_()&&e.Ta.size>0}function yo(e){return 0===j(e).Ia.size}function bo(e){e.Ra=void 0}async function wo(e){e.Aa.set("Online")}async function xo(e){e.Ta.forEach((t,n)=>{fo(e,t)})}async function Eo(e,t){bo(e),vo(e)?(e.Aa.la(t),go(e)):e.Aa.set("Unknown")}async function So(e,t,n){if(e.Aa.set("Online"),t instanceof ai&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){N(ao,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await To(e,n)}else if(t instanceof si?e.Ra.Ye(t):t instanceof oi?e.Ra.it(t):e.Ra.et(t),!n.isEqual(ye.min()))try{const t=await Ps(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),mo(e,t);const i=new Hi(r.target,t,n,r.sequenceNumber);fo(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N(ao,"Failed to raise snapshot:",t),await To(e,t)}}async function To(e,t,n){if(!Ie(t))throw t;e.Ia.add(1),await uo(e),e.Aa.set("Offline"),n||(n=()=>Ps(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{N(ao,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await co(e)})}function Co(e,t){return t().catch(n=>To(e,n,t))}async function ko(e){const t=j(e),n=Fo(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Re;for(;No(t);)try{const e=await Os(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,_o(t,e)}catch(e){await To(t,e)}Ao(t)&&Io(t)}function No(e){return yo(e)&&e.Pa.length<10}function _o(e,t){e.Pa.push(t);const n=Fo(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Ao(e){return yo(e)&&!Fo(e).M_()&&e.Pa.length>0}function Io(e){Fo(e).start()}async function Po(e){Fo(e).na()}async function Ro(e){const t=Fo(e);for(const n of e.Pa)t.X_(n.mutations)}async function Oo(e,t,n){const r=e.Pa.shift(),i=Hr.from(r,t,n);await Co(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ko(e)}async function jo(e,t){t&&Fo(e).Z_&&await async function(e,t){if(function(e){return Qr(e)&&e!==D.ABORTED}(t.code)){const n=e.Pa.shift();Fo(e).N_(),await Co(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ko(e)}}(e,t),Ao(e)&&Io(e)}async function Do(e,t){const n=j(e);n.asyncQueue.verifyOperationInProgress(),N(ao,"RemoteStore received new credentials");const r=yo(n);n.Ia.add(3),await uo(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await co(n)}async function Mo(e,t){const n=j(e);t?(n.Ia.delete(2),await co(n)):t||(n.Ia.add(2),await uo(n),n.Aa.set("Unknown"))}function Lo(e){return e.Va||(e.Va=function(e,t,n){const r=j(e);return r.ia(),new no(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:wo.bind(null,e),e_:xo.bind(null,e),n_:Eo.bind(null,e),J_:So.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),vo(e)?go(e):e.Aa.set("Unknown")):(await e.Va.stop(),bo(e))})),e.Va}function Fo(e){return e.ma||(e.ma=function(e,t,n){const r=j(e);return r.ia(),new ro(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Po.bind(null,e),n_:jo.bind(null,e),ea:Ro.bind(null,e),ta:Oo.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await ko(e)):(await e.ma.stop(),e.Pa.length>0&&(N(ao,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}class Vo{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Vo(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zo(e,t){if(_("AsyncQueue",`${t}: ${e}`),Ie(e))return new M(D.UNAVAILABLE,`${t}: ${e}`);throw e}class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||se.comparator(t.key,n.key):(e,t)=>se.comparator(e.key,t.key),this.keyedMap=tr(),this.sortedSet=new ht(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Uo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $o{constructor(){this.fa=new ht(se.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):P(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Bo{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Bo(e,t,Uo.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ho{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class qo{constructor(){this.queries=Wo(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=j(e),r=n.queries;n.queries=Wo(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new M(D.ABORTED,"Firestore shutting down"))}}function Wo(){return new Xn(e=>qn(e),Hn)}async function Go(e,t){const n=j(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new Ho,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=zo(e,`Initialization of query '${Wn(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&Xo(n)}async function Ko(e,t){const n=j(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.wa.indexOf(t);e>=0&&(s.wa.splice(e,1),0===s.wa.length?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qo(e,t){const n=j(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(i)&&(r=!0);t.ya=i}}r&&Xo(n)}function Yo(e,t,n){const r=j(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function Xo(e){e.Da.forEach(e=>{e.next()})}var Jo,Zo;(Zo=Jo||(Jo={})).Fa="default",Zo.Cache="cache";class ea{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Bo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Jo.Cache}}class ta{constructor(e){this.key=e}}class na{constructor(e){this.key=e}}class ra{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=lr(),this.mutatedKeys=lr(),this.Xa=Qn(e),this.eu=new Uo(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new $o,r=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Gn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.iu(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Xa(u,a)>0||l&&this.Xa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:s,ru:n,Ds:o,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const o=t&&!r?this.ou():[],a=0===this.Za.size&&this.current&&!r?1:0,l=a!==this.Ya;return this.Ya=a,0!==s.length||l?{snapshot:new Bo(this.query,e.eu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $o,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=lr(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new na(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new ta(n))}),t}uu(e){this.Ha=e.qs,this.Za=lr();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Bo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const ia="SyncEngine";class sa{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class oa{constructor(e){this.key=e,this.lu=!1}}class aa{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Xn(e=>qn(e),Hn),this.Tu=new Map,this.Iu=new Set,this.du=new ht(se.comparator),this.Eu=new Map,this.Au=new ps,this.Ru={},this.Vu=new Map,this.mu=Zi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function la(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Aa(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await ua(r,t,n,!0),i}async function ca(e,t){const n=Aa(e);await ua(n,t,!0,!1)}async function ua(e,t,n,r){const i=await js(e.localStore,zn(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await da(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&ho(e.remoteStore,i),a}async function da(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await Ms(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Sa(e,t.targetId,a._u),a.snapshot}(e,t,n,r);const s=await Ms(e.localStore,t,!0),o=new ra(t,s.qs),a=o.nu(s.documents),l=ii.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Sa(e,n,c._u);const u=new sa(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function ha(e,t,n){const r=j(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(e=>!Hn(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ds(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&po(r.remoteStore,i.targetId),xa(r,i.targetId)}).catch(Ne)):(xa(r,i.targetId),await Ds(r.localStore,i.targetId,!0))}async function pa(e,t){const n=j(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),po(n.remoteStore,r.targetId))}async function fa(e,t){const n=j(e);try{const e=await function(e,t){const n=j(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.hi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.hi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ns||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.hi.updateTargetData(e,c))});let a=Zn(),l=lr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Rs(e,s,t.documentUpdates).next(e=>{a=e.Ls,l=e.ks})),!r.isEqual(ye.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return _e.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Fs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(O(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?O(r.lu,14607):e.removedDocuments.size>0&&(O(r.lu,42227),r.lu=!1))}),await ka(n,e,t)}catch(e){await Ne(e)}}function ma(e,t,n){const r=j(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=j(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&Xo(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ga(e,t,n){const r=j(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let e=new ht(se.comparator);e=e.insert(s,on.newNoDocument(s,ye.min()));const n=lr().add(s),i=new ri(ye.min(),new Map,new ht(Q),e,n);await fa(r,i),r.du=r.du.remove(s),r.Eu.delete(t),Ca(r)}else await Ds(r.localStore,t,!1).then(()=>xa(r,t,n)).catch(Ne)}async function va(e,t){const n=j(e),r=t.batch.batchId;try{const e=await function(e,t){const n=j(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=_e.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);O(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=lr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);wa(n,r,null),ba(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ka(n,e)}catch(e){await Ne(e)}}async function ya(e,t,n){const r=j(e);try{const e=await function(e,t){const n=j(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(O(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);wa(r,t,n),ba(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ka(r,e)}catch(n){await Ne(n)}}function ba(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function wa(e,t,n){const r=j(e);let i=r.Ru[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function xa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||Ea(e,t)})}function Ea(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(po(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Ca(e))}function Sa(e,t,n){for(const r of n)r instanceof ta?(e.Au.addReference(r.key,t),Ta(e,r)):r instanceof na?(N(ia,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Ea(e,r.key)):P(19791,{yu:r})}function Ta(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(N(ia,"New document in limbo: "+n),e.Iu.add(r),Ca(e))}function Ca(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new se(ne.fromString(t)),r=e.mu.next();e.Eu.set(r,new oa(n)),e.du=e.du.insert(n,r),ho(e.remoteStore,new Hi(zn(Mn(n.path)),r,"TargetPurposeLimboResolution",Pe.ue))}}async function ka(e,t,n){const r=j(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{o.push(r.gu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ss.Es(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.hu.J_(i),await async function(e,t){const n=j(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>_e.forEach(t,t=>_e.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>_e.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ie(e))throw e;N(ks,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,s))}async function Na(e,t){const n=j(e);if(!n.currentUser.isEqual(t)){N(ia,"User change. New user:",t.toKey());const e=await Is(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new M(D.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ka(n,e.Bs)}}function _a(e,t){const n=j(e),r=n.Eu.get(t);if(r&&r.lu)return lr().add(r.key);{let e=lr();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function Aa(e){const t=j(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fa.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_a.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ga.bind(null,t),t.hu.J_=Qo.bind(null,t.eventManager),t.hu.pu=Yo.bind(null,t.eventManager),t}function Ia(e){const t=j(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=va.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ya.bind(null,t),t}class Pa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Js(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return As(this.persistence,new Cs,e.initialUser,this.serializer)}Du(e){return new bs(xs.Vi,this.serializer)}bu(e){return new Vs}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pa.provider={build:()=>new Pa};class Ra extends Pa{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){O(this.persistence.referenceDelegate instanceof Es,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new is(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?Ji.withCacheSize(this.cacheSizeBytes):Ji.DEFAULT;return new bs(e=>Es.Vi(e,t),this.serializer)}}class Oa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ma(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Na.bind(null,this.syncEngine),await Mo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new qo}createDatastore(e){const t=Js(e.databaseInfo.databaseId),n=function(e){return new Ys(e)}(e.databaseInfo);return function(e,t,n,r){return new so(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new lo(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ma(this.syncEngine,e,0),$s.C()?new $s:new zs)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new aa(e,t,n,r,i,s);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=j(e);N(ao,"RemoteStore shutting down."),t.Ia.add(5),await uo(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Oa.provider={build:()=>new Oa};class ja{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Da{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new M(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=j(e),r={documents:t.map(e=>Ti(n.serializer,e))},i=await n.Jo("BatchGetDocuments",n.serializer.databaseId,ne.emptyPath(),r,t.length),s=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){O(!!t.found,43571),t.found.name,t.found.updateTime;const n=Ci(e,t.found.name),r=wi(t.found.updateTime),i=t.found.createTime?wi(t.found.createTime):ye.min(),s=new rn({mapValue:{fields:t.found.fields}});return on.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){O(!!t.missing,3894),O(!!t.readTime,22933);const n=Ci(e,t.missing),r=wi(t.readTime);return on.newNoDocument(n,r)}(e,t):P(7234,{result:t})}(n.serializer,e);s.set(t.key.toString(),t)});const o=[];return t.forEach(e=>{const t=s.get(e.toString());O(!!t,55234,{key:e}),o.push(t)}),o}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ur(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=se.fromPath(t);this.mutations.push(new $r(n,this.precondition(n)))}),await async function(e,t){const n=j(e),r={writes:t.map(e=>Pi(n.serializer,e))};await n.Wo("Commit",n.serializer.databaseId,ne.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw P(50498,{Wu:e.constructor.name});t=ye.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new M(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ye.min())?_r.exists(!1):_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ye.min()))throw new M(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ma{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Gu=n.maxAttempts,this.F_=new Zs(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new Da(this.datastore),t=this.Ju(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Hu(e)}))}).catch(e=>{this.Hu(e)})})}Ju(e){try{const t=this.updateFunction(e);return!Oe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Qr(t)}return!1}}const La="FirestoreClient";class Fa{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=S.UNAUTHENTICATED,this.clientId=K.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{N(La,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(N(La,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=zo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Va(e,t){e.asyncQueue.verifyOperationInProgress(),N(La,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Is(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{A("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{N("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{A("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function za(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ua(e);N(La,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Do(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Do(t.remoteStore,n)),e._onlineComponents=t}async function Ua(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N(La,"Using user provided OfflineComponentProvider");try{await Va(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===D.FAILED_PRECONDITION||e.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;A("Error using user provided cache. Falling back to memory cache: "+n),await Va(e,new Pa)}}else N(La,"Using default OfflineComponentProvider"),await Va(e,new Ra(void 0));return e._offlineComponents}async function $a(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N(La,"Using user provided OnlineComponentProvider"),await za(e,e._uninitializedComponentsProvider._online)):(N(La,"Using default OnlineComponentProvider"),await za(e,new Oa))),e._onlineComponents}function Ba(e){return $a(e).then(e=>e.syncEngine)}function Ha(e){return $a(e).then(e=>e.datastore)}async function qa(e){const t=await $a(e),n=t.eventManager;return n.onListen=la.bind(null,t.syncEngine),n.onUnlisten=ha.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ca.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=pa.bind(null,t.syncEngine),n}function Wa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ja({next:a=>{s.Ou(),t.enqueueAndForget(()=>Ko(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new M(D.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new M(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new ea(Mn(n.path),s,{includeMetadataChanges:!0,ka:!0});return Go(e,o)}(await qa(e),e.asyncQueue,t,n,r)),r.promise}function Ga(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ja({next:n=>{s.Ou(),t.enqueueAndForget(()=>Ko(e,o)),n.fromCache&&"server"===r.source?i.reject(new M(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ea(n,s,{includeMetadataChanges:!0,ka:!0});return Go(e,o)}(await qa(e),e.asyncQueue,t,n,r)),r.promise}function Ka(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Qa=new Map,Ya="firestore.googleapis.com",Xa=!0;class Ja{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new M(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ya,this.ssl=Xa}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Xa;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ts)throw new M(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new M(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ka(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new M(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new M(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new M(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Za{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ja({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ja(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new B(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new M(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Qa.get(e);t&&(N("ComponentProvider","Removing Datastore"),Qa.delete(e),t.terminate())}(this),Promise.resolve()}}class el{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new el(this.firestore,e,this._query)}}class tl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tl(this.firestore,e,this._key)}toJSON(){return{type:tl._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fe(t,tl._jsonSchema))return new tl(e,n||null,new se(ne.fromString(t.referencePath)))}}tl._jsonSchemaVersion="firestore/documentReference/1.0",tl._jsonSchema={type:pe("string",tl._jsonSchemaVersion),referencePath:pe("string")};class nl extends el{constructor(e,t,n){super(e,t,Mn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tl(this.firestore,null,new se(e))}withConverter(e){return new nl(this.firestore,e,this._path)}}function rl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),oe("collection","path",t),e instanceof Za){const n=ne.fromString(t,...r);return le(n),new nl(e,null,n)}{if(!(e instanceof tl||e instanceof nl))throw new M(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return le(n),new nl(e.firestore,null,n)}}function il(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),1===arguments.length&&(t=K.newId()),oe("doc","path",t),e instanceof Za){const n=ne.fromString(t,...r);return ae(n),new tl(e,null,new se(n))}{if(!(e instanceof tl||e instanceof nl))throw new M(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return ae(n),new tl(e.firestore,e instanceof nl?e.converter:null,new se(n))}}const sl="AsyncQueue";class ol{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zs(this,"async_queue_retry"),this.oc=()=>{const e=Xs();e&&N(sl,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=Xs();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Xs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new L;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ie(e))throw e;N(sl,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,_("INTERNAL UNHANDLED ERROR: ",al(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Vo.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&P(47125,{hc:al(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function al(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function ll(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class cl extends Za{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ol,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ol(e),this._firestoreClient=void 0,await e}}}function ul(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||Rt,i=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=de(e,Za);const s=(0,l.zJ)(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;s&&((0,l.gE)(`https://${c}`),(0,l.P1)("Firestore",!0)),o.host!==Ya&&o.host!==c&&A("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!(0,l.bD)(u,a)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=S.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new M(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new S(s)}e._authCredentials=new z(new F(t,n))}}(i,...e)}return i}function dl(e){if(e._terminated)throw new M(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||hl(e),e._firestoreClient}function hl(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Pt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ka(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Fa(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(bt.fromBase64String(e))}catch(e){throw new M(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new pl(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fe(e,pl._jsonSchema))return pl.fromBase64String(e.bytes)}}pl._jsonSchemaVersion="firestore/bytes/1.0",pl._jsonSchema={type:pe("string",pl._jsonSchemaVersion),bytes:pe("string")};class fl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new M(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ie(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._methodName=e}}class gl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gl._jsonSchemaVersion}}static fromJSON(e){if(fe(e,gl._jsonSchema))return new gl(e.latitude,e.longitude)}}gl._jsonSchemaVersion="firestore/geoPoint/1.0",gl._jsonSchema={type:pe("string",gl._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class vl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fe(e,vl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new vl(e.vectorValues);throw new M(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vl._jsonSchemaVersion="firestore/vectorValue/1.0",vl._jsonSchema={type:pe("string",vl._jsonSchemaVersion),vectorValues:pe("object")};const yl=/^__.*__$/;class bl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mr(e,this.data,t,this.fieldTransforms)}}class wl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ec:e})}}class El{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new El(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fl(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(xl(this.Ec)&&yl.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Sl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Js(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new El({Ec:e,methodName:t,bc:n,path:ie.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tl(e){const t=e._freezeSettings(),n=Js(e._databaseId);return new Sl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cl(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);jl("Data must be an object, but it was:",o,r);const a=Rl(r,o);let l,c;if(s.merge)l=new vt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Dl(t,r,n);if(!o.contains(i))throw new M(D.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Vl(e,i)||e.push(i)}l=new vt(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new bl(new rn(a),l,c)}class kl extends ml{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kl}}class Nl extends ml{_toFieldTransform(e){return new kr(e.path,new yr)}isEqual(e){return e instanceof Nl}}function _l(e,t,n,r){const i=e.Dc(1,t,n);jl("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();ut(r,(e,r)=>{const a=Ll(t,e,n);r=(0,l.Ku)(r);const c=i.gc(a);if(r instanceof kl)s.push(a);else{const e=Pl(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new vt(s);return new wl(o,a,i.fieldTransforms)}function Al(e,t,n,r,i,s){const o=e.Dc(1,t,n),a=[Dl(t,r,n)],c=[i];if(s.length%2!=0)throw new M(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<s.length;l+=2)a.push(Dl(t,s[l])),c.push(s[l+1]);const u=[],d=rn.empty();for(let p=a.length-1;p>=0;--p)if(!Vl(u,a[p])){const e=a[p];let t=c[p];t=(0,l.Ku)(t);const n=o.gc(e);if(t instanceof kl)u.push(e);else{const r=Pl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new vt(u);return new wl(d,h,o.fieldTransforms)}function Il(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Pl(n,e.Dc(r?4:3,t))}function Pl(e,t){if(Ol(e=(0,l.Ku)(e)))return jl("Unsupported field value:",t,e),Rl(e,t);if(e instanceof ml)return function(e,t){if(!xl(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Pl(i,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ve.fromDate(e);return{timestampValue:vi(t.serializer,n)}}if(e instanceof ve){const n=new ve(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vi(t.serializer,n)}}if(e instanceof gl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pl)return{bytesValue:yi(t.serializer,e._byteString)};if(e instanceof tl){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:xi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof vl)return function(e,t){return{mapValue:{fields:{[jt]:{stringValue:Lt},[Ft]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return dr(t.serializer,e)})}}}}}}(e,t);throw t.wc(`Unsupported field value: ${ue(e)}`)}(e,t)}function Rl(e,t){const n={};return dt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,(e,r)=>{const i=Pl(r,t.Vc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ol(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ve||e instanceof gl||e instanceof pl||e instanceof tl||e instanceof ml||e instanceof vl)}function jl(e,t,n){if(!Ol(n)||!ce(n)){const r=ue(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Dl(e,t,n){if((t=(0,l.Ku)(t))instanceof fl)return t._internalPath;if("string"==typeof t)return Ll(e,t);throw Fl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ml=new RegExp("[~\\*/\\[\\]]");function Ll(e,t,n){if(t.search(Ml)>=0)throw Fl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new fl(...t.split("."))._internalPath}catch(r){throw Fl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Fl(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new M(D.INVALID_ARGUMENT,a+e+l)}function Vl(e,t){return e.some(e=>e.isEqual(t))}class zl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ul(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($l("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ul extends zl{data(){return super.data()}}function $l(e,t){return"string"==typeof t?Ll(e,t):t instanceof fl?t._internalPath:t._delegate._internalPath}function Bl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new M(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hl{}class ql extends Hl{}function Wl(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Hl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Ql).length,n=e.filter(e=>e instanceof Gl).length;if(t>1||t>0&&n>0)throw new M(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Gl extends ql{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Gl(e,t,n)}_apply(e){const t=this._parse(e);return nc(e._query,t),new el(e.firestore,e.converter,$n(e._query,t))}_parse(e){const t=Tl(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new M(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){tc(o,s);const t=[];for(const n of o)t.push(ec(r,e,n));a={arrayValue:{values:t}}}else a=ec(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||tc(o,s),a=Il(n,t,o,"in"===s||"not-in"===s);return pn.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Kl(e,t,n){const r=t,i=$l("where",e);return Gl._create(i,r,n)}class Ql extends Hl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ql(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)nc(n,i),n=$n(n,i)}(e._query,t),new el(e.firestore,e.converter,$n(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Yl extends ql{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new M(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new M(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new un(t,n)}(e._query,this._field,this._direction);return new el(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new jn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Xl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=$l("orderBy",e);return Yl._create(n,t)}class Jl extends ql{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Jl(e,t,n)}_apply(e){return new el(e.firestore,e.converter,Bn(e._query,this._limit,this._limitType))}}function Zl(e){return he("limit",e),Jl._create("limit",e,"F")}function ec(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new M(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ne.fromString(n));if(!se.isDocumentKey(r))throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kt(e,new se(r))}if(n instanceof tl)return Kt(e,n._key);throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ue(n)}.`)}function tc(e,t){if(!Array.isArray(e)||0===e.length)throw new M(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function nc(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new M(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class rc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(St(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ft].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Et(e.doubleValue));return new vl(i)}convertGeoPoint(e){return new gl(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=At(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(It(e));default:return null}}convertTimestamp(e){const t=xt(e);return new ve(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ne.fromString(e);O(Bi(n),9688,{name:e});const r=new Ot(n.get(1),n.get(3)),i=new se(n.popFirst(5));return r.isEqual(t)||_(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ic(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class sc extends rc{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tl(this.firestore,null,t)}}class oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ac extends zl{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field($l("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new M(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ac._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ac._jsonSchemaVersion="firestore/documentSnapshot/1.0",ac._jsonSchema={type:pe("string",ac._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class lc extends ac{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class cc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new oc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new lc(this._firestore,this._userDataWriter,n.key,n,new oc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new M(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new lc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new oc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new lc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:uc(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new M(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P(61501,{type:e})}}function dc(e){e=de(e,tl);const t=de(e.firestore,cl);return Wa(dl(t),e._key).then(n=>wc(t,e,n))}cc._jsonSchemaVersion="firestore/querySnapshot/1.0",cc._jsonSchema={type:pe("string",cc._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class hc extends rc{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tl(this.firestore,null,t)}}function pc(e){e=de(e,el);const t=de(e.firestore,cl),n=dl(t),r=new hc(t);return Bl(e._query),Ga(n,e._query).then(n=>new cc(t,r,e,n))}function fc(e,t,n){e=de(e,tl);const r=de(e.firestore,cl),i=ic(e.converter,t,n);return bc(r,[Cl(Tl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,_r.none())])}function mc(e,t,n){e=de(e,tl);const r=de(e.firestore,cl),i=Tl(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof fl?Al(i,"updateDoc",e._key,t,n,a):_l(i,"updateDoc",e._key,t),bc(r,[s.toMutation(e._key,_r.exists(!0))])}function gc(e){return bc(de(e.firestore,cl),[new Ur(e._key,_r.none())])}function vc(e,t){const n=de(e.firestore,cl),r=il(e),i=ic(e.converter,t);return bc(n,[Cl(Tl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}function yc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=(0,l.Ku)(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||ll(n[c])||(a=n[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ll(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let d,h,p;if(e instanceof tl)h=de(e.firestore,cl),p=Mn(e._key.path),d={next:t=>{n[c]&&n[c](wc(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=de(e,el);h=de(t.firestore,cl),p=t._query;const r=new hc(h);d={next:e=>{n[c]&&n[c](new cc(h,r,t,e))},error:n[c+1],complete:n[c+2]},Bl(e._query)}return function(e,t,n,r){const i=new ja(r),s=new ea(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Go(await qa(e),s)),()=>{i.Ou(),e.asyncQueue.enqueueAndForget(async()=>Ko(await qa(e),s))}}(dl(h),p,u,d)}function bc(e,t){return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ia(e);try{const e=await function(e,t){const n=j(e),r=ve.now(),i=t.reduce((e,t)=>e.add(t.key),lr());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Zn(),l=lr();return n.Os.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=jr(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Lr(e.key,t,sn(t.value.mapValue),_r.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:nr(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new ht(Q)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await ka(r,e.changes),await ko(r.remoteStore)}catch(e){const t=zo(e,"Failed to persist write");n.reject(t)}}(await Ba(e),t,n)),n.promise}(dl(e),t)}function wc(e,t,n){const r=n.docs.get(t._key),i=new hc(e);return new ac(e,i,t._key,r,new oc(n.hasPendingWrites,n.fromCache),t.converter)}const xc={maxAttempts:5};class Ec{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tl(e)}set(e,t,n){this._verifyNotCommitted();const r=Sc(e,this._firestore),i=ic(r.converter,t,n),s=Cl(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,_r.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Sc(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof fl?Al(this._dataReader,"WriteBatch.update",r._key,t,n,o):_l(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sc(e,this._firestore);return this._mutations=this._mutations.concat(new Ur(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sc(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new M(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Tc{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tl(e)}get(e){const t=Sc(e,this._firestore),n=new sc(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return P(24041);const r=e[0];if(r.isFoundDocument())return new zl(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new zl(this._firestore,n,t._key,null,t.converter);throw P(18433,{doc:r})})}set(e,t,n){const r=Sc(e,this._firestore),i=ic(r.converter,t,n),s=Cl(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Sc(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof fl?Al(this._dataReader,"Transaction.update",r._key,t,n,o):_l(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Sc(e,this._firestore);return this._transaction.delete(t._key),this}}class Cc extends Tc{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sc(e,this._firestore),n=new hc(this._firestore);return super.get(e).then(e=>new ac(this._firestore,n,t._key,e._document,new oc(!1,!1),t.converter))}}function kc(e,t,n){e=de(e,cl);const r=Object.assign(Object.assign({},xc),n);return function(e){if(e.maxAttempts<1)throw new M(D.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new L;return e.asyncQueue.enqueueAndForget(async()=>{const i=await Ha(e);new Ma(e.asyncQueue,i,n,t,r).zu()}),r.promise}(dl(e),n=>t(new Cc(e,n)),r)}function Nc(){return new Nl("serverTimestamp")}function _c(e){return dl(e=de(e,cl)),new Ec(e,t=>bc(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){T=e}(s.MF),(0,s.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new cl(new U(e.getProvider("auth-internal")),new q(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new M(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ot(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(x,E,e),(0,s.KO)(x,E,"esm2017")}()},5492:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var r=n(579);const i=e=>{let{message:t,onClose:n}=e;return(0,r.jsx)("div",{role:"alert",className:"rounded-md bg-red-50 p-3 mb-2 shadow-lg max-w-sm",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-4 w-4 text-red-400 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-2",children:[(0,r.jsx)("h3",{className:"text-xs font-medium text-red-800",children:"Error"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-red-700",children:t})]})]}),n&&(0,r.jsx)("button",{onClick:n,className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Cerrar mensaje",children:(0,r.jsx)("svg",{className:"w-4 h-4 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 11.414l4.293-4.293a1 1 0 111.414 1.414L11.414 12l4.293 4.293a1 1 0 01-1.414 1.414L10 13.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 12 4.293 7.707a1 1 0 011.414-1.414L10 10.586z",clipRule:"evenodd"})})})]})})}},5509:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,O:()=>c});var r=n(5043),i=n(1958),s=n(458),o=n(5472),a=n(579);const l=(0,r.createContext)(),c=e=>{let{children:t}=e;const[n,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=(0,s.hg)(i.j,async e=>{if(e){const t=await(0,o.x7)((0,o.H9)(i.db,"users",e.uid));t.exists()?(c(e),d(t.data().role||1)):(c(e),d(1))}else c(null),d(null);p(!1)});return()=>e()},[]),(0,a.jsx)(l.Provider,{value:{user:n,role:u,loading:h,login:async(e,t)=>{try{const n=(await(0,s.x9)(i.j,e,t)).user,r=await(0,o.x7)((0,o.H9)(i.db,"users",n.uid));if(r.exists())return c(n),d(r.data().role),n;throw new Error("No se encontr\xf3 informaci\xf3n del usuario en la base de datos")}catch(n){throw new Error(n.message)}}},children:t})},u=()=>(0,r.useContext)(l)},5575:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r,i,s,o,a,l,c=n(5043);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function d(e,t){let{title:n,titleId:d,...h}=e;return c.createElement("svg",u({width:95,height:30,viewBox:"0 0 95 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":d},h),n?c.createElement("title",{id:d},n):null,r||(r=c.createElement("path",{d:"M5.38 0.859985H1.45C0.991601 0.859985 0.619995 1.23161 0.619995 1.69V5.03C0.619995 5.4884 0.991601 5.85999 1.45 5.85999H5.38C5.83839 5.85999 6.21 5.4884 6.21 5.03V1.69C6.21 1.23161 5.83839 0.859985 5.38 0.859985Z",fill:"#CA0080"})),i||(i=c.createElement("path",{d:"M29.4 0.859985H26.01C25.55 0.859985 25.18 1.24 25.18 1.69V15.24C25.18 15.52 24.82 15.62 24.69 15.37L16.81 1.22C16.68 0.990001 16.4499 0.859985 16.1699 0.859985H10.5299C10.0699 0.859985 9.69995 1.24 9.69995 1.69V23.34C9.69995 23.8 10.0799 24.17 10.5299 24.17H13.9199C14.3799 24.17 14.75 23.79 14.75 23.34V9.38C14.75 9.10001 15.11 9 15.24 9.25L23.3399 23.82C23.4699 24.05 23.7 24.18 23.98 24.18H29.37C29.83 24.18 30.1999 23.8 30.1999 23.35V1.67999C30.1999 1.21999 29.82 0.850006 29.37 0.850006H29.4V0.859985Z",fill:"#200020"})),s||(s=c.createElement("path",{d:"M37.6899 13.41C38.1799 11.22 39.4599 10.25 41.3899 10.25C43.1099 10.25 44.5899 11.25 44.7999 13.41H37.6999H37.6899ZM49.7899 15.72C49.7899 9.62 45.8199 6.59 41.4599 6.59C35.7899 6.59 32.5599 10.52 32.5599 15.82C32.5599 21.85 36.6199 24.72 41.3299 24.72C46.0399 24.72 48.7899 22.29 49.5299 19.13C49.6299 18.72 49.3999 18.36 48.7899 18.36H46.1199C45.8199 18.36 45.5499 18.52 45.4199 18.82C44.7499 20.28 43.6799 21.05 41.6199 21.05C39.2899 21.05 37.7199 19.59 37.4899 16.62H48.9499C49.4399 16.62 49.7799 16.26 49.7799 15.72H49.7899Z",fill:"#200020"})),o||(o=c.createElement("path",{d:"M93.37 7.01999H89.97C89.5116 7.01999 89.14 7.39161 89.14 7.85001V23.35C89.14 23.8084 89.5116 24.18 89.97 24.18H93.37C93.8284 24.18 94.2 23.8084 94.2 23.35V7.85001C94.2 7.39161 93.8284 7.01999 93.37 7.01999Z",fill:"#200020"})),a||(a=c.createElement("path",{d:"M60.36 20.85C58.13 20.85 56.56 19.21 56.56 15.69C56.56 12.17 58.13 10.33 60.36 10.33C62.59 10.33 64.16 12.03 64.16 15.69C64.16 19.35 62.59 20.85 60.36 20.85ZM68.08 7.01999H64.69C64.23 7.01999 63.86 7.40001 63.86 7.85001V8.69C62.85 7.5 61.18 6.67999 58.99 6.67999C54.09 6.67999 51.5 11.11 51.5 15.81C51.5 19.91 53.63 24.51 58.89 24.51C60.77 24.51 62.77 23.61 63.86 22.34V29.01C63.86 29.47 64.24 29.84 64.69 29.84H68.08C68.54 29.84 68.91 29.46 68.91 29.01V7.88C68.91 7.42 68.53 7.04999 68.08 7.04999V7.01999Z",fill:"#200020"})),l||(l=c.createElement("path",{d:"M86.14 7.01999H82.75C82.29 7.01999 81.92 7.40001 81.92 7.85001V16.62C81.92 19.45 80.66 20.27 79.05 20.27C77.44 20.27 76.18 19.44 76.18 16.62V7.85001C76.18 7.39001 75.8 7.01999 75.35 7.01999H71.96C71.5 7.01999 71.13 7.40001 71.13 7.85001V16.98C71.13 22.41 74.13 24.6 79.06 24.6C83.99 24.6 86.99 22.4 86.99 16.98V7.85001C86.99 7.39001 86.61 7.01999 86.16 7.01999H86.13H86.14Z",fill:"#200020"})))}const h=c.forwardRef(d);n.p;function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(null,arguments)}function f(e,t){let{title:n,titleId:r,...i}=e;return c.createElement("svg",p({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 804.87 490.91",style:{enableBackground:"new 0 0 804.87 490.91"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},i),n?c.createElement("title",{id:r},n):null,c.createElement("g",null,c.createElement("path",{style:{fill:"#EC1C26"},d:"M47.89,0h709.09c26.34,0,47.89,21.55,47.89,47.89v395.12c0,26.34-21.55,47.89-47.89,47.89H47.89 C21.55,490.91,0,469.35,0,443.01V47.89C0,21.55,21.55,0,47.89,0L47.89,0z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M208.49,206.02c5.92-0.03,10.39,3.16,14.56,6.82c8.37,7.36,14.56,16.61,20.39,26.15 c8.4,13.77,15.44,28.23,21.57,43.23c0.78,1.89,1.42,3.92,1.75,5.94c0.79,4.9-0.75,8.84-5.47,10.45c-4.98,1.71-7.34-1.8-8.97-5.97 c-7.22-18.38-15.56-36.16-26.22-52.68c-3.35-5.21-7.04-10.14-11.93-13.96c-3.69-2.87-7.22-2.97-11-0.16 c-5.17,3.82-8.91,9-12.39,14.37c-10.39,15.95-18.52,33.13-25.59,50.88c-1.81,4.58-3.6,9.38-9.79,7.45 c-4.86-1.52-6.92-7.39-4.47-13.61c9.18-23.24,20.12-45.51,35.86-64.8C192.54,213.12,198.94,206.81,208.49,206.02L208.49,206.02z  M55.36,263.05c0-6.69-0.06-13.39,0.03-20.12c0.06-4.58,0.54-9.25,6.43-9.28c5.89-0.03,6.44,4.45,6.44,9.19 c0,12.16,0.09,24.29-0.06,36.44c-0.03,3.28,0.76,4.8,4.11,5.27c14.38,2.02,28.37,1.2,41.6-5.56c15.13-7.74,24.35-30.38,5.05-46.83 c-10.88-9.28-23.71-11.56-36.98-12.66c-11.05-0.92-21.96,0.35-32.63,3.51c-3.75,1.11-7.46,1.74-9.03-3 c-1.48-4.55,1.03-7.74,4.89-9.41c8.46-3.69,17.46-4.33,26.49-4.55c16.37-0.41,32.41,1.61,47.43,8.84 c13.62,6.57,23.53,16.64,26.04,32.84c2.75,17.87-7.13,35.75-24.5,43.83c-17.58,8.21-36.04,9.13-54.74,5.81 c-7.43-1.33-10-5.02-10.54-12.98c-0.03-0.41-0.03-0.85-0.03-1.26V263.05L55.36,263.05z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M312.31,299.06c-4.89-0.13-8.76-2.62-12.33-5.84c-6.61-5.94-11.63-13.26-16.25-20.87 c-9.64-15.95-17.37-32.91-23.96-50.43c-1.09-2.94-2.24-5.94-1.33-9.16c0.97-3.35,2.66-6.16,6.43-6.57 c3.69-0.38,5.41,2.08,6.56,5.24c4.02,11.15,8.49,22.11,13.59,32.75c5.07,10.67,10.3,21.29,17.76,30.44 c7.16,8.78,11.9,8.97,18.94,0.19c11.33-14.12,18.4-30.79,25.5-47.4c2.27-5.34,4.14-10.86,6.31-16.26c1.24-3.06,3.11-5.56,6.77-4.93 c3.62,0.6,5.47,3.22,6.13,6.79c0.42,2.27,0.27,4.58-0.54,6.79c-8.46,22.64-18.31,44.56-32.5,64.04 c-3.05,4.17-6.49,7.99-10.57,11.12C319.71,297.41,316.33,299.15,312.31,299.06L312.31,299.06z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M396.74,253.39c0,11.91,0.06,23.81-0.03,35.72c-0.03,6.85-2.51,10.07-7.31,9.92 c-4.68-0.16-7.31-3.67-7.31-10.2c-0.03-24.03-0.03-48.06,0-72.1c0-6.6,2.6-10.2,7.19-10.33c4.74-0.16,7.43,3.54,7.46,10.61 C396.8,229.14,396.74,241.26,396.74,253.39L396.74,253.39z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M433.3,268.06c0,1.71,0.26,3.29,0.53,4.74c2.11,8.03,9.08,13.56,17.38,13.56 c12.24,0,19.35-10.01,19.35-24.62c0-12.77-6.71-23.7-18.96-23.7c-7.9,0-15.27,5.66-17.51,14.35c-0.39,1.45-0.79,3.16-0.79,4.74 V268.06L433.3,268.06z M421.85,251.08c0-8.16-0.26-14.74-0.53-20.8h10.4l0.53,10.93h0.26c4.74-7.77,12.24-12.37,22.64-12.37 c15.4,0,26.99,13.03,26.99,32.38c0,22.91-13.96,34.23-28.96,34.23c-8.43,0-15.8-3.69-19.62-10h-0.26v34.62h-11.45V251.08 L421.85,251.08z"}),c.createElement("polygon",{style:{fill:"#FFFFFF"},points:"496.74,294 508.33,294 508.33,200.53 496.74,200.53 496.74,294  "}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M561.38,261.48c-12.64-0.26-26.99,1.97-26.99,14.35c0,7.5,5,11.06,10.93,11.06 c8.29,0,13.56-5.26,15.4-10.66c0.4-1.18,0.66-2.5,0.66-3.69V261.48L561.38,261.48z M563.09,294l-0.92-8.03h-0.4 c-3.55,5-10.4,9.48-19.48,9.48c-12.9,0-19.48-9.08-19.48-18.3c0-15.4,13.69-23.83,38.31-23.7v-1.32c0-5.26-1.45-14.74-14.48-14.74 c-5.92,0-12.11,1.84-16.59,4.74l-2.63-7.63c5.26-3.42,12.9-5.66,20.93-5.66c19.48,0,24.22,13.29,24.22,26.07v23.83 c0,5.53,0.26,10.92,1.05,15.27H563.09L563.09,294z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M604.69,211.98v18.3h16.59v8.82h-16.59v34.36c0,7.9,2.24,12.37,8.69,12.37 c3.03,0,5.27-0.39,6.72-0.79l0.52,8.69c-2.24,0.92-5.79,1.58-10.27,1.58c-5.4,0-9.74-1.71-12.51-4.87 c-3.29-3.42-4.48-9.08-4.48-16.59V239.1h-9.87v-8.82h9.87v-15.27L604.69,211.98L604.69,211.98z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M667.87,261.48c-12.64-0.26-26.99,1.97-26.99,14.35c0,7.5,5,11.06,10.93,11.06 c8.3,0,13.56-5.26,15.4-10.66c0.4-1.18,0.66-2.5,0.66-3.69V261.48L667.87,261.48z M669.58,294l-0.92-8.03h-0.39 c-3.55,5-10.4,9.48-19.48,9.48c-12.9,0-19.48-9.08-19.48-18.3c0-15.4,13.69-23.83,38.31-23.7v-1.32c0-5.26-1.45-14.74-14.48-14.74 c-5.92,0-12.11,1.84-16.58,4.74l-2.63-7.63c5.27-3.42,12.9-5.66,20.93-5.66c19.48,0,24.22,13.29,24.22,26.07v23.83 c0,5.53,0.26,10.92,1.05,15.27H669.58L669.58,294z"}),c.createElement("path",{style:{fill:"#FFFFFF"},d:"M378.42,192c-1.57,1.7-4.22,1.81-5.92,0.25c-1.7-1.57-1.81-4.22-0.25-5.92 c0.07-0.08,25.29-27.68,71.09-57.08c11.67-7.49,24.22-15.13,37.23-22.33c12.99-7.18,26.49-13.94,40.12-19.68l5.45-2.34 c11.65-5.01,22.97-9.89,33.72-10.11c15.19-0.32,31.84,4.44,46.46,10.3c14.45,5.8,26.91,12.67,33.89,16.72l0,0.01 c0.89,0.51,1.79,1.16,2.69,1.86c-0.03-0.09-0.06-0.19-0.08-0.28c-0.23-1.05-0.42-1.9-0.52-2.63c-0.07-0.51-0.08-1.15,0-1.83 c0.2-1.75,1.06-4.71,3.25-7.36c2.14-2.58,5.52-4.92,10.74-5.63c1.96-0.26,4.17-0.29,6.65-0.01c6.02,0.69,12.02,0.41,17.69,0.14 c5.93-0.28,11.53-0.55,16.75,0.23l0.33,0.05c3.62,0.49,15.61,2.11,13.63,16.6l-0.02,0.13c-0.46,2.75-1.63,8.7-2.94,15.33 c-1.78,9.04-3.82,19.34-4.54,23.91c-0.01,0.05,0,0.11,0.03,0.18c0.02,0.06,0.06,0.11,0.09,0.15c1.61,1.2,4.23,2.99,7.38,5.13 c18.21,12.42,53.5,36.49,53.65,59.22c0.01,1.39-0.07,2.73-0.23,4.01c-1.37,10.83-8.31,17.65-17.72,21.75 c-8.69,3.79-19.51,5.15-29.68,5.22c-4.51,0.03-8.91-0.2-12.93-0.58c0.62,9,3.09,28.5,23.94,56.24l0.07,0.07 c11.14,15.54,16.31,30.82,15.69,45.66c-0.62,15.05-7.17,29.44-19.44,42.96l-0.21,0.23c-12.1,11.53-26.03,19.93-42.85,24.66 c-16.65,4.69-36.08,5.74-59.33,2.64c-1.58-0.21-3.16-0.36-4.72-0.42c-1.51-0.06-3-0.03-4.47,0.09c-2.36,0.37-5.11,0.98-8.25,1.67 c-17.17,3.79-45.23,9.97-92.25-2.44c-2.64,0.48-7.12,1.26-12.67,1.92c-6.36,0.75-14.34,1.38-23.15,1.32 c-7.45-0.05-15.79-1.18-24.29-3.39c-15.98-4.15-32.69-12.14-45.4-23.99c-12.97-12.1-21.81-28.17-21.67-48.27 c0.04-5.83,0.84-11.96,2.51-18.41c0.58-2.24,2.86-3.58,5.1-3c2.24,0.58,3.58,2.86,3,5.1c-1.5,5.77-2.21,11.22-2.25,16.34 c-0.13,17.46,7.63,31.49,19.01,42.1c11.64,10.86,27.03,18.19,41.79,22.02c7.85,2.04,15.47,3.08,22.23,3.13 c8.27,0.06,15.95-0.55,22.14-1.28c6.28-0.74,10.83-1.58,13.08-1.99l0.94-0.17l0.9,0.24c45.64,12.22,72.68,6.26,89.18,2.62 c3.33-0.73,6.25-1.38,8.9-1.79l0.28-0.03c1.9-0.17,3.78-0.21,5.64-0.14c1.86,0.07,3.7,0.24,5.51,0.48 c22.07,2.95,40.4,1.98,55.98-2.41c15.4-4.33,28.17-12.04,39.29-22.62c10.81-11.98,16.57-24.54,17.11-37.5 c0.53-12.93-4.13-26.46-14.15-40.44l0.01-0.01c-23.88-31.79-25.17-53.89-25.68-62.57c-0.05-0.84-0.09-1.56-0.12-1.9 c-0.07-0.7,0.01-1.36,0.2-1.97v-0.02c0.3-0.96,0.88-1.79,1.64-2.41c0.76-0.61,1.69-1.01,2.7-1.1c0.52-0.05,1.05-0.02,1.57,0.09 c4.58,0.57,9.89,0.93,15.39,0.9c9.18-0.06,18.84-1.24,26.37-4.53c6.82-2.97,11.83-7.74,12.76-15.12c0.12-0.93,0.17-1.9,0.17-2.93 c-0.12-18.3-33.02-40.74-50-52.33c-3.16-2.16-5.79-3.95-7.8-5.46l-0.13-0.1c-1.22-0.99-2.12-2.26-2.66-3.66 c-0.53-1.39-0.7-2.93-0.46-4.48c0.83-5.23,2.83-15.34,4.57-24.2c1.33-6.72,2.51-12.74,2.91-15.1c0.76-6.09-4.8-6.84-6.47-7.06 c-0.43-0.06,0.01,0.01-0.41-0.05c-4.49-0.67-9.66-0.42-15.14-0.16c-6.04,0.29-12.43,0.59-19.04-0.17c-1.79-0.21-3.31-0.2-4.58-0.02 c-2.73,0.37-4.39,1.47-5.39,2.67c-0.93,1.12-1.29,2.26-1.37,2.93c0.07,0.34,0.21,1,0.38,1.77c0.92,4.23,2.38,10.87-0.82,13.2 c-3.59,2.61-7.27-0.36-10.94-3.33c-1.23-0.99-2.46-1.99-3.23-2.43h-0.02c-6.78-3.94-18.87-10.61-32.81-16.2 c-13.76-5.52-29.32-10-43.18-9.71c-9.04,0.19-19.66,4.76-30.57,9.46c-1.08,0.47-2.15,0.93-5.51,2.34 c-13.23,5.57-26.48,12.21-39.34,19.32c-12.83,7.1-25.22,14.64-36.73,22.03C402.99,165.11,378.5,191.92,378.42,192L378.42,192z  M644.89,106.39c-0.12,1.18-0.68,2.42,0.39,1.64C645.85,107.61,645.49,107.06,644.89,106.39L644.89,106.39z M650.61,99.65l0,0.02 C650.61,99.62,650.6,99.59,650.61,99.65L650.61,99.65z M697.69,86.35C697.65,86.35,697.6,86.34,697.69,86.35L697.69,86.35 L697.69,86.35z"})))}const m=c.forwardRef(f),g=(n.p,n.p+"static/media/efectivo.34f427248c2ce0f695af.png");var v=n(579);const y=e=>{let{paymentMethods:t,selectedPayment:n,onChange:r,setSelectedPayment:i}=e;const s=e=>{switch(e){case"Efectivo":return"bg-green-200 text-green-800 border-green-300";case"Daviplata":return"bg-red-200 text-red-800 border-red-300";case"Nequi":return"bg-blue-200 text-blue-800 border-blue-300";default:return"bg-gray-200 text-gray-800 border-gray-300"}};return(0,v.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-1 sm:p-2 rounded-lg shadow-sm",children:[(0,v.jsxs)("h2",{className:"text-xs sm:text-sm font-semibold mb-1 sm:mb-2 flex items-center text-green-700",children:[(0,v.jsx)("span",{className:"mr-1",children:"\ud83d\udcb0"})," \xbfC\xf3mo vas a pagar?"]}),(0,v.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-2",children:t.map(e=>{const t=(null===n||void 0===n?void 0:n.id)===e.id;return(0,v.jsxs)("button",{type:"button",onClick:()=>(e=>{"function"===typeof r&&r(e),"function"===typeof i&&i(e)})(e),className:`payment-btn p-1 sm:p-2 rounded text-xs sm:text-sm font-medium transition-all duration-200\n                          flex flex-col items-center justify-center text-center min-h-[30px] sm:min-h-[40px]\n                          shadow-sm gap-y-1 ${t?s(e.name):"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,"aria-label":`Seleccionar ${e.name}`,children:[(0,v.jsx)("span",{children:e.name}),"Efectivo"===e.name&&(0,v.jsx)("img",{src:g,alt:"Efectivo",className:"h-20 w-20"}),"Daviplata"===e.name&&(0,v.jsx)(m,{className:"h-20 w-20"}),"Nequi"===e.name&&(0,v.jsx)(h,{className:"h-20 w-20"})]},e.id)})})]})}},6134:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(5043),i=n(1173),s=n(579);const o=e=>{let{times:t,selectedTime:n,setSelectedTime:i,onConfirm:o}=e;const[a,l]=(0,r.useState)(""),c=e=>{if(!e)return 0;const t=e.trim(),n=t.match(/^(\d{1,2}:\d{2})(?:\s)?([AaPp][Mm])$/i);if(!n)try{const[n,r]=t.split(":").map(Number);if(isNaN(n)||isNaN(r))throw new Error(`Formato de hora inv\xe1lido: ${e}`);return 60*n+r}catch{return 1/0}const[,r,i]=n,[s,o]=r.split(":").map(Number);if(isNaN(s)||isNaN(o))throw new Error(`Formato de hora inv\xe1lido: ${e}`);let a=60*s+o;return"PM"===i.toUpperCase()&&12!==s&&(a+=720),"AM"===i.toUpperCase()&&12===s&&(a=o),a},u=e=>{if(!e)return!1;return/^([1-9]|1[0-2]):[0-5][0-9](?:\s)?(AM|PM|am|pm)$/i.test(e.trim())},d=e=>{try{const t=c(e);return t>=420&&t<=660}catch(a){return!1}},h=e=>{try{const t=c(e.name),n=new Date;return t<60*n.getHours()+n.getMinutes()}catch{return!1}};return(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-1 xs:p-2 sm:p-3 rounded-lg shadow-sm",children:[(0,s.jsxs)("h2",{className:"text-[10px] xs:text-xs sm:text-sm font-semibold mb-1 xs:mb-2 flex items-center text-green-700",children:[(0,s.jsx)("span",{className:"mr-1",children:"\ud83d\udd52"})," \xbfPara qu\xe9 hora?"]}),0===t.length?(0,s.jsx)("p",{className:"text-[10px] xs:text-xs sm:text-sm text-red-600",children:"No hay horarios de desayuno disponibles."}):(0,s.jsx)("div",{className:"grid grid-cols-2 xs:grid-cols-2 gap-1 xs:gap-2",children:t.map(e=>(0,s.jsx)("button",{onClick:()=>{i(e),l("")},disabled:h(e),className:"relative p-1 xs:p-2 rounded-lg text-[10px] xs:text-xs sm:text-sm font-medium transition-all duration-200 flex items-center justify-center text-center min-h-[30px] xs:min-h-[40px] shadow-sm "+((null===n||void 0===n?void 0:n.id)===e.id?"bg-green-200 text-green-800 border border-green-300":h(e)?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"),"aria-label":`Seleccionar hora ${e.name}`,children:e.name},e.id))}),(0,s.jsx)("input",{type:"text",placeholder:"Otra hora (e.g., 8:00 AM)",value:0===(null===n||void 0===n?void 0:n.id)?n.name:"",onChange:e=>{const t=e.target.value;i({id:0,name:t}),l("")},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},className:"col-span-2 mt-2 p-1 xs:p-2 text-[10px] xs:text-xs sm:text-sm bg-white border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400 placeholder-gray-400 w-full","aria-label":"Ingresar una hora personalizada"}),a&&(0,s.jsx)("p",{className:"text-[10px] xs:text-xs text-red-600 mt-1",children:a}),(0,s.jsx)("button",{onClick:()=>{if(n&&n.name){if(0===n.id){if(!u(n.name))return void l("Por favor, ingresa una hora v\xe1lida (Ej: 8:00 AM)");if(!d(n.name))return void l("\ud83d\udc49 No tenemos desayuno a esa hora, solo de 7:00 AM a 11:00 AM")}else if(u(n.name)&&!d(n.name))return void l("\ud83d\udc49 No tenemos desayuno a esa hora, solo de 7:00 AM a 11:00 AM");0,o()}else l("Por favor, ingresa una hora v\xe1lida (Ej: 8:00 AM)")},disabled:!n||!n.name,className:"mt-2 bg-green-500 hover:bg-green-600 text-white px-2 xs:px-3 py-0.5 xs:py-1 rounded-lg text-[10px] xs:text-xs sm:text-sm transition-colors "+(n&&n.name?"":"opacity-50 cursor-not-allowed"),"aria-label":"Confirmar hora",children:"Confirmar hora"})]})};var a=n(3125),l=n(5575),c=n(3262),u=n(1137),d=n(5492),h=n(4489);const p=e=>{var t,n,p,f,m;let{id:g,displayId:v,breakfast:y,onBreakfastChange:b,onRemoveBreakfast:w,onDuplicateBreakfast:x,eggs:E=[],broths:S=[],riceBread:T=[],drinks:C=[],times:k=[],paymentMethods:N=[],additions:_=[],breakfastTypes:A=[],breakfastProteins:I=[],isIncomplete:P=!1,incompleteSlideIndex:R=null,maxBreakfasts:O=15,totalBreakfasts:j,userRole:D,savedAddress:M={},isTableOrder:L=!1}=e;const[F,V]=(0,r.useState)(!0),[z,U]=(0,r.useState)(!1),[$,B]=(0,r.useState)(0),[H,q]=(0,r.useState)(null),[W,G]=(0,r.useState)(0),[K,Q]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),J=(0,r.useRef)(null),Z=(0,r.useRef)(null),ee=3===D,te="Caldo",ne="Huevos",re="Arroz/Pan",ie="Bebida",se="Cubiertos",oe="Direcci\xf3n",ae="M\xe9todo de pago",le="Mesa",ce="Tipo de pedido",ue="Notas",de="Prote\xedna";(0,r.useEffect)(()=>{0},[y,A,I,v]),(0,r.useEffect)(()=>{ee&&void 0===y.orderType&&b(g,"orderType",null)},[ee,y.orderType,g,b]);const[he,pe]=(0,r.useState)((null===y||void 0===y?void 0:y.time)||null),[fe,me]=(0,r.useState)((null===y||void 0===y?void 0:y.address)||{});(0,r.useEffect)(()=>{pe((null===y||void 0===y?void 0:y.time)||null),me((null===y||void 0===y?void 0:y.address)||{})},[y]);const ge=(0,h.x8)(y,D,A);const ve={type:!(null===y||void 0===y||!y.type),broth:!(null===y||void 0===y||!y.broth),eggs:!(null===y||void 0===y||!y.eggs),riceBread:!(null===y||void 0===y||!y.riceBread),drink:!(null===y||void 0===y||!y.drink),cutlery:null!==(null===y||void 0===y?void 0:y.cutlery),time:!(null===y||void 0===y||!y.time),address:!(null===y||void 0===y||null===(t=y.address)||void 0===t||!t.address),payment:!(null===y||void 0===y||!y.payment),tableNumber:!(null===y||void 0===y||!y.tableNumber),orderType:!(null===y||void 0===y||!y.orderType),protein:!(null===y||void 0===y||!y.protein)},ye=(A.find(e=>{var t;return e.id===(null===y||void 0===y||null===(t=y.type)||void 0===t?void 0:t.id)})||{steps:[],requiresProtein:!1}).steps||[],be=(e,t)=>{b(g,e,t);let n=!1;switch(e){case"type":n=!!t,t&&(b(g,"eggs",null),b(g,"broth",null),b(g,"riceBread",null),b(g,"drink",null),b(g,"protein",null),b(g,"cutlery",null),b(g,"payment",null),b(g,"time",null),b(g,"address",M));break;case"broth":case"eggs":case"riceBread":case"drink":case"time":case"payment":case"tableNumber":case"orderType":n=!!t;break;case"protein":n=!!t,console.log(`[BreakfastItem #${v}] Prote\xedna seleccionada:`,t);break;case"cutlery":n=null!==t;break;case"address":n=!(null===t||void 0===t||!t.address);break;case"notes":case"additions":if(n=!0,"additions"===e&&z){H&&clearTimeout(H);const e=setTimeout(()=>U(!1),45e3);q(e)}}n&&"additions"!==e&&$<Se.length-1&&setTimeout(()=>{B($+1)},300)},we=_.map(e=>({...e,requiresReplacement:["prote\xedna adicional","bebida adicional"].includes(e.name.toLowerCase())})).filter(e=>!["Huevos adicionales","Caldo adicional"].includes(e.name)),xe=null===y||void 0===y||null===(n=y.additions)||void 0===n?void 0:n.some(e=>"prote\xedna adicional"===e.name.toLowerCase()&&!e.protein||"bebida adicional"===e.name.toLowerCase()&&!e.replacement),Ee=e=>{J.current&&(B(e),J.current.style.transform=`translateX(-${100*e}%)`)},Se=[{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:0===A.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay tipos de desayuno disponibles."}):(0,s.jsx)(i.A,{title:"Tipo de Desayuno",emoji:"\ud83c\udf05",options:A,selected:(null===y||void 0===y?void 0:y.type)||null,onImmediateSelect:e=>be("type",e)})}),isComplete:ve.type,label:"Tipo",associatedField:"type"},...ye.includes("broth")?[{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:0===S.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay opciones de caldo disponibles."}):(0,s.jsx)(i.A,{title:"Caldo",emoji:"\ud83c\udf72",options:S,selected:null===y||void 0===y?void 0:y.broth,onImmediateSelect:e=>be("broth",e)})}),isComplete:ve.broth,label:te,associatedField:"broth"}]:[],...ye.includes("eggs")?[{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:0===E.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay opciones de huevos disponibles."}):(0,s.jsx)(i.A,{title:"Huevos",emoji:"\ud83c\udf73",options:E,selected:null===y||void 0===y?void 0:y.eggs,onImmediateSelect:e=>be("eggs",e)})}),isComplete:ve.eggs,label:ne,associatedField:"eggs"}]:[],...ye.includes("riceBread")?[{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:0===T.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay opciones de arroz o pan disponibles."}):(0,s.jsx)(i.A,{title:"Arroz o Pan",emoji:"\ud83c\udf5a\ud83c\udf5e",options:T,selected:null===y||void 0===y?void 0:y.riceBread,onImmediateSelect:e=>be("riceBread",e)})}),isComplete:ve.riceBread,label:re,associatedField:"riceBread"}]:[],...ye.includes("drink")?[{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:0===C.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay opciones de bebida disponibles."}):(0,s.jsx)(i.A,{title:"Bebida",emoji:"\ud83e\udd64",options:C,selected:null===y||void 0===y?void 0:y.drink,onImmediateSelect:e=>be("drink",e)})}),isComplete:ve.drink,label:ie,associatedField:"drink"}]:[],...ye.includes("protein")&&I.length>0?[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[console.log(`[BreakfastItem #${v}] Rendering protein slide, options:`,I),0===I.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay opciones de prote\xedna disponibles. Contacta al administrador."}):(0,s.jsx)(i.A,{title:"Prote\xedna Mo\xf1ona",emoji:"\ud83c\udf56",options:I,selected:null===y||void 0===y?void 0:y.protein,onImmediateSelect:e=>be("protein",e)})]}),isComplete:ve.protein,label:de,associatedField:"protein"}]:[],...L?[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:le}),(0,s.jsx)("input",{type:"text",value:(null===y||void 0===y?void 0:y.tableNumber)||"",onChange:e=>be("tableNumber",e.target.value),placeholder:"Ej. Mesa 1, Mesa 1 y 7",className:"w-full p-2 text-sm border rounded-md"}),!(null!==y&&void 0!==y&&y.tableNumber)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, ingresa el n\xfamero de mesa"})]}),isComplete:ve.tableNumber,label:le,associatedField:"tableNumber"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:ae}),0===N.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay m\xe9todos de pago disponibles."}):(0,s.jsx)(l.A,{paymentMethods:N,selectedPayment:null===y||void 0===y?void 0:y.payment,setSelectedPayment:e=>be("payment",e)}),!(null!==y&&void 0!==y&&y.payment)&&(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600 bg-red-50 p-2 rounded mt-2",children:"Por favor, selecciona un m\xe9todo de pago"})]}),isComplete:ve.payment,label:ae,associatedField:"payment"},...ee&&L?[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:ce}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:()=>be("orderType","takeaway"),className:"px-4 py-2 rounded-md "+("takeaway"===y.orderType?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),children:"Para llevar"}),(0,s.jsx)("button",{onClick:()=>be("orderType","table"),className:"px-4 py-2 rounded-md "+("table"===y.orderType?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),children:"Para mesa"})]}),!(null!==y&&void 0!==y&&y.orderType)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona el tipo de pedido"})]}),isComplete:ve.orderType,label:ce,associatedField:"orderType"}]:[]]:[{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:se}),(0,s.jsx)(c.A,{cutlery:null===y||void 0===y?void 0:y.cutlery,setCutlery:e=>be("cutlery",e)}),null===(null===y||void 0===y?void 0:y.cutlery)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 bg-red-50 p-1 rounded mt-1",children:"Por favor, selecciona si necesitas cubiertos"})]}),isComplete:ve.cutlery,label:se,associatedField:"cutlery"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)(o,{times:k,selectedTime:he,setSelectedTime:pe,onConfirm:()=>{he&&be("time",he)}}),!(null!==y&&void 0!==y&&y.time)&&(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600 bg-red-50 p-2 rounded mt-2",children:"Por favor, selecciona una hora y confirma"})]}),isComplete:ve.time,label:"Hora",associatedField:"time"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-600 text-center md:text-left",children:["\ud83c\udf89 Ingresa tu direcci\xf3n y tel\xe9fono ",(0,s.jsx)("strong",{className:"text-green-700",children:"una sola vez"}),". La pr\xf3xima vez, solo haz clic en ",(0,s.jsx)("strong",{className:"text-blue-600",children:'"Confirmar" \xa1y listo!'})]}),(0,s.jsx)(a.A,{onConfirm:e=>{be("address",e)},initialAddress:(null===y||void 0===y?void 0:y.address)||M}),!(null!==y&&void 0!==y&&null!==(p=y.address)&&void 0!==p&&p.address)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 mt-1",children:"Por favor, completa tu direcci\xf3n y tel\xe9fono."})]}),isComplete:ve.address,label:oe,associatedField:"address"},{component:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-2",children:ae}),0===N.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay m\xe9todos de pago disponibles."}):(0,s.jsx)(l.A,{paymentMethods:N,selectedPayment:null===y||void 0===y?void 0:y.payment,setSelectedPayment:e=>be("payment",e)}),!(null!==y&&void 0!==y&&y.payment)&&(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600 bg-red-50 p-2 rounded mt-2",children:"Por favor, selecciona un m\xe9todo de pago"})]}),isComplete:ve.payment,label:ae,associatedField:"payment"}],{component:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-3 shadow-sm slide-item",children:(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-green-700 mb-1",children:ue}),(0,s.jsx)("textarea",{value:(null===y||void 0===y?void 0:y.notes)||"",onChange:e=>be("notes",e.target.value),placeholder:"Ejemplo: Sin cebolla, extra picante, etc",className:"w-full p-2 text-sm border rounded-md",rows:"2"})]})}),isComplete:!0,label:ue,associatedField:"notes"}];(0,r.useEffect)(()=>{0},[Se,v]);const Te=(0,h.X)(y,L,ee,A),Ce=L?ee?ve.type&&ye.every(e=>ve[e])&&ve.tableNumber&&ve.payment&&ve.orderType:ve.type&&ye.every(e=>ve[e])&&ve.tableNumber&&ve.payment:ve.type&&ye.every(e=>ve[e])&&ve.cutlery&&ve.time&&ve.address&&ve.payment;return(0,r.useEffect)(()=>{P&&null!==R&&(V(!0),B(R))},[P,R]),(0,r.useEffect)(()=>{let e;return Ce&&$===Se.length-1&&(e=setTimeout(()=>{Z.current&&(Z.current.style.height="0"),setTimeout(()=>V(!1),300)},3e4)),()=>clearTimeout(e)},[Ce,$,Se.length]),(0,r.useEffect)(()=>{const e=e=>{e.detail&&void 0!==e.detail.slideIndex&&B(e.detail.slideIndex)},t=document.getElementById(`breakfast-item-${g}`);return t&&t.addEventListener("updateSlide",e),()=>{t&&t.removeEventListener("updateSlide",e),H&&clearTimeout(H)}},[g,H]),(0,r.useEffect)(()=>{if(!Z.current||!J.current||!F)return void(Z.current&&(Z.current.style.height="0"));let e,t=null;const n=()=>{if(J.current&&J.current.children&&J.current.children[$]){const e=J.current.children[$].offsetHeight;Z.current.style.height=`${e+8}px`}else Z.current.style.height="auto"},r=()=>{clearTimeout(e),e=setTimeout(n,100)};r();const i=new ResizeObserver(()=>r());J.current&&J.current.children[$]&&(t=J.current.children[$],i.observe(t));const s=()=>r();return window.addEventListener("optionsUpdated",s),()=>{t&&i.unobserve(t),i.disconnect(),clearTimeout(e),window.removeEventListener("optionsUpdated",s)}},[$,F,y.type,E,S,T,C,k,N,_,A,I]),(0,s.jsxs)("div",{id:`breakfast-item-${g}`,className:"relative mb-2",children:[(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md",children:[(0,s.jsx)("div",{className:"sticky top-0 z-[10000] bg-white p-2 border-b border-gray-200 rounded-t-lg",onClick:()=>{F?Z.current&&(Z.current.style.height="0",setTimeout(()=>V(!1),300)):V(!0)},children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center cursor-pointer hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,s.jsx)("div",{className:`w-6 h-6 rounded-full mr-2 flex items-center justify-center ${Ce?"bg-green-700 text-white":"bg-green-200 text-green-700"} text-xs font-medium`,children:Ce?"\u2713":v}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-bold text-sm text-gray-800",children:["Desayuno #",v," - ",(null===y||void 0===y||null===(f=y.type)||void 0===f?void 0:f.name)||"Selecciona"," - $",ge.toLocaleString("es-CO")]}),(0,s.jsx)(u.A,{progress:Te,className:"w-24 sm:w-32 mt-1"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-1 sm:mt-0",children:[Ce&&(0,s.jsx)("span",{className:"hidden sm:inline-flex",children:(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-green-200 text-green-700",children:"Completo"})}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),(()=>{if(j>=O)return X(!0),void setTimeout(()=>X(!1),3e3);X(!1),x(y)})()},className:"duplicate-button p-1 text-green-700 hover:text-green-800 flex items-center transition-colors "+(j>=O?"opacity-50 cursor-not-allowed":""),"aria-label":`Duplicar Desayuno #${v}`,disabled:j>=O,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"Duplicar"})]}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),w(g)},className:"remove-button p-1 text-red-600 hover:text-red-700 flex items-center transition-colors","aria-label":`Eliminar Desayuno #${v}`,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"Eliminar"})]})]})]})}),Y&&(0,s.jsx)(d.A,{message:"Has alcanzado el m\xe1ximo de 15 desayunos. No puedes duplicar m\xe1s.",className:"fixed top-4 right-4 z-50 bg-green-100 text-green-800",onClose:()=>X(!1)}),F&&(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{ref:Z,className:"relative overflow-hidden rounded-lg",onTouchStart:e=>{G(e.touches[0].clientX),Q(!1)},onTouchMove:e=>{if(K||!J.current)return;const t=e.touches[0].clientX,n=W-t;Math.abs(n)>100&&(Q(!0),n>0&&$<Se.length-1?B($+1):n<0&&$>0&&B($-1))},onTouchEnd:()=>{G(0),Q(!1)},style:{transition:"height 0.3s ease-in-out"},children:(0,s.jsx)("div",{ref:J,className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${100*$}%)`},children:Se.map((e,t)=>(0,s.jsx)("div",{className:"w-full flex-shrink-0",style:{height:"fit-content"},children:(0,s.jsx)("div",{className:"p-2",style:{height:"fit-content"},children:e.component})},t))})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,s.jsx)("button",{className:"prev-button p-1 rounded-full text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Ee($-1),disabled:0===$,"aria-label":"Anterior",children:(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"flex space-x-1",children:Se.map((e,t)=>(0,s.jsx)("button",{onClick:()=>Ee(t),className:"w-2 h-2 rounded-full transition-colors "+($===t?"bg-green-700":e.isComplete?"bg-green-400":"bg-green-200"),"aria-label":`Ir a ${e.label}`,title:e.label},t))}),(0,s.jsx)("button",{className:"next-button p-1 rounded-full text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Ee($+1),disabled:$===Se.length-1,"aria-label":"Siguiente",children:(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md mt-2 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center cursor-pointer justify-between p-2 hover:bg-gray-50",onClick:()=>{U(!z),H&&clearTimeout(H)},children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-700 flex flex-wrap items-center gap-x-1",children:[(0,s.jsx)("span",{className:"text-base",children:"\u2795"}),(0,s.jsxs)("span",{children:["Adiciones para Desayuno #",v]}),(0,s.jsx)("span",{className:"font-bold text-gray-800",children:"(opcional)"})]}),(0,s.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:z?"Ocultar":"Mostrar"})]}),z&&(0,s.jsxs)("div",{className:"mt-2",children:[0===we.length?(0,s.jsx)("p",{className:"text-sm text-red-600",children:"No hay adiciones disponibles."}):(0,s.jsx)(i.A,{title:"Adiciones (por desayuno)",emoji:"\u2795",options:we,selected:y.additions||[],multiple:!0,showReplacements:xe,replacements:(()=>{const e=((null===y||void 0===y?void 0:y.additions)||[]).filter(e=>e.requiresReplacement&&("prote\xedna adicional"===e.name.toLowerCase()?!e.protein:!e.replacement));if(0===e.length)return[];const t=e[0];return"prote\xedna adicional"===t.name.toLowerCase()?I:"bebida adicional"===t.name.toLowerCase()?C.filter(e=>["limonada","Fresa"].includes(e.name)):[]})(),onImmediateSelect:e=>{const t=e.map(e=>{var t;const n=null===y||void 0===y||null===(t=y.additions)||void 0===t?void 0:t.find(t=>t.id===e.id);return{...e,quantity:n&&n.quantity||1,protein:(e.name.toLowerCase(),e.protein||""),replacement:(e.name.toLowerCase(),e.replacement||"")}});be("additions",t)},onImmediateReplacementSelect:e=>{let{id:t,replacement:n}=e;const r=((null===y||void 0===y?void 0:y.additions)||[]).map(e=>e.id===t?{...e,protein:"prote\xedna adicional"===e.name.toLowerCase()&&(null===n||void 0===n?void 0:n.name)||e.protein,replacement:"bebida adicional"===e.name.toLowerCase()&&(null===n||void 0===n?void 0:n.name)||e.replacement}:e);be("additions",r)},onAdd:e=>{var t;const n=null===(t=y.additions)||void 0===t?void 0:t.find(t=>t.id===e.id),r=y.additions?[...y.additions]:[];n?r[r.findIndex(t=>t.id===e.id)]={...n,quantity:(n.quantity||1)+1}:r.push({...e,quantity:1}),be("additions",r)},onRemove:e=>{const t=(y.additions||[]).map(t=>t.id===e?{...t,quantity:(t.quantity||1)-1}:t).filter(e=>e.quantity>0);be("additions",t)},onIncrease:e=>{const t=(y.additions||[]).map(t=>t.id===e?{...t,quantity:(t.quantity||1)+1}:t);be("additions",t)}}),(null===(m=y.additions)||void 0===m?void 0:m.length)>0&&(0,s.jsxs)("div",{className:"mt-2 text-sm font-semibold text-gray-700",children:["Total Adiciones de este desayuno: $",y.additions.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.price)||0)*((null===t||void 0===t?void 0:t.quantity)||1),0).toLocaleString("es-CO")]})]})]})]})},f=e=>{let{breakfasts:t,setBreakfasts:n,eggs:i,broths:o,riceBread:a,drinks:l,times:c,paymentMethods:u,additions:h,breakfastTypes:f,breakfastProteins:m,onBreakfastChange:g,onRemoveBreakfast:v,onAddBreakfast:y,onDuplicateBreakfast:b,incompleteBreakfastIndex:w,incompleteSlideIndex:x,isOrderingDisabled:E,userRole:S,savedAddress:T,isTableOrder:C}=e;const[k,N]=(0,r.useState)(0===t.length),[_,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{0},[i,o,a,l,f,m,h,c,u,t]),(0,r.useEffect)(()=>{if(t.length>=15){A(!0);const e=setTimeout(()=>A(!1),3e3);return()=>clearTimeout(e)}A(!1)},[t.length,15]);const I=t.filter(e=>{var t;const n=(f.find(t=>t.name===e.type)||{steps:[]}).steps||[],r={type:!!e.type,broth:!!e.broth,eggs:!!e.eggs,riceBread:!!e.riceBread,drink:!!e.drink,protein:!!e.protein,cutlery:null!==e.cutlery,time:!!e.time,address:!(null===(t=e.address)||void 0===t||!t.address),payment:!!e.payment,tableNumber:!!e.tableNumber,orderType:!!e.orderType};return C?3===S?r.type&&n.every(e=>r[e])&&r.tableNumber&&r.payment&&r.orderType:r.type&&n.every(e=>r[e])&&r.tableNumber&&r.payment:r.type&&n.every(e=>r[e])}).length;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 bg-white p-2 xs:p-3 sm:p-3 rounded-md shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm sm:text-lg md:text-xl font-bold text-gray-800",children:"Tus Desayunos"}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm md:text-base text-gray-600",children:[I," de ",t.length," completos"]})]}),(0,s.jsxs)("button",{onClick:y,className:"add-breakfast-button bg-green-600 hover:bg-green-700 text-white px-2 xs:px-3 py-1 xs:py-1.5 rounded-md transition-colors text-xs sm:text-sm md:text-base font-bold flex items-center shadow-sm flex-shrink-0 "+(t.length>=15||E?"opacity-50 cursor-not-allowed":""),"aria-label":"A\xf1adir un nuevo desayuno",disabled:t.length>=15||E,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 xs:h-5 w-4 xs:w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"A\xf1adir un nuevo desayuno"]})]}),_&&(0,s.jsx)("div",{className:"fixed right-4 z-[10002] w-80 max-w-xs",style:{top:"128px"},children:(0,s.jsx)(d.A,{message:"Has alcanzado el m\xe1ximo de 15 desayunos. No puedes a\xf1adir m\xe1s.",className:"bg-green-100 text-green-800 min-h-[60px]",onClose:()=>A(!1)})}),(0,s.jsx)("div",{className:"space-y-2 sm:space-y-4",children:0===t.length?(0,s.jsx)("p",{className:"text-center text-gray-600",children:"No hay desayunos. \xa1A\xf1ade uno para comenzar!"}):t.map((e,n)=>(0,s.jsx)(p,{id:e.id,displayId:n+1,breakfast:e,onBreakfastChange:g,onRemoveBreakfast:()=>v(e.id),onDuplicateBreakfast:()=>b(e),eggs:i||[],broths:o||[],riceBread:a||[],drinks:l||[],times:c||[],paymentMethods:u||[],additions:h||[],breakfastTypes:f||[],breakfastProteins:m||[],isIncomplete:n===w,incompleteSlideIndex:x,maxBreakfasts:15,totalBreakfasts:t.length,userRole:S,savedAddress:T,isTableOrder:C,showTutorial:k&&0===n,setShowTutorial:N},e.id))}),t.length>0&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 shadow-md",children:[(0,s.jsxs)("h3",{className:"font-semibold text-blue-800 mb-2 flex items-center text-sm md:text-base",children:[(0,s.jsx)("span",{className:"mr-1.5 text-xl",children:"\ud83d\ude80"}),(0,s.jsx)("span",{className:"font-bold",children:"\xa1Configura tu desayuno!"})]}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-blue-700 leading-relaxed",children:[(0,s.jsx)("strong",{className:"font-bold",children:"Desliza"})," para navegar por las opciones. Cada desayuno se ",(0,s.jsx)("strong",{className:"font-bold",children:"esconde en 30 segundos"})," al completarse."]}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-blue-700 leading-relaxed mt-1",children:["\xbfQuieres verlo de nuevo? \xa1Solo ",(0,s.jsx)("strong",{children:"haz clic"}),"!"]})]})]})}},7150:(e,t,n)=>{"use strict";n.d(t,{MF:()=>ue,j6:()=>se,xZ:()=>oe,om:()=>ie,Sx:()=>he,Wp:()=>de,KO:()=>pe});var r=n(8812),i=n(443),s=n(1529);let o,a;const l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(v(this),n),g(l.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(e.apply(v(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(v(this),t,...r);return u.set(s,t.sort?t.sort():[t]),g(s)}}function m(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});c.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(g(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&l.set(t,e)}).catch(()=>{}),h.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=m(e);return t!==e&&(d.set(e,t),h.set(t,e)),t}const v=e=>h.get(e);const y=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return w.set(t,s),s}p=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(p);class E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const S="@firebase/app",T="0.13.2",C=new i.Vy("@firebase/app"),k="@firebase/app-compat",N="@firebase/analytics-compat",_="@firebase/analytics",A="@firebase/app-check-compat",I="@firebase/app-check",P="@firebase/auth",R="@firebase/auth-compat",O="@firebase/database",j="@firebase/data-connect",D="@firebase/database-compat",M="@firebase/functions",L="@firebase/functions-compat",F="@firebase/installations",V="@firebase/installations-compat",z="@firebase/messaging",U="@firebase/messaging-compat",$="@firebase/performance",B="@firebase/performance-compat",H="@firebase/remote-config",q="@firebase/remote-config-compat",W="@firebase/storage",G="@firebase/storage-compat",K="@firebase/firestore",Q="@firebase/ai",Y="@firebase/firestore-compat",X="firebase",J="[DEFAULT]",Z={[S]:"fire-core",[k]:"fire-core-compat",[_]:"fire-analytics",[N]:"fire-analytics-compat",[I]:"fire-app-check",[A]:"fire-app-check-compat",[P]:"fire-auth",[R]:"fire-auth-compat",[O]:"fire-rtdb",[j]:"fire-data-connect",[D]:"fire-rtdb-compat",[M]:"fire-fn",[L]:"fire-fn-compat",[F]:"fire-iid",[V]:"fire-iid-compat",[z]:"fire-fcm",[U]:"fire-fcm-compat",[$]:"fire-perf",[B]:"fire-perf-compat",[H]:"fire-rc",[q]:"fire-rc-compat",[W]:"fire-gcs",[G]:"fire-gcs-compat",[K]:"fire-fst",[Y]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},ee=new Map,te=new Map,ne=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){C.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ie(e){const t=e.name;if(ne.has(t))return C.debug(`There were multiple attempts to register component ${t}.`),!1;ne.set(t,e);for(const n of ee.values())re(n,e);for(const n of te.values())re(n,e);return!0}function se(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},le=new s.FA("app","Firebase",ae);class ce{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw le.create("app-deleted",{appName:this._name})}}const ue="11.10.0";function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:J,automaticDataCollectionEnabled:!0},t),o=i.name;if("string"!==typeof o||!o)throw le.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw le.create("no-options");const a=ee.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw le.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of ne.values())l.addComponent(r);const c=new ce(n,i,l);return ee.set(o,c),c}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;const t=ee.get(e);if(!t&&e===J&&(0,s.T9)())return de();if(!t)throw le.create("no-app",{appName:e});return t}function pe(e,t,n){var i;let s=null!==(i=Z[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void C.warn(e.join(" "))}ie(new r.uA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const fe="firebase-heartbeat-store";let me=null;function ge(){return me||(me=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=g(o);return r&&o.addEventListener("upgradeneeded",e=>{r(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(fe)}catch(n){console.warn(n)}}}).catch(e=>{throw le.create("idb-open",{originalErrorMessage:e.message})})),me}async function ve(e,t){try{const n=(await ge()).transaction(fe,"readwrite"),r=n.objectStore(fe);await r.put(t,ye(e)),await n.done}catch(n){if(n instanceof s.g)C.warn(n.message);else{const e=le.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});C.warn(e.message)}}}function ye(e){return`${e.name}!${e.options.appId}`}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=we();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){C.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ee(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ee(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return C.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class xe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ge()).transaction(fe),n=await t.objectStore(fe).get(ye(e));return await t.done,n}catch(t){if(t instanceof s.g)C.warn(t.message);else{const e=le.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});C.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ee(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",ie(new r.uA("platform-logger",e=>new E(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new be(e),"PRIVATE")),pe(S,T,Se),pe(S,T,"esm2017"),pe("fire-js","")},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(E);else{var t=r(u);null!==t&&j(x,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),f=!0;var s=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&j(x,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,C=null,k=-1,N=5,_=-1;function A(){return!(t.unstable_now()-_<N)}function I(){if(null!==C){var e=t.unstable_now();_=e;var n=!0;try{n=C(!0,e)}finally{n?S():(T=!1,C=null)}}else T=!1}if("function"===typeof b)S=function(){b(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=I,S=function(){R.postMessage(null)}}else S=function(){v(I,0)};function O(e){C=e,T||(T=!0,S())}function j(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,j(x,s-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,O(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7789:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function i(e,t,n){return e.concat(t).map(function(e){return r(e,n)})}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function o(e,t){try{return t in e}catch(n){return!1}}function a(e,t,n){var i={};return n.isMergeableObject(e)&&s(e).forEach(function(t){i[t]=r(e[t],n)}),s(t).forEach(function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(o(e,s)&&n.isMergeableObject(t[s])?i[s]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"===typeof n?n:l}(s,n)(e[s],t[s],n):i[s]=r(t[s],n))}),i}function l(e,n,s){(s=s||{}).arrayMerge=s.arrayMerge||i,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=r;var o=Array.isArray(n);return o===Array.isArray(e)?o?s.arrayMerge(e,n,s):a(e,n,s):r(n,s)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return l(e,n,t)},{})};var c=l;e.exports=c},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>a,uA:()=>i});var r=n(1529);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9303:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var r=n(579);const i=e=>{let{message:t,onClose:n}=e;return(0,r.jsx)("div",{role:"alert",className:"rounded-md bg-green-50 p-3 mb-2 shadow-lg max-w-sm",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-4 w-4 text-green-400 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-2",children:[(0,r.jsx)("h3",{className:"text-xs font-medium text-green-800",children:"\xc9xito"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-green-700",children:t})]})]}),n&&(0,r.jsx)("button",{onClick:n,className:"ml-3 text-green-600 hover:text-green-800","aria-label":"Cerrar mensaje",children:(0,r.jsx)("svg",{className:"w-4 h-4 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 11.414l4.293-4.293a1 1 0 111.414 1.414L11.414 12l4.293 4.293a1 1 0 01-1.414 1.414L10 13.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 12 4.293 7.707a1 1 0 011.414-1.414L10 10.586z",clipRule:"evenodd"})})})]})})}},9496:function(e,t){var n,r,i;r=[],void 0===(i="function"===typeof(n=function(){function e(e){var t=getComputedStyle(e,null).getPropertyValue("overflow");return t.indexOf("scroll")>-1||t.indexOf("auto")>-1}function t(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var n=t.parentNode;n.parentNode;){if(e(n))return n;n=n.parentNode}return document.scrollingElement||document.documentElement}}return t})?n.apply(t,r):n)||(e.exports=i)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{17:"23bc623b",26:"3d7c5f6f",37:"d0f9d87b",112:"8bf67c86",143:"3be01624",148:"37cbf1b1",181:"526ece90",213:"3d925fc9",224:"0eaa4d02",238:"534fadd1",239:"966eabc9",343:"d114ddd1",445:"e98a3b2d",476:"0ce7566b",515:"9ee0bdf2",521:"824592b0",592:"5c57aa62",647:"231a9787",732:"47d8effa",734:"0f5a98d7",791:"0fe0c2a6",795:"60ca918e",915:"a307a648",946:"17f4f9ad",969:"f85ebae3"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={};n.l=(t,r,i,s)=>{if(e[t])e[t].push(r);else{var o,a;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==t){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=t),e[t]=[r];var d=(n,r)=>{o.onerror=o.onload=null,clearTimeout(h);var i=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(r)),n)return n(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),a&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(5043),t=n(4391),r=n(1283),i=n(1958),s=n(5472),o=n(458),a=n(4916);function l(t,n){let{title:r,titleId:i,...s}=t;return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":i},s),r?e.createElement("title",{id:i},r):null,e.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),e.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const c=e.forwardRef(l);var u=n(579);const d=()=>(0,u.jsx)("header",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-2 shadow-md",children:(0,u.jsxs)("div",{className:"container mx-auto flex flex-col items-center xs:flex-row xs:justify-between",children:[(0,u.jsxs)("h1",{className:"text-base xs:text-lg sm:text-xl font-bold mb-1 xs:mb-0 flex items-center",children:["Cocina Casera",(0,u.jsx)(c,{className:"h-4 w-4 xs:h-5 xs:w-5 ml-2","aria-hidden":"true"})]}),(0,u.jsxs)("a",{href:"https://wa.me/573023931292",className:"back-to-whatsapp text-xs xs:text-sm sm:text-base hover:underline hover:text-white transition-all flex items-center","aria-label":"Volver a WhatsApp para contactar con Cocina Casera",children:[(0,u.jsx)("span",{className:"mr-1",children:"Hablar por WhatsApp"}),(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 xs:h-4 xs:w-4",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:(0,u.jsx)("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.479 5.392 1.479 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"})})]})]})});var h=n(3360),p=n(6134),f=n(2781),m=n(2916),g=n(196),v=n(5492),y=n(9303),b=n(5509),w=n(4005),x=n(2061);const E=()=>(0,u.jsx)("footer",{className:"bg-green-500 text-white p-4 text-center mt-auto shadow-inner",children:(0,u.jsxs)("div",{className:"container mx-auto",children:[(0,u.jsxs)("p",{className:"text-xs xs:text-sm sm:text-base",children:["\xa9 ",(new Date).getFullYear()," Cocina Casera. Todos los derechos reservados."]}),(0,u.jsxs)("p",{className:"text-[10px] xs:text-xs sm:text-sm mt-1",children:["Dise\xf1ado con ",(0,u.jsx)("span",{role:"img","aria-label":"coraz\xf3n",children:"\u2764\ufe0f"})," por Cocina Casera"]})]})});var S=n(5323);const T=e=>{let{isOpen:t,onClose:n,children:r}=e;return t?(0,u.jsx)(S.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",onClick:n,children:(0,u.jsxs)(S.P.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full max-h-[80vh] overflow-y-auto relative",onClick:e=>e.stopPropagation(),children:[(0,u.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl font-bold","aria-label":"Cerrar modal",children:"\xd7"}),r]})}):null},C=()=>(0,u.jsxs)("div",{className:"p-4 max-w-4xl mx-auto",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold",children:"Pol\xedtica de Privacidad"}),(0,u.jsx)("p",{children:"En Cocina Casera, usamos cookies solo para guardar tus preferencias, como tu direcci\xf3n, y mejorar tu experiencia. No compartimos tus datos con terceros, excepto para procesar pedidos (e.g., WhatsApp). \xa1Tu informaci\xf3n est\xe1 segura!"})]}),k=e=>{let{children:t,allowedRole:n}=e;const{user:i,role:s,loading:o}=(0,b.A)(),a=(0,r.zy)();return o?null:i?s!==n?(0,u.jsx)(r.C5,{to:"/staffhub",state:{from:a},replace:!0}):t:(0,u.jsx)(r.C5,{to:"/staffhub",state:{from:a},replace:!0})};var N=n(2049);const _=(0,e.lazy)(()=>n.e(915).then(n.bind(n,915))),A=(0,e.lazy)(()=>Promise.all([n.e(521),n.e(969)]).then(n.bind(n,8969))),I=(0,e.lazy)(()=>n.e(17).then(n.bind(n,2017))),P=(0,e.lazy)(()=>n.e(476).then(n.bind(n,1476))),R=(0,e.lazy)(()=>n.e(26).then(n.bind(n,4026))),O=()=>{const{user:t,loading:n}=(0,b.A)(),[l,c]=(0,e.useState)([]),[S,O]=(0,e.useState)([]),[j,D]=(0,a.A)("userAddress",""),[M,L]=(0,a.A)("userPhoneNumber",""),[F,V]=(0,a.A)("userAddressType","house"),[z,U]=(0,a.A)("userRecipientName",""),[$,B]=(0,a.A)("userUnitDetails",""),[H,q]=(0,a.A)("userLocalName",""),[W,G]=(0,e.useState)(null),[K,Q]=(0,e.useState)(null),[Y,X]=(0,e.useState)(!1),[J,Z]=(0,e.useState)(null),[ee,te]=(0,e.useState)(null),[ne,re]=(0,e.useState)(null),[ie,se]=(0,e.useState)(null),[oe,ae]=(0,e.useState)([]),[le,ce]=(0,e.useState)([]),[ue,de]=(0,e.useState)([]),[he,pe]=(0,e.useState)([]),[fe,me]=(0,e.useState)([]),[ge,ve]=(0,e.useState)([]),[ye,be]=(0,e.useState)([]),[we,xe]=(0,e.useState)([]),[Ee,Se]=(0,e.useState)([]),[Te,Ce]=(0,e.useState)([]),[ke,Ne]=(0,e.useState)([]),[_e,Ae]=(0,e.useState)([]),[Ie,Pe]=(0,e.useState)([]),[Re,Oe]=(0,e.useState)([]),[je,De]=(0,e.useState)([]),[Me,Le]=(0,e.useState)([]),[Fe,Ve]=(0,e.useState)([]),[ze,Ue]=(0,e.useState)(!1),[$e,Be]=(0,a.A)("cookieConsent",!0),[He,qe]=(0,e.useState)(!1),[We,Ge]=(0,e.useState)("closed"),[Ke,Qe]=(0,e.useState)(""),[Ye,Xe]=(0,e.useState)({breakfastStart:420,breakfastEnd:631,lunchStart:632,lunchEnd:950}),Je={address:j,phoneNumber:M,addressType:F,recipientName:z,unitDetails:$,localName:H},Ze=e=>{const t=Math.floor(e/60),n=t>=12?"PM":"AM";return`${t%12||12}:${(e%60).toString().padStart(2,"0")} ${n}`},et=(e,t)=>{if(e<1)return`El men\xfa de ${t} termina en menos de un minuto`;const n=Math.floor(e/60),r=e%60;return n>0&&0===r?`El men\xfa de ${t} termina en ${n}h`:0===n?`El men\xfa de ${t} termina en ${r}m`:`El men\xfa de ${t} termina en ${n}h ${r}m`};(0,e.useEffect)(()=>{const e=(0,s.aQ)((0,s.H9)(i.db,"settings","schedules"),e=>{if(e.exists()){const t=e.data();Xe({breakfastStart:t.breakfastStart||420,breakfastEnd:t.breakfastEnd||631,lunchStart:t.lunchStart||632,lunchEnd:t.lunchEnd||950})}},e=>{G("Error al cargar horarios. Usando horarios predeterminados.")}),t=()=>{const e=(()=>{if(ze)return Qe("El restaurante est\xe1 cerrado manualmente."),"closed";const e=new Date,t=60*e.getHours()+e.getMinutes();if(t>=Ye.breakfastStart&&t<=Ye.breakfastEnd){const e=Ye.breakfastEnd-t;return Qe(et(e,"desayuno")),"breakfast"}if(t>=Ye.lunchStart&&t<=Ye.lunchEnd){const e=Ye.lunchEnd-t;return Qe(et(e,"almuerzo")),"lunch"}return Qe("El restaurante est\xe1 cerrado. Consulta los horarios de atenci\xf3n."),"closed"})();Ge(t=>(t!==e&&("breakfast"===e?(c([]),0===S.length&&O([rt])):"lunch"===e?(O([]),0===l.length&&c([nt])):(c([]),O([])),G(null),Q(null),Z(null),te(null),re(null),se(null)),e))};t();const n=setInterval(t,15e3);return()=>{clearInterval(n),e()}},[ze,Ye.breakfastStart,Ye.breakfastEnd,Ye.lunchStart,Ye.lunchEnd,l.length,S.length]);(0,e.useEffect)(()=>{if($e){const e=setTimeout(()=>Be(!1),1e4);return()=>clearTimeout(e)}},[$e]),(0,e.useEffect)(()=>{if(W){const e=setTimeout(()=>G(null),1e4);return()=>clearTimeout(e)}},[W]),(0,e.useEffect)(()=>{if(K){const e=setTimeout(()=>Q(null),1e4);return()=>clearTimeout(e)}},[K]),(0,e.useEffect)(()=>{const e=e=>{const t=e.detail||{};D(t.address||""),L(t.phoneNumber||""),V(t.addressType||"house"),U(t.recipientName||""),B(t.unitDetails||""),q(t.localName||"")};return window.addEventListener("userAddressUpdated",e),()=>window.removeEventListener("userAddressUpdated",e)},[]),(0,e.useEffect)(()=>{const e=[ae,ce,de,pe,me,ve,be,Se,Ce,Ne,Ae,Pe,Oe,De,Le,xe,Ve],t=["soups","soupReplacements","principles","proteins","drinks","sides","times","paymentMethods","additions","breakfastEggs","breakfastBroths","breakfastRiceBread","breakfastDrinks","breakfastAdditions","breakfastTypes","breakfastTimes","breakfastProteins"].map((t,n)=>(0,s.aQ)((0,s.rJ)(i.db,t),t=>{const r=t.docs.map(e=>({id:e.id,...e.data()}));e[n](r),0===r.length&&G("Algunas opciones no est\xe1n disponibles. Intenta de nuevo m\xe1s tarde."),window.dispatchEvent(new Event("optionsUpdated"))},e=>{G("No se pudieron cargar las opciones. Intenta de nuevo m\xe1s tarde.")})),n=(0,s.aQ)((0,s.H9)(i.db,"settings","global"),e=>{Ue(e.exists()&&e.data().isOrderingDisabled||!1)},e=>{G("Error al cargar configuraci\xf3n. Intenta de nuevo m\xe1s tarde.")});return()=>{t.forEach(e=>e()),n()}},[]);const tt=async function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var a,l,c,u;X(!0);let d=t;if(!d){d=(await(0,o.zK)(i.j)).user}const h=(0,s.H9)(i.db,"users",d.uid),p=await(0,s.x7)(h),f=p.exists()&&p.data().role||1,m={email:d.email||`anon_${d.uid}@example.com`,role:f,lastOrder:new Date,totalOrders:p.exists()?(p.data().totalOrders||0)+1:1,...p.exists()?{}:{createdAt:new Date}};await(0,s.BN)(h,m,{merge:!0});const g=n?r?"breakfastOrders":"tableOrders":r?"deliveryBreakfastOrders":"orders";0;const v=r?(0,N.VC)(e,Me):(0,x.N9)(e);let y;if(r){const t={Efectivo:0,Daviplata:0,Nequi:0};e.forEach(e=>{var n;const r=((null===e||void 0===e||null===(n=e.payment)||void 0===n?void 0:n.name)||"Efectivo").trim().toLowerCase(),i=(0,N.VC)([e],Me)||0;"daviplata"===r?t.Daviplata+=i:"nequi"===r?t.Nequi+=i:t.Efectivo+=i}),y=t}else y=(0,w.h5)(e,n);const b=Object.values(y).reduce((e,t)=>e+(t||0),0);if(!n&&b<=0)throw new Error("No se especific\xf3 un m\xe9todo de pago v\xe1lido.");const E={userId:d.uid,userEmail:m.email,[r?"breakfasts":"meals"]:e.map(e=>{var t,i,s,o,a,l,c,u,d,h,p,f,m,g,v,y,b;return{...r?{type:e.type||"",broth:e.broth?{name:e.broth.name}:null,eggs:e.eggs?{name:e.eggs.name}:null,riceBread:e.riceBread?{name:e.riceBread.name}:null,drink:e.drink?{name:e.drink.name}:null,protein:e.protein?{name:e.protein.name}:null,additions:(null===(t=e.additions)||void 0===t?void 0:t.map(e=>({name:e.name,quantity:e.quantity||1})))||[],cutlery:e.cutlery||!1,address:{address:(null===(i=e.address)||void 0===i?void 0:i.address)||"",phoneNumber:(null===(s=e.address)||void 0===s?void 0:s.phoneNumber)||"",addressType:(null===(o=e.address)||void 0===o?void 0:o.addressType)||"",recipientName:(null===(a=e.address)||void 0===a?void 0:a.recipientName)||"",unitDetails:(null===(l=e.address)||void 0===l?void 0:l.unitDetails)||"",localName:(null===(c=e.address)||void 0===c?void 0:c.localName)||""},payment:{name:(null===(u=e.payment)||void 0===u?void 0:u.name)||"Efectivo"},notes:e.notes||"",time:e.time?{name:e.time.name}:null}:{soup:e.soup?{name:e.soup.name}:null,soupReplacement:e.soupReplacement?{name:e.soupReplacement.name}:null,principle:Array.isArray(e.principle)?e.principle.map(e=>({name:e.name})):[],protein:e.protein?{name:e.protein.name}:null,drink:e.drink?{name:e.drink.name}:null,sides:Array.isArray(e.sides)?e.sides.map(e=>({name:e.name})):[],additions:(null===(d=e.additions)||void 0===d?void 0:d.map(e=>({name:e.name,protein:e.protein||"",replacement:e.replacement||"",quantity:e.quantity||1})))||[],...n?{tableNumber:e.tableNumber||""}:{address:{address:(null===(h=e.address)||void 0===h?void 0:h.address)||"",phoneNumber:(null===(p=e.address)||void 0===p?void 0:p.phoneNumber)||"",addressType:(null===(f=e.address)||void 0===f?void 0:f.addressType)||"",recipientName:(null===(m=e.address)||void 0===m?void 0:m.recipientName)||"",unitDetails:(null===(g=e.address)||void 0===g?void 0:g.unitDetails)||"",localName:(null===(v=e.address)||void 0===v?void 0:v.localName)||""},payment:{name:(null===(y=e.payment)||void 0===y?void 0:y.name)||"Efectivo"},time:(null===(b=e.time)||void 0===b?void 0:b.name)||"",cutlery:e.cutlery||!1},notes:e.notes||""}}}),total:v,paymentSummary:y,payment:(null===(a=e[0])||void 0===a||null===(l=a.payment)||void 0===l?void 0:l.name)||(null===(c=e[0])||void 0===c||null===(u=c.paymentMethod)||void 0===u?void 0:u.name)||"Efectivo",status:"Pendiente",createdAt:new Date,updatedAt:new Date,type:r?"breakfast":n?"table":"lunch"};await(0,s.gS)((0,s.rJ)(i.db,g),E)}catch(d){throw G("Error al procesar el pedido. Intenta de nuevo."),d}finally{X(!1)}},nt=(0,w.iy)(Je,!1,Ee),rt={id:Date.now(),type:null,eggs:null,broth:null,riceBread:null,drink:null,protein:null,cutlery:null,address:Je,payment:null,additions:[],notes:"",time:null};return n?(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:"Cargando..."}):(0,u.jsx)(e.Suspense,{fallback:(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:"Cargando aplicaci\xf3n..."}),children:(0,u.jsxs)(r.BV,{children:[(0,u.jsx)(r.qh,{path:"/login",element:(0,u.jsx)(I,{})}),(0,u.jsx)(r.qh,{path:"/staffhub",element:(0,u.jsx)(_,{})}),(0,u.jsx)(r.qh,{path:"/admin/*",element:(0,u.jsx)(A,{})}),(0,u.jsx)(r.qh,{path:"/forgot-password",element:(0,u.jsx)(P,{})}),(0,u.jsx)(r.qh,{path:"/waiter",element:(0,u.jsx)(k,{allowedRole:3,children:(0,u.jsx)(R,{})})}),(0,u.jsx)(r.qh,{path:"/",element:(0,u.jsxs)("div",{className:"min-h-screen bg-gray-200 flex flex-col relative",children:[(0,u.jsx)(d,{}),$e&&(0,u.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-blue-100 text-gray-800 p-4 z-[10001] rounded-t-lg shadow-lg",children:[(0,u.jsx)("p",{className:"text-sm font-medium",children:"\ud83c\udf6a Usamos cookies para guardar tus preferencias y hacer tu experiencia m\xe1s f\xe1cil. \xa1Todo seguro!"}),(0,u.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>Be(!1),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-1 rounded text-sm font-semibold",children:"\xa1Entendido!"}),(0,u.jsx)("button",{onClick:()=>{Be(!1),qe(!0)},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-1 rounded text-sm","aria-label":"Ver pol\xedtica de privacidad",children:"M\xe1s info"})]})]}),(0,u.jsx)(T,{isOpen:He,onClose:()=>qe(!1),children:(0,u.jsx)(C,{})}),(0,u.jsx)("main",{role:"main",className:"p-2 sm:p-4 flex-grow w-full max-w-4xl mx-auto",children:ze||"closed"===We?(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center text-center bg-red-50 text-red-700 p-4 sm:p-6 rounded-xl shadow-md space-y-2 mt-8 sm:mt-10",children:[(0,u.jsx)("h2",{className:"text-xl sm:text-2xl font-bold",children:"\ud83d\udeab Restaurante cerrado"}),(0,u.jsx)("p",{className:"text-sm sm:text-base font-medium",children:ze?"Los pedidos estar\xe1n disponibles nuevamente ma\xf1ana.":"No hay pedidos disponibles en este horario."}),(0,u.jsx)("p",{className:"text-sm sm:text-base text-gray-700",children:"\u23f0 Horarios de atenci\xf3n:"}),(0,u.jsx)("p",{className:"text-sm sm:text-base text-gray-700",children:(0,u.jsxs)("strong",{children:["Desayuno: ",Ze(Ye.breakfastStart)," - ",Ze(Ye.breakfastEnd)]})}),(0,u.jsx)("p",{className:"text-sm sm:text-base text-gray-700",children:(0,u.jsxs)("strong",{children:["Almuerzo: ",Ze(Ye.lunchStart)," - ",Ze(Ye.lunchEnd)]})}),(0,u.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 italic",children:"Gracias por tu comprensi\xf3n y preferencia."})]}):(0,u.jsxs)("div",{className:"fade-in",children:[(0,u.jsx)("p",{className:"text-center text-gray-700 mb-2 sm:mb-4 text-sm xs:text-base sm:text-lg md:text-xl bg-white p-2 sm:p-3 md:p-4 rounded-lg shadow-sm",children:"breakfast"===We?"\xa1Pide tu desayuno f\xe1cil y r\xe1pido!":"\xa1Pide tu almuerzo f\xe1cil y r\xe1pido! Almuerzo $13.000 (solo bandeja o sin sopa $12.000)"}),(0,u.jsx)("div",{className:"text-center text-gray-600 mb-4 text-sm sm:text-base bg-yellow-100 p-2 rounded-lg",children:Ke}),"breakfast"===We?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.A,{breakfasts:S,setBreakfasts:O,eggs:ke,broths:_e,riceBread:Ie,drinks:Re,additions:je,breakfastTypes:Me,breakfastProteins:Fe,times:we,paymentMethods:Ee,onBreakfastChange:(e,t,n)=>{O(r=>r.map(r=>r.id===e?{...r,[t]:n}:r))},onRemoveBreakfast:e=>O(S.filter(t=>t.id!==e)),onAddBreakfast:()=>O([...S,{...rt,id:Date.now()}]),onDuplicateBreakfast:e=>{S.length<15?(O([...S,{...e,id:Date.now()}]),Q("Desayuno duplicado con \xe9xito.")):G("Has alcanzado el m\xe1ximo de 15 desayunos.")},incompleteBreakfastIndex:ne,incompleteSlideIndex:ie,isOrderingDisabled:ze,userRole:(null===t||void 0===t?void 0:t.role)||1,savedAddress:Je}),(0,u.jsx)(m.A,{items:S,onSendOrder:async()=>{if("breakfast"!==We)return void G("El men\xfa de desayuno no est\xe1 disponible en este momento.");let e=null,t=null,n="";if(S.forEach((r,i)=>{const s=Me.find(e=>e.name===r.type),o=s&&s.steps||[],a=[];if(r.type||a.push("type"),o.forEach(e=>{var t;"address"===e?null!==(t=r.address)&&void 0!==t&&t.address||a.push("address"):"cutlery"===e?null===r.cutlery&&a.push("cutlery"):"time"===e?r.time||a.push("time"):"protein"!==e||r.protein?r[e]||a.push(e):a.push("protein")}),r.payment||a.push("payment"),a.length>0&&null===e){e=i,n=a[0];t={type:0,broth:1,eggs:2,riceBread:3,drink:4,cutlery:5,time:6,address:7,payment:8,protein:9}[n]||0}}),null!==e)return re(e),se(t),G(`Por favor, completa el campo "${n}" para el Desayuno #${e+1}.`),void setTimeout(()=>{const t=document.getElementById(`breakfast-item-${S[e].id}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("highlight-incomplete"),setTimeout(()=>t.classList.remove("highlight-incomplete"),3e3))},100);G(null),X(!0);try{var r;let e="\xa1Hola! Quiero ordenar desayuno:\n\n";S.forEach((t,n)=>{var r;e+=`*Desayuno ${n+1}: ${t.type}*\n`,t.broth&&(e+=`- Caldo: ${t.broth.name}\n`),t.eggs&&(e+=`- Huevos: ${t.eggs.name}\n`),t.riceBread&&(e+=`- Arroz/Pan: ${t.riceBread.name}\n`),t.drink&&(e+=`- Bebida: ${t.drink.name}\n`),t.protein&&(e+=`- Prote\xedna: ${t.protein.name}\n`),e+=`- Cubiertos: ${t.cutlery?"S\xed":"No"}\n`,e+=`- Hora: ${(null===(r=t.time)||void 0===r?void 0:r.name)||"No especificada"}\n`,t.additions.length>0&&(e+="- Adiciones:\n",t.additions.forEach(t=>{e+=`  \u2022 ${t.name} (${t.quantity||1})\n`})),e+="\n"});const t=(null===(r=S[0])||void 0===r?void 0:r.address)||Je;e+="*Direcci\xf3n de entrega:*\n",e+=`\ud83d\udccd ${t.address}\n`,e+=`\ud83d\udcde ${t.phoneNumber}\n`,"school"===t.addressType&&(e+=`\ud83d\udc64 ${t.recipientName}\n`),"complex"===t.addressType&&(e+=`\ud83c\udfe2 ${t.unitDetails}\n`),"shop"===t.addressType&&(e+=`\ud83c\udfec ${t.localName}\n`),e+=`\n*Total: $${(0,N.VC)(S,Me).toLocaleString("es-CO")}*`,D(t.address),L(t.phoneNumber),V(t.addressType),U(t.recipientName),B(t.unitDetails),q(t.localName);const n="573023931292",i=encodeURIComponent(e);window.open(`https://wa.me/${n}?text=${i}`,"_blank"),await tt(S,!1,!0),Q("\xa1Pedido de desayuno enviado con \xe9xito!"),O([])}catch(i){0,G("Error al enviar el pedido. Intenta de nuevo.")}finally{X(!1)}},user:t})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h.A,{meals:l,soups:oe,soupReplacements:le,principles:ue,proteins:he,drinks:fe,sides:ge,additions:Te,times:ye,paymentMethods:Ee,isTableOrder:!1,onMealChange:(e,t,n)=>(0,w.Wy)(c,e,t,n),onRemoveMeal:e=>(0,w.gG)(c,Q,e,l),onAddMeal:()=>(0,w.Hg)(c,Q,l,nt),onDuplicateMeal:e=>(0,w.Ln)(c,Q,e,l),incompleteMealIndex:J,incompleteSlideIndex:ee,isOrderingDisabled:ze}),(0,u.jsx)(f.A,{meals:l,onSendOrder:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("lunch"!==We&&!e)return void G("No se pueden hacer pedidos de almuerzo en este momento.");if(!Array.isArray(l))return void G("Error: los almuerzos no est\xe1n correctamente definidos. Recarga e int\xe9ntalo de nuevo.");let t=null,n=null,r="";for(let c=0;c<l.length;c++){var i,s,o,a;const u=l[c],d=Array.isArray(null===u||void 0===u?void 0:u.principle)&&u.principle.some(e=>["Arroz con pollo","Arroz paisa","Arroz tres carnes"].includes(e.name)),h=[],p={"Sopa o reemplazo de sopa":0,Principio:1,"Prote\xedna":2,Bebida:3,Cubiertos:4,Hora:5,"Direcci\xf3n":6,"M\xe9todo de pago":7,"Acompa\xf1amientos":8,"Nombre del local":6,Mesa:6};if(null!==u&&void 0!==u&&u.soup||null!==u&&void 0!==u&&u.soupReplacement?null!==u&&void 0!==u&&u.principle?d||null!==u&&void 0!==u&&u.protein?null!==u&&void 0!==u&&u.drink?e||null!==(null===u||void 0===u?void 0:u.cutlery)?e||null!==u&&void 0!==u&&u.time?e||null!==u&&void 0!==u&&null!==(i=u.address)&&void 0!==i&&i.address?e||null!==u&&void 0!==u&&null!==(s=u.payment)&&void 0!==s&&s.name?d||null!==u&&void 0!==u&&u.sides&&0!==u.sides.length?e||"shop"!==(null===u||void 0===u||null===(o=u.address)||void 0===o?void 0:o.addressType)||null!==u&&void 0!==u&&null!==(a=u.address)&&void 0!==a&&a.localName?!e||null!==u&&void 0!==u&&u.tableNumber||h.push("Mesa"):h.push("Nombre del local"):h.push("Acompa\xf1amientos"):h.push("M\xe9todo de pago"):h.push("Direcci\xf3n"):h.push("Hora"):h.push("Cubiertos"):h.push("Bebida"):h.push("Prote\xedna"):h.push("Principio"):h.push("Sopa o reemplazo de sopa"),h.length>0){t=c,r=h[0],n=p[r]||0;break}}if(null!==t)return Z(t),te(n),G(`Por favor, completa el campo "${r}" para el Almuerzo #${t+1}.`),void setTimeout(()=>{const e=document.getElementById(`meal-item-${t}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlight-incomplete"),setTimeout(()=>e.classList.remove("highlight-incomplete"),3e3),e.dispatchEvent(new CustomEvent("updateSlide",{detail:{slideIndex:n}})))},100);G(null),X(!0);try{if(!e){const e=Array.isArray(l)?(0,x.N9)(l):0;await(0,w.WS)(X,G,()=>{},l,t,Z,n,te,x.$H,e)}await tt(l,e,!1),Q(e?"\xa1Orden de mesa guardada con \xe9xito!":"\xa1Pedido enviado y cliente registrado con \xe9xito!"),c([])}catch(u){G("Error al procesar el pedido. Intenta de nuevo.")}finally{X(!1)}}(!1),calculateTotal:x.N9,isTableOrder:!1})]})]})}),(0,u.jsxs)("div",{className:"fixed top-16 right-4 z-[10002] space-y-2 w-80 max-w-xs",children:[Y&&(0,u.jsx)(g.A,{}),W&&(0,u.jsx)(v.A,{message:W,onClose:()=>G(null)}),K&&(0,u.jsx)(y.A,{message:K,onClose:()=>Q(null)})]}),(0,u.jsx)(E,{})]})}),(0,u.jsx)(r.qh,{path:"/test",element:(0,u.jsx)("div",{className:"text-center text-green-500",children:"Ruta de prueba funcionando"})})]})})},j=document.getElementById("root");(0,t.H)(j).render((0,u.jsx)(e.StrictMode,{children:(0,u.jsx)(r.Kd,{children:(0,u.jsx)(b.O,{children:(0,u.jsx)(O,{})})})}))})()})();
//# sourceMappingURL=main.1aa62a5c.js.map