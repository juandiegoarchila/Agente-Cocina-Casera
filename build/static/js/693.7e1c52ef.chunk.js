"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[693],{2693:(e,a,t)=>{t.r(a),t.d(a,{default:()=>W});var r=t(5043),s=t(1958),l=t(458),i=t(5472),n=t(1283),o=t(6568),d=t(7015),c=t(9795),x=t(1419),m=t(3062),u=t(7118),g=t(4537),h=t(7856),y=t(9855),p=t(614);const b="pendiente",v="entregado",f="cancelado",j={[b]:"Pendientes",[v]:"Entregados",[f]:"Cancelados"},w="#22c55e",N="#ef4444",S="#3b82f6",D="#14b8a6",k=["#fbbf24","#4ade80","#ef4444","#60a5fa","#a78bfa"],C="Ingresos",E="PedidosDiariosGuardados",A=(e,a,t)=>{const r=new Date;r.setHours(0,0,0,0);let s=new Date(r),l=new Date(r);switch(l.setHours(23,59,59,999),e){case"7_days":default:s.setDate(r.getDate()-6);break;case"30_days":s=new Date(r.getFullYear(),r.getMonth(),1),l=new Date(r.getFullYear(),r.getMonth()+1,0),l.setHours(23,59,59,999);break;case"year":s=new Date(r.getFullYear(),0,1),l=new Date(r.getFullYear(),11,31),l.setHours(23,59,59,999);break;case"custom":s=a?new Date(a):null,s&&s.setHours(0,0,0,0),l=t?new Date(t):null,l&&l.setHours(23,59,59,999)}return{startDate:s,endDate:l}};var T=t(5323),F=t(108),O=t(1474),$=t(7734),P=t(2185),I=t(760),q=t(379),z=t(95),G=t(7136),_=t(6992),L=t(6102),R=t(7869),M=t(2647),J=t(5686),K=t(8693),H=t(4645),V=t(579);const Y=r.memo(e=>{let{dailySalesChartData:a,dailyOrdersChartData:t,statusPieChartData:s,theme:l="dark",chartTextColor:i="#ffffff",salesFilterRange:n,setSalesFilterRange:c=()=>{},salesCustomStartDate:x,setSalesCustomStartDate:u=()=>{},salesCustomEndDate:g,setSalesCustomEndDate:h=()=>{},ordersFilterRange:p,setOrdersFilterRange:b=()=>{},ordersCustomStartDate:v,setOrdersCustomStartDate:f=()=>{},ordersCustomEndDate:j,setOrdersCustomEndDate:C=()=>{},handleSaveDailyIngresos:E=()=>{},handleDeleteDailyIngresos:A=()=>{},handleSaveDailyOrders:Y=()=>{},handleDeleteDailyOrders:B=()=>{},loading:W,selectedMonth:Q,setSelectedMonth:Z=()=>{}}=e;const[U,X]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{X(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const ee=(0,r.useMemo)(()=>s.reduce((e,a)=>e+a.value,0),[s]),ae={hidden:{opacity:0,scale:.98},visible:{opacity:1,scale:1,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,scale:.98,transition:{duration:.3,ease:"easeIn"}}};return(0,V.jsxs)("div",{className:"flex flex-col gap-12 mb-8 px-4 sm:px-6 lg:px-8 pb-12",children:[(0,V.jsx)("style",{dangerouslySetInnerHTML:{__html:""}}),(0,V.jsxs)(T.P.div,{className:(0,o.x)("dark"===l?"bg-gray-800":"bg-white",U?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===l?"border-gray-700":"border-gray-200","overflow-x-auto overflow-y-hidden relative min-h-[450px] flex flex-col"),variants:ae,initial:"hidden",animate:"visible",exit:"exit",children:[(0,V.jsxs)("div",{className:"flex flex-col",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center",children:[(0,V.jsx)(m.A,{className:U?"w-4 h-4 mr-2 text-green-400":"w-5 h-5 mr-2 text-green-400"}),"Ingresos Diarios"]}),(0,V.jsxs)(H.AM,{className:"relative",children:[(0,V.jsx)(H.ut,{className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,V.jsx)(J.A,{className:U?"w-4 h-4 text-gray-400":"w-5 h-5 text-gray-400"})}),(0,V.jsx)(d.e,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,V.jsx)(H.QT,{className:(0,o.x)("absolute z-10 mt-2",U?"w-36":"w-56","rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","dark"===l?"bg-gray-700":"bg-white","right-0"),children:(0,V.jsxs)("div",{className:"py-1",children:[(0,V.jsxs)("button",{onClick:E,disabled:W,className:(0,o.x)("block w-full text-left px-4 py-2 text-sm flex items-center",W?"text-gray-400 cursor-not-allowed":"dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,V.jsx)(K.A,{className:U?"w-4 h-4 mr-2":"w-5 h-5 mr-2"}),W?"Guardando...":"Guardar Ventas del D\xeda"]}),(0,V.jsxs)("button",{onClick:()=>A(),disabled:W,className:(0,o.x)("block w-full text-left px-4 py-2 text-sm flex items-center mt-1",W?"text-gray-400 cursor-not-allowed":"dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,V.jsx)(y.A,{className:U?"w-4 h-4 mr-2":"w-5 h-5 mr-2"}),"Eliminar Ventas del D\xeda"]}),(0,V.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,V.jsx)("button",{onClick:()=>{c("7_days"),u(null),h(null),Z(null)},className:(0,o.x)("block w-full text-left px-4 py-2 text-sm","dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver \xfaltimos 7 d\xedas"}),(0,V.jsx)("button",{onClick:()=>{c("30_days"),u(null),h(null),Z(null)},className:(0,o.x)("block w-full text-left px-4 py-2 text-sm","dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el mes"}),(0,V.jsx)("button",{onClick:()=>{c("year"),u(null),h(null),Z(null)},className:(0,o.x)("block w-full text-left px-4 py-2 text-sm","dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el a\xf1o"}),(0,V.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,V.jsx)("div",{className:"px-4 py-2 text-sm font-medium text-gray-400",children:"Filtros personalizados"}),(0,V.jsxs)("div",{className:"px-4 py-2",children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:"Desde:"}),(0,V.jsx)("input",{type:"date",value:x?x.toISOString().split("T")[0]:"",onChange:e=>{u(new Date(e.target.value)),c("custom"),Z(null)},className:(0,o.x)("mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm","dark"===l?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]}),(0,V.jsxs)("div",{className:"px-4 py-2",children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:"Hasta:"}),(0,V.jsx)("input",{type:"date",value:g?g.toISOString().split("T")[0]:"",onChange:e=>{h(new Date(e.target.value)),c("custom"),Z(null)},className:(0,o.x)("mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm","dark"===l?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]})]})})})]})]}),"year"===n&&Q&&(0,V.jsx)("button",{onClick:()=>Z(null),className:"mb-4 text-blue-500 hover:underline text-sm self-start",children:"Volver al resumen anual"})]}),(0,V.jsx)("div",{className:(0,o.x)("w-full",U?"h-[250px] min-w-[300px]":"h-[300px] min-w-[700px]"),children:(0,V.jsx)(F.u,{width:"100%",height:"100%",children:(0,V.jsxs)(O.E,{data:a,margin:{top:20,right:30,left:20,bottom:20},barCategoryGap:U?"0%":"40%",barGap:1,children:[(0,V.jsx)($.d,{strokeDasharray:U?"2 2":"3 3",stroke:"dark"===l?"#4b5563":"#e5e7eb",fill:"none",opacity:U?.5:1}),(0,V.jsx)(P.W,{dataKey:"name",stroke:i,tick:{fill:i,fontSize:U?7:10},angle:-45,textAnchor:"end",interval:0,height:50}),(0,V.jsx)(I.h,{stroke:i,tick:{fill:i,fontSize:U?7:10},tickFormatter:e=>`$${e.toLocaleString()}`,width:60}),(0,V.jsx)(q.m,{contentStyle:{backgroundColor:"dark"===l?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",fontSize:"12px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",backdropFilter:"blur(5px)",touchAction:"manipulation"},labelStyle:{color:i,fontWeight:"bold",marginBottom:"4px"},itemStyle:{color:i},cursor:{fill:"dark"===l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},content:e=>{let{active:a,payload:t,label:r}=e;if(a&&t&&t.length){const e=t.reduce((e,a)=>e+a.value,0);return(0,V.jsxs)("div",{className:"custom-tooltip",style:{backgroundColor:"dark"===l?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",padding:"8px 12px",fontSize:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",backdropFilter:"blur(5px)"},children:[(0,V.jsx)("p",{style:{color:i,fontWeight:"bold",marginBottom:"4px"},children:r}),t.map((e,a)=>(0,V.jsxs)("p",{style:{color:i},children:[e.name,": $",e.value.toLocaleString()]},a)),(0,V.jsxs)("p",{style:{color:i,fontWeight:"bold",marginTop:"4px"},children:["Total: $",e.toLocaleString()]})]})}return null}}),(0,V.jsx)(z.s,{wrapperStyle:{color:i,fontSize:U?8:12,paddingTop:"10px",paddingBottom:"25px"},align:"center",verticalAlign:"top"}),(0,V.jsx)(G.y,{dataKey:"Efectivo",fill:w,stroke:w,radius:[6,6,0,0],maxBarSize:U?10:20,onClick:e=>{"year"===n&&e.monthKey&&Z(e.monthKey)}}),(0,V.jsx)(G.y,{dataKey:"Daviplata",fill:N,stroke:N,radius:[6,6,0,0],maxBarSize:U?10:20,onClick:e=>{"year"===n&&e.monthKey&&Z(e.monthKey)}}),(0,V.jsx)(G.y,{dataKey:"Nequi",fill:S,stroke:S,radius:[6,6,0,0],maxBarSize:U?10:20,onClick:e=>{"year"===n&&e.monthKey&&Z(e.monthKey)}})]})})})]}),(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-12",children:[(0,V.jsxs)(T.P.div,{className:(0,o.x)("dark"===l?"bg-gray-800":"bg-white",U?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===l?"border-gray-700":"border-gray-200","relative min-h-[350px] overflow-x-auto overflow-y-hidden","lg:flex-1"),variants:ae,initial:"hidden",animate:"visible",exit:"exit",children:[(0,V.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center justify-between",children:[(0,V.jsx)("span",{className:"flex items-center",children:"Pedidos Diarios"}),(0,V.jsxs)(H.AM,{className:"relative",children:[(0,V.jsx)(H.ut,{className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,V.jsx)(J.A,{className:U?"w-4 h-4 text-gray-400":"w-5 h-5 text-gray-400"})}),(0,V.jsx)(d.e,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,V.jsx)(H.QT,{className:(0,o.x)("absolute z-10 mt-2",U?"w-36":"w-56","rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","dark"===l?"bg-gray-700":"bg-white","right-0"),children:(0,V.jsxs)("div",{className:"py-1",children:[(0,V.jsxs)("button",{onClick:Y,disabled:W,className:(0,o.x)("block w-full text-left px-4 py-2 text-sm flex items-center",W?"text-gray-400 cursor-not-allowed":"dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,V.jsx)(K.A,{className:U?"w-4 h-4 mr-2":"w-5 h-5 mr-2"}),W?"Guardando...":"Guardar Pedidos del D\xeda"]}),(0,V.jsxs)("button",{onClick:()=>B(),disabled:W,className:(0,o.x)("block w-full text-left px-4 py-2 text-sm flex items-center mt-1",W?"text-gray-400 cursor-not-allowed":"dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:[(0,V.jsx)(y.A,{className:U?"w-4 h-4 mr-2":"w-5 h-5 mr-2"}),"Eliminar Pedidos del D\xeda"]}),(0,V.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,V.jsx)("button",{onClick:()=>{b("7_days"),f(null),C(null)},className:(0,o.x)("block w-full text-left px-4 py-2 text-sm","dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver \xfaltimos 7 d\xedas"}),(0,V.jsx)("button",{onClick:()=>{b("30_days"),f(null),C(null)},className:(0,o.x)("block w-full text-left px-4 py-2 text-sm","dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el mes"}),(0,V.jsx)("button",{onClick:()=>{b("year"),f(null),C(null)},className:(0,o.x)("block w-full text-left px-4 py-2 text-sm","dark"===l?"text-gray-200 hover:bg-gray-600":"text-gray-700 hover:bg-gray-100"),children:"Ver todo el a\xf1o"}),(0,V.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,V.jsx)("div",{className:"px-4 py-2 text-sm font-medium text-gray-400",children:"Filtros personalizados"}),(0,V.jsxs)("div",{className:"px-4 py-2",children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:"Desde:"}),(0,V.jsx)("input",{type:"date",value:v?v.toISOString().split("T")[0]:"",onChange:e=>{f(new Date(e.target.value)),b("custom")},className:(0,o.x)("mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm","dark"===l?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]}),(0,V.jsxs)("div",{className:"px-4 py-2",children:[(0,V.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:"Hasta:"}),(0,V.jsx)("input",{type:"date",value:j?j.toISOString().split("T")[0]:"",onChange:e=>{C(new Date(e.target.value)),b("custom")},className:(0,o.x)("mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm","dark"===l?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-900 border-gray-300")})]})]})})})]})]}),(0,V.jsx)("div",{className:(0,o.x)("w-full",U?"h-[250px] min-w-[300px]":"h-[300px] min-w-[400px]"),children:(0,V.jsx)(F.u,{width:"100%",height:"100%",children:(0,V.jsxs)(O.E,{data:t,margin:{top:20,right:30,left:20,bottom:20},children:[(0,V.jsx)($.d,{strokeDasharray:U?"2 2":"3 3",stroke:"dark"===l?"#4b5563":"#e5e7eb",fill:"none",opacity:U?.5:1}),(0,V.jsx)(P.W,{dataKey:"name",stroke:i,tick:{fill:i,fontSize:U?7:10}}),(0,V.jsx)(I.h,{stroke:i,tick:{fill:i,fontSize:U?7:10}}),(0,V.jsx)(q.m,{contentStyle:{backgroundColor:"dark"===l?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",fontSize:"12px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",backdropFilter:"blur(5px)",touchAction:"manipulation"},labelStyle:{color:i,fontWeight:"bold",marginBottom:"4px"},itemStyle:{color:i},cursor:{fill:"dark"===l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),(0,V.jsx)(z.s,{wrapperStyle:{color:i,paddingTop:"10px",fontSize:U?8:12}}),(0,V.jsx)(G.y,{dataKey:"Pedidos",fill:D,stroke:D,radius:[10,10,0,0],opacity:1,isAnimationActive:!1,maxBarSize:U?12:25})]})})})]}),(0,V.jsxs)(T.P.div,{className:(0,o.x)("dark"===l?"bg-gray-800":"bg-white",U?"p-4":"p-6","rounded-2xl shadow-xl border","dark"===l?"border-gray-700":"border-gray-200","relative min-h-[350px] overflow-x-auto overflow-y-hidden","lg:flex-1"),variants:{hidden:{opacity:0,scale:.98},visible:{opacity:1,scale:1,transition:{duration:.6,ease:"easeOut"}},exit:{opacity:0,scale:.98,transition:{duration:.5,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",children:[(0,V.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100",children:"Estado de Pedidos"}),(0,V.jsx)("div",{className:(0,o.x)("w-full flex justify-center items-center",U?"h-[250px] min-w-[250px]":"h-[250px] min-w-[350px]"),children:(0,V.jsx)(F.u,{width:"100%",height:"100%",children:(0,V.jsxs)(_.r,{margin:{top:5,right:5,left:5,bottom:5},children:[(0,V.jsx)(L.F,{data:s,cx:"50%",cy:"50%",labelLine:!1,outerRadius:U?60:100,innerRadius:U?40:70,dataKey:"value",isAnimationActive:!1,paddingAngle:5,cornerRadius:5,children:s.map((e,a)=>(0,V.jsx)(R.f,{fill:k[a%k.length],stroke:k[a%k.length],opacity:1,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}},`cell-${a}`))}),(0,V.jsx)(q.m,{contentStyle:{backgroundColor:"dark"===l?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",fontSize:"12px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",backdropFilter:"blur(5px)",touchAction:"manipulation"},labelStyle:{color:i,fontWeight:"bold"},itemStyle:{color:i},formatter:(e,a)=>[`${e} Pedidos`,a]}),(0,V.jsx)(z.s,{wrapperStyle:{color:i,paddingTop:"10px",fontSize:U?8:12},layout:U?"vertical":"horizontal",align:"center",itemStyle:{paddingRight:U?5:10}}),(0,V.jsx)(M.J,{value:`${ee} Pedidos`,position:"center",fill:i,style:{fontSize:U?"12px":"16px",fontWeight:"bold"}})]})})})]})]})]})}),B=("undefined"!==typeof __app_id&&__app_id,"undefined"!==typeof __initial_auth_token?__initial_auth_token:null),W=e=>{let{setError:a,setSuccess:t,theme:w}=e;const[N,S]=(0,r.useState)(null),[D,T]=(0,r.useState)(!1),[F,O]=(0,r.useState)(!0),[$,P]=(0,r.useState)(!1),[I,q]=(0,r.useState)(""),[z,G]=(0,r.useState)(!1),[_,L]=(0,r.useState)(""),[R,M]=(0,r.useState)(!1),[J,K]=(0,r.useState)(null),[H,W]=(0,r.useState)(null),[Q,Z]=(0,r.useState)("30_days"),[U,X]=(0,r.useState)(null),[ee,ae]=(0,r.useState)(null),[te,re]=(0,r.useState)("30_days"),[se,le]=(0,r.useState)(null),[ie,ne]=(0,r.useState)(null),{loadingData:oe,orders:de,users:ce,totals:xe,statusCounts:me,userActivity:ue,dailySalesChartData:ge,dailyOrdersChartData:he,statusPieChartData:ye,handleSaveDailyIngresos:pe,handleDeleteDailyIngresos:be,handleSaveDailyOrders:ve,handleDeleteDailyOrders:fe}=((0,n.Zp)(),((e,a,t,s,l,n,o,d,c,x,m,u)=>{const[g,h]=(0,r.useState)(!0),[y,p]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[S,D]=(0,r.useState)({cash:0,daviplata:0,nequi:0}),[T,F]=(0,r.useState)({Pending:0,Delivered:0,Cancelled:0}),[O,$]=(0,r.useState)([]),[P,I]=(0,r.useState)([]),[q,z]=(0,r.useState)([]),[G,_]=(0,r.useState)([]),[L,R]=(0,r.useState)([]),[M,J]=(0,r.useState)([]),K=(0,r.useRef)({orders:!1,users:!1,activity:!1,ingresos:!1,pedidosDiariosGuardados:!1}),H=()=>{K.current.orders&&K.current.users&&K.current.activity&&K.current.ingresos&&K.current.pedidosDiariosGuardados&&h(!1)};(0,r.useEffect)(()=>{if(!e||!a||!t)return;h(!0);const r=[],l=(0,i.rJ)(e,"orders"),n=(0,i.aQ)(l,e=>{const a=e.docs.map(e=>({id:e.id,...e.data()}));p(a);const t={cash:0,daviplata:0,nequi:0},r={Pending:0,Delivered:0,Cancelled:0};a.forEach(e=>{var a;const s=e.paymentSummary||{};t.cash+=s.Efectivo||0,t.daviplata+=s.Daviplata||0,t.nequi+=s.Nequi||0;const l=(null===(a=e.status)||void 0===a?void 0:a.toLowerCase())||"";l===b?r.Pending+=1:l===v?r.Delivered+=1:l===f&&(r.Cancelled+=1)}),D(t),F(r);const s=[{name:j[b],value:r.Pending,color:k[0]},{name:j[v],value:r.Delivered,color:k[1]},{name:j[f],value:r.Cancelled,color:k[2]}];J(s),K.current.orders||(K.current.orders=!0,H())},e=>{s(`Error al cargar pedidos: ${e.message}`),K.current.orders||(K.current.orders=!0,H())});r.push(n);const o=(0,i.rJ)(e,"users"),d=(0,i.aQ)(o,e=>{const a=e.docs.map(e=>({id:e.id,...e.data()}));N(a),K.current.users||(K.current.users=!0,H())},e=>{s(`Error al cargar usuarios: ${e.message}`),K.current.users||(K.current.users=!0,H())});r.push(d);const c=(0,i.rJ)(e,"userActivity"),x=(0,i.aQ)(c,e=>{const a=e.docs.map(e=>{const a=e.data(),t=a.timestamp instanceof i.Dc?a.timestamp.toDate():null;return{id:e.id,...a,timestamp:t}}).sort((e,a)=>(a.timestamp?a.timestamp.getTime():0)-(e.timestamp?e.timestamp.getTime():0));$(a),K.current.activity||(K.current.activity=!0,H())},e=>{s(`Error al cargar actividad: ${e.message}`),K.current.activity||(K.current.activity=!0,H())});r.push(x);const m=(0,i.rJ)(e,C),u=(0,i.aQ)(m,e=>{const a=e.docs.map(e=>({id:e.id,...e.data()}));I(a),K.current.ingresos||(K.current.ingresos=!0,H())},e=>{s(`Error al cargar ingresos: ${e.message}`),K.current.ingresos||(K.current.ingresos=!0,H())});r.push(u);const g=(0,i.rJ)(e,E),y=(0,i.aQ)(g,e=>{const a=e.docs.map(e=>({id:e.id,...e.data()}));z(a),K.current.pedidosDiariosGuardados||(K.current.pedidosDiariosGuardados=!0,H())},e=>{s(`Error al cargar pedidos diarios guardados: ${e.message}`),K.current.pedidosDiariosGuardados||(K.current.pedidosDiariosGuardados=!0,H())});return r.push(y),()=>{r.forEach(e=>e())}},[e,a,t,s]),(0,r.useEffect)(()=>{if(!t)return;const e=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],{startDate:a,endDate:r}=A(n,o,d),s=new Date;s.setHours(0,0,0,0);const l=s.toISOString().split("T")[0];let i;if("year"!==n||u){const e={};if(P.forEach(t=>{const s=new Date(t.date).toISOString().split("T")[0];if(s>=a.toISOString().split("T")[0]&&s<=r.toISOString().split("T")[0])if("year"===n&&u){var l,i,o;`${new Date(t.date).getFullYear()}-${String(new Date(t.date).getMonth()+1).padStart(2,"0")}`===u&&(e[s]={Efectivo:((null===(l=e[s])||void 0===l?void 0:l.Efectivo)||0)+(t.cash||0),Daviplata:((null===(i=e[s])||void 0===i?void 0:i.Daviplata)||0)+(t.daviplata||0),Nequi:((null===(o=e[s])||void 0===o?void 0:o.Nequi)||0)+(t.nequi||0)})}else{var d,c,x;e[s]={Efectivo:((null===(d=e[s])||void 0===d?void 0:d.Efectivo)||0)+(t.cash||0),Daviplata:((null===(c=e[s])||void 0===c?void 0:c.Daviplata)||0)+(t.daviplata||0),Nequi:((null===(x=e[s])||void 0===x?void 0:x.Nequi)||0)+(t.nequi||0)}}}),s>=a&&s<=r){let t=0,i=0,o=0;var g,h,p,b,v,f;if(y.forEach(e=>{var s;const l=null!==(s=e.createdAt)&&void 0!==s&&s.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null;if(l&&l>=a.toISOString().split("T")[0]&&l<=r.toISOString().split("T")[0]){const a=e.paymentSummary||{};t+=a.Efectivo||0,i+=a.Daviplata||0,o+=a.Nequi||0}}),"year"===n&&u)`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`===u&&(e[l]={Efectivo:((null===(g=e[l])||void 0===g?void 0:g.Efectivo)||0)+t,Daviplata:((null===(h=e[l])||void 0===h?void 0:h.Daviplata)||0)+i,Nequi:((null===(p=e[l])||void 0===p?void 0:p.Nequi)||0)+o});else e[l]={Efectivo:((null===(b=e[l])||void 0===b?void 0:b.Efectivo)||0)+t,Daviplata:((null===(v=e[l])||void 0===v?void 0:v.Daviplata)||0)+i,Nequi:((null===(f=e[l])||void 0===f?void 0:f.Nequi)||0)+o}}i=Object.keys(e).sort((e,a)=>new Date(e)-new Date(a)).map(a=>({name:a,Efectivo:e[a].Efectivo,Daviplata:e[a].Daviplata,Nequi:e[a].Nequi}))}else{const t={},l=s.getFullYear();for(let e=0;e<12;e++){const a=`${l}-${String(e+1).padStart(2,"0")}`;t[a]={Efectivo:0,Daviplata:0,Nequi:0}}P.forEach(e=>{const a=new Date(e.date);if(a.getFullYear()===l){const r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;t[r].Efectivo+=e.cash||0,t[r].Daviplata+=e.daviplata||0,t[r].Nequi+=e.nequi||0}});const n=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;let o=0,d=0,c=0;y.forEach(e=>{var t;const s=null!==(t=e.createdAt)&&void 0!==t&&t.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null;if(s&&s>=a.toISOString().split("T")[0]&&s<=r.toISOString().split("T")[0]){const a=e.paymentSummary||{};o+=a.Efectivo||0,d+=a.Daviplata||0,c+=a.Nequi||0}}),t[n]={Efectivo:t[n].Efectivo+o,Daviplata:t[n].Daviplata+d,Nequi:t[n].Nequi+c},i=Object.keys(t).map(a=>({name:e[parseInt(a.split("-")[1])-1],monthKey:a,Efectivo:t[a].Efectivo,Daviplata:t[a].Daviplata,Nequi:t[a].Nequi}))}_(i);const{startDate:j,endDate:w}=A(c,x,m),N={};if(q.forEach(e=>{const a=new Date(e.date);a>=j&&a<=w&&(N[e.date]=e.count||0)}),s>=j&&s<=w){let e=0;y.forEach(a=>{var t;(null!==(t=a.createdAt)&&void 0!==t&&t.toDate?new Date(a.createdAt.toDate()).toISOString().split("T")[0]:null)===l&&e++}),N[l]=e}const S=Object.keys(N).sort((e,a)=>new Date(e)-new Date(a)).map(e=>({name:e,Pedidos:N[e]}));R(S)},[y,P,q,n,o,d,c,x,m,t,u]);const V=(0,r.useCallback)(async()=>{h(!0);try{const a=(new Date).toISOString().split("T")[0];let t=0,r=0,s=0;y.forEach(e=>{var l;if((null!==(l=e.createdAt)&&void 0!==l&&l.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===a){const a=e.paymentSummary;if(a)t+=a.Efectivo||0,r+=a.Daviplata||0,s+=a.Nequi||0;else{var i,n,o,d,c;const a=(null===(i=e.payment)||void 0===i?void 0:i.toLowerCase())||(null===(n=e.meals)||void 0===n||null===(o=n[0])||void 0===o||null===(d=o.payment)||void 0===d||null===(c=d.name)||void 0===c?void 0:c.toLowerCase()),l=e.total||0;"efectivo"===a?t+=l:"daviplata"===a?r+=l:"nequi"===a&&(s+=l)}}});const n=t+r+s,o=(0,i.P)((0,i.rJ)(e,C),(0,i._M)("date","==",a)),d=await(0,i.GG)(o);if(d.empty)await(0,i.gS)((0,i.rJ)(e,C),{date:a,cash:t,daviplata:r,nequi:s,totalSales:n,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}),l(`Resumen de ingresos para ${a} guardado correctamente.`);else{const o=d.docs[0];await(0,i.mZ)((0,i.H9)(e,C,o.id),{cash:t,daviplata:r,nequi:s,totalSales:n,updatedAt:(0,i.O5)()}),l(`Resumen de ingresos para ${a} actualizado correctamente.`)}}catch(a){s(`Error al guardar/actualizar resumen de ingresos: ${a.message}`),console.error("Error al guardar ingresos diarios:",a)}finally{h(!1)}},[e,y,l,s]),Y=(0,r.useCallback)(async()=>{h(!0);try{const a=(new Date).toISOString().split("T")[0],t=(0,i.P)((0,i.rJ)(e,C),(0,i._M)("date","==",a)),r=await(0,i.GG)(t);if(r.empty)l(`No se encontr\xf3 un resumen de ingresos para ${a} para eliminar.`);else{const t=r.docs[0];await(0,i.kd)((0,i.H9)(e,C,t.id)),l(`Resumen de ingresos para ${a} eliminado correctamente.`)}}catch(a){s(`Error al eliminar resumen de ingresos: ${a.message}`),console.error("Error al eliminar ingresos diarios:",a)}finally{h(!1)}},[e,l,s]),B=(0,r.useCallback)(async()=>{h(!0);try{const a=(new Date).toISOString().split("T")[0];let t=0;y.forEach(e=>{var r;(null!==(r=e.createdAt)&&void 0!==r&&r.toDate?new Date(e.createdAt.toDate()).toISOString().split("T")[0]:null)===a&&t++});const r=(0,i.P)((0,i.rJ)(e,E),(0,i._M)("date","==",a)),s=await(0,i.GG)(r);if(s.empty)await(0,i.gS)((0,i.rJ)(e,E),{date:a,count:t,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}),l(`Conteo de pedidos diarios para ${a} guardado correctamente.`);else{const r=s.docs[0];await(0,i.mZ)((0,i.H9)(e,E,r.id),{count:t,updatedAt:(0,i.O5)()}),l(`Conteo de pedidos diarios para ${a} actualizado correctamente.`)}}catch(a){s(`Error al guardar/actualizar conteo de pedidos diarios: ${a.message}`),console.error("Error al guardar conteo de pedidos diarios:",a)}finally{h(!1)}},[e,y,l,s]),W=(0,r.useCallback)(async()=>{h(!0);try{const a=(new Date).toISOString().split("T")[0],t=(0,i.P)((0,i.rJ)(e,E),(0,i._M)("date","==",a)),r=await(0,i.GG)(t);if(r.empty)l(`No se encontr\xf3 un conteo de pedidos diarios para ${a} para eliminar.`);else{const t=r.docs[0];await(0,i.kd)((0,i.H9)(e,E,t.id)),l(`Conteo de pedidos diarios para ${a} eliminado correctamente.`)}}catch(a){s(`Error al eliminar conteo de pedidos diarios: ${a.message}`),console.error("Error al eliminar conteo de pedidos diarios:",a)}finally{h(!1)}},[e,l,s]);return{loadingData:g,orders:y,users:w,totals:S,statusCounts:T,userActivity:O,dailySalesChartData:G,dailyOrdersChartData:L,statusPieChartData:M,handleSaveDailyIngresos:V,handleDeleteDailyIngresos:Y,handleSaveDailyOrders:B,handleDeleteDailyOrders:W}})(s.db,N,D,a,t,Q,U,ee,te,se,ie,H));(0,r.useEffect)(()=>{O(!D)},[D]),(0,r.useEffect)(()=>{if(!s.j)return void console.warn("Firebase Auth no est\xe1 disponible. Aseg\xfarate de que Firebase est\xe9 inicializado correctamente.");const e=(0,l.hg)(s.j,async e=>{if(e)S(e.uid),T(!0);else try{B?await(0,l.p)(s.j,B):await(0,l.zK)(s.j)}catch(t){console.error("Error al iniciar sesi\xf3n:",t),a(`Error de autenticaci\xf3n: ${t.message}`)}finally{T(!0)}});return()=>e()},[s.j,B,a]);const je="dark"===w?"#cbd5e1":"#475569";return(0,V.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 font-inter",children:[(0,V.jsx)("h2",{className:"text-3xl font-extrabold mb-8 text-gray-100 dark:text-white",children:"Dashboard"}),(0,V.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,V.jsxs)("div",{className:(0,o.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,V.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Pedidos"}),(0,V.jsx)(x.A,{className:"text-blue-400 w-8 h-8"})]}),(0,V.jsxs)("div",{className:"space-y-3 text-base text-gray-300 dark:text-gray-400",children:[(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Total:"}),(0,V.jsx)("span",{className:"font-bold text-gray-100",children:de.length})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Pendientes:"}),(0,V.jsx)("span",{className:"text-yellow-400 font-bold",children:me.Pending})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Entregados:"}),(0,V.jsx)("span",{className:"text-green-400 font-bold",children:me.Delivered})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Cancelados:"}),(0,V.jsx)("span",{className:"text-red-400 font-bold",children:me.Cancelled})]})]})]}),(0,V.jsxs)("div",{className:(0,o.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,V.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Totales Generales"}),(0,V.jsx)(m.A,{className:"text-green-400 w-8 h-8"})]}),(0,V.jsxs)("div",{className:"space-y-3 text-base text-gray-300 dark:text-gray-400",children:[(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Efectivo:"}),(0,V.jsxs)("span",{className:"font-bold text-gray-100",children:["$",xe.cash.toLocaleString()]})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"DaviPlata:"}),(0,V.jsxs)("span",{className:"font-bold text-gray-100",children:["$",xe.daviplata.toLocaleString()]})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Nequi:"}),(0,V.jsxs)("span",{className:"font-bold text-gray-100",children:["$",xe.nequi.toLocaleString()]})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{className:"font-bold text-gray-100",children:"Total:"}),(0,V.jsxs)("span",{className:"font-bold text-green-400",children:["$",(xe.cash+xe.daviplata+xe.nequi).toLocaleString()]})]})]})]}),(0,V.jsxs)("div",{className:(0,o.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,V.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Usuarios"}),(0,V.jsx)(u.A,{className:"text-purple-400 w-8 h-8"})]}),(0,V.jsxs)("div",{className:"space-y-3 text-base text-gray-300 dark:text-gray-400",children:[(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Total:"}),(0,V.jsx)("span",{className:"font-bold text-gray-100",children:ce.length})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Administradores:"}),(0,V.jsx)("span",{className:"font-bold text-gray-100",children:ce.filter(e=>2===e.role).length})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"Clientes:"}),(0,V.jsx)("span",{className:"font-bold text-gray-100",children:ce.filter(e=>1===e.role).length})]}),(0,V.jsxs)("div",{className:"flex justify-between",children:[(0,V.jsx)("span",{children:"ID de Usuario:"}),(0,V.jsx)("span",{className:"font-mono text-xs text-gray-500 break-all",children:N})]})]})]}),(0,V.jsxs)("div",{className:(0,o.x)(`bg-${"dark"===w?"gray-800":"white"} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${"dark"===w?"gray-700":"gray-200"}`),children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,V.jsx)("h3",{className:"text-xl font-semibold text-gray-200 dark:text-gray-100",children:"Actividad Reciente"}),(0,V.jsx)(g.A,{className:"text-orange-400 w-8 h-8"})]}),(0,V.jsx)("div",{className:"space-y-3 text-sm max-h-40 overflow-y-auto custom-scrollbar",children:0===ue.length?(0,V.jsx)("p",{className:"text-gray-400 text-center",children:"No hay actividad reciente."}):ue.map((e,a)=>(0,V.jsxs)("div",{className:"flex justify-between items-start pb-2 border-b border-gray-700 last:border-b-0",children:[(0,V.jsx)("span",{className:"text-gray-400 flex-1 pr-2",children:e.action}),(0,V.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,V.jsx)("span",{className:"text-gray-500 text-xs text-right",children:e.timestamp?new Date(e.timestamp).toLocaleString():"N/A"}),e.details&&(0,V.jsx)("button",{onClick:()=>(e=>{K(e),M(!0)})(e),className:"text-blue-400 hover:text-blue-300 p-1 rounded-full",title:"Ver detalles de la actividad",children:(0,V.jsx)(h.A,{className:"w-4 h-4"})})]})]},a))}),(0,V.jsx)("div",{className:"mt-4 text-center",children:(0,V.jsxs)("button",{onClick:()=>P(!0),className:(0,o.x)("px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center mx-auto","dark"===w?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:[(0,V.jsx)(y.A,{className:"w-4 h-4 mr-2"})," Limpiar TODAS las Actividades"]})})]})]}),(0,V.jsx)(Y,{dailySalesChartData:ge,dailyOrdersChartData:he,statusPieChartData:ye,theme:w,chartTextColor:je,salesFilterRange:Q,setSalesFilterRange:Z,salesCustomStartDate:U,setSalesCustomStartDate:X,salesCustomEndDate:ee,setSalesCustomEndDate:ae,ordersFilterRange:te,setOrdersFilterRange:re,ordersCustomStartDate:se,setOrdersCustomStartDate:le,ordersCustomEndDate:ie,setOrdersCustomEndDate:ne,handleSaveDailyIngresos:pe,handleDeleteDailyIngresos:()=>G(!0),handleSaveDailyOrders:ve,handleDeleteDailyOrders:fe,loading:oe,selectedMonth:H,setSelectedMonth:W}),(0,V.jsx)(d.e,{show:$,as:r.Fragment,children:(0,V.jsxs)(c.lG,{as:"div",className:"relative z-50",onClose:()=>P(!1),children:[(0,V.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,V.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,V.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,V.jsxs)(c.lG.Panel,{className:(0,o.x)("w-full max-w-sm p-6 rounded-lg shadow-md text-center","dark"===w?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,V.jsx)(c.lG.Title,{className:"text-lg font-medium mb-4",children:"Confirmar Limpieza de Actividad"}),(0,V.jsxs)("p",{className:"mb-4",children:["Est\xe1s a punto de eliminar ",(0,V.jsx)("span",{className:"font-bold text-red-500",children:"TODAS"}),' las actividades registradas. Esta acci\xf3n es irreversible. Para confirmar, escribe "confirmar" a continuaci\xf3n:']}),(0,V.jsx)("input",{type:"text",value:I,onChange:e=>q(e.target.value),className:(0,o.x)("w-full p-2 rounded-md border text-center text-sm","dark"===w?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-red-500"),placeholder:"escribe 'confirmar'"}),(0,V.jsxs)("div",{className:"mt-6 flex justify-center gap-2",children:[(0,V.jsx)("button",{onClick:()=>{P(!1),q("")},className:(0,o.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===w?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,V.jsx)("button",{onClick:async()=>{if("confirmar"===I.toLowerCase()){O(!0);try{const e=(0,i.wP)(s.db),a=await(0,i.GG)((0,i.rJ)(s.db,"userActivity"));let r=0;a.forEach(a=>{e.delete(a.ref),r++}),0===r?t("No hab\xeda actividades para eliminar."):(await e.commit(),t(`Todas las actividades han sido eliminadas correctamente. Total: ${r}.`)),P(!1),q("")}catch(e){a(`Error al eliminar actividades: ${e.message}. Por favor, verifica las reglas de seguridad de Firebase.`),console.error("Error en batch commit:",e)}finally{O(!1)}}else a('Por favor, escribe "confirmar" para proceder.')},disabled:F,className:(0,o.x)("px-4 py-2 rounded-md text-sm font-medium",F?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:F?"Eliminando...":"Limpiar Actividad"})]})]})})})]})}),(0,V.jsx)(d.e,{show:z,as:r.Fragment,children:(0,V.jsxs)(c.lG,{as:"div",className:"relative z-50",onClose:()=>G(!1),children:[(0,V.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,V.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,V.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,V.jsxs)(c.lG.Panel,{className:(0,o.x)("w-full max-w-sm p-6 rounded-lg shadow-md text-center","dark"===w?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,V.jsx)(c.lG.Title,{className:"text-lg font-medium mb-4",children:"Confirmar Eliminaci\xf3n de Ventas del D\xeda"}),(0,V.jsxs)("p",{className:"mb-4",children:["Est\xe1s a punto de eliminar las ventas registradas para ",(0,V.jsx)("span",{className:"font-bold text-red-500",children:"el d\xeda de hoy"}),'. Esta acci\xf3n es irreversible. Para confirmar, escribe "eliminar" a continuaci\xf3n:']}),(0,V.jsx)("input",{type:"text",value:_,onChange:e=>L(e.target.value),className:(0,o.x)("w-full p-2 rounded-md border text-center text-sm","dark"===w?"border-gray-600 bg-gray-700 text-white":"border-gray-200 bg-white text-gray-900","focus:outline-none focus:ring-1 focus:ring-red-500"),placeholder:"escribe 'eliminar'"}),(0,V.jsxs)("div",{className:"mt-6 flex justify-center gap-2",children:[(0,V.jsx)("button",{onClick:()=>{G(!1),L("")},className:(0,o.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===w?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cancelar"}),(0,V.jsx)("button",{onClick:async()=>{if("eliminar"===_.toLowerCase()){O(!0);try{await be(),G(!1),L("")}catch(e){a(`Error al eliminar ventas del d\xeda: ${e.message}`),console.error("Error al eliminar ventas diarias:",e)}finally{O(!1)}}else a('Por favor, escribe "eliminar" para proceder.')},disabled:F,className:(0,o.x)("px-4 py-2 rounded-md text-sm font-medium",F?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:F?"Eliminando...":"Eliminar Ventas"})]})]})})})]})}),(0,V.jsx)(d.e,{show:R,as:r.Fragment,children:(0,V.jsxs)(c.lG,{as:"div",className:"relative z-50",onClose:()=>M(!1),children:[(0,V.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,V.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,V.jsx)(d.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,V.jsxs)(c.lG.Panel,{className:(0,o.x)("w-full max-w-md p-6 rounded-lg shadow-md","dark"===w?"bg-gray-800 text-gray-200":"bg-gray-50 text-gray-900"),children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,V.jsx)(c.lG.Title,{className:"text-lg font-medium",children:"Detalles de la Actividad"}),(0,V.jsx)("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-500",children:(0,V.jsx)(p.A,{className:"w-5 h-5"})})]}),J&&(0,V.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:"font-medium",children:"Acci\xf3n:"})," ",J.action]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:"font-medium",children:"Fecha:"})," ",J.timestamp?new Date(J.timestamp).toLocaleString():"N/A"]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:"font-medium",children:"Detalles:"})," ","object"===typeof J.details?JSON.stringify(J.details,null,2):J.details||"Sin detalles"]})]}),(0,V.jsx)("div",{className:"mt-6 flex justify-end",children:(0,V.jsx)("button",{onClick:()=>M(!1),className:(0,o.x)("px-4 py-2 rounded-md text-sm font-medium","dark"===w?"bg-gray-600 hover:bg-gray-700 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:"Cerrar"})})]})})})]})})]})}},6568:(e,a,t)=>{function r(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")}t.d(a,{x:()=>r})}}]);
//# sourceMappingURL=693.7e1c52ef.chunk.js.map