"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[445],{3445:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var r=a(5043),t=a(1958),l=a(5472),d=a(7591),n=a(579);const i=e=>{let{setError:s,setSuccess:a,theme:i}=e;const[o,c]=(0,r.useState)([]),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)({email:"",role:1,totalOrders:0});(0,r.useEffect)(()=>{const e=(0,l.aQ)((0,l.rJ)(t.db,"users"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))},e=>s(`Error al cargar usuarios: ${e.message}`));return()=>e()},[s]);return(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:[(0,n.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-100",children:"Gesti\xf3n de Usuarios"}),(0,n.jsx)("div",{className:`bg-${"dark"===i?"gray-800":"white"} p-4 sm:p-6 rounded-xl shadow-lg max-h-[70vh] overflow-y-auto custom-scrollbar`,children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-left border-collapse text-xs sm:text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:`bg-${"dark"===i?"gray-700":"gray-300"} text-${"dark"===i?"gray-300":"gray-700"} font-semibold`,children:[(0,n.jsx)("th",{className:"p-2 border-b",children:"ID"}),(0,n.jsx)("th",{className:"p-2 border-b",children:"Email"}),(0,n.jsx)("th",{className:"p-2 border-b hidden sm:table-cell",children:"Rol"}),(0,n.jsx)("th",{className:"p-2 border-b hidden sm:table-cell",children:"Pedidos"}),(0,n.jsx)("th",{className:"p-2 border-b",children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:0===o.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"5",className:"p-4 text-gray-400 text-center",children:"No hay usuarios."})}):o.map((e,r)=>(0,n.jsxs)("tr",{className:"border-b "+(r%2===0?"bg-gray-750":""),children:[(0,n.jsx)("td",{className:"p-2 text-gray-300 max-w-[120px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.id}),(0,n.jsx)("td",{className:"p-2 text-gray-300 max-w-[150px] sm:max-w-none overflow-hidden text-ellipsis whitespace-nowrap",children:e.email||"N/A"}),(0,n.jsx)("td",{className:"p-2 text-gray-300 hidden sm:table-cell",children:2===e.role?"Administrador":"Cliente"}),(0,n.jsx)("td",{className:"p-2 text-gray-300 hidden sm:table-cell",children:e.totalOrders||0}),(0,n.jsxs)("td",{className:"p-2",children:[(0,n.jsx)("button",{onClick:()=>(e=>{m(e),u(e)})(e),className:"text-blue-400 hover:text-blue-300 mr-2",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,n.jsx)("button",{onClick:()=>(async e=>{try{await(0,l.kd)((0,l.H9)(t.db,"users",e)),a("Usuario eliminado")}catch(r){s(`Error: ${r.message}`)}})(e.id),className:"text-red-400 hover:text-red-300",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M7 7h10"})})})]})]},e.id))})]})})}),x&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:`bg-${"dark"===i?"gray-800":"white"} p-4 sm:p-6 rounded-xl shadow-lg w-11/12 max-w-md overflow-y-auto max-h-[80vh]`,children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-gray-100",children:"Editar Usuario"}),(0,n.jsx)("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-200",children:(0,n.jsx)(d.A,{className:"h-6 w-6"})})]}),(0,n.jsxs)("label",{className:"block mb-4",children:[(0,n.jsx)("span",{className:"text-gray-300 font-medium text-sm",children:"Email:"}),(0,n.jsx)("input",{value:h.email,onChange:e=>u({...h,email:e.target.value}),className:`mt-1 w-full p-2 border rounded text-${"dark"===i?"white":"gray-900"} bg-${"dark"===i?"gray-700":"gray-200"} text-sm`})]}),(0,n.jsxs)("label",{className:"block mb-4",children:[(0,n.jsx)("span",{className:"text-gray-300 font-medium text-sm",children:"Rol:"}),(0,n.jsxs)("select",{value:h.role,onChange:e=>u({...h,role:Number(e.target.value)}),className:`mt-1 w-full p-2 border rounded text-${"dark"===i?"white":"gray-900"} bg-${"dark"===i?"gray-700":"gray-200"} text-sm`,children:[(0,n.jsx)("option",{value:1,children:"Cliente"}),(0,n.jsx)("option",{value:2,children:"Administrador"})]})]}),(0,n.jsxs)("label",{className:"block mb-4",children:[(0,n.jsx)("span",{className:"text-gray-300 font-medium text-sm",children:"Pedidos:"}),(0,n.jsx)("input",{type:"number",value:h.totalOrders,onChange:e=>u({...h,totalOrders:Number(e.target.value)}),className:`mt-1 w-full p-2 border rounded text-${"dark"===i?"white":"gray-900"} bg-${"dark"===i?"gray-700":"gray-200"} text-sm`})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:async()=>{try{await(0,l.mZ)((0,l.H9)(t.db,"users",x.id),h),m(null),a("Usuario actualizado")}catch(e){s(`Error: ${e.message}`)}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white p-2 rounded-lg transition-all transform hover:scale-105 text-sm",children:"Guardar"}),(0,n.jsx)("button",{onClick:()=>m(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-all transform hover:scale-105 text-sm",children:"Cancelar"})]})]})})]})}}}]);
//# sourceMappingURL=445.47c20a99.chunk.js.map